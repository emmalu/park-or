import{e as a,l as Ye,n as C,m as z,y as c,u as ld,s as be,t as lt,a as cd,b as dd,x as _r,A as Hi,v as ud,o as hd,c as ul,d as Rn,f as yr,g as vr}from"./cast-6d78d3c7.js";import{s as wr,x as ao}from"./Basemap-5353f87f.js";import{_ as T}from"./preload-helper-101896b7.js";import{l as Xt}from"./Color-b7b9e6bb.js";import{j as ee}from"./Collection-42fe629f.js";import{n as pd}from"./collectionUtils-3d8a9611.js";import{o as md}from"./compilerUtils-eefea0ec.js";import{s as B,a as $,b as sn}from"./Error-4ed679d7.js";import{y as lo,n as qi,h as $e}from"./string-9c5e03f7.js";import{m as co}from"./Loadable-b0d5bb7e.js";import{n as gd}from"./loadAll-1ae88564.js";import{f as Yt,E as ei,i as gi,g as gs,U as Bo,j as hl,b as fd,L as _d,A as pl,a as yd,v as br,p as vd,C as wd,t as fn}from"./promiseUtils-930cba29.js";import{T as Mr,b as si,a as Zt,t as Ps,r as bd,n as _n}from"./ensureType-d98e08e1.js";import{r as ml,w as X,o as Md,R as Uo,E as yn,a as ji,k as Cs,I as gl,p as Id,b as fl,c as _l,d as Cd,M as Ed,e as Td,f as zs,j as xd}from"./Extent-d5fff12d.js";import{t as O,r as E,s as Te,u as kd,o as os,e as Ve,f as Ad,h as ti,p as uo,q as Pd}from"./typedArrayUtil-d02f10a8.js";import{r as $d}from"./enumeration-497ef064.js";import{r as Sd,n as Rd}from"./opacityUtils-8b7acc4e.js";import{l as nn}from"./CollectionFlattener-b89887c0.js";import{n as Wi}from"./Evented-b378ccab.js";import{U as yl}from"./request-e4299080.js";import{l as Ld,d as Fd,t as Od}from"./TablesMixin-402d03d2.js";import{g as ct}from"./Graphic-e4fb7090.js";import{i as vl}from"./Clonable-58355d3c.js";import{s as Dd}from"./Cyclical-1a93cb12.js";import{a as Gi,b as Vd,g as Nd}from"./mathUtils-daf59e84.js";import{i as zd}from"./geometry-70b2a4a5.js";import{v as kt,c as wl}from"./jsonUtils-5115c7e5.js";import{l as I,h as H,a as Ke,f as At,U as vs,j as Ho,w as ai}from"./reactiveUtils-b0e56010.js";import{c as me}from"./screenUtils-7afeb41c.js";import{l as Bd}from"./workers-7aef8bf1.js";import{e as ws,A as vn,r as Es,t as wn,i as ni,d as Ud,a as Hd}from"./projection-6146477c.js";import{p as qd,j as Gd}from"./TileInfo-92f7dc61.js";import{i as ho,e as re,M as ue,n as m,v as on,h as Ir,f as at,p as jd,k as Wd,a as bl,t as Zd,w as Kd,b as Ml,r as Cr,c as Il,o as Er}from"./widget-4becb80f.js";import{c as Cl,a as bn,d as El}from"./HandleOwner-6ac6f00a.js";import{s as rt}from"./intl-a5c99ea3.js";import{s as Tr}from"./byteSizeEstimations-90c5a50d.js";import{$ as Yd,E as Qd}from"./unitUtils-b69647a1.js";import{m as qo,L as rn,u as Jd,S as Tl}from"./number-c7f1bfee.js";import{a as Xd,s as Ln}from"./executeQueryJSON-bf3dc024.js";import{c as xr,d as po}from"./RelationshipQuery-b5b427dc.js";import{x as eu,h as tu,i as iu}from"./fieldUtils-141b2ff2.js";import{u as su,i as nu,c as xl,a as ou,I as ru,b as kl,d as au,e as lu,f as Ts,g as cu,h as du,k as Al}from"./PopupTemplate-d6e0b369.js";import{i as Pl}from"./arcadeOnDemand-72c57f7a.js";import{a as $l}from"./assets-6ba3cd63.js";import"./LegendOptions-e31ff575.js";import{j as Ii,x as Fn,M as uu,N as hu}from"./utils-46b35833.js";import{S as pu,n as mu,y as gu}from"./symbols-64db5dd6.js";import{a as fu}from"./jsonUtils-c5ba7295.js";import{m as _u,x as On}from"./Query-066f2ccf.js";import"./featureConversionUtils-d9ec654e.js";import{i as yu,v as vu,m as Go}from"./Polyline-42dcc920.js";import{M as wu,f as bu,i as Mu,o as Iu}from"./normalizeUtils-91a64c2b.js";import"./pbf-e4fd0249.js";import"./FeatureSet-1cc04f9b.js";import"./TopFeaturesQuery-7da1d7c1.js";import{l as Cu,s as Eu}from"./locale-30120714.js";import Sl from"./FeatureLayer-1a0dd9ce.js";import{s as Rl,i as jo}from"./Identifiable-57df9761.js";import{b as kr}from"./Layer-739799ab.js";import{h as Tu,c as Ll,f as Fl,e as Wo,i as an,M as xu,r as Ol,n as ku}from"./mat2d-80bd93af.js";import{e as Ar}from"./Queue-8aae62d3.js";import{t as Au,I as Pu,y as $u}from"./Scheduler-343fdba6.js";import{T as Su}from"./TimeExtent-0fd238ea.js";import{j as Dl,b as Ru}from"./asyncUtils-18831bb1.js";import{m as Lu,_ as Fu}from"./Promise-6bd0b483.js";import{l as Ou,i as Vl,a as Pr,h as Du}from"./GraphicsLayer-caff0dcf.js";import{v as Zo}from"./HeightModelInfo-645087b5.js";import{m as Vu}from"./arcgisLayerUrl-02fe1a62.js";import{l as $r}from"./ViewingMode-fb6259a5.js";import{t as mo,r as Nu}from"./unitBezier-881ac1eb.js";import{r as Nl}from"./common-701a4199.js";import{o as go,v as Sr,y as zu,j as Bu,q as Rr,C as zl,l as Mn,r as ye,z as Ct,g as Uu,a as ln,s as Hu,m as qu}from"./vec2-f978aef8.js";import{r as Gu,n as ce}from"./vec2f64-e0301652.js";import{s as ju,r as Wu,M as Lr,h as Zu,i as Ku}from"./mat3-45e3f2eb.js";import{e as Dn}from"./mat3f32-d3d088e8.js";import{t as Fr}from"./vec2f32-461e65a9.js";import"./TileStrategy-40f1ecb0.js";import{d as Yu,h as Qu}from"./TileStore-a368d16c.js";import"./TileKey-ed432ae5.js";import{l as Ju}from"./capabilities-5736b16f.js";import{r as Xu}from"./context-util-abf86a85.js";import{j as eh}from"./Portal-fbb2b73d.js";import{s as Mi}from"./jsonMap-5afaf2ff.js";import{u as th}from"./messages-634811b5.js";import{D as ih}from"./datetime-7cb5ae9e.js";import"./nextTick-3ee5a785.js";import"./deprecate-46fadabd.js";import"./PortalItem-69c4a143.js";import"./writeUtils-44b0e78b.js";import"./layerUtils-6996b9ea.js";import"./colorUtils-639f4d25.js";import"./SimpleObservable-e0897cc6.js";import"./typeUtils-b6c52390.js";import"./Connection-dd24ab83.js";import"./mat4-62d5e6a4.js";import"./zscale-72b4355d.js";import"./aaBoundingRect-ca34962d.js";import"./uuid-73213768.js";import"./query-4348ce6f.js";import"./pbfQueryUtils-91f50fb5.js";import"./OptimizedFeature-1bba65b5.js";import"./OptimizedFeatureSet-1d1ac4b9.js";import"./queryZScale-1674984c.js";import"./parser-f68dd732.js";import"./ItemCache-b4db8f82.js";import"./MemCache-1e028041.js";import"./CIMSymbol-a95ceb49.js";import"./Symbol-1bb07043.js";import"./aaBoundingBox-33fc923c.js";import"./persistableUrlUtils-d18becd9.js";import"./UniqueValueRenderer-cd716182.js";import"./diffUtils-713e5c9b.js";import"./colorRamps-c00f504b.js";import"./sizeVariableUtils-d4870b0d.js";import"./lengthUtils-0dde2114.js";import"./jsonUtils-b1b224a3.js";import"./styleUtils-0c73f570.js";import"./PortalGroup-813428fa.js";import"./DictionaryLoader-29adda53.js";import"./LRUCache-4d56ba4d.js";import"./heatmapUtils-90a13d85.js";import"./vec4f64-018b3fa6.js";import"./Field-bb784640.js";import"./fieldType-9bddd3d4.js";import"./MultiOriginJSONSupport-1970ed0f.js";import"./LayerFloorInfo-0d02c503.js";import"./FeatureLayerBase-d34c9a8c.js";import"./OperationalLayer-54654858.js";import"./ElevationInfo-28459ff1.js";import"./editsZScale-e318eb4a.js";import"./APIKeyMixin-f90cfebd.js";import"./ArcGISService-f6f32fbc.js";import"./BlendLayer-7a735871.js";import"./CustomParametersMixin-5e3018da.js";import"./EditBusLayer-1372e92b.js";import"./FeatureReductionLayer-0deeb262.js";import"./labelingInfo-681dda19.js";import"./labelUtils-87bb22ff.js";import"./defaultsJSON-b087dd4d.js";import"./OrderedLayer-7b3473c8.js";import"./PortalLayer-644d657e.js";import"./PortalUser-cf18ae9d.js";import"./RefreshableLayer-84ec1468.js";import"./ScaleRangeLayer-c6a35aba.js";import"./TemporalLayer-d41a81db.js";import"./TimeInfo-a1791ae0.js";import"./FeatureTemplate-773a8865.js";import"./FeatureType-6c50f4e3.js";import"./fieldProperties-c2bdcd57.js";import"./FieldsIndex-c06d221a.js";import"./versionUtils-5ccafbea.js";import"./styleUtils-45e2d86c.js";import"./popupUtils-ea7b7951.js";import"./rbush-8e36784a.js";import"./quickselect-322ec8e1.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))s(n);new MutationObserver(n=>{for(const o of n)if(o.type==="childList")for(const r of o.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&s(r)}).observe(document,{childList:!0,subtree:!0});function t(n){const o={};return n.integrity&&(o.integrity=n.integrity),n.referrerpolicy&&(o.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?o.credentials="include":n.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(n){if(n.ep)return;n.ep=!0;const o=t(n);fetch(n.href,o)}})();function de(){}function Bl(i){return i()}function Or(){return Object.create(null)}function In(i){i.forEach(Bl)}function Ko(i){return typeof i=="function"}function Zi(i,e){return i!=i?e==e:i!==e||i&&typeof i=="object"||typeof i=="function"}let $s;function sh(i,e){return $s||($s=document.createElement("a")),$s.href=e,i===$s.href}function nh(i){return Object.keys(i).length===0}function oh(i,...e){if(i==null)return de;const t=i.subscribe(...e);return t.unsubscribe?()=>t.unsubscribe():t}function Dr(i,e,t){i.$$.on_destroy.push(oh(e,t))}function Vr(i,e,t){return i.set(t),e}function rh(i){return i&&Ko(i.destroy)?i.destroy:de}function D(i,e){i.appendChild(e)}function W(i,e,t){i.insertBefore(e,t||null)}function G(i){i.parentNode&&i.parentNode.removeChild(i)}function cn(i,e){for(let t=0;t<i.length;t+=1)i[t]&&i[t].d(e)}function U(i){return document.createElement(i)}function Ne(i){return document.createTextNode(i)}function se(){return Ne(" ")}function Yo(){return Ne("")}function q(i,e,t){t==null?i.removeAttribute(e):i.getAttribute(e)!==t&&i.setAttribute(e,t)}function ah(i){return Array.from(i.childNodes)}function ii(i,e){e=""+e,i.wholeText!==e&&(i.data=e)}function xt(i,e,t,s){t===null?i.style.removeProperty(e):i.style.setProperty(e,t,s?"important":"")}let bs;function fs(i){bs=i}function lh(){if(!bs)throw new Error("Function called outside component initialization");return bs}function Ul(i){lh().$$.on_destroy.push(i)}const Ai=[],Nr=[],Bs=[],zr=[],ch=Promise.resolve();let fo=!1;function dh(){fo||(fo=!0,ch.then(Hl))}function _o(i){Bs.push(i)}const Vn=new Set;let Ci=0;function Hl(){if(Ci!==0)return;const i=bs;do{try{for(;Ci<Ai.length;){const e=Ai[Ci];Ci++,fs(e),uh(e.$$)}}catch(e){throw Ai.length=0,Ci=0,e}for(fs(null),Ai.length=0,Ci=0;Nr.length;)Nr.pop()();for(let e=0;e<Bs.length;e+=1){const t=Bs[e];Vn.has(t)||(Vn.add(t),t())}Bs.length=0}while(Ai.length);for(;zr.length;)zr.pop()();fo=!1,Vn.clear(),fs(i)}function uh(i){if(i.fragment!==null){i.update(),In(i.before_update);const e=i.dirty;i.dirty=[-1],i.fragment&&i.fragment.p(i.ctx,e),i.after_update.forEach(_o)}}const Us=new Set;let hh;function rs(i,e){i&&i.i&&(Us.delete(i),i.i(e))}function Ss(i,e,t,s){if(i&&i.o){if(Us.has(i))return;Us.add(i),hh.c.push(()=>{Us.delete(i),s&&(t&&i.d(1),s())}),i.o(e)}else s&&s()}function Rs(i){i&&i.c()}function as(i,e,t,s){const{fragment:n,after_update:o}=i.$$;n&&n.m(e,t),s||_o(()=>{const r=i.$$.on_mount.map(Bl).filter(Ko);i.$$.on_destroy?i.$$.on_destroy.push(...r):In(r),i.$$.on_mount=[]}),o.forEach(_o)}function ls(i,e){const t=i.$$;t.fragment!==null&&(In(t.on_destroy),t.fragment&&t.fragment.d(e),t.on_destroy=t.fragment=null,t.ctx=[])}function ph(i,e){i.$$.dirty[0]===-1&&(Ai.push(i),dh(),i.$$.dirty.fill(0)),i.$$.dirty[e/31|0]|=1<<e%31}function xs(i,e,t,s,n,o,r,l=[-1]){const d=bs;fs(i);const u=i.$$={fragment:null,ctx:[],props:o,update:de,not_equal:n,bound:Or(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(d?d.$$.context:[])),callbacks:Or(),dirty:l,skip_bound:!1,root:e.target||d.$$.root};r&&r(u.root);let h=!1;if(u.ctx=t?t(i,e.props||{},(p,g,...f)=>{const _=f.length?f[0]:g;return u.ctx&&n(u.ctx[p],u.ctx[p]=_)&&(!u.skip_bound&&u.bound[p]&&u.bound[p](_),h&&ph(i,p)),g}):[],u.update(),h=!0,In(u.before_update),u.fragment=s?s(u.ctx):!1,e.target){if(e.hydrate){const p=ah(e.target);u.fragment&&u.fragment.l(p),p.forEach(G)}else u.fragment&&u.fragment.c();e.intro&&rs(i.$$.fragment),as(i,e.target,e.anchor,e.customElement),Hl()}fs(d)}class ks{$destroy(){ls(this,1),this.$destroy=de}$on(e,t){if(!Ko(t))return de;const s=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return s.push(t),()=>{const n=s.indexOf(t);n!==-1&&s.splice(n,1)}}$set(e){this.$$set&&!nh(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const mh="/assets/play-fill-381094fc.svg",Ei=[];function ql(i,e=de){let t;const s=new Set;function n(l){if(Zi(i,l)&&(i=l,t)){const d=!Ei.length;for(const u of s)u[1](),Ei.push(u,i);if(d){for(let u=0;u<Ei.length;u+=2)Ei[u][0](Ei[u+1]);Ei.length=0}}}function o(l){n(l(i))}function r(l,d=de){const u=[l,d];return s.add(u),s.size===1&&(t=e(n)||de),l(i),()=>{s.delete(u),s.size===0&&(t(),t=null)}}return{set:n,update:o,subscribe:r}}const yo=ql([]),vo=ql([]);var wo;let Hs=wo=class extends Ye{constructor(i){super(i),this.type="none"}clone(){return new wo({type:this.type})}};a([$d({none:"none",stayAbove:"stay-above"})],Hs.prototype,"type",void 0),Hs=wo=a([C("esri.ground.NavigationConstraint")],Hs);let K=class extends z{constructor(){super(...arguments),this.SCENEVIEW_HITTEST_RETURN_INTERSECTOR=!1,this.DECONFLICTOR_SHOW_VISIBLE=!1,this.DECONFLICTOR_SHOW_INVISIBLE=!1,this.DECONFLICTOR_SHOW_GRID=!1,this.LABELS_SHOW_BORDER=!1,this.TEXT_SHOW_BASELINE=!1,this.TEXT_SHOW_BORDER=!1,this.OVERLAY_DRAW_DEBUG_TEXTURE=!1,this.OVERLAY_SHOW_CENTER=!1,this.SHOW_POI=!1,this.TESTS_DISABLE_OPTIMIZATIONS=!1,this.TESTS_DISABLE_FAST_UPDATES=!1,this.DRAW_MESH_GEOMETRY_NORMALS=!1,this.FEATURE_TILE_FETCH_SHOW_TILES=!1,this.FEATURE_TILE_TREE_SHOW_TILES=!1,this.TERRAIN_TILE_TREE_SHOW_TILES=!1,this.I3S_TREE_SHOW_TILES=!1,this.I3S_SHOW_MODIFICATIONS=!1,this.LOD_INSTANCE_RENDERER_DISABLE_UPDATES=!1,this.LOD_INSTANCE_RENDERER_COLORIZE_BY_LEVEL=!1,this.EDGES_SHOW_HIDDEN_TRANSPARENT_EDGES=!1,this.LINE_WIREFRAMES=!1,this.TERRAIN_USE_LEGACY_SHADING=!1}};a([c()],K.prototype,"SCENEVIEW_HITTEST_RETURN_INTERSECTOR",void 0),a([c()],K.prototype,"DECONFLICTOR_SHOW_VISIBLE",void 0),a([c()],K.prototype,"DECONFLICTOR_SHOW_INVISIBLE",void 0),a([c()],K.prototype,"DECONFLICTOR_SHOW_GRID",void 0),a([c()],K.prototype,"LABELS_SHOW_BORDER",void 0),a([c()],K.prototype,"TEXT_SHOW_BASELINE",void 0),a([c()],K.prototype,"TEXT_SHOW_BORDER",void 0),a([c()],K.prototype,"OVERLAY_DRAW_DEBUG_TEXTURE",void 0),a([c()],K.prototype,"OVERLAY_SHOW_CENTER",void 0),a([c()],K.prototype,"SHOW_POI",void 0),a([c()],K.prototype,"TESTS_DISABLE_OPTIMIZATIONS",void 0),a([c()],K.prototype,"TESTS_DISABLE_FAST_UPDATES",void 0),a([c()],K.prototype,"DRAW_MESH_GEOMETRY_NORMALS",void 0),a([c()],K.prototype,"FEATURE_TILE_FETCH_SHOW_TILES",void 0),a([c()],K.prototype,"FEATURE_TILE_TREE_SHOW_TILES",void 0),a([c()],K.prototype,"TERRAIN_TILE_TREE_SHOW_TILES",void 0),a([c()],K.prototype,"I3S_TREE_SHOW_TILES",void 0),a([c()],K.prototype,"I3S_SHOW_MODIFICATIONS",void 0),a([c()],K.prototype,"LOD_INSTANCE_RENDERER_DISABLE_UPDATES",void 0),a([c()],K.prototype,"LOD_INSTANCE_RENDERER_COLORIZE_BY_LEVEL",void 0),a([c()],K.prototype,"EDGES_SHOW_HIDDEN_TRANSPARENT_EDGES",void 0),a([c()],K.prototype,"LINE_WIREFRAMES",void 0),a([c()],K.prototype,"TERRAIN_USE_LEGACY_SHADING",void 0),K=a([C("esri.views.3d.support.DebugFlags")],K);const gh=new K;var bo;let Je=bo=class extends ld(co){constructor(i){super(i),this.opacity=1,this.shading=!gh.TERRAIN_USE_LEGACY_SHADING,this.surfaceColor=null,this.navigationConstraint=null,this.layers=new ee;const e=s=>{s.parent&&s.parent!==this&&"remove"in s.parent&&s.parent.remove(s),s.parent=this,s.type!=="elevation"&&s.type!=="base-elevation"&&B.getLogger(this.declaredClass).error(`Layer '${s.title}, id:${s.id}' of type '${s.type}' is not supported as a ground layer and will therefore be ignored. Only layers of type 'elevation' are supported.`)},t=s=>{s.parent=null};this.layers.on("after-add",s=>e(s.item)),this.layers.on("after-remove",s=>t(s.item))}initialize(){this.when().catch(i=>{B.getLogger(this.declaredClass).error("#load()","Failed to load ground",i)}),this.resourceInfo&&this.read(this.resourceInfo.data,this.resourceInfo.context)}destroy(){const i=this.layers.removeAll();for(const e of i)e.destroy();this.layers.destroy()}normalizeCtorArgs(i){return i&&"resourceInfo"in i&&(this._set("resourceInfo",i.resourceInfo),delete(i={...i}).resourceInfo),i}set layers(i){this._set("layers",pd(i,this._get("layers")))}writeLayers(i,e,t,s){const n=[];i&&(s={...s,layerContainerType:"ground"},i.forEach(o=>{if("write"in o){const r={};md(o)().write(r,s)&&n.push(r)}else s&&s.messages&&s.messages.push(new $("layer:unsupported",`Layers (${o.title}, ${o.id}) of type '${o.declaredClass}' cannot be persisted in the ground`,{layer:o}))})),e.layers=n}load(i){return this.addResolvingPromise(this._loadFromSource(i)),Promise.resolve(this)}loadAll(){return gd(this,i=>{i(this.layers)})}async queryElevation(i,e){await this.load({signal:e==null?void 0:e.signal});const{ElevationQuery:t}=await T(()=>import("./ElevationQuery-048df8cb.js"),["assets/ElevationQuery-048df8cb.js","assets/asyncUtils-18831bb1.js","assets/cast-6d78d3c7.js","assets/typedArrayUtil-d02f10a8.js","assets/string-9c5e03f7.js","assets/Error-4ed679d7.js","assets/ensureType-d98e08e1.js","assets/nextTick-3ee5a785.js","assets/promiseUtils-930cba29.js","assets/unitUtils-b69647a1.js","assets/jsonMap-5afaf2ff.js","assets/Extent-d5fff12d.js","assets/Polyline-42dcc920.js","assets/projection-6146477c.js","assets/preload-helper-101896b7.js","assets/mathUtils-daf59e84.js","assets/common-701a4199.js","assets/SimpleObservable-e0897cc6.js","assets/mat4-62d5e6a4.js","assets/assets-6ba3cd63.js","assets/request-e4299080.js","assets/zscale-72b4355d.js","assets/aaBoundingRect-ca34962d.js","assets/geometry-70b2a4a5.js","assets/typeUtils-b6c52390.js","assets/TileInfo-92f7dc61.js"]);Yt(e);const s=new t,n=this.layers.filter(Br).toArray();return s.queryAll(n,i,e)}async createElevationSampler(i,e){await this.load({signal:e==null?void 0:e.signal});const{ElevationQuery:t}=await T(()=>import("./ElevationQuery-048df8cb.js"),["assets/ElevationQuery-048df8cb.js","assets/asyncUtils-18831bb1.js","assets/cast-6d78d3c7.js","assets/typedArrayUtil-d02f10a8.js","assets/string-9c5e03f7.js","assets/Error-4ed679d7.js","assets/ensureType-d98e08e1.js","assets/nextTick-3ee5a785.js","assets/promiseUtils-930cba29.js","assets/unitUtils-b69647a1.js","assets/jsonMap-5afaf2ff.js","assets/Extent-d5fff12d.js","assets/Polyline-42dcc920.js","assets/projection-6146477c.js","assets/preload-helper-101896b7.js","assets/mathUtils-daf59e84.js","assets/common-701a4199.js","assets/SimpleObservable-e0897cc6.js","assets/mat4-62d5e6a4.js","assets/assets-6ba3cd63.js","assets/request-e4299080.js","assets/zscale-72b4355d.js","assets/aaBoundingRect-ca34962d.js","assets/geometry-70b2a4a5.js","assets/typeUtils-b6c52390.js","assets/TileInfo-92f7dc61.js"]);Yt(e);const s=new t,n=this.layers.filter(Br).toArray();return s.createSamplerAll(n,i,e)}clone(){const i={opacity:this.opacity,surfaceColor:lo(this.surfaceColor),navigationConstraint:lo(this.navigationConstraint),layers:this.layers.slice()};return this.loaded&&(i.loadStatus="loaded"),new bo({resourceInfo:this.resourceInfo}).set(i)}read(i,e){this.resourceInfo||this._set("resourceInfo",{data:i,context:e}),super.read(i,e)}_loadFromSource(i){const e=this.resourceInfo;return e?this._loadLayersFromJSON(e.data,e.context,i):Promise.resolve()}_loadLayersFromJSON(i,e,t){const s=e&&e.origin||"web-scene",n=e&&e.portal||null,o=e&&e.url||null;return T(()=>import("./layersCreator-3a8ea62d.js"),["assets/layersCreator-3a8ea62d.js","assets/Collection-42fe629f.js","assets/cast-6d78d3c7.js","assets/typedArrayUtil-d02f10a8.js","assets/string-9c5e03f7.js","assets/Error-4ed679d7.js","assets/ensureType-d98e08e1.js","assets/nextTick-3ee5a785.js","assets/promiseUtils-930cba29.js","assets/Evented-b378ccab.js","assets/SimpleObservable-e0897cc6.js","assets/lazyLayerLoader-a06c5ee5.js","assets/preload-helper-101896b7.js","assets/PortalItem-69c4a143.js","assets/assets-6ba3cd63.js","assets/request-e4299080.js","assets/Loadable-b0d5bb7e.js","assets/Promise-6bd0b483.js","assets/Extent-d5fff12d.js","assets/Portal-fbb2b73d.js","assets/locale-30120714.js","assets/PortalGroup-813428fa.js","assets/jsonMap-5afaf2ff.js","assets/PortalUser-cf18ae9d.js","assets/portalLayers-8253e474.js","assets/layersLoader-75286fcd.js","assets/Layer-739799ab.js","assets/geometry-70b2a4a5.js","assets/Polyline-42dcc920.js","assets/typeUtils-b6c52390.js","assets/Identifiable-57df9761.js","assets/arcgisLayerUrl-02fe1a62.js","assets/persistableUrlUtils-d18becd9.js","assets/jsonContext-14d35493.js","assets/portalItemUtils-ff52c3bb.js","assets/projection-6146477c.js","assets/mathUtils-daf59e84.js","assets/common-701a4199.js","assets/unitUtils-b69647a1.js","assets/mat4-62d5e6a4.js","assets/zscale-72b4355d.js","assets/styleUtils-45e2d86c.js","assets/asyncUtils-18831bb1.js"]).then(({populateOperationalLayers:r})=>{Yt(t);const l=[];if(i.layers&&Array.isArray(i.layers)){const d={context:{origin:s,url:o,portal:n,layerContainerType:"ground"},defaultLayerType:"ArcGISTiledElevationServiceLayer"};l.push(r(this.layers,i.layers,d))}return ei(l)}).then(()=>{})}};function fh(i){return i&&"createElevationSampler"in i}function Br(i){return i.type==="elevation"||fh(i)}a([c({json:{read:!1}})],Je.prototype,"layers",null),a([ml("layers")],Je.prototype,"writeLayers",null),a([c({readOnly:!0})],Je.prototype,"resourceInfo",void 0),a([c({type:Number,nonNullable:!0,range:{min:0,max:1},json:{type:Mr,read:{reader:Sd,source:"transparency"},write:{writer:(i,e)=>{e.transparency=Rd(i)},target:"transparency"}}})],Je.prototype,"opacity",void 0),a([c({type:Boolean,nonNullable:!0,json:{read:!1}})],Je.prototype,"shading",void 0),a([c({type:Xt,json:{type:[Mr],write:(i,e)=>{e.surfaceColor=i.toJSON().slice(0,3)}}})],Je.prototype,"surfaceColor",void 0),a([c({type:Hs,json:{write:!0}})],Je.prototype,"navigationConstraint",void 0),Je=bo=a([C("esri.Ground")],Je);const dn=Je;function _h(i){var e;return!!(i&&i.loaded&&"capabilities"in i&&((e=i==null?void 0:i.capabilities)!=null&&e.operations)&&"supportsEditing"in i.capabilities.operations&&i.capabilities.operations.supportsEditing===!0)&&!("editingEnabled"in i&&!i.editingEnabled)}const Ur=B.getLogger("esri.support.basemapUtils");function yh(){return{}}function vh(i){for(const e in i){const t=i[e];(t==null?void 0:t.destroyed)===!1&&t.destroy(),delete i[e]}}function wh(i,e){let t;if(typeof i=="string"){if(!(i in wr)){const s=Object.entries(wr).filter(([n,o])=>sn.apiKey&&!o.classic||!sn.apiKey&&o.classic&&!o.deprecated).map(([n])=>`"${n}"`).join(", ");return Ur.warn(`Unable to find basemap definition for: ${i}. Try one of these: ${s}`),null}e&&(t=e[i]),t||(t=ao.fromId(i),e&&(e[i]=t))}else t=si(ao,i);return t!=null&&t.destroyed&&(Ur.warn("The provided basemap is already destroyed",{basemap:t}),t=null),t}const Hr={"world-elevation":{id:"worldElevation",url:"//elevation3d.arcgis.com/arcgis/rest/services/WorldElevation3D/Terrain3D/ImageServer",layerType:"ArcGISTiledElevationServiceLayer"},"world-topobathymetry":{id:"worldTopoBathymetry",url:"//elevation3d.arcgis.com/arcgis/rest/services/WorldElevation3D/TopoBathy3D/ImageServer",layerType:"ArcGISTiledElevationServiceLayer"}};function bh(i){let e=null;if(typeof i=="string")if(i in Hr){const t=Hr[i];e=new dn({resourceInfo:{data:{layers:[t]}}})}else B.getLogger("esri.support.groundUtils").warn(`Unable to find ground definition for: ${i}. Try "world-elevation"`);else e=si(dn,i);return e}let Xe=class extends Ld(Fd(Wi.EventedMixin(z))){constructor(e){super(e),this.allLayers=new nn({getCollections:()=>{var t,s,n;return[(t=this.basemap)==null?void 0:t.baseLayers,(s=this.ground)==null?void 0:s.layers,this.layers,(n=this.basemap)==null?void 0:n.referenceLayers]},getChildrenFunction:t=>"layers"in t?t.layers:null}),this.allTables=Od(this),this.basemap=null,this.editableLayers=new nn({getCollections:()=>[this.allLayers],itemFilterFunction:_h}),this.ground=new dn,this._basemapCache=yh()}destroy(){var e,t;this.allLayers.destroy(),this.allTables.destroy(),this.editableLayers.destroy(),(e=this.ground)==null||e.destroy(),(t=this.basemap)==null||t.destroy(),vh(this._basemapCache),this._basemapCache=null}castBasemap(e){return wh(e,this._basemapCache)}castGround(e){const t=bh(e);return O(t)?this._get("ground"):t}findLayerById(e){return this.allLayers.find(t=>t.id===e)}findTableById(e){return this.allTables.find(t=>t.id===e)}};a([c({readOnly:!0,dependsOn:[]})],Xe.prototype,"allLayers",void 0),a([c({readOnly:!0})],Xe.prototype,"allTables",void 0),a([c({type:ao})],Xe.prototype,"basemap",void 0),a([be("basemap")],Xe.prototype,"castBasemap",null),a([c({readOnly:!0})],Xe.prototype,"editableLayers",void 0),a([c({type:dn,nonNullable:!0})],Xe.prototype,"ground",void 0),a([be("ground")],Xe.prototype,"castGround",null),Xe=a([C("esri.Map")],Xe);const Gl=Xe;let _t=class extends vl(Ye){constructor(...e){super(...e),this.position=new X([0,0,0]),this.heading=0,this.tilt=0,this.fov=55}normalizeCtorArgs(e,t,s,n){if(e&&typeof e=="object"&&("x"in e||Array.isArray(e))){const o={position:e};return t!=null&&(o.heading=t),s!=null&&(o.tilt=s),n!=null&&(o.fov=n),o}return e}writePosition(e,t,s,n){const o=e.clone();o.x=Zt(e.x||0),o.y=Zt(e.y||0),o.z=e.hasZ?Zt(e.z||0):e.z,t[s]=o.write({},n)}readPosition(e,t){const s=new X;return s.read(e,t),s.x=Zt(s.x||0),s.y=Zt(s.y||0),s.z=s.hasZ?Zt(s.z||0):s.z,s}equals(e){return!O(e)&&this.tilt===e.tilt&&this.heading===e.heading&&this.fov===e.fov&&this.position.equals(e.position)}};a([c({type:X,json:{write:{isRequired:!0}}})],_t.prototype,"position",void 0),a([ml("position")],_t.prototype,"writePosition",null),a([Md("position")],_t.prototype,"readPosition",null),a([c({type:Number,nonNullable:!0,json:{write:{isRequired:!0}}}),be(i=>Dd.normalize(Zt(i)))],_t.prototype,"heading",void 0),a([c({type:Number,nonNullable:!0,json:{write:{isRequired:!0}}}),be(i=>Gi(Zt(i),-180,180))],_t.prototype,"tilt",void 0),a([c({type:Number,nonNullable:!0,json:{read:!1,write:!1}})],_t.prototype,"fov",void 0),_t=a([C("esri.Camera")],_t);const Mh=_t;var Mo;let Dt=Mo=class extends Ye{constructor(i){super(i),this.rotation=0,this.scale=0,this.targetGeometry=null,this.camera=null}castRotation(i){return(i%=360)<0&&(i+=360),i}clone(){return new Mo({rotation:this.rotation,scale:this.scale,targetGeometry:E(this.targetGeometry)?this.targetGeometry.clone():null,camera:E(this.camera)?this.camera.clone():null})}};function Nn(){return{enabled:!this.camera}}a([c({type:Number,json:{write:!0,origins:{"web-map":{default:0,write:!0},"web-scene":{write:{overridePolicy:Nn}}}}})],Dt.prototype,"rotation",void 0),a([be("rotation")],Dt.prototype,"castRotation",null),a([c({type:Number,json:{write:!0,origins:{"web-map":{default:0,write:!0},"web-scene":{write:{overridePolicy:Nn}}}}})],Dt.prototype,"scale",void 0),a([c({types:zd,json:{read:kt,write:!0,origins:{"web-scene":{read:kt,write:{overridePolicy:Nn}}}}})],Dt.prototype,"targetGeometry",void 0),a([c({type:Mh,json:{write:!0}})],Dt.prototype,"camera",void 0),Dt=Mo=a([C("esri.Viewpoint")],Dt);const Ze=Dt,qs={widthBreakpoint:{getValue(i){const e=i.viewSize[0],t=i.breakpoints,s=this.values;return e<=t.xsmall?s.xsmall:e<=t.small?s.small:e<=t.medium?s.medium:e<=t.large?s.large:s.xlarge},values:{xsmall:"xsmall",small:"small",medium:"medium",large:"large",xlarge:"xlarge"},valueToClassName:{xsmall:"esri-view-width-xsmall esri-view-width-less-than-small esri-view-width-less-than-medium esri-view-width-less-than-large esri-view-width-less-than-xlarge",small:"esri-view-width-small esri-view-width-greater-than-xsmall esri-view-width-less-than-medium esri-view-width-less-than-large esri-view-width-less-than-xlarge",medium:"esri-view-width-medium esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-less-than-large esri-view-width-less-than-xlarge",large:"esri-view-width-large esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-greater-than-medium esri-view-width-less-than-xlarge",xlarge:"esri-view-width-xlarge esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-greater-than-medium esri-view-width-greater-than-large"}},heightBreakpoint:{getValue(i){const e=i.viewSize[1],t=i.breakpoints,s=this.values;return e<=t.xsmall?s.xsmall:e<=t.small?s.small:e<=t.medium?s.medium:e<=t.large?s.large:s.xlarge},values:{xsmall:"xsmall",small:"small",medium:"medium",large:"large",xlarge:"xlarge"},valueToClassName:{xsmall:"esri-view-height-xsmall esri-view-height-less-than-small esri-view-height-less-than-medium esri-view-height-less-than-large esri-view-height-less-than-xlarge",small:"esri-view-height-small esri-view-height-greater-than-xsmall esri-view-height-less-than-medium esri-view-height-less-than-large esri-view-height-less-than-xlarge",medium:"esri-view-height-medium esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-less-than-large esri-view-height-less-than-xlarge",large:"esri-view-height-large esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-greater-than-medium esri-view-height-less-than-xlarge",xlarge:"esri-view-height-xlarge esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-greater-than-medium esri-view-height-greater-than-large"}},orientation:{getValue(i){const e=i.viewSize,t=e[0],s=e[1],n=this.values;return s>=t?n.portrait:n.landscape},values:{portrait:"portrait",landscape:"landscape"},valueToClassName:{portrait:"esri-view-orientation-portrait",landscape:"esri-view-orientation-landscape"}}},zn={xsmall:544,small:768,medium:992,large:1200};function Ih(i){const e=i;return e&&e.xsmall<e.small&&e.small<e.medium&&e.medium<e.large}function Bn(i,e){return e?qs[i].valueToClassName[e].split(" "):[]}const Ch=i=>{let e=class extends i{constructor(...t){super(...t),this._breakpointsHandles=new lt,this.orientation=null,this.widthBreakpoint=null,this.heightBreakpoint=null,this.breakpoints=zn}initialize(){this._breakpointsHandles.add(I(()=>[this.breakpoints,this.size],()=>this._updateClassNames(),H))}destroy(){this.destroyed||(this._removeActiveClassNames(),this._breakpointsHandles=Te(this._breakpointsHandles))}set breakpoints(t){if(t===this._get("breakpoints"))return;const s=Ih(t);if(!s){const n=JSON.stringify(zn,null,2);console.warn("provided breakpoints are not valid, using defaults:"+n)}t=s?t:zn,this._set("breakpoints",{...t})}_updateClassNames(){if(!this.container)return;const t=Ps.acquire(),s=Ps.acquire();let n,o=!1;for(n in qs){const r=this[n],l=qs[n].getValue({viewSize:this.size,breakpoints:this.breakpoints});r!==l&&(o=!0,this[n]=l,Bn(n,r).forEach(d=>s.push(d)),Bn(n,l).forEach(d=>t.push(d)))}o&&(this._applyClassNameChanges(t,s),Ps.release(t),Ps.release(s))}_applyClassNameChanges(t,s){const n=this.container;n&&(s.forEach(o=>n.classList.remove(o)),t.forEach(o=>n.classList.add(o)))}_removeActiveClassNames(){const t=this.container;if(!t)return;let s;for(s in qs)Bn(s,this[s]).forEach(n=>t.classList.remove(n))}};return a([c()],e.prototype,"breakpoints",null),a([c()],e.prototype,"orientation",void 0),a([c()],e.prototype,"widthBreakpoint",void 0),a([c()],e.prototype,"heightBreakpoint",void 0),e=a([C("esri.views.BreakpointsOwner")],e),e};let Vt=class extends z{constructor(){super(...arguments),this.items=new ee,this._watchUpdatingTracking=new Cl,this._callbacks=new Map,this._projector=ho(),this._hiddenProjector=ho()}get needsRender(){return this.items.length>0}get updating(){var e;return((e=this._watchUpdatingTracking)==null?void 0:e.updating)??!1}initialize(){const e=document.createElement("div");e.className="esri-overlay-surface",this._set("surface",e),this._hiddenSurface=document.createElement("div"),this._hiddenSurface.setAttribute("style","visibility: hidden;"),e.appendChild(this._hiddenSurface),this._watchUpdatingTracking.addOnCollectionChange(()=>this.items,t=>{for(const s of t.added){const n=()=>s.render();this._callbacks.set(s,n),this._projector.append(this.surface,n)}for(const s of t.removed){const n=this._projector.detach(this._callbacks.get(s));this.surface.removeChild(n.domNode),this._callbacks.delete(s)}})}addItem(e){this.items.add(e)}removeItem(e){this.items.remove(e)}destroy(){this.items.removeAll(),this._callbacks.forEach(e=>this._projector.detach(e)),this._callbacks=null,this._projector=null,this._watchUpdatingTracking.destroy()}render(){this._projector.renderNow()}computeBoundingRect(e){const t=this._hiddenSurface,s=this._hiddenProjector;let n=null;const o=()=>(n=e.render(),n);s.append(t,o),s.renderNow();const r={left:0,top:0,right:0,bottom:0};if(n&&n.domNode){const l=n.domNode.getBoundingClientRect();r.left=l.left,r.top=l.top,r.right=l.right,r.bottom=l.bottom}for(s.detach(o);t.firstChild;)t.removeChild(t.firstChild);return r}overlaps(e,t){const s=this.computeBoundingRect(e),n=this.computeBoundingRect(t);return Math.max(s.left,n.left)<=Math.min(s.right,n.right)&&Math.max(s.top,n.top)<=Math.min(s.bottom,n.bottom)}get hasVisibleItems(){return this.items.some(e=>e.visible)}async prepare(){await document.fonts.load(this._fontString()).catch(()=>{})}renderCanvas(e){if(!this.items.some(s=>s.visible))return;const t=e.getContext("2d");t.save(),t.font=this._fontString(),this.items.forEach(s=>{t.save(),s.renderCanvas(t),t.restore()}),t.restore()}_fontString(){return`10px ${getComputedStyle(this.surface).fontFamily}`}};a([c({readOnly:!0})],Vt.prototype,"surface",void 0),a([c({readOnly:!0})],Vt.prototype,"items",void 0),a([c({readOnly:!0})],Vt.prototype,"needsRender",null),a([c({readOnly:!0})],Vt.prototype,"_watchUpdatingTracking",void 0),a([c({readOnly:!0})],Vt.prototype,"updating",null),Vt=a([C("esri.views.overlay.ViewOverlay")],Vt);const qr=Vt;function Ui(i,e,t,s){let n=null,o=1e3;typeof e=="number"?(o=e,s=t):(n=e??null,o=t);let r,l=0;const d=()=>{l=0,i.apply(s,r)},u=(...h)=>{n&&n.apply(s,h),r=h,o?l||(l=setTimeout(d,o)):d()};return u.remove=()=>{l&&(clearTimeout(l),l=0)},u.forceUpdate=()=>{l&&(clearTimeout(l),d())},u.hasPendingUpdates=()=>!!l,u}const Gr=["B","kB","MB","GB","TB"];function Eh(i,e){let t=e===0?0:Math.floor(Math.log(e)/Math.log(Tr.KILOBYTES));t=Gi(t,0,Gr.length-1);const s=qo(e/Tr.KILOBYTES**t,{maximumFractionDigits:2});return qi(i.units.bytes[Gr[t]],{fileSize:s})}const Th="esri.widgets.Feature.support.featureUtils",jr=B.getLogger(Th),xh=/href=(""|'')/gi,kh=/(\{([^\{\r\n]+)\})/g,Ah=/\'/g,jl=/^\s*expression\//i,Ph=/(\n)/gi,$h=/[\u00A0-\u9999<>\&]/gim,Sh=/href\s*=\s*(?:\"([^\"]+)\"|\'([^\']+)\')/gi,Rh=/^(?:mailto:|tel:)/,Wl="relationships/",Io=Tl("short-date-short-time");function Zl(i){if(!O(i))return i.get("sourceLayer")||i.get("layer")}async function un(i,e){return typeof i=="function"?i.call(null,e):i}function Kl(i=""){if(i)return!Rh.test(i.trim().toLowerCase())}function Qo(i){return!!i&&jl.test(i)}function Lh(i,e){if(!Qo(e)||!i)return null;const t=e.replace(jl,"").toLowerCase();let s;return i.some(n=>n.name.toLowerCase()===t&&(s=n,!0)),s}function Yl(i,e){const t=Lh(e,i==null?void 0:i.fieldName);return t?t.title||null:i?i.label||i.fieldName:null}function Fh(i,e){const t=e.get(i.toLowerCase());return`{${t&&t.fieldName||i}}`}function Oh(i){return i.replace(xh,"")}function Ms(i,e){const t=Jo(e,i);return t?t.name:i}function Dh(i,e){return i&&i.map(t=>Ms(t,e))}function Jo(i,e){return i&&typeof i.getField=="function"?i.getField(e):null}function Ql(i){return`${i}`.trim()}function yi({attributes:i,globalAttributes:e,layer:t,text:s,expressionAttributes:n,fieldInfoMap:o}){return s?Co({formattedAttributes:e,template:Bh(s,{...e,...n,...i},t),fieldInfoMap:o}):""}function Co({formattedAttributes:i,template:e,fieldInfoMap:t}){return Ql(Oh(qi(qi(e,s=>Fh(s,t)),i)))}function Vh(i,e,t=!1){const s=e[i];if(typeof s=="string"){const n="%27",o=(t?encodeURIComponent(s):s).replace(Ah,n);e[i]=o}}function Nh(i,e=!1){const t={...i};return Object.keys(t).forEach(s=>Vh(s,t,e)),t}function zh(i,e,t){const s=(e=Ql(e))&&e[0]!=="{";return qi(i,Nh(t,s))}function Eo(i,e){return i.replace(kh,(t,s,n)=>{const o=Jo(e,n);return o?`{${o.name}}`:s})}function Bh(i,e,t){const s=Eo(i,t);return s&&s.replace(Sh,(n,o,r)=>zh(n,o||r,e))}function Uh(i,e){if(typeof i=="string"&&e&&e.dateFormat==null&&(e.places!=null||e.digitSeparator!=null)){const t=Number(i);if(!isNaN(t))return t}return i}function Hh(i){return(i==null?void 0:i.type)==="feature"}function Wr(i){return!!(i!=null&&i.layer)}function qh(i){return(i==null?void 0:i.type)==="map-image"}function Gh(i,e){var u;const t=e.fieldInfos,s=e.fieldName,n=(u=Jl(t,s))==null?void 0:u.clone(),o=e.preventPlacesFormatting,r=e.layer,l=Jo(r,s);if(n&&(l==null?void 0:l.type)==="date"){const h=n.format||new su;h.dateFormat=h.dateFormat||"short-date-short-time",h.dateTimeFormatOptions=!Wr(r)&&Hh(r)&&r.datesInUnknownTimezone||Wr(r)&&qh(r.layer)&&r.layer.datesInUnknownTimezone?{timeZone:"UTC"}:null,n.format=h}const d=n&&n.format;return typeof i=="string"&&tu(s)&&d?d.formatRasterPixelValue(i):typeof(i=Uh(i,d))=="string"||i==null||d==null?As(i):o?qo(i,{...Jd(d),minimumFractionDigits:0,maximumFractionDigits:20}):d.format(i)}function Jl(i,e){if(!i||!i.length||!e)return;const t=e.toLowerCase();let s;return i.some(n=>!(!n.fieldName||n.fieldName.toLowerCase()!==t)&&(s=n,!0)),s}function jh({fieldName:i,graphic:e,layer:t}){if(Tt(i)||!t||typeof t.getFeatureType!="function")return null;const{typeIdField:s}=t;if(!s||i!==s)return null;const n=t.getFeatureType(e);return n?n.name:null}function Wh({fieldName:i,value:e,graphic:t,layer:s}){if(Tt(i)||!s||typeof s.getFieldDomain!="function")return null;const n=s.getFieldDomain(i,{feature:t});return n&&n.type==="coded-value"?n.getName(e):null}function Zh(i,e){const{creatorField:t,creationDateField:s,editorField:n,editDateField:o}=i;if(!e)return;const r=e[o];if(typeof r=="number"){const d=e[n];return{type:"edit",date:rn(r,Io),user:d}}const l=e[s];if(typeof l=="number"){const d=e[t];return{type:"create",date:rn(l,Io),user:d}}return null}function Kh(i,e){const t=new Map;return i&&i.forEach(s=>{const n=Ms(s.fieldName,e);s.fieldName=n,t.set(n.toLowerCase(),s)}),t}function Zr(i){const e=[];if(!i)return e;const{fieldInfos:t,content:s}=i;return t&&e.push(...t),s&&Array.isArray(s)&&s.forEach(n=>{if(n.type==="fields"){const o=n&&n.fieldInfos;o&&e.push(...o)}}),e}function Xo(i){return i.replace($h,e=>`&#${e.charCodeAt(0)};`)}function As(i){return typeof i=="string"?i.replace(Ph,'<br class="esri-text-new-line" />'):i}function Xl(i){const{value:e,fieldName:t,fieldInfos:s,fieldInfoMap:n,layer:o,graphic:r}=i;if(e==null)return"";const l=Wh({fieldName:t,value:e,graphic:r,layer:o});if(l)return l;const d=jh({fieldName:t,graphic:r,layer:o});if(d)return d;if(n.get(t.toLowerCase()))return Gh(e,{fieldInfos:s||Array.from(n.values()),fieldName:t,layer:o});const u=o&&o.fieldsIndex;return u&&u.isDateField(t)?rn(e,Io):As(e)}function Un({fieldInfos:i,attributes:e,layer:t,graphic:s,fieldInfoMap:n,relatedInfos:o}){const r={};return o==null||o.forEach(l=>ep({attributes:r,relatedInfo:l,fieldInfoMap:n,fieldInfos:i,layer:t})),Object.keys(e).forEach(l=>{const d=e[l];r[l]=Xl({fieldName:l,fieldInfos:i,fieldInfoMap:n,layer:t,value:d,graphic:s})}),r}async function Yh(i,e){var h,p;const{layer:t,graphic:s,outFields:n,objectIds:o,returnGeometry:r,spatialReference:l}=i,d=o[0];if(typeof d!="number"&&typeof d!="string"){const g="Could not query required fields for the specified feature. The feature's ID is invalid.",f={layer:t,graphic:s,objectId:d,requiredFields:n};return jr.warn(g,f),null}if(!((p=(h=t.capabilities)==null?void 0:h.operations)!=null&&p.supportsQuery)){const g="The specified layer cannot be queried. The following fields will not be available.",f={layer:t,graphic:s,requiredFields:n,returnGeometry:r};return jr.warn(g,f),null}const u=t.createQuery();return u.objectIds=o,u.outFields=n!=null&&n.length?n:[t.objectIdField],u.returnGeometry=!!r,u.returnZ=!!r,u.returnM=!!r,u.outSpatialReference=l,(await t.queryFeatures(u,e)).features[0]}async function Qh(i){var s;if(!((s=i.expressionInfos)!=null&&s.length))return!1;const e=await Pl(),{arcadeUtils:{hasGeometryFunctions:t}}=e;return t(i)}async function Jh({graphic:i,popupTemplate:e,layer:t,spatialReference:s},n){if(!t||!e||(typeof t.load=="function"&&await t.load(n),!i.attributes))return;const o=i.attributes[t.objectIdField];if(o==null)return;const r=[o],l=await e.getRequiredFields(t.fieldsIndex),d=eu(l,i),u=d?[]:l,h=e.returnGeometry||await Qh(e);if(d&&!h)return;const p=await Yh({layer:t,graphic:i,outFields:u,objectIds:r,returnGeometry:h,spatialReference:s},n);p&&(p.geometry&&(i.geometry=p.geometry),p.attributes&&(i.attributes={...i.attributes,...p.attributes}))}function Tt(i=""){return!!i&&i.includes(Wl)}function Xh(i){return i?`${Wl}${i.layerId}/${i.fieldName}`:""}function Kr({attributes:i,graphic:e,relatedInfo:t,fieldInfos:s,fieldInfoMap:n,layer:o}){i&&e&&t&&Object.keys(e.attributes).forEach(r=>{const l=Xh({layerId:t.relation.id.toString(),fieldName:r}),d=e.attributes[r];i[l]=Xl({fieldName:l,fieldInfos:s,fieldInfoMap:n,layer:o,value:d,graphic:e})})}function ep({attributes:i,relatedInfo:e,fieldInfoMap:t,fieldInfos:s,layer:n}){i&&e&&(e.relatedFeatures&&e.relatedFeatures&&e.relatedFeatures.forEach(o=>Kr({attributes:i,graphic:o,relatedInfo:e,fieldInfoMap:t,fieldInfos:s,layer:n})),e.relatedStatsFeatures&&e.relatedStatsFeatures&&e.relatedStatsFeatures.forEach(o=>Kr({attributes:i,graphic:o,relatedInfo:e,fieldInfoMap:t,fieldInfos:s,layer:n})))}const Yr=i=>{if(!i)return!1;const e=i.toUpperCase();return e.includes("CURRENT_TIMESTAMP")||e.includes("CURRENT_DATE")||e.includes("CURRENT_TIME")},ec=({layer:i,method:e,query:t,definitionExpression:s})=>{var r,l;if(!((l=(r=i.capabilities)==null?void 0:r.query)!=null&&l.supportsCacheHint)||e==="attachments")return;const n=E(t.where)&&t.where,o=E(t.geometry)&&t.geometry;Yr(s)||Yr(n)||(o==null?void 0:o.type)==="extent"||t.resultType==="tile"||(t.cacheHint=!0)},tp=({query:i,layer:e,method:t})=>{ec({layer:e,method:t,query:i,definitionExpression:`${e.definitionExpression} ${e.serviceDefinitionExpression}`})},ip=({queryPayload:i,layer:e,method:t})=>{ec({layer:e,method:t,query:i,definitionExpression:`${e.definitionExpression} ${e.serviceDefinitionExpression}`})};function sp(i,e,t){return i&&e&&t?Qr(i.allLayers,e,t)||Qr(i.allTables,e,t):null}function Qr(i,e,t){return i.find(s=>s!==e&&s.type==="feature"&&s.url===e.url&&s.layerId===t.relatedTableId)}const Jr={editing:!1,operations:{add:!0,update:!0,delete:!0}},tc=ee.ofType(Xd);let xe=class extends z{constructor(e){super(e),this._getAttachmentsPromise=null,this._attachmentLayer=null,this.abilities={...Jr},this.activeAttachmentInfo=null,this.activeFileInfo=null,this.attachmentInfos=new tc,this.fileInfos=new ee,this.graphic=null,this.mode="view",this.filesEnabled=!1,this.addHandles(I(()=>this.graphic,()=>this._graphicChanged(),H))}destroy(){this._attachmentLayer=null,this.graphic=null}castAbilities(e){return{...Jr,...e}}get state(){return this._getAttachmentsPromise?"loading":this.graphic?"ready":"disabled"}get supportsResizeAttachments(){const{graphic:e}=this;if(!e)return!1;const t=e.layer||e.sourceLayer;return(t==null?void 0:t.loaded)&&"capabilities"in t&&"operations"in t.capabilities&&"supportsResizeAttachments"in t.capabilities.operations&&t.capabilities.operations.supportsResizeAttachments||!1}async getAttachments(){const{_attachmentLayer:e,attachmentInfos:t}=this;if(!e||typeof e.queryAttachments!="function")throw new $("invalid-layer","getAttachments(): A valid layer is required.");const s=this._getObjectId(),n=new xr({objectIds:[s],returnMetadata:!0}),o=[],r=e.queryAttachments(n).then(d=>d[s]||o).catch(()=>o);this._getAttachmentsPromise=r,this.notifyChange("state");const l=await r;return t.removeAll(),l.length&&t.addMany(l),this._getAttachmentsPromise=null,this.notifyChange("state"),l}async addAttachment(e,t=this.graphic){const{_attachmentLayer:s,attachmentInfos:n,abilities:o}=this;if(!t)throw new $("invalid-graphic","addAttachment(): A valid graphic is required.",{graphic:t});if(!e)throw new $("invalid-attachment","addAttachment(): An attachment is required.",{attachment:e});if(!o.operations.add)throw new $("invalid-abilities","addAttachment(): add abilities are required.");if(!s||typeof s.addAttachment!="function")throw new $("invalid-layer","addAttachment(): A valid layer is required.");const r=s.addAttachment(t,e).then(d=>this._queryAttachment(d.objectId,t)),l=await r;return n.add(l),l}async deleteAttachment(e){const{_attachmentLayer:t,attachmentInfos:s,graphic:n,abilities:o}=this;if(!e)throw new $("invalid-attachment-info","deleteAttachment(): An attachmentInfo is required.",{attachmentInfo:e});if(!o.operations.delete)throw new $("invalid-abilities","deleteAttachment(): delete abilities are required.");if(!t||typeof t.deleteAttachments!="function")throw new $("invalid-layer","deleteAttachment(): A valid layer is required.");const r=t.deleteAttachments(n,[e.id]).then(()=>e),l=await r;return s.remove(l),l}async updateAttachment(e,t=this.activeAttachmentInfo){const{_attachmentLayer:s,attachmentInfos:n,graphic:o,abilities:r}=this;if(!e)throw new $("invalid-attachment","updateAttachment(): An attachment is required.",{attachment:e});if(!t)throw new $("invalid-attachment-info","updateAttachment(): An attachmentInfo is required.",{attachmentInfo:t});if(!r.operations.update)throw new $("invalid-abilities","updateAttachment(): Update abilities are required.");const l=n.findIndex(h=>h===t);if(!s||typeof s.updateAttachment!="function")throw new $("invalid-layer","updateAttachment(): A valid layer is required.");const d=s.updateAttachment(o,t.id,e).then(h=>this._queryAttachment(h.objectId)),u=await d;return n.splice(l,1,u),u}async commitFiles(){return await Promise.all(this.fileInfos.items.map(e=>this.addAttachment(e.form))),this.fileInfos.removeAll(),this.getAttachments()}addFile(e,t){if(!e||!t)return null;const s={file:e,form:t};return this.fileInfos.add(s),s}updateFile(e,t,s=this.activeFileInfo){if(!e||!t||!s)return null;const n=this.fileInfos.findIndex(o=>s===o);return n>-1&&this.fileInfos.splice(n,1,{file:e,form:t}),this.fileInfos.items[n]}deleteFile(e){const t=this.fileInfos.find(s=>s.file===e);return this.fileInfos.remove(t)??null}async _queryAttachment(e,t){if(!e)throw new $("invalid-attachment-id","Could not query attachment.");const{_attachmentLayer:s}=this,n=this._getObjectId(t),o=new xr({objectIds:[n],attachmentsWhere:`AttachmentId=${e}`,returnMetadata:!0});return s.queryAttachments(o).then(r=>r[n][0])}_getObjectId(e=this.graphic){return(e==null?void 0:e.getObjectId())??null}_graphicChanged(){this.graphic&&(this._setAttachmentLayer(),this.getAttachments().catch(()=>{}))}_setAttachmentLayer(){const{graphic:e}=this,t=Zl(e);this._attachmentLayer=t?t.type==="scene"&&E(t.associatedLayer)?t.associatedLayer:t:null}};a([c()],xe.prototype,"abilities",void 0),a([be("abilities")],xe.prototype,"castAbilities",null),a([c()],xe.prototype,"activeAttachmentInfo",void 0),a([c()],xe.prototype,"activeFileInfo",void 0),a([c({readOnly:!0,type:tc})],xe.prototype,"attachmentInfos",void 0),a([c()],xe.prototype,"fileInfos",void 0),a([c({type:ct})],xe.prototype,"graphic",void 0),a([c()],xe.prototype,"mode",void 0),a([c({readOnly:!0})],xe.prototype,"state",null),a([c()],xe.prototype,"filesEnabled",void 0),a([c({readOnly:!0})],xe.prototype,"supportsResizeAttachments",null),xe=a([C("esri.widgets.Attachments.AttachmentsViewModel")],xe);const er=xe;function Xr(i){const e=i.toLowerCase();return e==="image/bmp"||e==="image/emf"||e==="image/exif"||e==="image/gif"||e==="image/x-icon"||e==="image/jpeg"||e==="image/png"||e==="image/tiff"||e==="image/x-wmf"}function np(i){const e=$l("esri/themes/base/images/files/");return i?i==="text/plain"?`${e}text-32.svg`:i==="application/pdf"?`${e}pdf-32.svg`:i==="text/csv"?`${e}csv-32.svg`:i==="application/gpx+xml"?`${e}gpx-32.svg`:i==="application/x-dwf"?`${e}cad-32.svg`:i==="application/postscript"||i==="application/json"||i==="text/xml"||i==="model/vrml"?`${e}code-32.svg`:i==="application/x-zip-compressed"||i==="application/x-7z-compressed"||i==="application/x-gzip"||i==="application/x-tar"||i==="application/x-gtar"||i==="application/x-bzip2"||i==="application/gzip"||i==="application/x-compress"||i==="application/x-apple-diskimage"||i==="application/x-rar-compressed"||i==="application/zip"?`${e}zip-32.svg`:i.includes("image/")?`${e}image-32.svg`:i.includes("audio/")?`${e}sound-32.svg`:i.includes("video/")?`${e}video-32.svg`:i.includes("msexcel")||i.includes("ms-excel")||i.includes("spreadsheetml")?`${e}excel-32.svg`:i.includes("msword")||i.includes("ms-word")||i.includes("wordprocessingml")?`${e}word-32.svg`:i.includes("powerpoint")||i.includes("presentationml")?`${e}report-32.svg`:`${e}generic-32.svg`:`${e}generic-32.svg`}const ea={addButton:!0,addSubmitButton:!0,cancelAddButton:!0,cancelUpdateButton:!0,deleteButton:!0,errorMessage:!0,progressBar:!0,updateButton:!0},x={base:"esri-attachments",loaderContainer:"esri-attachments__loader-container",loader:"esri-attachments__loader",fadeIn:"esri-attachments--fade-in",container:"esri-attachments__container",containerList:"esri-attachments__container--list",containerPreview:"esri-attachments__container--preview",actions:"esri-attachments__actions",deleteButton:"esri-attachments__delete-button",addAttachmentButton:"esri-attachments__add-attachment-button",errorMessage:"esri-attachments__error-message",items:"esri-attachments__items",item:"esri-attachments__item",itemButton:"esri-attachments__item-button",itemMask:"esri-attachments__item-mask",itemMaskIcon:"esri-attachments__item-mask--icon",itemImage:"esri-attachments__image",itemImageResizable:"esri-attachments__image--resizable",itemLabel:"esri-attachments__label",itemFilename:"esri-attachments__filename",itemChevronIcon:"esri-attachments__item-chevron-icon",itemLink:"esri-attachments__item-link",itemLinkOverlay:"esri-attachments__item-link-overlay",itemLinkOverlayIcon:"esri-attachments__item-link-overlay-icon",itemEditIcon:"esri-attachments__item-edit-icon",itemAddIcon:"esri-attachments__item-add-icon",itemAddButton:"esri-attachments__item-add-button",formNode:"esri-attachments__form-node",fileFieldset:"esri-attachments__file-fieldset",fileLabel:"esri-attachments__file-label",fileName:"esri-attachments__file-name",fileInput:"esri-attachments__file-input",metadata:"esri-attachments__metadata",metadataFieldset:"esri-attachments__metadata-fieldset",progressBar:"esri-attachments__progress-bar",esriWidget:"esri-widget",esriButton:"esri-button",buttonDisabled:"esri-button--disabled",esriButtonSecondary:"esri-button--secondary",esriButtonTertiary:"esri-button--tertiary",esriButtonThird:"esri-button--third",esriButtonSmall:"esri-button--small",esriButtonHalf:"esri-button--half",empty:"esri-widget__content--empty",iconExternalLink:"esri-icon-link-external",iconEdit:"esri-icon-edit",iconRight:"esri-icon-right",iconLeft:"esri-icon-left",iconPlus:"esri-icon-plus"},Hn=window.CSS;let we=class extends ue{constructor(e,t){super(e,t),this.displayType="auto",this.messages=null,this.messagesUnits=null,this.selectedFile=null,this.submitting=!1,this.viewModel=new er,this.visibleElements={...ea},this._supportsImageOrientation=Hn&&Hn.supports&&Hn.supports("image-orientation","from-image"),this._addAttachmentForm=null,this._updateAttachmentForm=null}initialize(){this.addHandles([Ke(()=>{var e;return(e=this.viewModel)==null?void 0:e.attachmentInfos},"change",()=>this.scheduleRender()),Ke(()=>{var e;return(e=this.viewModel)==null?void 0:e.fileInfos},"change",()=>this.scheduleRender()),I(()=>{var e;return(e=this.viewModel)==null?void 0:e.mode},()=>this._modeChanged(),H)])}loadDependencies(){return Promise.all([T(()=>import("./calcite-icon-901434b0.js"),["assets/calcite-icon-901434b0.js","assets/icon-ba19bc6b.js","assets/widget-4becb80f.js","assets/cast-6d78d3c7.js","assets/typedArrayUtil-d02f10a8.js","assets/string-9c5e03f7.js","assets/Error-4ed679d7.js","assets/ensureType-d98e08e1.js","assets/nextTick-3ee5a785.js","assets/promiseUtils-930cba29.js","assets/intl-a5c99ea3.js","assets/number-c7f1bfee.js","assets/jsonMap-5afaf2ff.js","assets/locale-30120714.js","assets/messages-634811b5.js","assets/request-e4299080.js","assets/preload-helper-101896b7.js","assets/assets-6ba3cd63.js","assets/Evented-b378ccab.js","assets/Promise-6bd0b483.js","assets/reactiveUtils-b0e56010.js","assets/uuid-73213768.js","assets/observers-32bcc375.js"])])}get abilities(){return this.viewModel.abilities}set abilities(e){this.viewModel.abilities=e}get effectiveDisplayType(){const{displayType:e}=this;return e&&e!=="auto"?e:this.viewModel.supportsResizeAttachments?"preview":"list"}get graphic(){return this.viewModel.graphic}set graphic(e){this.viewModel.graphic=e}get label(){var e;return((e=this.messages)==null?void 0:e.widgetLabel)??""}set label(e){this._overrideIfSome("label",e)}castVisibleElements(e){return{...ea,...e}}addAttachment(){const{_addAttachmentForm:e,viewModel:t}=this;return this._set("submitting",!0),this._set("error",null),t.addAttachment(e).then(s=>(this._set("submitting",!1),this._set("error",null),t.mode="view",s)).catch(s=>{throw this._set("submitting",!1),this._set("error",new $("attachments:add-attachment",this.messages.addErrorMessage,s)),s})}deleteAttachment(e){const{viewModel:t}=this;return this._set("submitting",!0),this._set("error",null),t.deleteAttachment(e).then(s=>(this._set("submitting",!1),this._set("error",null),t.mode="view",s)).catch(s=>{throw this._set("submitting",!1),this._set("error",new $("attachments:delete-attachment",this.messages.deleteErrorMessage,s)),s})}updateAttachment(){const{viewModel:e}=this,{_updateAttachmentForm:t}=this;return this._set("submitting",!0),this._set("error",null),e.updateAttachment(t).then(s=>(this._set("submitting",!1),this._set("error",null),e.mode="view",s)).catch(s=>{throw this._set("submitting",!1),this._set("error",new $("attachments:update-attachment",this.messages.updateErrorMessage,s)),s})}addFile(){const e=this.viewModel.addFile(this.selectedFile,this._addAttachmentForm);return this.viewModel.mode="view",e}updateFile(){const{viewModel:e}=this,t=e.updateFile(this.selectedFile,this._updateAttachmentForm,e.activeFileInfo);return e.mode="view",t}deleteFile(e){const t=this.viewModel.deleteFile(e||this.viewModel.activeFileInfo.file);return this.viewModel.mode="view",t}render(){const{submitting:e,viewModel:t}=this,{state:s}=t;return m("div",{class:this.classes(x.base,x.esriWidget)},e?this.renderProgressBar():null,s==="loading"?this.renderLoading():this.renderAttachments(),this.renderErrorMessage())}renderErrorMessage(){const{error:e,visibleElements:t}=this;return e&&t.errorMessage?m("div",{key:"error-message",class:x.errorMessage},e.message):null}renderAttachments(){const{activeFileInfo:e,mode:t,activeAttachmentInfo:s}=this.viewModel;return t==="add"?this.renderAddForm():t==="edit"?this.renderDetailsForm(s||e):this.renderAttachmentContainer()}renderLoading(){return m("div",{class:x.loaderContainer,key:"loader"},m("div",{class:x.loader}))}renderProgressBar(){return this.visibleElements.progressBar?m("div",{class:x.progressBar,key:"progress-bar"}):null}renderAddForm(){const{submitting:e,selectedFile:t}=this,s=e||!t,n=this.visibleElements.cancelAddButton?m("button",{type:"button",bind:this,disabled:e,onclick:this._cancelForm,class:this.classes(x.esriButton,x.esriButtonTertiary,x.esriButtonSmall,x.esriButtonHalf,e&&x.buttonDisabled)},this.messages.cancel):null,o=this.visibleElements.addSubmitButton?m("button",{type:"submit",disabled:s,class:this.classes(x.esriButton,x.esriButtonSecondary,x.esriButtonSmall,x.esriButtonHalf,{[x.buttonDisabled]:s})},this.messages.add):null,r=t?m("span",{key:"file-name",class:x.fileName},t.name):null,l=m("form",{bind:this,afterCreate:on,afterRemoved:Ir,"data-node-ref":"_addAttachmentForm",onsubmit:this._submitAddAttachment},m("fieldset",{class:x.fileFieldset},r,m("label",{class:this.classes(x.fileLabel,x.esriButton,x.esriButtonSecondary)},t?this.messages.changeFile:this.messages.selectFile,m("input",{class:x.fileInput,type:"file",name:"attachment",bind:this,onchange:this._handleFileInputChange}))),o,n);return m("div",{key:"add-form-container",class:x.formNode},l)}renderDetailsForm(e){const{visibleElements:t,viewModel:s,selectedFile:n,submitting:o}=this,{abilities:r}=s,l=o||!n;let d,u,h,p;n?(d=n.type,u=n.name,h=n.size):"file"in e?(d=e.file.type,u=e.file.name,h=e.file.size):(d=e.contentType,u=e.name,h=e.size,p=e.url);const g=r.editing&&r.operations.delete&&t.deleteButton?m("button",{key:"delete-button",type:"button",disabled:o,bind:this,onclick:P=>this._submitDeleteAttachment(P,e),class:this.classes(x.esriButton,x.esriButtonSmall,x.esriButtonTertiary,x.deleteButton,{[x.buttonDisabled]:o})},this.messages.delete):void 0,f=r.editing&&r.operations.update&&t.updateButton?m("button",{disabled:l,key:"update-button",type:"submit",class:this.classes(x.esriButton,x.esriButtonSmall,x.esriButtonThird,{[x.buttonDisabled]:l})},this.messages.update):void 0,_=this.visibleElements.cancelUpdateButton?m("button",{disabled:o,key:"cancel-button",type:"button",bind:this,onclick:this._cancelForm,class:this.classes(x.esriButton,x.esriButtonSmall,x.esriButtonTertiary,x.esriButtonThird,{[x.buttonDisabled]:o})},this.messages.cancel):void 0,y=r.editing&&r.operations.update?m("fieldset",{key:"file",class:x.fileFieldset},m("span",{key:"file-name",class:x.fileName},u),m("label",{class:this.classes(x.fileLabel,x.esriButton,x.esriButtonSecondary)},this.messages.changeFile,m("input",{class:x.fileInput,type:"file",name:"attachment",bind:this,onchange:this._handleFileInputChange}))):void 0,v=m("fieldset",{key:"size",class:x.metadataFieldset},m("label",null,Eh(this.messagesUnits,h))),w=m("fieldset",{key:"content-type",class:x.metadataFieldset},m("label",null,d)),A=E(p)?m("a",{class:x.itemLink,href:p,rel:"noreferrer",target:"_blank"},this.renderImageMask(e,400),m("div",{class:x.itemLinkOverlay},m("span",{class:x.itemLinkOverlayIcon},m("calcite-icon",{icon:"launch"})))):this.renderImageMask(e,400),M=m("form",{bind:this,afterCreate:on,afterRemoved:Ir,"data-node-ref":"_updateAttachmentForm",onsubmit:P=>this._submitUpdateAttachment(P,e)},m("div",{class:x.metadata},v,w),y,m("div",{class:x.actions},g,_,f));return m("div",{key:"edit-form-container",class:x.formNode},A,M)}renderImageMask(e,t){return"file"in e?this.renderGenericImageMask(e.file.name,e.file.type):this.renderImageMaskForAttachment(e,t)}renderGenericImageMask(e,t){const{supportsResizeAttachments:s}=this.viewModel,n=np(t),o={[x.itemImageResizable]:s};return m("div",{class:this.classes(x.itemMaskIcon,x.itemMask)},m("img",{title:e,alt:e,src:n,class:this.classes(o,x.itemImage)}))}renderImageMaskForAttachment(e,t){const{supportsResizeAttachments:s}=this.viewModel,{contentType:n,name:o,url:r}=e;if(!s||!Xr(n))return this.renderGenericImageMask(o,n);const l=this._getCSSTransform(e),d=l?{transform:l,"image-orientation":"none"}:{},u=`${r}${r.includes("?")?"&":"?"}w=${t}`,h={[x.itemImageResizable]:s};return m("div",{class:this.classes(x.itemMask)},m("img",{styles:d,alt:o,title:o,src:u,class:this.classes(h,x.itemImage)}))}renderFile(e){const{file:t}=e;return m("li",{class:x.item,key:t},m("button",{key:"details-button",bind:this,class:x.itemButton,title:this.messages.attachmentDetails,"aria-label":this.messages.attachmentDetails,onclick:()=>this._startEditFile(e),type:"button"},this.renderImageMask(e),m("label",{class:x.itemLabel},m("span",{class:x.itemFilename},t.name||this.messages.noTitle),m("span",{"aria-hidden":"true",class:this.classes(x.itemChevronIcon,at(this.container)?x.iconLeft:x.iconRight)}))))}renderAttachmentInfo({attachmentInfo:e,displayType:t}){const{viewModel:s,effectiveDisplayType:n}=this,{abilities:o,supportsResizeAttachments:r}=s,{contentType:l,name:d,url:u}=e,h=this.renderImageMask(e,t==="list"?48:400),p=o.editing?m("span",{"aria-hidden":"true",class:this.classes(x.itemChevronIcon,at(this.container)?x.iconLeft:x.iconRight)}):null,g=[h,n==="preview"&&r&&Xr(l)?null:m("label",{class:x.itemLabel},m("span",{class:x.itemFilename},d||this.messages.noTitle),p)],f=o.editing?m("button",{key:"details-button",bind:this,class:x.itemButton,title:this.messages.attachmentDetails,"aria-label":this.messages.attachmentDetails,"data-attachment-info-id":e.id,onclick:()=>this._startEditAttachment(e),type:"button"},g):m("a",{key:"details-link",class:x.itemButton,href:u,target:"_blank"},g);return m("li",{class:x.item,key:e},f)}renderAttachmentContainer(){const{effectiveDisplayType:e,viewModel:t,visibleElements:s}=this,{attachmentInfos:n,abilities:o,fileInfos:r}=t,l=!!(n!=null&&n.length),d=!!(r!=null&&r.length),u={[x.containerList]:e!=="preview",[x.containerPreview]:e==="preview"},h=o.editing&&o.operations.add&&s.addButton?m("button",{bind:this,onclick:()=>this._startAddAttachment(),class:this.classes(x.esriButton,x.esriButtonTertiary,x.addAttachmentButton),type:"button"},m("span",{"aria-hidden":"true",class:this.classes(x.itemAddIcon,x.iconPlus)}),this.messages.add):void 0,p=l?m("ul",{key:"attachments-list",class:x.items},n.toArray().map(_=>this.renderAttachmentInfo({attachmentInfo:_,displayType:e}))):void 0,g=d?m("ul",{key:"file-list",class:x.items},r.toArray().map(_=>this.renderFile(_))):void 0,f=d||l?void 0:m("div",{class:x.empty},this.messages.noAttachments);return m("div",{key:"attachments-container",class:this.classes(x.container,u)},p,g,f,h)}_modeChanged(){this._set("error",null),this._set("selectedFile",null)}_handleFileInputChange(e){const t=e.target,s=t&&t.files&&t.files.item(0);this._set("selectedFile",s)}_submitDeleteAttachment(e,t){e.preventDefault(),"file"in t?this.deleteFile(t.file):this.deleteAttachment(t)}_submitAddAttachment(e){e.preventDefault(),this.viewModel.filesEnabled?this.addFile():this.addAttachment()}_submitUpdateAttachment(e,t){e.preventDefault(),"file"in t?this.updateFile():this.updateAttachment()}_startEditAttachment(e){const{viewModel:t}=this;t.activeFileInfo=null,t.activeAttachmentInfo=e,t.mode="edit"}_startEditFile(e){const{viewModel:t}=this;t.activeAttachmentInfo=null,t.activeFileInfo=e,t.mode="edit"}_startAddAttachment(){this.viewModel.mode="add"}_cancelForm(e){e.preventDefault(),this.viewModel.mode="view"}_getCSSTransform(e){const{orientationInfo:t}=e;return!this._supportsImageOrientation&&t?[t.rotation?`rotate(${t.rotation}deg)`:"",t.mirrored?"scaleX(-1)":""].join(" "):""}};a([c()],we.prototype,"abilities",null),a([c()],we.prototype,"displayType",void 0),a([c({readOnly:!0})],we.prototype,"effectiveDisplayType",null),a([c()],we.prototype,"graphic",null),a([c()],we.prototype,"label",null),a([c(),re("esri/widgets/Attachments/t9n/Attachments")],we.prototype,"messages",void 0),a([c(),re("esri/core/t9n/Units")],we.prototype,"messagesUnits",void 0),a([c({readOnly:!0})],we.prototype,"selectedFile",void 0),a([c({readOnly:!0})],we.prototype,"submitting",void 0),a([c({readOnly:!0})],we.prototype,"error",void 0),a([c({type:er})],we.prototype,"viewModel",void 0),a([c()],we.prototype,"visibleElements",void 0),a([be("visibleElements")],we.prototype,"castVisibleElements",null),we=a([C("esri.widgets.Attachments")],we);const op=we;let cs=class extends er{constructor(e){super(e),this.description=null,this.title=null}};a([c()],cs.prototype,"description",void 0),a([c()],cs.prototype,"title",void 0),cs=a([C("esri.widgets.Feature.FeatureAttachments.FeatureAttachmentsViewModel")],cs);const tr=cs,rp={heading:"esri-widget__heading"};function ir(i,e){const t=ap(i.level),s=`h${t}`;return delete i.level,m(s,{...i,class:jd(rp.heading,i.class),role:"heading","aria-level":String(t)},e)}function ap(i){return Gi(Math.ceil(i),1,6)}const qn={base:"esri-feature-element-info",title:"esri-feature-element-info__title",description:"esri-feature-element-info__description"};let Pi=class extends ue{constructor(e,t){super(e,t),this.description=null,this.headingLevel=2,this.title=null}render(){return m("div",{class:qn.base},this.renderTitle(),this.renderDescription())}renderTitle(){const{title:e}=this;return e?m(ir,{level:this.headingLevel,class:qn.title},e):null}renderDescription(){const{description:e}=this;return e?m("div",{key:"description",class:qn.description},e):null}};a([c()],Pi.prototype,"description",void 0),a([c()],Pi.prototype,"headingLevel",void 0),a([c()],Pi.prototype,"title",void 0),Pi=a([C("esri.widgets.Feature.support.FeatureElementInfo")],Pi);const Cn=Pi,lp={base:"esri-feature-attachments"};let et=class extends ue{constructor(e,t){super(e,t),this._featureElementInfo=null,this.attachmentsWidget=new op,this.headingLevel=2,this.viewModel=new tr}initialize(){this._featureElementInfo=new Cn,this.addHandles([I(()=>{var e,t;return[(e=this.viewModel)==null?void 0:e.description,(t=this.viewModel)==null?void 0:t.title,this.headingLevel]},()=>this._setupFeatureElementInfo(),H),I(()=>{var e;return(e=this.viewModel)==null?void 0:e.graphic},e=>this.attachmentsWidget.graphic=e,H)])}destroy(){this.attachmentsWidget.destroy(),this._featureElementInfo.destroy()}get description(){return this.viewModel.description}set description(e){this.viewModel.description=e}get displayType(){return this.attachmentsWidget.displayType}set displayType(e){this.attachmentsWidget.displayType=e}get graphic(){return this.viewModel.graphic}set graphic(e){this.viewModel.graphic=e}get title(){return this.viewModel.title}set title(e){this.viewModel.title=e}render(){var t;const{attachmentsWidget:e}=this;return m("div",{class:lp.base},(t=this._featureElementInfo)==null?void 0:t.render(),e==null?void 0:e.render())}_setupFeatureElementInfo(){const{description:e,title:t,headingLevel:s}=this;this._featureElementInfo.set({description:e,title:t,headingLevel:s})}};a([c({readOnly:!0})],et.prototype,"attachmentsWidget",void 0),a([c()],et.prototype,"description",null),a([c()],et.prototype,"displayType",null),a([c()],et.prototype,"graphic",null),a([c()],et.prototype,"headingLevel",void 0),a([c()],et.prototype,"title",null),a([c({type:tr})],et.prototype,"viewModel",void 0),et=a([C("esri.widgets.Feature.FeatureAttachments")],et);const cp=et;let Nt=class extends bn(z){constructor(e){super(e),this._loadingPromise=null,this.created=null,this.creator=null,this.destroyer=null,this.graphic=null,this.handles.add(I(()=>this.creator,t=>{this._destroyContent(),this._createContent(t)},H))}destroy(){this._destroyContent()}get state(){return this._loadingPromise?"loading":"ready"}_destroyContent(){const{created:e,graphic:t,destroyer:s}=this;e&&(un(s,{graphic:t}).catch(()=>null),this._set("created",null))}async _createContent(e){const{graphic:t}=this,s=un(e,{graphic:t}).catch(()=>null);this._loadingPromise=s,this.notifyChange("state");const n=await s;s===this._loadingPromise&&(this._loadingPromise=null,this.notifyChange("state"),this._set("created",n))}};a([c({readOnly:!0})],Nt.prototype,"created",void 0),a([c()],Nt.prototype,"creator",void 0),a([c()],Nt.prototype,"destroyer",void 0),a([c({type:ct})],Nt.prototype,"graphic",void 0),a([c({readOnly:!0})],Nt.prototype,"state",null),Nt=a([C("esri.widgets.Feature.FeatureContent.FeatureContentViewModel")],Nt);const hn=Nt;function Pe(){return function(i,e){if(!i[e])throw new TypeError(`Cannot auto bind undefined function '${e}'`);return{value:up(i[e])}}}function dp(i){const{type:e}=i;return i instanceof KeyboardEvent||e==="keyup"||e==="keydown"||e==="keypress"}function up(i){return function(e,...t){dp(e)?Wd(e.key)&&(e.preventDefault(),e.stopPropagation(),e.target.click()):i.call(this,e,...t)}}function sr(i){return e=>{e.hasOwnProperty("_delegatedEventNames")||(e._delegatedEventNames=e._delegatedEventNames?e._delegatedEventNames.slice():[]);const t=e._delegatedEventNames,s=Array.isArray(i)?i:hp(i);t.push(...s)}}function hp(i){return i.split(",").map(e=>e.trim())}const ic="calcite-theme-";function pp(){return getComputedStyle(document.body).getPropertyValue("--esri-calcite-theme-name").replace(/\s|'|"/g,"")}function pn(){return pp().startsWith("dark")}function mp(){return`${ic}${pn()?"dark":"light"}`}function gp(i){fp(i),i.classList.add(mp())}function fp(i){Array.from(i.classList).forEach(e=>{e.startsWith(ic)&&i.classList.remove(e)})}const Gn={base:"esri-feature-content",loaderContainer:"esri-feature-content__loader-container",loader:"esri-feature-content__loader"};let $i=class extends ue{constructor(e,t){super(e,t),this.viewModel=null,this._addTargetToAnchors=s=>{Array.from(s.querySelectorAll("a")).forEach(n=>{Kl(n.href)&&!n.hasAttribute("target")&&n.setAttribute("target","_blank")})}}get creator(){return this.viewModel.creator}set creator(e){this.viewModel.creator=e}get graphic(){return this.viewModel.graphic}set graphic(e){this.viewModel.graphic=e}renderLoading(){return m("div",{class:Gn.loaderContainer,key:"loader"},m("div",{class:Gn.loader}))}renderCreated(){var t;const e=(t=this.viewModel)==null?void 0:t.created;return e?e instanceof HTMLElement?m("div",{key:e,bind:e,afterCreate:this._attachToNode}):bl(e)?m("div",{key:e},!e.destroyed&&e.render()):m("div",{key:e,innerHTML:e,afterCreate:this._addTargetToAnchors}):null}render(){var t;const e=(t=this.viewModel)==null?void 0:t.state;return m("div",{class:Gn.base},e==="loading"?this.renderLoading():this.renderCreated())}_attachToNode(e){const t=this;e.appendChild(t)}};a([c()],$i.prototype,"creator",null),a([c()],$i.prototype,"graphic",null),a([c({type:hn})],$i.prototype,"viewModel",void 0),$i=a([C("esri.widgets.Feature.FeatureContent")],$i);const Gs=$i;let yt=class extends z{constructor(e){super(e),this.attributes=null,this.expressionInfos=null,this.description=null,this.fieldInfos=null,this.title=null}get formattedFieldInfos(){const{expressionInfos:e,fieldInfos:t}=this,s=[];return t==null||t.forEach(n=>{if(!(!n.hasOwnProperty("visible")||n.visible))return;const o=n.clone();o.label=Yl(o,e),s.push(o)}),s}};a([c()],yt.prototype,"attributes",void 0),a([c({type:[nu]})],yt.prototype,"expressionInfos",void 0),a([c()],yt.prototype,"description",void 0),a([c({type:[xl]})],yt.prototype,"fieldInfos",void 0),a([c({readOnly:!0})],yt.prototype,"formattedFieldInfos",null),a([c()],yt.prototype,"title",void 0),yt=a([C("esri.widgets.Feature.FeatureFields.FeatureFieldsViewModel")],yt);const En=yt,_p=[{pattern:/^\s*(https?:\/\/([^\s]+))\s*$/i,target:"_blank",label:"{messages.view}"},{pattern:/^\s*(tel:([^\s]+))\s*$/i,label:"{hierPart}"},{pattern:/^\s*(mailto:([^\s]+))\s*$/i,label:"{hierPart}"},{pattern:/^\s*(arcgis-appstudio-player:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"App Studio Player"},{pattern:/^\s*(arcgis-collector:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Collector"},{pattern:/^\s*(arcgis-explorer:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Explorer"},{pattern:/^\s*(arcgis-navigator:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Navigator"},{pattern:/^\s*(arcgis-survey123:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Survey123"},{pattern:/^\s*(arcgis-trek2there:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Trek2There"},{pattern:/^\s*(arcgis-workforce:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Workforce"},{pattern:/^\s*(iform:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"iForm"},{pattern:/^\s*(flow:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"FlowFinity"},{pattern:/^\s*(lfmobile:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Laserfische"},{pattern:/^\s*(mspbi:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Microsoft Power Bi"}];function yp(i){let e=null;return _p.some(t=>(t.pattern.test(i)&&(e=t),!!e)),e}function vp(i,e){if(typeof e!="string"||!e)return e;const t=yp(e);if(!t)return e;const s=e.match(t.pattern),n=s&&s[2],o=qi(qi(t.label,{messages:i,hierPart:n}),{appName:t.appName}),r=t.target?` target="${t.target}"`:"",l=t.target==="_blank"?' rel="noreferrer"':"";return e.replace(t.pattern,`<a${r} href="$1"${l}>${o}</a>`)}const Yi={base:"esri-feature-fields",fieldHeader:"esri-feature-fields__field-header",fieldData:"esri-feature-fields__field-data",fieldDataDate:"esri-feature-fields__field-data--date",esriTable:"esri-widget__table"};let je=class extends ue{constructor(e,t){super(e,t),this._featureElementInfo=null,this.viewModel=new En,this.messages=null,this.messagesURIUtils=null}initialize(){this._featureElementInfo=new Cn,this.addHandles(I(()=>{var e,t;return[(e=this.viewModel)==null?void 0:e.description,(t=this.viewModel)==null?void 0:t.title]},()=>this._setupFeatureElementInfo(),H))}destroy(){this._featureElementInfo.destroy()}get attributes(){return this.viewModel.attributes}set attributes(e){this.viewModel.attributes=e}get description(){return this.viewModel.description}set description(e){this.viewModel.description=e}get expressionInfos(){return this.viewModel.expressionInfos}set expressionInfos(e){this.viewModel.expressionInfos=e}get fieldInfos(){return this.viewModel.fieldInfos}set fieldInfos(e){this.viewModel.fieldInfos=e}get title(){return this.viewModel.title}set title(e){this.viewModel.title=e}renderFieldInfo(e,t){const{attributes:s}=this.viewModel,n=e.fieldName,o=e.label||n,r=s?s[n]==null?"":s[n]:"",l=!(!e.format||!e.format.dateFormat),d=typeof r=="number"&&!l?this._forceLTR(r):vp(this.messagesURIUtils,r),u={[Yi.fieldDataDate]:l};return m("tr",{key:`fields-element-info-row-${n}-${t}`},m("th",{key:`fields-element-info-row-header-${n}-${t}`,class:Yi.fieldHeader,innerHTML:o}),m("td",{key:`fields-element-info-row-data-${n}-${t}`,class:this.classes(Yi.fieldData,u),innerHTML:d}))}renderFields(){const{formattedFieldInfos:e}=this.viewModel;return e!=null&&e.length?m("table",{class:Yi.esriTable,summary:this.messages.fieldsSummary},m("tbody",null,e.map((t,s)=>this.renderFieldInfo(t,s)))):null}render(){var e;return m("div",{class:Yi.base},(e=this._featureElementInfo)==null?void 0:e.render(),this.renderFields())}_setupFeatureElementInfo(){const{description:e,title:t}=this;this._featureElementInfo.set({description:e,title:t})}_forceLTR(e){return`&lrm;${e}`}};a([c()],je.prototype,"attributes",null),a([c()],je.prototype,"description",null),a([c()],je.prototype,"expressionInfos",null),a([c()],je.prototype,"fieldInfos",null),a([c()],je.prototype,"title",null),a([c({type:En,nonNullable:!0})],je.prototype,"viewModel",void 0),a([c(),re("esri/widgets/Feature/t9n/Feature")],je.prototype,"messages",void 0),a([c(),re("esri/widgets/support/t9n/uriUtils")],je.prototype,"messagesURIUtils",void 0),je=a([C("esri.widgets.Feature.FeatureFields")],je);const sc=je,wp={maximumFractionDigits:20};function bp(i){return qo(i,wp)}const Mp="<",Ip=">",Cp=Tl("short-date");function Ep(i,e,t,s){let n="";e===0?n=`${Mp} `:e===t&&(n=`${Ip} `);let o=null;return o=s?rn(i,Cp):bp(i),n+o}const Tp=new Xt([64,64,64]);function xp(i,e){const t=[],s=i.length-1;return i.length===5?t.push(0,2,4):t.push(0,s),i.map((n,o)=>t.includes(o)?Ep(n,o,s,e):null)}async function kp(i,e,t){let s=!1,n=[],o=[];if(i.stops){const u=i.stops;n=u.map(h=>h.value),s=u.some(h=>!!h.label),s&&(o=u.map(h=>h.label))}const r=n[0],l=n[n.length-1];if(r==null&&l==null)return null;const d=s?null:xp(n,t);return(await Promise.all(n.map(async(u,h)=>({value:u,color:i.type==="opacity"?await Ap(u,i,e):(await T(()=>import("./UniqueValueRenderer-cd716182.js").then(p=>p.v),["assets/UniqueValueRenderer-cd716182.js","assets/cast-6d78d3c7.js","assets/typedArrayUtil-d02f10a8.js","assets/string-9c5e03f7.js","assets/Error-4ed679d7.js","assets/ensureType-d98e08e1.js","assets/nextTick-3ee5a785.js","assets/promiseUtils-930cba29.js","assets/symbols-64db5dd6.js","assets/CIMSymbol-a95ceb49.js","assets/enumeration-497ef064.js","assets/jsonMap-5afaf2ff.js","assets/Extent-d5fff12d.js","assets/fieldUtils-141b2ff2.js","assets/preload-helper-101896b7.js","assets/arcadeOnDemand-72c57f7a.js","assets/geometry-70b2a4a5.js","assets/Polyline-42dcc920.js","assets/typeUtils-b6c52390.js","assets/Symbol-1bb07043.js","assets/Color-b7b9e6bb.js","assets/colorUtils-639f4d25.js","assets/mathUtils-daf59e84.js","assets/common-701a4199.js","assets/screenUtils-7afeb41c.js","assets/opacityUtils-8b7acc4e.js","assets/aaBoundingBox-33fc923c.js","assets/request-e4299080.js","assets/persistableUrlUtils-d18becd9.js","assets/Collection-42fe629f.js","assets/Evented-b378ccab.js","assets/SimpleObservable-e0897cc6.js","assets/collectionUtils-3d8a9611.js","assets/Portal-fbb2b73d.js","assets/Loadable-b0d5bb7e.js","assets/Promise-6bd0b483.js","assets/locale-30120714.js","assets/PortalGroup-813428fa.js","assets/PortalUser-cf18ae9d.js","assets/Clonable-58355d3c.js","assets/LegendOptions-e31ff575.js","assets/reactiveUtils-b0e56010.js","assets/diffUtils-713e5c9b.js","assets/colorRamps-c00f504b.js","assets/sizeVariableUtils-d4870b0d.js","assets/Graphic-e4fb7090.js","assets/PopupTemplate-d6e0b369.js","assets/number-c7f1bfee.js","assets/Identifiable-57df9761.js","assets/jsonUtils-5115c7e5.js","assets/compilerUtils-eefea0ec.js","assets/lengthUtils-0dde2114.js","assets/unitUtils-b69647a1.js","assets/jsonUtils-b1b224a3.js","assets/styleUtils-0c73f570.js"])).getColor(i,u),label:s?o[h]:d[h]})))).reverse()}async function Ap(i,e,t=Tp){const s=new Xt(t),n=(await T(()=>import("./UniqueValueRenderer-cd716182.js").then(o=>o.v),["assets/UniqueValueRenderer-cd716182.js","assets/cast-6d78d3c7.js","assets/typedArrayUtil-d02f10a8.js","assets/string-9c5e03f7.js","assets/Error-4ed679d7.js","assets/ensureType-d98e08e1.js","assets/nextTick-3ee5a785.js","assets/promiseUtils-930cba29.js","assets/symbols-64db5dd6.js","assets/CIMSymbol-a95ceb49.js","assets/enumeration-497ef064.js","assets/jsonMap-5afaf2ff.js","assets/Extent-d5fff12d.js","assets/fieldUtils-141b2ff2.js","assets/preload-helper-101896b7.js","assets/arcadeOnDemand-72c57f7a.js","assets/geometry-70b2a4a5.js","assets/Polyline-42dcc920.js","assets/typeUtils-b6c52390.js","assets/Symbol-1bb07043.js","assets/Color-b7b9e6bb.js","assets/colorUtils-639f4d25.js","assets/mathUtils-daf59e84.js","assets/common-701a4199.js","assets/screenUtils-7afeb41c.js","assets/opacityUtils-8b7acc4e.js","assets/aaBoundingBox-33fc923c.js","assets/request-e4299080.js","assets/persistableUrlUtils-d18becd9.js","assets/Collection-42fe629f.js","assets/Evented-b378ccab.js","assets/SimpleObservable-e0897cc6.js","assets/collectionUtils-3d8a9611.js","assets/Portal-fbb2b73d.js","assets/Loadable-b0d5bb7e.js","assets/Promise-6bd0b483.js","assets/locale-30120714.js","assets/PortalGroup-813428fa.js","assets/PortalUser-cf18ae9d.js","assets/Clonable-58355d3c.js","assets/LegendOptions-e31ff575.js","assets/reactiveUtils-b0e56010.js","assets/diffUtils-713e5c9b.js","assets/colorRamps-c00f504b.js","assets/sizeVariableUtils-d4870b0d.js","assets/Graphic-e4fb7090.js","assets/PopupTemplate-d6e0b369.js","assets/number-c7f1bfee.js","assets/Identifiable-57df9761.js","assets/jsonUtils-5115c7e5.js","assets/compilerUtils-eefea0ec.js","assets/lengthUtils-0dde2114.js","assets/unitUtils-b69647a1.js","assets/jsonUtils-b1b224a3.js","assets/styleUtils-0c73f570.js"])).getOpacity(e,i);return n!=null&&(s.a=n),s}function Pp(i){if(!i.colorStops)return[];const e=[...i.colorStops].filter(s=>{var n;return((n=s.color)==null?void 0:n.a)>0});let t=e.length-1;if(e&&e[0]){const s=e[t];s&&s.ratio!==1&&(e.push(new fu({ratio:1,color:s.color})),t++)}return e.map((s,n)=>{var r,l;let o="";return n===0?o=((r=i.legendOptions)==null?void 0:r.minLabel)||"low":n===t&&(o=((l=i.legendOptions)==null?void 0:l.maxLabel)||"high"),{color:s.color,label:o,ratio:s.ratio}}).reverse()}B.getLogger("esri.renderers.support.utils");async function Le(i,e,t){bd(i,e,()=>[]).push(...t)}async function $p(i){var t,s;const e=new Map;if(!i)return e;if("visualVariables"in i&&i.visualVariables){const n=i.visualVariables.filter(o=>o.type==="color");for(const o of n){const r=(await kp(o)).map(l=>l.color);await Le(e,o.field||o.valueExpression,r)}}if(i.type==="heatmap"){const n=Pp(i).map(o=>o.color);await Le(e,i.field||i.valueExpression,n)}else if(i.type==="pie-chart"){for(const n of i.attributes)await Le(e,n.field||n.valueExpression,[n.color]);await Le(e,"default",[(t=i==null?void 0:i.othersCategory)==null?void 0:t.color,Ii(i.backgroundFillSymbol,null)])}else if(i.type==="dot-density"){for(const n of i.attributes)await Le(e,n.field||n.valueExpression,[n.color]);await Le(e,"default",[i.backgroundColor])}else if(i.type==="unique-value")if(((s=i.authoringInfo)==null?void 0:s.type)==="predominance")for(const n of i.uniqueValueInfos??[])await Le(e,n.value.toString(),[Ii(n.symbol,null)]);else{const n=(i.uniqueValueInfos??[]).map(u=>Ii(u.symbol,null)),{field:o,field2:r,field3:l,valueExpression:d}=i;(o||d)&&await Le(e,o||d,n),r&&await Le(e,r,n),l&&await Le(e,l,n)}else if(i.type==="class-breaks"){const n=i.classBreakInfos.map(l=>Ii(l.symbol,null)),{field:o,valueExpression:r}=i;await Le(e,o??r,n)}else i.type==="simple"&&await Le(e,"default",[Ii(i.symbol,null)]);return"defaultSymbol"in i&&i.defaultSymbol&&await Le(e,"default",[Ii(i.defaultSymbol,null)]),e.forEach((n,o)=>{const r=kd(n.filter(Boolean),(l,d)=>JSON.stringify(l)===JSON.stringify(d));e.set(o,r)}),e}const Sp="esri.widgets.Feature.support.relatedFeatureUtils",ta=B.getLogger(Sp),ia=new Map;function To(i){if(!Tt(i))return null;const[e,t]=i.split("/").slice(1);return{layerId:e,fieldName:t}}function Rp(i,e){if(!e.relationships)return null;let t=null;const{relationships:s}=e;return s.some(n=>n.id===parseInt(i,10)&&(t=n,!0)),t}function Lp({originRelationship:i,relationships:e,layerId:t}){let s;return e&&e.some(n=>(`${n.relatedTableId}`===t&&n.id===i.id&&(s=n),!!s)),s}function Fp(i,e){const t=e.toLowerCase();for(const s in i)if(s.toLowerCase()===t)return i[s];return null}function Op(i,e){const t=Rp(i,e);if(t)return{url:`${e.url}/${t.relatedTableId}`,sourceSpatialReference:e.spatialReference,relation:t,relatedFields:[],outStatistics:[]}}function Dp(i,e){if(!e||!i)return;const{features:t,statsFeatures:s}=i,n=t&&t.value;e.relatedFeatures=n?n.features:[];const o=s&&s.value;e.relatedStatsFeatures=o?o.features:[]}function Vp(i,e,t,s){const n=new po;return n.outFields=["*"],n.relationshipId=typeof e.id=="number"?e.id:parseInt(e.id,10),n.objectIds=[i.attributes[t.objectIdField]],t.queryRelatedFeatures(n,s)}function Np(i,e,t){let s=0;const n=[];for(;s<e.length;)n.push(`${i} IN (${e.slice(s,t+s)})`),s+=t;return n.join(" OR ")}async function zp(i,e,t,s){const n=t.layerId.toString(),{layerInfo:o,relation:r,relatedFields:l,outStatistics:d,url:u,sourceSpatialReference:h}=e,p=Lp({originRelationship:r,relationships:o.relationships,layerId:n});if(p.relationshipTableId&&p.keyFieldInRelationshipTable){const f=(await Vp(i,p,t,s))[i.attributes[t.objectIdField]];if(!f)return null;const _=f.features.map(y=>y.attributes[o.objectIdField]);if((d==null?void 0:d.length)>0&&o.supportsStatistics){const y=new On;y.where=Np(o.objectIdField,_,1e3),y.outFields=l,y.outStatistics=d,y.sourceSpatialReference=h;const v={features:Promise.resolve(f),statsFeatures:Ln(u,y)};return ei(v)}}const g=p==null?void 0:p.keyField;if(g){const f=iu(Gp(o.fields,g)),_=Fp(i.attributes,r.keyField),y=f?`${g}=${_}`:`${g}='${_}'`,v=Ln(u,new On({where:y,outFields:e.relatedFields,sourceSpatialReference:h}),s),w=e.outStatistics&&e.outStatistics.length>0&&o.supportsStatistics?Ln(u,new On({where:y,outFields:e.relatedFields,outStatistics:e.outStatistics,sourceSpatialReference:h}),s):null,A={features:v};return w&&(A.statsFeatures=w),ei(A)}return null}function Bp(i,e){return yl(i,{query:{f:"json"},signal:e&&e.signal})}function Up({relatedInfos:i,layer:e},t){const s={};return i.forEach((n,o)=>{const{relation:r}=n;if(!r){const p=new $("relation-required","A relation is required on a layer to retrieve related records.");throw ta.error(p),p}const{relatedTableId:l}=r;if(typeof l!="number"){const p=new $("A related table ID is required on a layer to retrieve related records.");throw ta.error(p),p}const d=`${e.url}/${l}`,u=ia.get(d),h=u||Bp(d,t);u||ia.set(d,h),s[o]=h}),ei(s)}function Hp({graphic:i,relatedInfos:e,layer:t},s){const n={};return e.forEach((o,r)=>{o.layerInfo&&(n[r]=zp(i,o,t,s))}),ei(n)}function qp({relatedInfo:i,fieldName:e,fieldInfo:t}){if(i.relatedFields.push(e),t.statisticType){const s=new _u({statisticType:t.statisticType,onStatisticField:e,outStatisticFieldName:e});i.outStatistics.push(s)}}function Gp(i,e){if(i!=null){e=e.toLowerCase();for(const t of i)if(t&&t.name.toLowerCase()===e)return t}return null}const sa={chartAnimation:!0};let le=class extends z{constructor(e){super(e),this.abilities={...sa},this.activeMediaInfoIndex=0,this.attributes=null,this.description=null,this.fieldInfoMap=null,this.formattedAttributes=null,this.expressionAttributes=null,this.layer=null,this.mediaInfos=null,this.popupTemplate=null,this.relatedInfos=null,this.title=null}castAbilities(e){return{...sa,...e}}get activeMediaInfo(){return this.formattedMediaInfos[this.activeMediaInfoIndex]||null}get formattedMediaInfos(){return this._formatMediaInfos()||[]}get formattedMediaInfoCount(){return this.formattedMediaInfos.length}setActiveMedia(e){this._setContentElementMedia(e)}next(){this._pageContentElementMedia(1)}previous(){this._pageContentElementMedia(-1)}_setContentElementMedia(e){const{formattedMediaInfoCount:t}=this,s=(e+t)%t;this.activeMediaInfoIndex=s}_pageContentElementMedia(e){const{activeMediaInfoIndex:t}=this,s=t+e;this._setContentElementMedia(s)}_formatMediaInfos(){const{attributes:e,mediaInfos:t,formattedAttributes:s,expressionAttributes:n,fieldInfoMap:o,layer:r}=this;return t==null?void 0:t.map(l=>{const d=l==null?void 0:l.clone();if(!d)return null;if(d.title=yi({attributes:e,fieldInfoMap:o,globalAttributes:s,expressionAttributes:n,layer:r,text:d.title}),d.caption=yi({attributes:e,fieldInfoMap:o,globalAttributes:s,expressionAttributes:n,layer:r,text:d.caption}),d.altText=yi({attributes:e,fieldInfoMap:o,globalAttributes:s,expressionAttributes:n,layer:r,text:d.altText}),d.type==="image"){const{value:u}=d;return this._setImageValue({value:u,formattedAttributes:s,layer:r}),d.value.sourceURL?d:void 0}if(d.type==="pie-chart"||d.type==="line-chart"||d.type==="column-chart"||d.type==="bar-chart"){const{value:u}=d;return this._setChartValue({value:u,chartType:d.type,attributes:e,formattedAttributes:s,layer:r,expressionAttributes:n}),d}return null}).filter(Boolean)}_setImageValue(e){const{fieldInfoMap:t}=this,{value:s,formattedAttributes:n,layer:o}=e,{linkURL:r,sourceURL:l}=s;if(l){const d=Eo(l,o);s.sourceURL=Co({formattedAttributes:n,template:d,fieldInfoMap:t})}if(r){const d=Eo(r,o);s.linkURL=Co({formattedAttributes:n,template:d,fieldInfoMap:t})}}_setChartValue(e){const{value:t,attributes:s,formattedAttributes:n,chartType:o,layer:r,expressionAttributes:l}=e,{popupTemplate:d,relatedInfos:u}=this,{fields:h,normalizeField:p}=t;if(t.fields=Dh(h,r),p&&(t.normalizeField=Ms(p,r)),!h.some(f=>!!(n[f]!=null||Tt(f)&&u.size)))return;const g=d==null?void 0:d.fieldInfos;h.forEach(f=>{if(Tt(f))return void(t.series=[...t.series,...this._getRelatedChartInfos({fieldInfos:g,fieldName:f,formattedAttributes:n,chartType:o,value:t})]);const _=this._getChartOption({value:t,attributes:s,chartType:o,formattedAttributes:n,expressionAttributes:l,fieldName:f,fieldInfos:g});t.series.push(_)})}_getRelatedChartInfos(e){var y;const{fieldInfos:t,fieldName:s,formattedAttributes:n,chartType:o,value:r}=e,l=[],d=To(s),{layerId:u,fieldName:h}=d,p=(y=this.relatedInfos)==null?void 0:y.get(u.toString());if(!p)return l;const{relatedFeatures:g,relation:f}=p;if(!f||!g)return l;const{cardinality:_}=f;return g.forEach(v=>{const{attributes:w}=v;w&&Object.keys(w).forEach(A=>{A===h&&l.push(this._getChartOption({value:r,attributes:w,formattedAttributes:n,fieldName:s,chartType:o,relatedFieldName:A,fieldInfos:t}))})}),_==="one-to-many"||_==="many-to-many"?l:[l[0]]}_getTooltip({label:e,value:t,chartType:s}){return s==="pie-chart"?`${e}`:`${e}: ${t}`}_getChartOption(e){var L;const{value:t,attributes:s,formattedAttributes:n,expressionAttributes:o,fieldName:r,relatedFieldName:l,fieldInfos:d,chartType:u}=e,{layer:h,fieldInfoMap:p}=this,{normalizeField:g,tooltipField:f}=t,_=g?Tt(g)?s[To(g).fieldName]:s[g]:null,y=Qo(r)&&o&&o[r]!==void 0?o[r]:l&&s[l]!==void 0?s[l]:s[r]!==void 0?s[r]:n[r],v=new ou({fieldName:r,value:y===void 0?null:y&&_?y/_:y});if(Tt(r)){const k=p.get(r.toLowerCase()),Y=p.get(f.toLowerCase()),ge=(k==null?void 0:k.fieldName)??r,ve=n[(Y==null?void 0:Y.fieldName)??f]??(k==null?void 0:k.label)??(k==null?void 0:k.fieldName)??l,Me=n[ge];return v.tooltip=this._getTooltip({label:ve,value:Me,chartType:u}),v}const w=Jl(d,r),A=Ms(r,h),M=f&&n[f]!==void 0?n[f]:Yl(w||new xl({fieldName:A}),(L=this.popupTemplate)==null?void 0:L.expressionInfos),P=n[A];return v.tooltip=this._getTooltip({label:M,value:P,chartType:u}),v}};a([c()],le.prototype,"abilities",void 0),a([be("abilities")],le.prototype,"castAbilities",null),a([c()],le.prototype,"activeMediaInfoIndex",void 0),a([c({readOnly:!0})],le.prototype,"activeMediaInfo",null),a([c()],le.prototype,"attributes",void 0),a([c()],le.prototype,"description",void 0),a([c()],le.prototype,"fieldInfoMap",void 0),a([c()],le.prototype,"formattedAttributes",void 0),a([c()],le.prototype,"expressionAttributes",void 0),a([c({readOnly:!0})],le.prototype,"formattedMediaInfos",null),a([c()],le.prototype,"layer",void 0),a([c({readOnly:!0})],le.prototype,"formattedMediaInfoCount",null),a([c()],le.prototype,"mediaInfos",void 0),a([c()],le.prototype,"popupTemplate",void 0),a([c()],le.prototype,"relatedInfos",void 0),a([c()],le.prototype,"title",void 0),le=a([C("esri.widgets.Feature.FeatureMedia.FeatureMediaViewModel")],le);const vi=le;var na=["#ffffff","#858585","#ffbebe","#ffebbe","#ffebaf","#ffffbe","#e9ffbe","#d3ffbe","#beffe8","#bee8ff","#bed2ff","#e8beff","#ffbee8","#ebebeb","#707070","#ff7f7f","#ffa77f","#ffd37f","#ffff73","#d1ff73","#a3ff73","#73ffdf","#73dfff","#73b2ff","#df73ff","#ff73df","#d6d6d6","#5c5c5c","#ff0000","#ff5500","#ffaa00","#ffff00","#aaff00","#55ff00","#00ffc5","#00c5ff","#0070ff","#c500ff","#ff00c5","#c2c2c2","#474747","#e60000","#e64c00","#e69800","#e6e600","#98e600","#4ce600","#00e6a9","#00a9e6","#005ce6","#a900e6","#e600a9","#adadad","#242424","#a80000","#a83800","#a87000","#a8a800","#70a800","#38a800","#00a884","#0084a8","#004da8","#8400a8","#a80084","#999999","#1a1a1a","#730000","#732600","#734c00","#737300","#4c7300","#267300","#00734c","#004c73","#002673","#4c0073","#73004"],jp=[].concat(na.slice(30,39),na.slice(28,30).reverse()),Wp=[{name:"default",colors:jp},{name:"cat-dark",colors:["#ed5151","#149ece","#a7c636","#9e559c","#fc921f","#ffde3e","#f789d8","#b7814a","#3caf99","#6b6bd6","#b54779","#7f7f7f"]},{name:"tropical-bliss",colors:["#fce138","#ff9399","#fcd27e","#f1983c","#a553b7","#b1a9d0","#6ecffc","#4c81cd","#fc6f84","#fc3e5a","#6af689","#48885c"]},{name:"desert-blooms",colors:["#102432","#144d59","#ffc730","#ed9310","#a64f1b","#661510","#d9351a","#b31515","#4a0932","#8c213f","#18382e","#2c6954"]},{name:"under-the-sea",colors:["#bf9727","#607100","#00734c","#704489","#01acca","#024e76","#f09100","#ea311f","#c6004b","#7570b3","#666666","#333333"]},{name:"vibrant-rainbow",colors:["#fffb00","#f5cb11","#9fd40c","#46e39c","#32b8a6","#7ff2fa","#ac08cc","#dd33ff","#eb7200","#e8a784","#bf2e2e","#6c7000"]},{name:"ocean-bay",colors:["#191921","#11495c","#78b1c2","#454f4b","#8f8f82","#9be0c0","#87b051","#f7ec88","#ebdcc1","#dbb658","#c43541","#75351e"]},{name:"prairie-summer",colors:["#332424","#751555","#d47013","#d68989","#211173","#82aad6","#7bfaeb","#6ec9a8","#6b6408","#eada40","#ccc54a","#1fc235"]},{name:"pastel-chalk",colors:["#fffd99","#f5e6a4","#c1d48c","#b8e3d0","#a0b8b5","#cbf7fa","#d791f2","#dfc1eb","#f2b983","#e8c4b2","#bf8e8e","#94995c"]},{name:"seq-yellow-orange-red-bright",colors:["#910000","#b1260b","#c0370f","#e05919","#ef6a1d","#ff7b22","#ffa143","#ffb454","#ffda74","#ffed85"]},{name:"seq-reds-bright",colors:["#57453b","#7b4238","#9f4036","#c23d33","#d7483c","#ec5244","#f3696c","#f9816c","#ffc4ae","#fff0dc"]},{name:"seq-purples-bright",colors:["#4e465c","#5a4a78","#695291","#775baa","#8663c3","#946bdc","#aa89e8","#c1a6f3","#d7c4ff","#e6e1ff"]},{name:"seq-blues-bright",colors:["#404d54","#435c6c","#48799d","#4b88b6","#4d96ce","#50a5e7","#74bbed","#98d0f3","#bce6f9","#e6faff"]},{name:"seq-greens-bright",colors:["#39544c","#386757","#368165","#359b73","#33b581","#4bc392","#64d2a2","#7ce0b3","#cbf6d9","#f4ffea"]},{name:"seq-browns-bright",colors:["#524834","#715b38","#8f6e3c","#ae8140","#cc9444","#eba748","#eeb664","#f0c47f","#f9e0b7","#fff8eb"]}];const oa="en-us",nr=new Map([["ar",()=>T(()=>import("./ar-7e4d7001.js"),["assets/ar-7e4d7001.js","assets/_commonjsHelpers-a430e9ea.js"]).then(i=>i.a)],["bg-bg",()=>T(()=>import("./bg_BG-fa0eaeae.js"),["assets/bg_BG-fa0eaeae.js","assets/_commonjsHelpers-a430e9ea.js"]).then(i=>i.b)],["bs-ba",()=>T(()=>import("./bs_BA-4f949e9b.js"),["assets/bs_BA-4f949e9b.js","assets/_commonjsHelpers-a430e9ea.js"]).then(i=>i.b)],["ca-es",()=>T(()=>import("./ca_ES-ac250c21.js"),["assets/ca_ES-ac250c21.js","assets/_commonjsHelpers-a430e9ea.js"]).then(i=>i.c)],["cs-cz",()=>T(()=>import("./cs_CZ-41aa2dde.js"),["assets/cs_CZ-41aa2dde.js","assets/_commonjsHelpers-a430e9ea.js"]).then(i=>i.c)],["da-dk",()=>T(()=>import("./da_DK-3cc83778.js"),["assets/da_DK-3cc83778.js","assets/_commonjsHelpers-a430e9ea.js"]).then(i=>i.d)],["de-de",()=>T(()=>import("./de_DE-7cf156b8.js"),["assets/de_DE-7cf156b8.js","assets/_commonjsHelpers-a430e9ea.js"]).then(i=>i.d)],["de-ch",()=>T(()=>import("./de_CH-b40119c2.js"),["assets/de_CH-b40119c2.js","assets/_commonjsHelpers-a430e9ea.js"]).then(i=>i.d)],["el-gr",()=>T(()=>import("./el_GR-f5b4e421.js"),["assets/el_GR-f5b4e421.js","assets/_commonjsHelpers-a430e9ea.js"]).then(i=>i.e)],["en-us",()=>T(()=>import("./en_US-b653138f.js"),["assets/en_US-b653138f.js","assets/_commonjsHelpers-a430e9ea.js"]).then(i=>i.e)],["en-ca",()=>T(()=>import("./en_CA-b653138f.js"),["assets/en_CA-b653138f.js","assets/_commonjsHelpers-a430e9ea.js"]).then(i=>i.e)],["es-es",()=>T(()=>import("./es_ES-21713ea8.js"),["assets/es_ES-21713ea8.js","assets/_commonjsHelpers-a430e9ea.js"]).then(i=>i.e)],["et-ee",()=>T(()=>import("./et_EE-7e4a5525.js"),["assets/et_EE-7e4a5525.js","assets/_commonjsHelpers-a430e9ea.js"]).then(i=>i.e)],["fi-fi",()=>T(()=>import("./fi_FI-9ff24319.js"),["assets/fi_FI-9ff24319.js","assets/_commonjsHelpers-a430e9ea.js"]).then(i=>i.f)],["fr-fr",()=>T(()=>import("./fr_FR-51c37695.js"),["assets/fr_FR-51c37695.js","assets/_commonjsHelpers-a430e9ea.js"]).then(i=>i.f)],["he-il",()=>T(()=>import("./he_IL-5c441159.js"),["assets/he_IL-5c441159.js","assets/_commonjsHelpers-a430e9ea.js"]).then(i=>i.h)],["hr-hr",()=>T(()=>import("./hr_HR-f42ffa87.js"),["assets/hr_HR-f42ffa87.js","assets/_commonjsHelpers-a430e9ea.js"]).then(i=>i.h)],["hu-hu",()=>T(()=>import("./hu_HU-5fba6ab9.js"),["assets/hu_HU-5fba6ab9.js","assets/_commonjsHelpers-a430e9ea.js"]).then(i=>i.h)],["id-id",()=>T(()=>import("./id_ID-981fbb86.js"),["assets/id_ID-981fbb86.js","assets/_commonjsHelpers-a430e9ea.js"]).then(i=>i.i)],["it-it",()=>T(()=>import("./it_IT-c635b784.js"),["assets/it_IT-c635b784.js","assets/_commonjsHelpers-a430e9ea.js"]).then(i=>i.i)],["ja-jp",()=>T(()=>import("./ja_JP-e2cf7b21.js"),["assets/ja_JP-e2cf7b21.js","assets/_commonjsHelpers-a430e9ea.js"]).then(i=>i.j)],["ko-kr",()=>T(()=>import("./ko_KR-32aae4f2.js"),["assets/ko_KR-32aae4f2.js","assets/_commonjsHelpers-a430e9ea.js"]).then(i=>i.k)],["lt-lt",()=>T(()=>import("./lt_LT-3c0b9d54.js"),["assets/lt_LT-3c0b9d54.js","assets/_commonjsHelpers-a430e9ea.js"]).then(i=>i.l)],["lv-lv",()=>T(()=>import("./lv_LV-c1cc4a4c.js"),["assets/lv_LV-c1cc4a4c.js","assets/_commonjsHelpers-a430e9ea.js"]).then(i=>i.l)],["nb-no",()=>T(()=>import("./nb_NO-5958d98d.js"),["assets/nb_NO-5958d98d.js","assets/_commonjsHelpers-a430e9ea.js"]).then(i=>i.n)],["nl-nl",()=>T(()=>import("./nl_NL-004b20fd.js"),["assets/nl_NL-004b20fd.js","assets/_commonjsHelpers-a430e9ea.js"]).then(i=>i.n)],["pl-pl",()=>T(()=>import("./pl_PL-d6d01c5e.js"),["assets/pl_PL-d6d01c5e.js","assets/_commonjsHelpers-a430e9ea.js"]).then(i=>i.p)],["pt-br",()=>T(()=>import("./pt_BR-a08a6ce1.js"),["assets/pt_BR-a08a6ce1.js","assets/_commonjsHelpers-a430e9ea.js"]).then(i=>i.p)],["pt-pt",()=>T(()=>import("./pt_PT-d532c840.js"),["assets/pt_PT-d532c840.js","assets/_commonjsHelpers-a430e9ea.js"]).then(i=>i.p)],["ro-ro",()=>T(()=>import("./ro_RO-e4007f77.js"),["assets/ro_RO-e4007f77.js","assets/_commonjsHelpers-a430e9ea.js"]).then(i=>i.r)],["ru-ru",()=>T(()=>import("./ru_RU-905ac2e8.js"),["assets/ru_RU-905ac2e8.js","assets/_commonjsHelpers-a430e9ea.js"]).then(i=>i.r)],["sk-sk",()=>T(()=>import("./sk_SK-cae815ce.js"),["assets/sk_SK-cae815ce.js","assets/_commonjsHelpers-a430e9ea.js"]).then(i=>i.s)],["sl-sl",()=>T(()=>import("./sl_SL-50353bbe.js"),["assets/sl_SL-50353bbe.js","assets/_commonjsHelpers-a430e9ea.js"]).then(i=>i.s)],["sr-rs",()=>T(()=>import("./sr_RS-9a9b8450.js"),["assets/sr_RS-9a9b8450.js","assets/_commonjsHelpers-a430e9ea.js"]).then(i=>i.s)],["sv-se",()=>T(()=>import("./sv_SE-346c1643.js"),["assets/sv_SE-346c1643.js","assets/_commonjsHelpers-a430e9ea.js"]).then(i=>i.s)],["th-th",()=>T(()=>import("./th_TH-210af5ed.js"),["assets/th_TH-210af5ed.js","assets/_commonjsHelpers-a430e9ea.js"]).then(i=>i.t)],["tr-tr",()=>T(()=>import("./tr_TR-855c517f.js"),["assets/tr_TR-855c517f.js","assets/_commonjsHelpers-a430e9ea.js"]).then(i=>i.t)],["uk-ua",()=>T(()=>import("./uk_UA-7de21af4.js"),["assets/uk_UA-7de21af4.js","assets/_commonjsHelpers-a430e9ea.js"]).then(i=>i.u)],["vi-vn",()=>T(()=>import("./vi_VN-f87f03fa.js"),["assets/vi_VN-f87f03fa.js","assets/_commonjsHelpers-a430e9ea.js"]).then(i=>i.v)],["zh-cn",()=>T(()=>import("./zh_Hans-79f10982.js"),["assets/zh_Hans-79f10982.js","assets/_commonjsHelpers-a430e9ea.js"]).then(i=>i.z)],["zh-hk",()=>T(()=>import("./zh_Hant-abc409cd.js"),["assets/zh_Hant-abc409cd.js","assets/_commonjsHelpers-a430e9ea.js"]).then(i=>i.z)],["zh-tw",()=>T(()=>import("./zh_Hant-abc409cd.js"),["assets/zh_Hant-abc409cd.js","assets/_commonjsHelpers-a430e9ea.js"]).then(i=>i.z)]]);function Zp(i){const e=i.split("-")[0].toLowerCase();let t=null;for(const s of nr.keys())if(s.startsWith(e)){t=s;break}return t}function Kp(i){return i?nr.has(i.toLowerCase())?i.toLowerCase():Zp(i)||oa:oa}let Ti,Qi;async function Yp(i=Cu()){if(i=Kp(i),Ti&&i===Qi)return Ti;Ti=T(()=>import("./index-3c8f1bc3.js"),["assets/index-3c8f1bc3.js","assets/_commonjsHelpers-a430e9ea.js"]).then(e=>e.i),Qi=i;try{const[e,t]=await Promise.all([Ti,nr.get(Qi)()]);Qi===i&&(e.am4core.options.defaultLocale=t.default),e.am4core.options.suppressWarnings=!0,e.am4core.options.autoDispose=!0}catch{return Ti=null,Qi=null,null}return Ti}function Qp(i,e="default"){const t=Wp.find(s=>s.name===e);return t?t.colors.map(s=>i.color(s)):null}const te={base:"esri-feature-media",mediaContainer:"esri-feature-media__container",mediaItemContainer:"esri-feature-media__item-container",mediaItem:"esri-feature-media__item",mediaItemTitle:"esri-feature-media__item-title",mediaItemCaption:"esri-feature-media__item-caption",mediaPrevious:"esri-feature-media__previous",mediaPreviousIconLTR:"esri-feature-media__previous-icon",mediaPreviousIconRTL:"esri-feature-media__previous-icon--rtl",mediaNext:"esri-feature-media__next",mediaNextIconLTR:"esri-feature-media__next-icon",mediaNextIconRTL:"esri-feature-media__next-icon--rtl",mediaChart:"esri-feature-media__chart",mediaButton:"esri-feature-media__button",mediaIcon:"esri-feature-media__icon",iconLeftTriangleArrow:"esri-icon-left-triangle-arrow",iconRightTriangleArrow:"esri-icon-right-triangle-arrow"},jn=.05,Wn=.95,Zn=15,ut="color",$t="tooltip",Ji="value",ra="default-line-value";let ke=class extends ue{constructor(e,t){super(e,t),this._refreshTimer=null,this._refreshIntervalInfo=null,this._featureElementInfo=null,this.viewModel=new vi,this.messages=null,this._getChartDependencies=async s=>{const n=await Yp(),{destroyed:o,viewModel:r}=this;if(o||!r||!s)return;const{activeMediaInfo:l}=r,d=await this._getRendererColors(n);this._renderChart({chartDiv:s,mediaInfo:l,chartsModule:n,colorMap:d})}}initialize(){this._featureElementInfo=new Cn,this.addHandles([I(()=>{var e,t;return[(e=this.viewModel)==null?void 0:e.activeMediaInfo,(t=this.viewModel)==null?void 0:t.activeMediaInfoIndex]},()=>this._setupMediaRefreshTimer(),H),I(()=>{var e,t;return[(e=this.viewModel)==null?void 0:e.description,(t=this.viewModel)==null?void 0:t.title]},()=>this._setupFeatureElementInfo(),H)])}destroy(){this._clearMediaRefreshTimer(),this._featureElementInfo.destroy()}get attributes(){return this.viewModel.attributes}set attributes(e){this.viewModel.attributes=e}get activeMediaInfoIndex(){return this.viewModel.activeMediaInfoIndex}set activeMediaInfoIndex(e){this.viewModel.activeMediaInfoIndex=e}get description(){return this.viewModel.description}set description(e){this.viewModel.description=e}get fieldInfoMap(){return this.viewModel.fieldInfoMap}set fieldInfoMap(e){this.viewModel.fieldInfoMap=e}get layer(){return this.viewModel.layer}set layer(e){this.viewModel.layer=e}get mediaInfos(){return this.viewModel.mediaInfos}set mediaInfos(e){this.viewModel.mediaInfos=e}get popupTemplate(){return this.viewModel.popupTemplate}set popupTemplate(e){this.viewModel.popupTemplate=e}get relatedInfos(){return this.viewModel.relatedInfos}set relatedInfos(e){this.viewModel.relatedInfos=e}get title(){return this.viewModel.title}set title(e){this.viewModel.title=e}render(){var e;return m("div",{bind:this,class:te.base,onkeyup:this._handleMediaKeyup},(e=this._featureElementInfo)==null?void 0:e.render(),this.renderMedia())}renderMedia(){const{formattedMediaInfoCount:e}=this.viewModel;return e?m("div",{key:"media-element-container",class:te.mediaContainer},this.renderMediaPageButton("previous"),this.renderMediaInfo(),this.renderMediaPageButton("next")):null}renderImageMediaInfo(e){const{_refreshIntervalInfo:t}=this,{activeMediaInfoIndex:s,formattedMediaInfoCount:n}=this.viewModel,{value:o,refreshInterval:r,altText:l,title:d,type:u}=e,{sourceURL:h,linkURL:p}=o,g=Kl(p)?"_blank":"_self",f=g==="_blank"?"noreferrer":"",_=r?t:null,y=_?_.timestamp:0,v=_?_.sourceURL:h,w=m("img",{alt:l||d,key:`media-${u}-${s}-${n}-${y}`,src:v});return(p?m("a",{title:d,href:p,rel:f,target:g},w):null)||w}renderChartMediaInfo(e){const{activeMediaInfoIndex:t,formattedMediaInfoCount:s}=this.viewModel;return m("div",{key:`media-${e.type}-${t}-${s}`,bind:this,class:te.mediaChart,afterCreate:this._getChartDependencies})}renderMediaInfoType(){const{activeMediaInfo:e}=this.viewModel;return e?e.type==="image"?this.renderImageMediaInfo(e):e.type.includes("chart")?this.renderChartMediaInfo(e):null:null}renderMediaInfo(){const{activeMediaInfo:e}=this.viewModel;if(!e)return null;const t=e.title?m("div",{key:"media-title",class:te.mediaItemTitle,innerHTML:e.title}):null,s=e.caption?m("div",{key:"media-caption",class:te.mediaItemCaption,innerHTML:e.caption}):null;return m("div",{key:"media-container",class:te.mediaItemContainer},m("div",{key:"media-item-container",class:te.mediaItem},this.renderMediaInfoType()),t,s)}renderMediaPageButton(e){if(this.viewModel.formattedMediaInfoCount<2)return null;const t=e==="previous",s=t?this.messages.previous:this.messages.next,n=t?this.classes(te.mediaButton,te.mediaPrevious):this.classes(te.mediaButton,te.mediaNext),o=t?this.classes(te.mediaIcon,te.mediaPreviousIconLTR,te.iconLeftTriangleArrow):this.classes(te.mediaIcon,te.mediaNextIconLTR,te.iconRightTriangleArrow),r=t?this.classes(te.mediaIcon,te.mediaPreviousIconRTL,te.iconRightTriangleArrow):this.classes(te.mediaIcon,te.mediaNextIconRTL,te.iconLeftTriangleArrow),l=t?"media-previous":"media-next",d=t?this._previous:this._next;return m("button",{type:"button",key:l,title:s,"aria-label":s,tabIndex:0,class:n,bind:this,onclick:d},m("span",{"aria-hidden":"true",class:o}),m("span",{"aria-hidden":"true",class:r}))}_setupFeatureElementInfo(){const{description:e,title:t}=this;this._featureElementInfo.set({description:e,title:t})}_next(){this.viewModel.next()}_previous(){this.viewModel.previous()}async _getRendererColors(e){var l,d;const{am4core:t}=e,s=new Map,n=(d=(l=this.viewModel)==null?void 0:l.layer)==null?void 0:d.renderer,o="default";if(!n)return s;const r=await $p(n);return r.delete(o),Array.from(r.values()).every(u=>(u==null?void 0:u.length)===1)&&(s.set(ra,t.color({r:50,g:50,b:50,a:1})),Array.from(r.keys()).forEach(u=>{u&&s.set(u,t.color(r.get(u)[0].toCss(!0)))})),s}_handleMediaKeyup(e){const t=gi(e);t==="ArrowLeft"&&(e.stopPropagation(),this.viewModel.previous()),t==="ArrowRight"&&(e.stopPropagation(),this.viewModel.next())}_renderChart(e){const{abilities:t}=this.viewModel,{chartsModule:s,chartDiv:n,mediaInfo:o,colorMap:r}=e,{value:l,type:d}=o,{am4core:u}=s,h=Qp(u);function p(_){_ instanceof u.ColorSet&&h&&(_.list=h)}pn()&&u.useTheme(s.am4themes_dark);const g=window.matchMedia("(prefers-reduced-motion: reduce)");t.chartAnimation&&!g.matches?u.useTheme(s.am4themes_animated):u.unuseTheme(s.am4themes_animated),u.useTheme(p);const f=d==="pie-chart"?this._createPieChart(e):this._createXYChart(e);n.setAttribute("aria-label",o.altText||o.title),f.data=l.series.map(_=>({[$t]:_.tooltip,[Ji]:_.value,[ut]:r.get(_.fieldName)})).filter(_=>d!=="pie-chart"||_.value>0)}_customizeChartTooltip(e,t){e.label.wrap=!0,e.label.maxWidth=200,e.autoTextColor=!1,e.getFillFromObject=!1,e.label.fill=t.color("#ffffff"),e.background.fill=t.color({r:0,g:0,b:0,a:.7})}_createPieChart(e){const{chartDiv:t,chartsModule:s}=e,{am4core:n,am4charts:o}=s,r=n.create(t,o.PieChart);r.rtl=at(this.container);const l=r.series.push(new o.PieSeries);return l.labels.template.disabled=!0,l.ticks.template.disabled=!0,l.dataFields.value=Ji,l.dataFields.category=$t,this._customizeChartTooltip(l.tooltip,n),l.slices.template.propertyFields.fill=ut,l.slices.template.propertyFields.stroke=ut,r}_getMinSeriesValue(e){let t=0;return e.forEach(s=>t=Math.min(s.value,t)),t}_createColumnChart(e,t){const{chartsModule:s,mediaInfo:n}=t,{value:o}=n,{am4core:r,am4charts:l}=s,d=e.xAxes.push(new l.CategoryAxis);d.dataFields.category=$t,d.renderer.labels.template.disabled=!0,this._customizeChartTooltip(d.tooltip,r),d.tooltip.events.on("sizechanged",()=>{d.tooltip.dy=-d.tooltip.contentHeight});const u=e.yAxes.push(new l.ValueAxis),h=u.renderer.labels.template;u.renderer.minLabelPosition=jn,u.renderer.maxLabelPosition=Wn,u.min=this._getMinSeriesValue(o.series),this._customizeChartTooltip(u.tooltip,r),h.wrap=!0;const p=e.series.push(new l.ColumnSeries);p.dataFields.valueY=Ji,p.dataFields.categoryX=$t,p.columns.template.propertyFields.fill=ut,p.columns.template.propertyFields.stroke=ut,e.cursor=new l.XYCursor,o.series.length>Zn&&(e.scrollbarX=new r.Scrollbar)}_createBarChart(e,t){const{chartsModule:s,mediaInfo:n}=t,{value:o}=n,{am4core:r,am4charts:l}=s,d=e.yAxes.push(new l.CategoryAxis);d.dataFields.category=$t,d.renderer.inversed=!0,d.renderer.labels.template.disabled=!0,this._customizeChartTooltip(d.tooltip,r),d.tooltip.events.on("sizechanged",()=>{d.tooltip.dx=d.tooltip.contentWidth});const u=e.xAxes.push(new l.ValueAxis),h=u.renderer.labels.template;u.renderer.minLabelPosition=jn,u.renderer.maxLabelPosition=Wn,u.min=this._getMinSeriesValue(o.series),this._customizeChartTooltip(u.tooltip,r),h.wrap=!0;const p=e.series.push(new l.ColumnSeries);p.dataFields.valueX=Ji,p.dataFields.categoryY=$t,p.columns.template.propertyFields.fill=ut,p.columns.template.propertyFields.stroke=ut,e.cursor=new l.XYCursor,o.series.length>Zn&&(e.scrollbarY=new r.Scrollbar)}_createLineChart(e,t){const{chartsModule:s,mediaInfo:n,colorMap:o}=t,{value:r}=n,{am4core:l,am4charts:d}=s,u=e.xAxes.push(new d.CategoryAxis);u.dataFields.category=$t,u.renderer.labels.template.disabled=!0,this._customizeChartTooltip(u.tooltip,l),u.tooltip.events.on("sizechanged",()=>{u.tooltip.dy=-u.tooltip.contentHeight});const h=e.yAxes.push(new d.ValueAxis),p=h.renderer.labels.template;h.renderer.minLabelPosition=jn,h.renderer.maxLabelPosition=Wn,h.min=this._getMinSeriesValue(r.series),this._customizeChartTooltip(h.tooltip,l),p.wrap=!0;const g=e.series.push(new d.LineSeries);g.dataFields.categoryX=$t,g.dataFields.valueY=Ji,g.strokeWidth=1;const f=o.get(ra);f&&(g.stroke=f);const _=g.bullets.push(new d.CircleBullet);_.propertyFields.fill=ut,_.propertyFields.stroke=ut,e.cursor=new d.XYCursor,r.series.length>Zn&&(e.scrollbarX=new l.Scrollbar)}_createXYChart(e){const{chartDiv:t,chartsModule:s,mediaInfo:n}=e,{type:o}=n,{am4core:r,am4charts:l}=s,d=r.create(t,l.XYChart);return d.rtl=at(this.container),o==="column-chart"&&this._createColumnChart(d,e),o==="bar-chart"&&this._createBarChart(d,e),o==="line-chart"&&this._createLineChart(d,e),d}_clearMediaRefreshTimer(){const{_refreshTimer:e}=this;e&&(clearTimeout(e),this._refreshTimer=null)}_updateMediaInfoTimestamp(e){const t=Date.now();this._refreshIntervalInfo={timestamp:t,sourceURL:this._getImageSource(e,t)},this.scheduleRender()}_setupMediaRefreshTimer(){this._clearMediaRefreshTimer();const{activeMediaInfo:e}=this.viewModel;e&&e.type==="image"&&e.refreshInterval&&this._setRefreshTimeout(e)}_setRefreshTimeout(e){const{refreshInterval:t,value:s}=e;if(!t)return;const n=6e4*t;this._updateMediaInfoTimestamp(s.sourceURL);const o=setInterval(()=>{this._updateMediaInfoTimestamp(s.sourceURL)},n);this._refreshTimer=o}_getImageSource(e,t){const s=e.includes("?")?"&":"?",[n,o=""]=e.split("#");return`${n}${s}timestamp=${t}${o?"#":""}${o}`}};a([c()],ke.prototype,"attributes",null),a([c()],ke.prototype,"activeMediaInfoIndex",null),a([c()],ke.prototype,"description",null),a([c()],ke.prototype,"fieldInfoMap",null),a([c()],ke.prototype,"layer",null),a([c()],ke.prototype,"mediaInfos",null),a([c()],ke.prototype,"popupTemplate",null),a([c()],ke.prototype,"relatedInfos",null),a([c()],ke.prototype,"title",null),a([c({type:vi})],ke.prototype,"viewModel",void 0),a([c(),re("esri/widgets/Feature/t9n/Feature")],ke.prototype,"messages",void 0),ke=a([C("esri.widgets.Feature.FeatureMedia")],ke);const nc=ke,Jp=["$datastore","$map","$layer","$aggregatedfeatures"],Xp="esri.widgets.Feature.support.arcadeFeatureUtils",em=B.getLogger(Xp);function tm(i){return typeof i=="string"?As(Xo(i)):Array.isArray(i)?im(i):(i==null?void 0:i.declaredClass)==="esri.arcade.Dictionary"?sm(i):i}function im(i){return`<ul class="esri-widget__list">${i.map(e=>`<li>${typeof e=="string"?As(Xo(e)):e}</li>`).join("")}</ul>`}function sm(i){return`<table class="esri-widget__table">${i.keys().map(e=>{const t=i.field(e);return`<tr><th>${e}</th><td>${typeof t=="string"?As(Xo(t)):t}</td></tr>`}).join("")}</table>`}function nm({aggregatedFeatures:i,arcadeUtils:e,featureSetVars:t,context:s,viewInfo:n,map:o,graphic:r,interceptor:l}){t.forEach(d=>{const u=d.toLowerCase(),h={map:o,spatialReference:n.sr,interceptor:l};if(u==="$map"&&(s.vars[u]=e.convertMapToFeatureSetCollection(h)),u==="$layer"&&(s.vars[u]=e.convertFeatureLayerToFeatureSet({layer:r.sourceLayer,spatialReference:n.sr,interceptor:l})),u==="$datastore"&&(s.vars[u]=e.convertServiceUrlToWorkspace({url:r.sourceLayer.url,spatialReference:n.sr,interceptor:l})),u==="$aggregatedfeatures"){const p=r.layer,{fields:g,objectIdField:f,geometryType:_,spatialReference:y,displayField:v}=p,w=new Sl({fields:g,objectIdField:f,geometryType:_,spatialReference:y,displayField:v,...p.type==="feature"?{templates:p.templates,typeIdField:p.typeIdField,types:p.types}:null,source:i});s.vars[u]=e.convertFeatureLayerToFeatureSet({layer:w,spatialReference:n.sr,interceptor:l})}})}function oc(){return T(()=>import("./arcadeUtils-432ab0d0.js").then(i=>i.ax),["assets/arcadeUtils-432ab0d0.js","assets/geometry-70b2a4a5.js","assets/ensureType-d98e08e1.js","assets/string-9c5e03f7.js","assets/typedArrayUtil-d02f10a8.js","assets/Error-4ed679d7.js","assets/Extent-d5fff12d.js","assets/cast-6d78d3c7.js","assets/nextTick-3ee5a785.js","assets/promiseUtils-930cba29.js","assets/Polyline-42dcc920.js","assets/typeUtils-b6c52390.js","assets/jsonMap-5afaf2ff.js","assets/preload-helper-101896b7.js","assets/datetime-7cb5ae9e.js","assets/number-bf398f16.js","assets/locale-30120714.js","assets/Field-bb784640.js","assets/enumeration-497ef064.js","assets/fieldType-9bddd3d4.js","assets/jsonUtils-5115c7e5.js","assets/featureConversionUtils-d9ec654e.js","assets/OptimizedFeature-1bba65b5.js","assets/OptimizedFeatureSet-1d1ac4b9.js","assets/request-e4299080.js","assets/unitUtils-b69647a1.js","assets/Portal-fbb2b73d.js","assets/Loadable-b0d5bb7e.js","assets/Promise-6bd0b483.js","assets/PortalGroup-813428fa.js","assets/PortalUser-cf18ae9d.js","assets/sizeVariableUtils-d4870b0d.js"])}function om(i){return"createQuery"in i&&"queryFeatures"in i}async function rm({graphic:i,view:e}){const{isAggregate:t,layer:s}=i;if(!t||!s||(e==null?void 0:e.type)!=="2d")return[];const n=await e.whenLayerView(s);if(!om(n))return[];const o=n.createQuery();o.aggregateIds=[i.getObjectId()];const{features:r}=await n.queryFeatures(o);return r}async function rc({expressionInfo:i,arcadeUtils:e,interceptor:t,spatialReference:s,map:n,graphic:o,view:r}){if(!i||!i.expression)return null;const l=e.createSyntaxTree(i.expression),d=Jp.filter(f=>e.hasVariable(l,f)),[u]=await Promise.all([rm({graphic:o,view:r}),e.loadScriptDependencies(l,!0,d)]),h=e.getViewInfo({spatialReference:s}),p=e.createExecContext(o,h);p.interceptor=t,p.useAsync=!0,nm({aggregatedFeatures:u,arcadeUtils:e,featureSetVars:d,context:p,viewInfo:h,map:n,graphic:o,interceptor:t});const g=e.createFunction(l,p);return e.executeAsyncFunction(g,p).catch(f=>em.error("arcade-execution-error",{error:f,graphic:o,expressionInfo:i}))}async function am({expressionInfos:i,spatialReference:e,graphic:t,interceptor:s,map:n,view:o}){if(!i||!i.length)return{};const r=await oc(),l={};for(const h of i)l[`expression/${h.name}`]=rc({expressionInfo:h,arcadeUtils:r,interceptor:s,spatialReference:e,map:n,graphic:t,view:o});const d=await ei(l),u={};for(const h in d)u[h]=tm(d[h].value);return u}const lm=1;let Fe=class extends bn(z){constructor(e){super(e),this._abortController=null,this.expressionInfo=null,this.graphic=null,this.contentElement=null,this.contentElementViewModel=null,this.interceptor=null,this.view=null,this._cancelQuery=()=>{const{_abortController:t}=this;t&&t.abort(),this._abortController=null},this._createVM=()=>{var n,o;const t=(n=this.contentElement)==null?void 0:n.type;(o=this.contentElementViewModel)==null||o.destroy();const s=t==="fields"?new En:t==="media"?new vi:t==="text"?new hn:null;this._set("contentElementViewModel",s)},this._compile=async()=>{this._cancelQuery();const t=new AbortController;this._abortController=t,await this._compileExpression(),this._abortController===t&&(this._abortController=null)},this._compileThrottled=Ui(this._compile,lm,this),this._compileExpression=async()=>{const{expressionInfo:t,graphic:s,interceptor:n,spatialReference:o,map:r,view:l,_abortController:d}=this;if(!(t&&s&&o&&r))return void this._set("contentElement",null);const u=await oc();if(d!==this._abortController)return;const h=await rc({arcadeUtils:u,expressionInfo:t,graphic:s,interceptor:n,map:r,spatialReference:o,view:l});if(!h||h.declaredClass!=="esri.arcade.Dictionary")return void this._set("contentElement",null);const p=await h.castAsJsonAsync(d.signal),g=p==null?void 0:p.type,f=g==="media"?ru.fromJSON(p):g==="text"?kl.fromJSON(p):g==="fields"?au.fromJSON(p):null;this._set("contentElement",f)},this.handles.add([I(()=>[this.expressionInfo,this.graphic,this.map,this.spatialReference,this.view],()=>this._compileThrottled(),H),I(()=>[this.contentElement],()=>this._createVM(),H)])}destroy(){var e;this._cancelQuery(),(e=this.contentElementViewModel)==null||e.destroy(),this._set("contentElementViewModel",null),this._set("contentElement",null)}get spatialReference(){var e;return((e=this.view)==null?void 0:e.spatialReference)??null}set spatialReference(e){this._override("spatialReference",e)}get state(){const{_abortController:e,contentElement:t,contentElementViewModel:s}=this;return e?"loading":t||s?"ready":"disabled"}get map(){var e;return((e=this.view)==null?void 0:e.map)??null}set map(e){this._override("map",e)}};a([c()],Fe.prototype,"_abortController",void 0),a([c({type:lu})],Fe.prototype,"expressionInfo",void 0),a([c({type:ct})],Fe.prototype,"graphic",void 0),a([c({readOnly:!0})],Fe.prototype,"contentElement",void 0),a([c({readOnly:!0})],Fe.prototype,"contentElementViewModel",void 0),a([c()],Fe.prototype,"interceptor",void 0),a([c()],Fe.prototype,"spatialReference",null),a([c({readOnly:!0})],Fe.prototype,"state",null),a([c()],Fe.prototype,"map",null),a([c()],Fe.prototype,"view",void 0),Fe=a([C("esri.widgets.Feature.FeatureExpression.FeatureExpressionViewModel")],Fe);const or=Fe,Ls={iconLoading:"esri-icon-loading-indicator esri-rotating",base:"esri-feature-expression",loadingSpinnerContainer:"esri-feature__loading-container",spinner:"esri-feature__loading-spinner"};let js=class extends ue{constructor(e,t){super(e,t),this.viewModel=new or}initialize(){this.addHandles(I(()=>{var e;return(e=this.viewModel)==null?void 0:e.contentElementViewModel},()=>this._setupExpressionWidget(),H))}destroy(){this._destroyContentWidget()}renderLoading(){return m("div",{key:"loading-container",class:Ls.loadingSpinnerContainer},m("span",{class:this.classes(Ls.iconLoading,Ls.spinner)}))}render(){var t;const{state:e}=this.viewModel;return m("div",{class:Ls.base},e==="loading"?this.renderLoading():e==="disabled"?null:(t=this._contentWidget)==null?void 0:t.render())}_destroyContentWidget(){const{_contentWidget:e}=this;e&&(e.viewModel=null,e.destroy()),this._contentWidget=null}_setupExpressionWidget(){const{contentElementViewModel:e,contentElement:t}=this.viewModel,s=t==null?void 0:t.type;this._destroyContentWidget();const n=e?s==="fields"?new sc({viewModel:e}):s==="media"?new nc({viewModel:e}):s==="text"?new Gs({viewModel:e}):null:null;this._contentWidget=n,this.scheduleRender()}};a([c({type:or})],js.prototype,"viewModel",void 0),js=a([C("esri.widgets.Feature.FeatureExpression")],js);const cm=js,Kn=100;let Z=class extends vl(Rl(bn(z))){constructor(e){super(e),this._queryAbortController=null,this._queryPageAbortController=null,this._queryFeatureCountAbortController=null,this.featuresPerPage=10,this.description=null,this.graphic=null,this.layer=null,this.map=null,this.orderByFields=null,this.featureCount=0,this.relationshipId=null,this.showAllEnabled=!1,this.title=null,this._cancelQuery=()=>{const{_queryAbortController:t}=this;t&&t.abort(),this._queryAbortController=null},this._cancelQueryFeatureCount=()=>{const{_queryFeatureCountAbortController:t}=this;t&&t.abort(),this._queryFeatureCountAbortController=null},this._cancelQueryPage=()=>{const{_queryPageAbortController:t}=this;t&&t.abort(),this._queryPageAbortController=null},this._queryController=async()=>{this._cancelQuery();const t=new AbortController;this._queryAbortController=t,await gs(this._query()),this._queryAbortController===t&&(this._queryAbortController=null)},this._queryFeatureCountController=async()=>{this._cancelQueryFeatureCount();const t=new AbortController;this._queryFeatureCountAbortController=t,await gs(this._queryFeatureCount()),this._queryFeatureCountAbortController===t&&(this._queryFeatureCountAbortController=null)},this._queryPageController=async()=>{const t=new AbortController;this._queryPageAbortController=t,await gs(this._queryPage()),this._queryPageAbortController===t&&(this._queryPageAbortController=null)},this._queryThrottled=Ui(this._queryController,Kn,this),this._queryFeatureCountThrottled=Ui(this._queryFeatureCountController,Kn,this),this._queryPageThrottled=Ui(this._queryPageController,Kn,this),this._query=async()=>{const{_queryAbortController:t,relatedFeatures:s}=this;this._destroyRelatedFeatureViewModels(),this.featurePage=1,s.removeAll(),s.addMany(this._sliceFeatures(await this._queryRelatedFeatures({signal:t==null?void 0:t.signal})))},this.handles.add([I(()=>[this.displayCount,this.graphic,this.layer,this.map,this.orderByFieldsFixedCasing,this.relationshipId,this.featuresPerPage,this.showAllEnabled],()=>this._queryThrottled(),H),I(()=>[this.featurePage,this.showAllEnabled],()=>this._queryPageThrottled()),I(()=>[this.layer,this.relationshipId,this.objectId],()=>this._queryFeatureCountThrottled())])}destroy(){this._destroyRelatedFeatureViewModels(),this.relatedFeatures.removeAll(),this._cancelQuery(),this._cancelQueryFeatureCount(),this._cancelQueryPage()}set featurePage(e){const{featuresPerPage:t,featureCount:s}=this,n=1,o=Math.ceil(s/t)||1;this._set("featurePage",Math.min(Math.max(e,n),o))}get featurePage(){return this._get("featurePage")}get orderByFieldsFixedCasing(){const{orderByFields:e,relatedLayer:t}=this;return e&&(t!=null&&t.loaded)?e.map(s=>{const n=s.clone(),o=Ms(s.field,t);return n.field=o,n}):e}get itemDescriptionFieldName(){var e,t;return((t=(e=this.orderByFieldsFixedCasing)==null?void 0:e[0])==null?void 0:t.field)||null}set displayCount(e){this._set("displayCount",Math.min(Math.max(e,0),10))}get displayCount(){return this._get("displayCount")}get objectId(){var e,t;return((t=(e=this.graphic)==null?void 0:e.attributes)==null?void 0:t[this.objectIdField])??null}get objectIdField(){var e;return((e=this.layer)==null?void 0:e.objectIdField)||null}get relatedFeatures(){return this._get("relatedFeatures")||new ee}get relatedLayer(){const{layer:e,map:t,relationship:s}=this;return e!=null&&e.loaded?sp(t,e,s):null}get relationship(){var s;const{relationshipId:e,layer:t}=this;return typeof e=="number"?((s=t==null?void 0:t.relationships)==null?void 0:s.find(({id:n})=>n===e))??null:null}get relatedFeatureViewModels(){return this._get("relatedFeatureViewModels")||new ee}get state(){const{_queryAbortController:e,_queryFeatureCountAbortController:t,_queryPageAbortController:s,graphic:n,relatedLayer:o}=this;return t?"loading":e||s?"querying":n&&o?"ready":"disabled"}_destroyRelatedFeatureViewModels(){var e;(e=this.relatedFeatureViewModels)==null||e.forEach(t=>!t.destroyed&&t.destroy()),this.relatedFeatureViewModels.removeAll()}async _queryFeatureCount(){var h,p,g,f;const{layer:e,relatedLayer:t,relationshipId:s,objectId:n,_queryFeatureCountAbortController:o}=this;if(await(e==null?void 0:e.load()),!t||typeof n!="number"||!((p=(h=e==null?void 0:e.capabilities)==null?void 0:h.queryRelated)!=null&&p.supportsCount))return void this._set("featureCount",0);await t.load();const r=t.createQuery(),l=((f=(g=e.capabilities)==null?void 0:g.queryRelated)==null?void 0:f.supportsCacheHint)??!1,d=new po({cacheHint:l,relationshipId:s,returnGeometry:!1,objectIds:[n],where:r.where}),u=await e.queryRelatedFeaturesCount(d,{signal:o==null?void 0:o.signal});this._set("featureCount",u[n]||0)}_sliceFeatures(e){const{showAllEnabled:t,displayCount:s}=this;return t?e:s?e.slice(0,s):[]}async _queryPage(){const{relatedFeatures:e,featurePage:t,showAllEnabled:s,_queryPageAbortController:n}=this;!s||t<2||e.addMany(await this._queryRelatedFeatures({signal:n==null?void 0:n.signal}))}async _queryRelatedFeatures(e){var k,Y,ge,ve,Me;const{orderByFieldsFixedCasing:t,showAllEnabled:s,featuresPerPage:n,displayCount:o,layer:r,relationshipId:l,featurePage:d,featureCount:u,relatedLayer:h}=this;await(r==null?void 0:r.load());const{relationship:p,objectId:g}=this;if(!p||typeof g!="number"||!((Y=(k=r==null?void 0:r.capabilities)==null?void 0:k.queryRelated)!=null&&Y.supportsPagination))return[];const f=s?((d-1)*n+u)%u:0,_=s?n:o;if(!h)return[];await h.load();const y=h.objectIdField,v=[...t==null?void 0:t.map(ne=>ne.field),y],w=t==null?void 0:t.map(ne=>`${ne.field} ${ne.order}`),A=((ve=(ge=r.capabilities)==null?void 0:ge.queryRelated)==null?void 0:ve.supportsCacheHint)||!1,M=h.createQuery(),P=new po({orderByFields:w,start:f,num:_,outFields:v,cacheHint:A,relationshipId:l,returnGeometry:!1,objectIds:[g],where:M.where}),L=((Me=(await r.queryRelatedFeatures(P,{signal:e==null?void 0:e.signal}))[g])==null?void 0:Me.features)||[];return L.forEach(ne=>ne.sourceLayer=h),L}};a([c()],Z.prototype,"_queryAbortController",void 0),a([c()],Z.prototype,"_queryPageAbortController",void 0),a([c()],Z.prototype,"_queryFeatureCountAbortController",void 0),a([c({value:1})],Z.prototype,"featurePage",null),a([c()],Z.prototype,"featuresPerPage",void 0),a([c({readOnly:!0})],Z.prototype,"orderByFieldsFixedCasing",null),a([c()],Z.prototype,"description",void 0),a([c({readOnly:!0})],Z.prototype,"itemDescriptionFieldName",null),a([c({value:3})],Z.prototype,"displayCount",null),a([c({type:ct})],Z.prototype,"graphic",void 0),a([c()],Z.prototype,"layer",void 0),a([c()],Z.prototype,"map",void 0),a([c({readOnly:!0})],Z.prototype,"objectId",null),a([c({readOnly:!0})],Z.prototype,"objectIdField",null),a([c()],Z.prototype,"orderByFields",void 0),a([c({readOnly:!0})],Z.prototype,"relatedFeatures",null),a([c({readOnly:!0})],Z.prototype,"relatedLayer",null),a([c({readOnly:!0})],Z.prototype,"relationship",null),a([c({readOnly:!0})],Z.prototype,"featureCount",void 0),a([c({readOnly:!0})],Z.prototype,"relatedFeatureViewModels",null),a([c()],Z.prototype,"relationshipId",void 0),a([c()],Z.prototype,"showAllEnabled",void 0),a([c({readOnly:!0})],Z.prototype,"state",null),a([c()],Z.prototype,"title",void 0),Z=a([C("esri.widgets.Feature.FeatureRelationship.FeatureRelationshipViewModel")],Z);const rr=Z,ht={base:"esri-feature-relationship",esriWidget:"esri-widget",listContainer:"esri-feature-relationship__list",listContainerQuerying:"esri-feature-relationship__list--querying",featureObserver:"esri-feature__feature-observer",stickySpinnerContainer:"esri-feature__sticky-loading-container",loadingSpinnerContainer:"esri-feature__loading-container",spinner:"esri-feature__loading-spinner",iconLoading:"esri-icon-loading-indicator esri-rotating"},aa={title:!0,description:!0};let Ce=class extends ue{constructor(e,t){super(e,t),this._featureElementInfo=null,this._relatedFeatureIntersectionObserver=new IntersectionObserver(([s])=>{s!=null&&s.isIntersecting&&this._increaseFeaturePage()},{root:window.document}),this.headingLevel=2,this.viewModel=new rr,this.messages=null,this.messagesCommon=null,this.visibleElements={...aa},this._increaseFeaturePage=()=>{const{state:s,showAllEnabled:n,relatedFeatures:o,featuresPerPage:r,featurePage:l}=this.viewModel;s==="ready"&&n&&o.length>=r*l&&this.viewModel.featurePage++}}initialize(){this._featureElementInfo=new Cn,this.addHandles([I(()=>[this.viewModel.description,this.viewModel.title,this.headingLevel],()=>this._setupFeatureElementInfo(),H),I(()=>[this.viewModel.state,this.viewModel.showAllEnabled,this._relatedFeatureIntersectionObserverNode],()=>this._handleRelatedFeatureObserverChange()),Ke(()=>this.viewModel.relatedFeatureViewModels,"change",()=>this._setupRelatedFeatureViewModels())])}loadDependencies(){return Promise.all([T(()=>import("./calcite-list-2964d3a9.js"),["assets/calcite-list-2964d3a9.js","assets/widget-4becb80f.js","assets/cast-6d78d3c7.js","assets/typedArrayUtil-d02f10a8.js","assets/string-9c5e03f7.js","assets/Error-4ed679d7.js","assets/ensureType-d98e08e1.js","assets/nextTick-3ee5a785.js","assets/promiseUtils-930cba29.js","assets/intl-a5c99ea3.js","assets/number-c7f1bfee.js","assets/jsonMap-5afaf2ff.js","assets/locale-30120714.js","assets/messages-634811b5.js","assets/request-e4299080.js","assets/preload-helper-101896b7.js","assets/assets-6ba3cd63.js","assets/Evented-b378ccab.js","assets/Promise-6bd0b483.js","assets/reactiveUtils-b0e56010.js","assets/uuid-73213768.js","assets/interactive-52dcf836.js"]),T(()=>import("./calcite-list-item-ea0806a3.js"),["assets/calcite-list-item-ea0806a3.js","assets/widget-4becb80f.js","assets/cast-6d78d3c7.js","assets/typedArrayUtil-d02f10a8.js","assets/string-9c5e03f7.js","assets/Error-4ed679d7.js","assets/ensureType-d98e08e1.js","assets/nextTick-3ee5a785.js","assets/promiseUtils-930cba29.js","assets/intl-a5c99ea3.js","assets/number-c7f1bfee.js","assets/jsonMap-5afaf2ff.js","assets/locale-30120714.js","assets/messages-634811b5.js","assets/request-e4299080.js","assets/preload-helper-101896b7.js","assets/assets-6ba3cd63.js","assets/Evented-b378ccab.js","assets/Promise-6bd0b483.js","assets/reactiveUtils-b0e56010.js","assets/uuid-73213768.js","assets/conditionalSlot-5e8f49e5.js","assets/observers-32bcc375.js","assets/interactive-52dcf836.js"]),T(()=>import("./calcite-icon-901434b0.js"),["assets/calcite-icon-901434b0.js","assets/icon-ba19bc6b.js","assets/widget-4becb80f.js","assets/cast-6d78d3c7.js","assets/typedArrayUtil-d02f10a8.js","assets/string-9c5e03f7.js","assets/Error-4ed679d7.js","assets/ensureType-d98e08e1.js","assets/nextTick-3ee5a785.js","assets/promiseUtils-930cba29.js","assets/intl-a5c99ea3.js","assets/number-c7f1bfee.js","assets/jsonMap-5afaf2ff.js","assets/locale-30120714.js","assets/messages-634811b5.js","assets/request-e4299080.js","assets/preload-helper-101896b7.js","assets/assets-6ba3cd63.js","assets/Evented-b378ccab.js","assets/Promise-6bd0b483.js","assets/reactiveUtils-b0e56010.js","assets/uuid-73213768.js","assets/observers-32bcc375.js"]),T(()=>import("./calcite-notice-c4b4be7f.js"),["assets/calcite-notice-c4b4be7f.js","assets/widget-4becb80f.js","assets/cast-6d78d3c7.js","assets/typedArrayUtil-d02f10a8.js","assets/string-9c5e03f7.js","assets/Error-4ed679d7.js","assets/ensureType-d98e08e1.js","assets/nextTick-3ee5a785.js","assets/promiseUtils-930cba29.js","assets/intl-a5c99ea3.js","assets/number-c7f1bfee.js","assets/jsonMap-5afaf2ff.js","assets/locale-30120714.js","assets/messages-634811b5.js","assets/request-e4299080.js","assets/preload-helper-101896b7.js","assets/assets-6ba3cd63.js","assets/Evented-b378ccab.js","assets/Promise-6bd0b483.js","assets/reactiveUtils-b0e56010.js","assets/uuid-73213768.js","assets/conditionalSlot-5e8f49e5.js","assets/observers-32bcc375.js","assets/icon-ba19bc6b.js"])])}destroy(){this._unobserveRelatedFeatureObserver(),this._featureElementInfo=Te(this._featureElementInfo)}get displayShowAllButton(){const{showAllEnabled:e,featureCount:t,displayCount:s}=this.viewModel;return!e&&(t>s||s===0)}get displayListItems(){return this.displayShowAllButton||this.viewModel.relatedFeatureViewModels.length>0}get description(){return this.viewModel.description}set description(e){this.viewModel.description=e}get featureCountDescription(){const{messages:e}=this,{featureCount:t}=this.viewModel;return rt(t===1?e==null?void 0:e.numberRecord:e==null?void 0:e.numberRecords,{number:t})}get title(){return this.viewModel.title}set title(e){this.viewModel.title=e}castVisibleElements(e){return{...aa,...e}}renderStickyLoading(){return this.viewModel.state==="querying"?m("div",{key:"sticky-loader",class:ht.stickySpinnerContainer},this.renderLoadingIcon()):null}renderLoadingIcon(){return m("span",{class:this.classes(ht.iconLoading,ht.spinner)})}renderLoading(){return m("div",{key:"loading-container",class:ht.loadingSpinnerContainer},this.renderLoadingIcon())}renderShowAllIconNode(){return m("calcite-icon",{scale:"s",icon:"list",slot:"content-end"})}renderChevronIconNode(){const e=at(this.container)?"chevron-left":"chevron-right";return m("calcite-icon",{scale:"s",icon:e,slot:"content-end"})}renderRelatedFeature(e){var o,r;const{itemDescriptionFieldName:t}=this.viewModel,s=e.title;e.description=t&&((o=e.formattedAttributes)==null?void 0:o.global[t]);const n=e.state==="loading";return m("calcite-list-item",{key:e.uid,label:n?`${(r=this.messagesCommon)==null?void 0:r.loading}`:s,description:n?"":e.description,onclick:()=>this.emit("select-record",{featureViewModel:e})},this.renderChevronIconNode())}renderShowAllListItem(){var e;return this.displayShowAllButton?m("calcite-list-item",{key:"show-all-item",label:(e=this.messages)==null?void 0:e.showAll,description:this.featureCountDescription,onclick:()=>this.emit("show-all-records")},this.renderShowAllIconNode()):null}renderNoRelatedFeaturesMessage(){var e;return m("calcite-notice",{key:"no-related-features-message",icon:"information",open:!0,color:"blue",scale:"s",width:"full"},m("div",{slot:"message"},(e=this.messages)==null?void 0:e.noRelatedFeatures))}renderFeatureObserver(){return m("div",{key:"feature-observer",class:ht.featureObserver,bind:this,afterCreate:this._relatedFeatureIntersectionObserverCreated})}renderList(){const{relatedFeatureViewModels:e}=this.viewModel;return m("calcite-list",null,e.toArray().map(t=>this.renderRelatedFeature(t)),this.renderShowAllListItem())}renderRelatedFeatures(){const{displayListItems:e}=this,{state:t}=this.viewModel;return m("div",{key:"list-container",class:this.classes(ht.listContainer,{[ht.listContainerQuerying]:t==="querying"})},e?this.renderList():t==="ready"?this.renderNoRelatedFeaturesMessage():null,this.renderStickyLoading(),this.renderFeatureObserver())}renderRelationshipNotFound(){var e;return m("calcite-notice",{key:"relationship-not-found",icon:"exclamation-mark-triangle",open:!0,color:"red",scale:"s",width:"full"},m("div",{slot:"message"},(e=this.messages)==null?void 0:e.relationshipNotFound))}render(){var t;const{state:e}=this.viewModel;return m("div",{class:this.classes(ht.base,ht.esriWidget)},(t=this._featureElementInfo)==null?void 0:t.render(),e==="loading"?this.renderLoading():e==="disabled"?this.renderRelationshipNotFound():this.renderRelatedFeatures())}_setupRelatedFeatureViewModels(){const{relatedFeatureViewModels:e}=this.viewModel,t="related-feature-viewmodels";this.removeHandles(t),e==null||e.forEach(s=>{this.addHandles(I(()=>[s.title,s.state],()=>this.scheduleRender(),H),t)}),this.scheduleRender()}_setupFeatureElementInfo(){const{headingLevel:e,visibleElements:t}=this,s=t.description&&this.description,n=t.title&&this.title;this._featureElementInfo.set({description:s,title:n,headingLevel:e})}async _handleRelatedFeatureObserverChange(){this._unobserveRelatedFeatureObserver();const{state:e,showAllEnabled:t}=this.viewModel;await Bo(0),this._relatedFeatureIntersectionObserverNode&&e==="ready"&&t&&this._relatedFeatureIntersectionObserver.observe(this._relatedFeatureIntersectionObserverNode)}_relatedFeatureIntersectionObserverCreated(e){this._relatedFeatureIntersectionObserverNode=e}_unobserveRelatedFeatureObserver(){this._relatedFeatureIntersectionObserverNode&&this._relatedFeatureIntersectionObserver.unobserve(this._relatedFeatureIntersectionObserverNode)}};a([c()],Ce.prototype,"_relatedFeatureIntersectionObserverNode",void 0),a([c({readOnly:!0})],Ce.prototype,"displayShowAllButton",null),a([c({readOnly:!0})],Ce.prototype,"displayListItems",null),a([c()],Ce.prototype,"description",null),a([c({readOnly:!0})],Ce.prototype,"featureCountDescription",null),a([c()],Ce.prototype,"headingLevel",void 0),a([c()],Ce.prototype,"title",null),a([c({type:rr})],Ce.prototype,"viewModel",void 0),a([c(),re("esri/widgets/Feature/t9n/Feature")],Ce.prototype,"messages",void 0),a([c(),re("esri/t9n/common")],Ce.prototype,"messagesCommon",void 0),a([c()],Ce.prototype,"visibleElements",void 0),a([be("visibleElements")],Ce.prototype,"castVisibleElements",null),Ce=a([C("esri.widgets.Feature.FeatureRelationship")],Ce);const la=Ce;let dm=class{constructor(e,t){this.preLayerQueryCallback=e,this.preRequestCallback=t,this.preLayerQueryCallback||(this.preLayerQueryCallback=s=>{}),this.preRequestCallback||(this.preLayerQueryCallback=s=>{})}};var ds;const um=1,ca="content-view-models",da="relationship-view-models",ua={attachmentsContent:!0,chartAnimation:!0,customContent:!0,expressionContent:!0,fieldsContent:!0,mediaContent:!0,textContent:!0,relationshipContent:!0};let Q=ds=class extends Rl(z){constructor(i){super(i),this._handles=new lt,this._error=null,this._featureAbortController=null,this._graphicChangedThrottled=Ui(this._graphicChanged,um,this),this._expressionAttributes=null,this._graphicExpressionAttributes=null,this.abilities={...ua},this.content=null,this.contentViewModels=[],this.description=null,this.defaultPopupTemplateEnabled=!1,this.formattedAttributes=null,this.lastEditInfo=null,this.relatedInfos=new Map,this.title="",this.view=null,this._isAllowedContentType=e=>{const{abilities:t}=this;return e.type==="attachments"&&t.attachmentsContent||e.type==="custom"&&t.customContent||e.type==="fields"&&t.fieldsContent||e.type==="media"&&t.mediaContent||e.type==="text"&&t.textContent||e.type==="expression"&&t.expressionContent||e.type==="relationship"&&t.relationshipContent},this._handles.add(I(()=>[this.graphic,this._effectivePopupTemplate,this.abilities],()=>this._graphicChangedThrottled(),H))}destroy(){this._clear(),this._cancelFeatureQuery(),this._error=null,this._handles.destroy(),this._handles=null,this.graphic=null,this._destroyContentViewModels(),this.relatedInfos.clear()}get _effectivePopupTemplate(){return E(this.graphic)?this.graphic.getEffectivePopupTemplate(this.defaultPopupTemplateEnabled):null}get _fieldInfoMap(){return Kh(Zr(this._effectivePopupTemplate),this._sourceLayer)}get _sourceLayer(){return Zl(this.graphic)}castAbilities(i){return{...ua,...i}}get state(){return this.graphic?this._error?"error":this.waitingForContent?"loading":"ready":"disabled"}set graphic(i){this._set("graphic",i?i.clone():null)}get spatialReference(){var i;return((i=this.view)==null?void 0:i.spatialReference)??null}set spatialReference(i){this._override("spatialReference",i)}get map(){var i;return((i=this.view)==null?void 0:i.map)||null}set map(i){this._override("map",i)}get waitingForContent(){return!!this._featureAbortController}setActiveMedia(i,e){const t=this.contentViewModels[i];t instanceof vi&&t.setActiveMedia(e)}nextMedia(i){const e=this.contentViewModels[i];e instanceof vi&&e.next()}previousMedia(i){const e=this.contentViewModels[i];e instanceof vi&&e.previous()}_clear(){this._set("title",""),this._set("content",null),this._set("formattedAttributes",null)}async _graphicChanged(){this._cancelFeatureQuery(),this._error=null,this._clear();const{graphic:i}=this;if(!i)return;const e=new AbortController;this._featureAbortController=e;try{await this._queryFeature({signal:e.signal})}catch(t){hl(t)||(this._error=t,B.getLogger(this.declaredClass).error("error","The popupTemplate could not be displayed for this feature.",{error:t,graphic:i,popupTemplate:this._effectivePopupTemplate}))}this._featureAbortController===e&&(this._featureAbortController=null)}_cancelFeatureQuery(){const{_featureAbortController:i}=this;i&&i.abort(),this._featureAbortController=null}_compileContentElement(i,e){return i.type==="attachments"?this._compileAttachments(i,e):i.type==="custom"?this._compileCustom(i,e):i.type==="fields"?this._compileFields(i,e):i.type==="media"?this._compileMedia(i,e):i.type==="text"?this._compileText(i,e):i.type==="expression"?this._compileExpression(i,e):i.type==="relationship"?this._compileRelationship(i,e):void 0}_compileContent(i){if(this._destroyContentViewModels(),this.graphic)return Array.isArray(i)?i.filter(this._isAllowedContentType).map((e,t)=>this._compileContentElement(e,t)):typeof i=="string"?this._compileText(new kl({text:i}),0).text:i}_destroyContentViewModels(){var i,e;(i=this._handles)==null||i.remove(da),(e=this._handles)==null||e.remove(ca),this.contentViewModels.forEach(t=>t&&!t.destroyed&&t.destroy()),this._set("contentViewModels",[])}_matchesFeature(i,e){var n;const t=(n=i==null?void 0:i.graphic)==null?void 0:n.getObjectId(),s=e==null?void 0:e.getObjectId();return E(t)&&E(s)&&t===s}_setRelatedFeaturesViewModels({relatedFeatureViewModels:i,relatedFeatures:e,map:t}){e==null||e.filter(Boolean).forEach(s=>{i.find(n=>this._matchesFeature(n,s))||i.add(new ds({abilities:{relationshipContent:!1},map:t,graphic:s}))}),i.forEach(s=>{(e==null?void 0:e.find(o=>this._matchesFeature(s,o)))||i.remove(s)})}_setExpressionContentVM(i,e){const{formattedAttributes:t}=this,{contentElement:s,contentElementViewModel:n}=i,o=s==null?void 0:s.type;n&&o&&(o==="fields"&&(this._createFieldsFormattedAttributes({contentElement:s,contentElementIndex:e,formattedAttributes:t}),n.set(this._createFieldsVMParams(s,e))),o==="media"&&(this._createMediaFormattedAttributes({contentElement:s,contentElementIndex:e,formattedAttributes:t}),n.set(this._createMediaVMParams(s,e))),o==="text"&&n.set(this._createTextVMParams(s)))}_compileRelationship(i,e){const{displayCount:t,orderByFields:s,relationshipId:n,title:o,description:r}=i,{_sourceLayer:l,graphic:d,map:u}=this,h=new rr({displayCount:t,graphic:d,orderByFields:s,relationshipId:n,layer:l,map:u,...this._compileTitleAndDesc({title:o,description:r})});return this.contentViewModels[e]=h,this._handles.add(Ke(()=>h.relatedFeatures,"change",()=>this._setRelatedFeaturesViewModels(h)),da),i}_compileExpression(i,e){const{expressionInfo:t}=i,{graphic:s,map:n,spatialReference:o,view:r}=this,l=new or({expressionInfo:t,graphic:s,interceptor:ds.interceptor,map:n,spatialReference:o,view:r});return this.contentViewModels[e]=l,this._handles.add(I(()=>l.contentElementViewModel,()=>this._setExpressionContentVM(l,e),H),ca),i}_compileAttachments(i,e){const{graphic:t}=this,{description:s,title:n}=i;return this.contentViewModels[e]=new tr({graphic:t,...this._compileTitleAndDesc({title:n,description:s})}),i}_compileCustom(i,e){const{graphic:t}=this,{creator:s,destroyer:n}=i;return this.contentViewModels[e]=new hn({graphic:t,creator:s,destroyer:n}),i}_compileTitleAndDesc({title:i,description:e}){const{_fieldInfoMap:t,_sourceLayer:s,graphic:n,formattedAttributes:o,_expressionAttributes:r}=this,{attributes:l}=n,d=o.global;return{title:yi({attributes:l,fieldInfoMap:t,globalAttributes:d,expressionAttributes:r,layer:s,text:i}),description:yi({attributes:l,fieldInfoMap:t,globalAttributes:d,expressionAttributes:r,layer:s,text:e})}}_createFieldsVMParams(i,e){var u;const{_effectivePopupTemplate:t,formattedAttributes:s}=this,n={...s.global,...s.content[e]},o=(u=(i==null?void 0:i.fieldInfos)||(t==null?void 0:t.fieldInfos))==null?void 0:u.filter(({fieldName:h})=>Qo(h)||Tt(h)||n.hasOwnProperty(h)),r=t==null?void 0:t.expressionInfos,{description:l,title:d}=i;return{attributes:n,expressionInfos:r,fieldInfos:o,...this._compileTitleAndDesc({title:d,description:l})}}_compileFields(i,e){const t=i.clone(),s=new En(this._createFieldsVMParams(i,e));return this.contentViewModels[e]=s,t.fieldInfos=s.formattedFieldInfos.slice(0),t}_createMediaVMParams(i,e){const{abilities:t,graphic:s,_fieldInfoMap:n,formattedAttributes:o,_effectivePopupTemplate:r,relatedInfos:l,_sourceLayer:d,_expressionAttributes:u}=this,{attributes:h}=s,{description:p,mediaInfos:g,title:f}=i;return{abilities:{chartAnimation:t.chartAnimation},activeMediaInfoIndex:i.activeMediaInfoIndex||0,attributes:h,layer:d,fieldInfoMap:n,formattedAttributes:{...o.global,...o.content[e]},expressionAttributes:u,mediaInfos:g,popupTemplate:r,relatedInfos:l,...this._compileTitleAndDesc({title:f,description:p})}}_compileMedia(i,e){const t=i.clone(),s=new vi(this._createMediaVMParams(i,e));return t.mediaInfos=s.formattedMediaInfos.slice(0),this.contentViewModels[e]=s,t}_createTextVMParams(i){const{graphic:e,_fieldInfoMap:t,_sourceLayer:s,_expressionAttributes:n}=this;if(i&&i.text){const{attributes:o}=e,r=this.formattedAttributes.global;i.text=yi({attributes:o,fieldInfoMap:t,globalAttributes:r,expressionAttributes:n,layer:s,text:i.text})}return{graphic:e,creator:i.text}}_compileText(i,e){const t=i.clone();return this.contentViewModels[e]=new hn(this._createTextVMParams(t)),t}_compileLastEditInfo(){const{_effectivePopupTemplate:i,_sourceLayer:e,graphic:t}=this;if(!i)return;const{lastEditInfoEnabled:s}=i,n=e==null?void 0:e.editFieldsInfo;return s&&n?Zh(n,t.attributes):void 0}_compileTitle(i){const{_fieldInfoMap:e,_sourceLayer:t,graphic:s,_expressionAttributes:n}=this,{attributes:o}=s,r=this.formattedAttributes.global;return yi({attributes:o,fieldInfoMap:e,globalAttributes:r,expressionAttributes:n,layer:t,text:i})}async _getTitle(){const{_effectivePopupTemplate:i,graphic:e}=this,t=i==null?void 0:i.title;return un(t,{graphic:e})}async _getContent(){const{_effectivePopupTemplate:i,graphic:e}=this,t=i==null?void 0:i.content;return un(t,{graphic:e})}async _queryFeature(i){const{_featureAbortController:e,_sourceLayer:t,graphic:s,_effectivePopupTemplate:n,spatialReference:o,map:r,view:l}=this;if(e!==this._featureAbortController||!s)return;await Jh({graphic:s,popupTemplate:n,layer:t,spatialReference:o},i);const{content:{value:d},title:{value:u}}=await ei({content:this._getContent(),title:this._getTitle()}),{expressionAttributes:{value:h}}=await ei({checkForRelatedFeatures:this._checkForRelatedFeatures(i),expressionAttributes:am({expressionInfos:n==null?void 0:n.expressionInfos,spatialReference:o,graphic:s,map:r,interceptor:ds.interceptor,view:l})});e===this._featureAbortController&&s&&(this._expressionAttributes=h,this._graphicExpressionAttributes={...s.attributes,...h},this._set("formattedAttributes",this._createFormattedAttributes(d)),this._set("title",this._compileTitle(u)),this._set("lastEditInfo",this._compileLastEditInfo()||null),this._set("content",this._compileContent(d)||null))}_createMediaFormattedAttributes({contentElement:i,contentElementIndex:e,formattedAttributes:t}){const{_effectivePopupTemplate:s,graphic:n,relatedInfos:o,_sourceLayer:r,_fieldInfoMap:l,_graphicExpressionAttributes:d}=this;t.content[e]=Un({fieldInfos:s==null?void 0:s.fieldInfos,graphic:n,attributes:{...d,...i.attributes},layer:r,fieldInfoMap:l,relatedInfos:o})}_createFieldsFormattedAttributes({contentElement:i,contentElementIndex:e,formattedAttributes:t}){if(i.fieldInfos){const{graphic:s,relatedInfos:n,_sourceLayer:o,_fieldInfoMap:r,_graphicExpressionAttributes:l}=this;t.content[e]=Un({fieldInfos:i.fieldInfos,graphic:s,attributes:{...l,...i.attributes},layer:o,fieldInfoMap:r,relatedInfos:n})}}_createFormattedAttributes(i){const{_effectivePopupTemplate:e,graphic:t,relatedInfos:s,_sourceLayer:n,_fieldInfoMap:o,_graphicExpressionAttributes:r}=this,l=e==null?void 0:e.fieldInfos,d={global:Un({fieldInfos:l,graphic:t,attributes:r,layer:n,fieldInfoMap:o,relatedInfos:s}),content:[]};return Array.isArray(i)&&i.forEach((u,h)=>{u.type==="fields"&&this._createFieldsFormattedAttributes({contentElement:u,contentElementIndex:h,formattedAttributes:d}),u.type==="media"&&this._createMediaFormattedAttributes({contentElement:u,contentElementIndex:h,formattedAttributes:d})}),d}_checkForRelatedFeatures(i){const{graphic:e,_effectivePopupTemplate:t}=this;return this._queryRelatedInfos(e,Zr(t),i)}async _queryRelatedInfos(i,e,t){const{relatedInfos:s,_sourceLayer:n}=this;s.clear();const o=E(n.associatedLayer)?await n.associatedLayer.load(t):n;if(!o)return;const r=e.filter(u=>u&&Tt(u.fieldName));if(!r||!r.length)return;e.forEach(u=>this._configureRelatedInfo(u,o));const l=await Up({relatedInfos:s,layer:o},t);Object.keys(l).forEach(u=>{var g;const h=s.get(u.toString()),p=(g=l[u])==null?void 0:g.value;h&&p&&(h.layerInfo=p.data)});const d=await Hp({graphic:i,relatedInfos:s,layer:o},t);Object.keys(d).forEach(u=>{var h;Dp((h=d[u])==null?void 0:h.value,s.get(u.toString()))})}_configureRelatedInfo(i,e){const{relatedInfos:t}=this,s=To(i.fieldName);if(!s)return;const{layerId:n,fieldName:o}=s;if(!n)return;const r=t.get(n.toString())||Op(n,e);r&&(qp({relatedInfo:r,fieldName:o,fieldInfo:i}),this.relatedInfos.set(n,r))}};Q.interceptor=new dm(tp,ip),a([c()],Q.prototype,"_error",void 0),a([c()],Q.prototype,"_featureAbortController",void 0),a([c({readOnly:!0})],Q.prototype,"_effectivePopupTemplate",null),a([c({readOnly:!0})],Q.prototype,"_fieldInfoMap",null),a([c({readOnly:!0})],Q.prototype,"_sourceLayer",null),a([c()],Q.prototype,"abilities",void 0),a([be("abilities")],Q.prototype,"castAbilities",null),a([c({readOnly:!0})],Q.prototype,"content",void 0),a([c({readOnly:!0})],Q.prototype,"contentViewModels",void 0),a([c()],Q.prototype,"description",void 0),a([c({type:Boolean})],Q.prototype,"defaultPopupTemplateEnabled",void 0),a([c({readOnly:!0})],Q.prototype,"state",null),a([c({readOnly:!0})],Q.prototype,"formattedAttributes",void 0),a([c({type:ct,value:null})],Q.prototype,"graphic",null),a([c({readOnly:!0})],Q.prototype,"lastEditInfo",void 0),a([c({readOnly:!0})],Q.prototype,"relatedInfos",void 0),a([c()],Q.prototype,"spatialReference",null),a([c({readOnly:!0})],Q.prototype,"title",void 0),a([c()],Q.prototype,"map",null),a([c({readOnly:!0})],Q.prototype,"waitingForContent",null),a([c()],Q.prototype,"view",void 0),Q=ds=a([C("esri.widgets.FeatureViewModel")],Q);const ar=Q,J={iconText:"esri-icon-font-fallback-text",iconLoading:"esri-icon-loading-indicator esri-rotating",esriTable:"esri-widget__table",esriWidget:"esri-widget",base:"esri-feature",container:"esri-feature__size-container",title:"esri-feature__title",main:"esri-feature__main-container",btn:"esri-feature__button",icon:"esri-feature__icon",content:"esri-feature__content",contentNode:"esri-feature__content-node",contentElement:"esri-feature__content-element",text:"esri-feature__text",lastEditedInfo:"esri-feature__last-edited-info",fields:"esri-feature__fields",fieldHeader:"esri-feature__field-header",fieldData:"esri-feature__field-data",fieldDataDate:"esri-feature__field-data--date",loadingSpinnerContainer:"esri-feature__loading-container",spinner:"esri-feature__loading-spinner"},ac=i=>{let e=class extends i{constructor(){super(...arguments),this.renderNodeContent=t=>bl(t)&&!t.destroyed?m("div",{class:J.contentNode,key:t},t.render()):t instanceof HTMLElement?m("div",{class:J.contentNode,key:t,bind:t,afterCreate:this._attachToNode}):Zd(t)?m("div",{class:J.contentNode,key:t,bind:t.domNode,afterCreate:this._attachToNode}):null}_attachToNode(t){const s=this;t.appendChild(s)}};return e=a([C("esri.widgets.Feature.ContentMixin")],e),e};var xo;const ha={title:!0,content:!0,lastEditedInfo:!0},pa="relationship-handles";let pe=xo=class extends ac(ue){constructor(i,e){super(i,e),this._contentWidgets=[],this.flowItems=null,this.headingLevel=2,this.messages=null,this.messagesCommon=null,this.messagesURIUtils=null,this.visibleElements={...ha},this.viewModel=new ar}initialize(){this.addHandles(I(()=>{var i;return(i=this.viewModel)==null?void 0:i.contentViewModels},()=>this._setupContentWidgets(),H))}loadDependencies(){return T(()=>import("./calcite-notice-c4b4be7f.js"),["assets/calcite-notice-c4b4be7f.js","assets/widget-4becb80f.js","assets/cast-6d78d3c7.js","assets/typedArrayUtil-d02f10a8.js","assets/string-9c5e03f7.js","assets/Error-4ed679d7.js","assets/ensureType-d98e08e1.js","assets/nextTick-3ee5a785.js","assets/promiseUtils-930cba29.js","assets/intl-a5c99ea3.js","assets/number-c7f1bfee.js","assets/jsonMap-5afaf2ff.js","assets/locale-30120714.js","assets/messages-634811b5.js","assets/request-e4299080.js","assets/preload-helper-101896b7.js","assets/assets-6ba3cd63.js","assets/Evented-b378ccab.js","assets/Promise-6bd0b483.js","assets/reactiveUtils-b0e56010.js","assets/uuid-73213768.js","assets/conditionalSlot-5e8f49e5.js","assets/observers-32bcc375.js","assets/icon-ba19bc6b.js"])}destroy(){this._destroyContentWidgets()}get graphic(){return this.viewModel.graphic}set graphic(i){this.viewModel.graphic=i}get defaultPopupTemplateEnabled(){return this.viewModel.defaultPopupTemplateEnabled}set defaultPopupTemplateEnabled(i){this.viewModel.defaultPopupTemplateEnabled=i}get label(){var i;return((i=this.messages)==null?void 0:i.widgetLabel)??""}set label(i){this._overrideIfSome("label",i)}get spatialReference(){return this.viewModel.spatialReference}set spatialReference(i){this.viewModel.spatialReference=i}get title(){return this.viewModel.title}castVisibleElements(i){return{...ha,...i}}get map(){return this.viewModel.map}set map(i){this.viewModel.map=i}get view(){return this.viewModel.view}set view(i){this.viewModel.view=i}render(){const{state:i}=this.viewModel,e=m("div",{class:J.container,key:"container"},this.renderTitle(),i==="error"?this.renderError():i==="loading"?this.renderLoading():this.renderContentContainer());return m("div",{class:this.classes(J.base,J.esriWidget)},e)}setActiveMedia(i,e){return this.viewModel.setActiveMedia(i,e)}nextMedia(i){return this.viewModel.nextMedia(i)}previousMedia(i){return this.viewModel.previousMedia(i)}renderError(){const{messagesCommon:i,messages:e,visibleElements:t}=this;return m("calcite-notice",{active:!0,color:"red",icon:"exclamation-mark-circle",scale:"s"},t.title?m("div",{key:"error-title",slot:"title"},i.errorMessage):null,m("div",{key:"error-message",slot:"message"},e.loadingError))}renderLoading(){return m("div",{key:"loading-container",class:J.loadingSpinnerContainer},m("span",{class:this.classes(J.iconLoading,J.spinner)}))}renderContentContainer(){const{visibleElements:i}=this;return i.content?m("div",{class:J.main},[this.renderContent(),this.renderLastEditInfo()]):null}renderTitle(){const{visibleElements:i,title:e}=this;return i.title?m(ir,{level:this.headingLevel,class:J.title,innerHTML:e}):null}renderContent(){const i=this.viewModel.content,e="content";if(!i)return null;if(Array.isArray(i))return i.length?m("div",{class:J.contentNode,key:`${e}-content-elements`},i.map(this.renderContentElement,this)):null;if(typeof i=="string"){const t=this._contentWidgets[0];return!t||t.destroyed?null:m("div",{class:J.contentNode,key:`${e}-content`},t.render())}return this.renderNodeContent(i)}renderContentElement(i,e){const{visibleElements:t}=this;if(typeof t.content!="boolean"&&!t.content[i.type])return null;switch(i.type){case"attachments":return this.renderAttachments(e);case"custom":return this.renderCustom(i,e);case"fields":return this.renderFields(e);case"media":return this.renderMedia(e);case"text":return this.renderText(i,e);case"expression":return this.renderExpression(e);case"relationship":return this.renderRelationship(e);default:return null}}renderAttachments(i){const e=this._contentWidgets[i];if(!e||e.destroyed)return null;const{state:t,attachmentInfos:s}=e.viewModel;return t==="loading"||s.length>0?m("div",{key:this._buildKey("attachments-element",i),class:this.classes(J.contentElement)},e.render()):null}renderRelationship(i){const e=this._contentWidgets[i];return e&&!e.destroyed&&this.flowItems?m("div",{key:this._buildKey("relationship-element",i),class:J.contentElement},e.render()):null}renderExpression(i){const e=this._contentWidgets[i];return!e||e.destroyed?null:m("div",{key:this._buildKey("expression-element",i),class:J.contentElement},e.render())}renderCustom(i,e){const{creator:t}=i,s=this._contentWidgets[e];return!s||s.destroyed?null:t?m("div",{key:this._buildKey("custom-element",e),class:J.contentElement},s.render()):null}renderFields(i){const e=this._contentWidgets[i];return!e||e.destroyed?null:m("div",{key:this._buildKey("fields-element",i),class:J.contentElement},e.render())}renderMedia(i){const e=this._contentWidgets[i];return!e||e.destroyed?null:m("div",{key:this._buildKey("media-element",i),class:J.contentElement},e.render())}renderLastEditInfo(){const{visibleElements:i,messages:e}=this,{lastEditInfo:t}=this.viewModel;if(!t||!i.lastEditedInfo)return null;const{date:s,user:n}=t,o=t.type==="edit"?n?e.lastEditedByUser:e.lastEdited:n?e.lastCreatedByUser:e.lastCreated,r=rt(o,{date:s,user:n});return m("div",{key:"edit-info-element",class:this.classes(J.lastEditedInfo,J.contentElement)},r)}renderText(i,e){const t=i.text,s=this._contentWidgets[e];return!s||s.destroyed?null:t?m("div",{key:this._buildKey("text-element",e),class:this.classes(J.contentElement,J.text)},s.render()):null}_buildKey(i,...e){return`${i}__${this.get("viewModel.graphic.uid")||"0"}-${e.join("-")}`}_destroyContentWidget(i){i&&(i.viewModel=null,!i.destroyed&&i.destroy())}_destroyContentWidgets(){this.removeHandles(pa),this._contentWidgets.forEach(i=>this._destroyContentWidget(i)),this._contentWidgets=[]}_addFeatureRelationshipHandles(i){const{flowItems:e,visibleElements:t}=this;this.addHandles([Ke(()=>i,"select-record",({featureViewModel:s})=>{e&&(s.abilities={relationshipContent:!0},e.push(new xo({flowItems:e,viewModel:s,visibleElements:t})))}),Ke(()=>i,"show-all-records",()=>{if(!e)return;const{viewModel:s}=i;s.showAllEnabled=!0;const n=new la({visibleElements:{title:!1,description:!1},viewModel:s});this._addFeatureRelationshipHandles(n),e.push(n)})],pa)}_setupContentWidgets(){this._destroyContentWidgets();const{headingLevel:i,visibleElements:e}=this,t=this.get("viewModel.content"),{contentViewModels:s}=this.viewModel;if(Array.isArray(t))t.forEach((n,o)=>{if(n.type==="attachments"&&(this._contentWidgets[o]=new cp({displayType:n.displayType,headingLevel:e.title?i+1:i,viewModel:s[o]})),n.type==="fields"&&(this._contentWidgets[o]=new sc({viewModel:s[o]})),n.type==="media"&&(this._contentWidgets[o]=new nc({viewModel:s[o]})),n.type==="text"&&(this._contentWidgets[o]=new Gs({viewModel:s[o]})),n.type==="custom"&&(this._contentWidgets[o]=new Gs({viewModel:s[o]})),n.type==="expression"&&(this._contentWidgets[o]=new cm({viewModel:s[o]})),n.type==="relationship"){const r=new la({viewModel:s[o]});this._addFeatureRelationshipHandles(r),this._contentWidgets[o]=r}},this);else{const n=s[0];n&&!n.destroyed&&(this._contentWidgets[0]=new Gs({viewModel:n}))}this.scheduleRender()}};a([c()],pe.prototype,"graphic",null),a([c()],pe.prototype,"defaultPopupTemplateEnabled",null),a([c()],pe.prototype,"flowItems",void 0),a([c()],pe.prototype,"headingLevel",void 0),a([c()],pe.prototype,"label",null),a([c(),re("esri/widgets/Feature/t9n/Feature")],pe.prototype,"messages",void 0),a([c(),re("esri/t9n/common")],pe.prototype,"messagesCommon",void 0),a([c(),re("esri/widgets/support/t9n/uriUtils")],pe.prototype,"messagesURIUtils",void 0),a([c()],pe.prototype,"spatialReference",null),a([c({readOnly:!0})],pe.prototype,"title",null),a([c()],pe.prototype,"visibleElements",void 0),a([be("visibleElements")],pe.prototype,"castVisibleElements",null),a([c()],pe.prototype,"map",null),a([c()],pe.prototype,"view",null),a([c({type:ar})],pe.prototype,"viewModel",void 0),pe=xo=a([C("esri.widgets.Feature")],pe);const hm=pe;var lc;const Ws=Symbol("anchorHandles");let li=class extends Wi.EventedAccessor{constructor(e){super(e),this[lc]=new lt,this.location=null,this.screenLocationEnabled=!1,this.view=null,this[Ws].add([At(()=>os(this.screenLocationEnabled?this.view:null,t=>[t.size,t.type==="3d"?t.camera:t.viewpoint]),()=>this.notifyChange("screenLocation")),I(()=>this.screenLocation,(t,s)=>{E(t)&&E(s)&&this.emit("view-change")})])}destroy(){this.view=null,this[Ws]=Te(this[Ws])}get screenLocation(){const{location:e,view:t,screenLocationEnabled:s}=this;return s&&E(e)&&E(t)&&t.ready?t.toScreen(e):null}};lc=Ws,a([c()],li.prototype,"location",void 0),a([c()],li.prototype,"screenLocation",null),a([c()],li.prototype,"screenLocationEnabled",void 0),a([c()],li.prototype,"view",void 0),li=a([C("esri.widgets.support.AnchorElementViewModel")],li);const cc=li,pm="esri.widgets.CompassViewModel";let Zs=class extends cc{constructor(e){super(e),this.visible=!1}};a([c()],Zs.prototype,"visible",void 0),Zs=a([C(pm)],Zs);const dc=Zs,Yn={base:"esri-spinner",spinnerStart:"esri-spinner--start",spinnerFinish:"esri-spinner--finish"};let ci=class extends ue{constructor(e,t){super(e,t),this._animationDelay=500,this._animationPromise=null,this.viewModel=new dc}initialize(){this.addHandles(I(()=>this.visible,e=>this._visibleChange(e)))}destroy(){this._animationPromise=null}get location(){return this.viewModel.location}set location(e){this.viewModel.location=e}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}get visible(){return this.viewModel.visible}set visible(e){this.viewModel.visible=e}show(e){const{location:t,promise:s}=e;t&&(this.viewModel.location=t),this.visible=!0;const n=()=>this.hide();s&&s.catch(()=>{}).then(n)}hide(){this.visible=!1}render(){const{visible:e}=this,{screenLocation:t}=this.viewModel,s=!!t,n=e&&s,o=!e&&s,r={[Yn.spinnerStart]:n,[Yn.spinnerFinish]:o},l=this._getPositionStyles();return m("div",{class:this.classes(Yn.base,r),styles:l})}_visibleChange(e){if(e)return void(this.viewModel.screenLocationEnabled=!0);const t=Bo(this._animationDelay);this._animationPromise=t,t.catch(()=>{}).then(()=>{this._animationPromise===t&&(this.viewModel.screenLocationEnabled=!1,this._animationPromise=null)})}_getPositionStyles(){const{screenLocation:e,view:t}=this.viewModel;if(O(t)||O(e))return{};const{padding:s}=t;return{left:e.x-s.left+"px",top:e.y-s.top+"px"}}};a([c()],ci.prototype,"location",null),a([c()],ci.prototype,"view",null),a([c({type:dc})],ci.prototype,"viewModel",void 0),a([c()],ci.prototype,"visible",null),ci=a([C("esri.widgets.Spinner")],ci);const mm=ci,gm="OBJECTID";var ma;(function(i){i[i.size=22]="size",i[i.lineWidth=50]="lineWidth",i[i.maxSize=120]="maxSize",i[i.maxOutlineSize=80]="maxOutlineSize",i[i.tallSymbolWidth=20]="tallSymbolWidth"})(ma||(ma={}));const ga=$e("android");$e("chrome")||ga&&ga>=4;ho();function uc(i){return i&&"opacity"in i?i.opacity*uc(i.parent):1}async function fm(i,e){if(!i)return;const t=i.sourceLayer,s=(E(e)&&e.useSourceLayer?t:i.layer)??t,n=uc(s);if(E(i.symbol)&&(!E(e)||e.ignoreGraphicSymbol!==!0)){const v=i.symbol.type==="web-style"?await i.symbol.fetchSymbol({...e,cache:E(e)?e.webStyleCache:null}):i.symbol.clone();return Fn(v,null,n),v}const o=(E(e)?e.renderer:null)??(s&&"renderer"in s?s.renderer:null);let r=o&&"getSymbolAsync"in o?await o.getSymbolAsync(i,e):null;if(!r)return;if(r=r.type==="web-style"?await r.fetchSymbol({...e,cache:E(e)?e.webStyleCache:null}):r.clone(),!(o&&"visualVariables"in o&&o.visualVariables&&o.visualVariables.length))return Fn(r,null,n),r;if("arcadeRequiredForVisualVariables"in o&&o.arcadeRequiredForVisualVariables&&(O(e)||O(e.arcade))){const v={...Ve(e)};v.arcade=await Pl(),e=v}const l=await T(()=>import("./UniqueValueRenderer-cd716182.js").then(v=>v.v),["assets/UniqueValueRenderer-cd716182.js","assets/cast-6d78d3c7.js","assets/typedArrayUtil-d02f10a8.js","assets/string-9c5e03f7.js","assets/Error-4ed679d7.js","assets/ensureType-d98e08e1.js","assets/nextTick-3ee5a785.js","assets/promiseUtils-930cba29.js","assets/symbols-64db5dd6.js","assets/CIMSymbol-a95ceb49.js","assets/enumeration-497ef064.js","assets/jsonMap-5afaf2ff.js","assets/Extent-d5fff12d.js","assets/fieldUtils-141b2ff2.js","assets/preload-helper-101896b7.js","assets/arcadeOnDemand-72c57f7a.js","assets/geometry-70b2a4a5.js","assets/Polyline-42dcc920.js","assets/typeUtils-b6c52390.js","assets/Symbol-1bb07043.js","assets/Color-b7b9e6bb.js","assets/colorUtils-639f4d25.js","assets/mathUtils-daf59e84.js","assets/common-701a4199.js","assets/screenUtils-7afeb41c.js","assets/opacityUtils-8b7acc4e.js","assets/aaBoundingBox-33fc923c.js","assets/request-e4299080.js","assets/persistableUrlUtils-d18becd9.js","assets/Collection-42fe629f.js","assets/Evented-b378ccab.js","assets/SimpleObservable-e0897cc6.js","assets/collectionUtils-3d8a9611.js","assets/Portal-fbb2b73d.js","assets/Loadable-b0d5bb7e.js","assets/Promise-6bd0b483.js","assets/locale-30120714.js","assets/PortalGroup-813428fa.js","assets/PortalUser-cf18ae9d.js","assets/Clonable-58355d3c.js","assets/LegendOptions-e31ff575.js","assets/reactiveUtils-b0e56010.js","assets/diffUtils-713e5c9b.js","assets/colorRamps-c00f504b.js","assets/sizeVariableUtils-d4870b0d.js","assets/Graphic-e4fb7090.js","assets/PopupTemplate-d6e0b369.js","assets/number-c7f1bfee.js","assets/Identifiable-57df9761.js","assets/jsonUtils-5115c7e5.js","assets/compilerUtils-eefea0ec.js","assets/lengthUtils-0dde2114.js","assets/unitUtils-b69647a1.js","assets/jsonUtils-b1b224a3.js","assets/styleUtils-0c73f570.js"]),d=[],u=[],h=[],p=[];for(const v of o.visualVariables)switch(v.type){case"color":d.push(v);break;case"opacity":u.push(v);break;case"rotation":p.push(v);break;case"size":v.target||h.push(v)}const g=!!d.length&&d[d.length-1],f=g?l.getColor(g,i,e):null,_=!!u.length&&u[u.length-1];let y=_?l.getOpacity(_,i,e):null;if(n!=null&&(y=y!=null?y*n:n),Fn(r,f,y),h.length){const v=l.getAllSizes(h,i,e);await uu(r,v)}for(const v of p)hu(r,l.getRotationAngle(v,i,e),v.axis);return r}let _m=class{constructor(e,t){this._owner=t,this._properties={},this._afterDispatchHandle=null;for(const s in e){const n=e[s],o=new cd(n,void 0,void 0,2,2);this._properties[s]={pool:o,acquired:[]}}this._afterDispatchHandle=dd(()=>this._release())}destroy(){this._afterDispatchHandle&&(this._afterDispatchHandle.remove(),this._afterDispatchHandle=null);for(const e in this._properties){const t=this._properties[e];for(const s of t.acquired)_r(s)||t.pool.release(s);t.pool.destroy(),t.pool=null,t.acquired=null}this._properties=null,this._owner=null}get(e){const t=this._owner._get(e),s=this._properties[e];let n=s.pool.acquire();for(s.acquired.push(n);n===t;)s.acquired.push(n),n=s.pool.acquire();return n}_release(){for(const e in this._properties){const t=this._properties[e];let s=0;for(const n of t.acquired)_r(n)?t.acquired[s++]=n:t.pool.release(n);t.acquired.length=s}}};const ym=$e("mac")?"Meta":"Ctrl",Tn={8:"Backspace",9:"Tab",13:"Enter",27:"Escape",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete"};for(let i=48;i<58;i++)Tn[i]=String.fromCharCode(i);for(let i=1;i<25;i++)Tn[111+i]=`F${i}`;for(let i=65;i<91;i++)Tn[i]=[String.fromCharCode(i+32),String.fromCharCode(i)];function vm(i){if(i.key!==void 0)return gi(i);const e=Tn[i.keyCode];return Array.isArray(e)?i.shiftKey?e[1]:e[0]:e}function wm(i){switch(i){case"Ctrl":case"Alt":case"Shift":case"Meta":case"Primary":return!0}return!1}let bm=class{constructor(e,t=[]){this.eventType=e,this.keyModifiers=t}matches(e){if(e.type!==this.eventType)return!1;if(this.keyModifiers.length===0)return!0;const t=e.modifiers;for(const s of this.keyModifiers)if(!t.has(s))return!1;return!0}};const fa=B.getLogger("esri.views.input.InputHandler");let he=class{constructor(e){this._manager=null,this._incoming={},this._outgoing={},this._incomingEventMatches=null,this._incomingEventTypes=null,this._outgoingEventTypes=null,this._hasSideEffects=e}get incomingEventMatches(){if(!this._incomingEventMatches){this._incomingEventMatches=[];for(const e in this._incoming){const t=this._incoming[e];for(const s of t)this._incomingEventMatches.push(s.match)}}return this._incomingEventMatches}get incomingEventTypes(){return this._incomingEventTypes||(this._incomingEventTypes=this.incomingEventMatches.map(e=>e.eventType)),this._incomingEventTypes}get outgoingEventTypes(){return this._outgoingEventTypes||(this._outgoingEventTypes=Object.keys(this._outgoing)),this._outgoingEventTypes}get hasSideEffects(){return this._hasSideEffects}get hasPendingInputs(){return!1}onInstall(e){this._manager?fa.error("This InputHandler has already been registered with an InputManager"):(e.setEventCallback(t=>this._handleEvent(t)),e.setUninstallCallback(()=>this._onUninstall()),this._manager=e)}onUninstall(){}registerIncoming(e,t,s){let n;typeof t=="function"?(s=t,n=[]):n=t||[];const o=typeof e=="string"?new bm(e,n):e,r=()=>{this._incomingEventTypes=null,this._incomingEventMatches=null},l=h=>{const p=this._incoming[h.match.eventType];if(p){const g=p.indexOf(h);p.splice(g,1),r(),this._manager&&this._manager.updateDependencies()}},d=new Mm(o,s,{onPause:l,onRemove:l,onResume:h=>{const p=this._incoming[h.match.eventType];p&&!p.includes(h)&&(p.push(h),r(),this._manager&&this._manager.updateDependencies())}});let u=this._incoming[o.eventType];return u||(u=[],this._incoming[o.eventType]=u),u.push(d),r(),this._manager&&this._manager.updateDependencies(),d}registerOutgoing(e){if(this._outgoing[e])throw new Error("There is already a callback registered for this outgoing InputEvent: "+e);const t=new Im(e,{onEmit:(s,n,o,r)=>{var l;(l=this._manager)==null||l.emit(s.eventType,n,o,r)},onRemove:s=>{var n;delete this._outgoing[s.eventType],(n=this._manager)==null||n.updateDependencies()}});return this._outgoing[e]=t,this._outgoingEventTypes=null,this._manager&&this._manager.updateDependencies(),t}startCapturingPointer(e){var t;(t=this._manager)==null||t.setPointerCapture(e,!0)}stopCapturingPointer(e){var t;(t=this._manager)==null||t.setPointerCapture(e,!1)}refreshHasPendingInputs(){var e;(e=this._manager)==null||e.refreshHasPendingInputs()}_onUninstall(){this._manager?(this.onUninstall(),this._manager=null):fa.error("This InputHandler is not registered with an InputManager")}_handleEvent(e){var s;const t=this._incoming[e.type];if(t){for(const n of t)if(n.match.matches(e)&&((s=n.callback)==null||s.call(n,e),e.shouldStopPropagation()))break}}},Mm=class{constructor(e,t,s){this.match=e,this._callback=t,this._handler=s}pause(){this._handler.onPause(this)}resume(){this._handler.onResume(this)}remove(){this._handler.onRemove(this)}get callback(){return this._callback}},Im=class{constructor(e,t){this.eventType=e,this._removed=!1,this._handler=t}emit(e,t,s){this._removed||this._handler.onEmit(this,e,t,s)}remove(){this._removed=!0,this._handler.onRemove(this)}},Cm=class extends he{constructor(e){super(!0),this._onChange=e,this._value="mouse",this._x=null,this._y=null,this.registerIncoming("pointer-move",t=>{this._update(t.data)})}_update(e){const t=e.native.pointerType==="touch"?"touch":"mouse",{x:s,y:n}=e;t===this._value&&this._x===s&&this._y===n||(this._value=t,this._x=s,this._y=n,this._onChange(t,s,n))}},Em=class extends he{constructor(){super(!0),this._activeTouchPointerIds=new Set,this._multiTouchActive=new Au(!1),this._onPointerAdd=({data:e})=>{e.pointerType==="touch"&&(this._activeTouchPointerIds.add(e.native.pointerId),this._update())},this._onPointerRemove=({data:e})=>{e.pointerType==="touch"&&(this._activeTouchPointerIds.delete(e.native.pointerId),this._update())},this.registerIncoming("pointer-down",this._onPointerAdd),this.registerIncoming("pointer-up",this._onPointerRemove),this.registerIncoming("pointer-capture-lost",this._onPointerRemove),this.registerIncoming("pointer-cancel",this._onPointerRemove)}get multiTouchActive(){return this._multiTouchActive.get()}_update(){this._multiTouchActive.set(this._activeTouchPointerIds.size>1)}},tt=class extends z{constructor(e){super(e),this._pointerCaptures=new Map,this._nameToGroup={},this._handlers=[],this._handlersPriority=[],this._currentPropagation=null,this._updateDependenciesAfterPropagation=!1,this._sourceEvents=new Set,this._keyModifiers=new Set,this._activeKeyModifiers=new Set,this._stoppedPropagationEventIds=new Set,this.primaryKey=ym,this._latestPointerType="mouse",this._propertiesPool=new _m({latestPointerLocation:xm},this),this.latestPointerLocation=null,this.test={timestamp:void 0,hasCurrentPropagation:()=>!!this._currentPropagation}}initialize(){this.eventSource.onEventReceived=this._onEventReceived.bind(this),this._installRecognizers()}destroy(){const e=Object.keys(this._nameToGroup);for(const t of e)this.uninstallHandlers(t);this.eventSource.destroy(),this._currentPropagation=null,this._propertiesPool.destroy()}get hasPendingInputs(){return this._handlers.some(e=>e.handler.hasPendingInputs)}get latestPointerType(){return this._latestPointerType}get multiTouchActive(){return this._multiTouchHandler.multiTouchActive}installHandlers(e,t,s=Qt.INTERNAL){if(this._nameToGroup[e])return void B.getLogger(this.declaredClass).error("There is already an InputHandler group registered under the name `"+e+"`");if(t.length===0)return void B.getLogger(this.declaredClass).error("Can't register a group of zero handlers");const n={name:e,handlers:t.map(o=>({handler:o,active:!0,removed:!1,priorityIndex:0,groupPriority:s,eventCallback:null,uninstallCallback:null}))};this._nameToGroup[e]=n;for(let o=n.handlers.length-1;o>=0;o--){const r=n.handlers[o];this._handlers.push(r),r.handler.onInstall({updateDependencies:()=>{this.updateDependencies()},emit:(l,d,u,h,p)=>{this._emitInputEvent(r.priorityIndex+1,l,d,u,p,h)},setPointerCapture:(l,d)=>{this._setPointerCapture(n,r,l,d)},setEventCallback:l=>{r.eventCallback=l},setUninstallCallback:l=>{r.uninstallCallback=l},refreshHasPendingInputs:()=>{this.notifyChange("hasPendingInputs")}})}this.updateDependencies()}uninstallHandlers(e){const t=this._nameToGroup[e];t?(t.handlers.forEach(s=>{var n;s.removed=!0,(n=s.uninstallCallback)==null||n.call(s)}),delete this._nameToGroup[e],this._currentPropagation?this._currentPropagation.needsHandlerGarbageCollect=!0:this._garbageCollectRemovedHandlers()):B.getLogger(this.declaredClass).error("There is no InputHandler group registered under the name `"+e+"`")}hasHandlers(e){return this._nameToGroup[e]!==void 0}updateDependencies(){if(this._currentPropagation)return void(this._updateDependenciesAfterPropagation=!0);this._updateDependenciesAfterPropagation=!1;const e=new Set,t=new Set;this._handlersPriority=[];for(let s=this._handlers.length-1;s>=0;s--){const n=this._handlers[s];n.priorityIndex=s,this._handlersPriority.push(n)}this._handlersPriority=this._sortHandlersPriority(this._handlersPriority);for(let s=this._handlersPriority.length-1;s>=0;s--){const n=this._handlersPriority[s];n.priorityIndex=s;let o=n.handler.hasSideEffects;if(!o){for(const r of n.handler.outgoingEventTypes)if(e.has(r)){o=!0;break}}if(o)for(const r of n.handler.incomingEventMatches){e.add(r.eventType);for(const l of r.keyModifiers)wm(l)||t.add(l)}n.active=o}this._sourceEvents=e,this._keyModifiers=t,this._pointerCaptures.size>0&&this._sourceEvents.add("pointer-capture-lost"),this._keyModifiers.size>0&&(this._sourceEvents.add("key-down"),this._sourceEvents.add("key-up")),this.eventSource&&(this.eventSource.activeEvents=this._sourceEvents)}_setLatestPointer(e,t,s){this._latestPointerType=e;const n=this._get("latestPointerLocation");if(O(n)||n.x!==t||n.y!==s){const o=this._propertiesPool.get("latestPointerLocation");o.x=t,o.y=s,this._set("latestPointerLocation",o)}}_onEventReceived(e,t){if(e==="pointer-capture-lost"){const o=t;this._pointerCaptures.delete(o.native.pointerId)}this._updateKeyModifiers(e,t);const s=this.test.timestamp!=null?this.test.timestamp:t.native?t.native.timestamp:void 0,n=t.native?t.native.cancelable:void 0;this._emitInputEventFromSource(e,t,s,n)}_updateKeyModifiers(e,t){if(!t)return;let s=!1;const n=()=>{if(!s){const l=new Set;this._activeKeyModifiers.forEach(d=>{l.add(d)}),this._activeKeyModifiers=l,s=!0}},o=(l,d)=>{d&&!this._activeKeyModifiers.has(l)?(n(),this._activeKeyModifiers.add(l)):!d&&this._activeKeyModifiers.has(l)&&(n(),this._activeKeyModifiers.delete(l))};if(e==="key-down"||e==="key-up"){const l=t.key;this._keyModifiers.has(l)&&o(l,e==="key-down")}const r=t.native;o("Alt",!(!r||!r.altKey)),o("Ctrl",!(!r||!r.ctrlKey)),o("Shift",!(!r||!r.shiftKey)),o("Meta",!(!r||!r.metaKey)),o("Primary",this._activeKeyModifiers.has(this.primaryKey))}_installRecognizers(){this._latestPointerHandler=new Cm((e,t,s)=>this._setLatestPointer(e,t,s)),this._multiTouchHandler=new Em,this.installHandlers("input-manager-logic",[this._latestPointerHandler,this._multiTouchHandler],Qt.ALWAYS),this.recognizers.length>0&&this.installHandlers("default",this.recognizers,Qt.INTERNAL)}_setPointerCapture(e,t,s,n){const o=e.name+"-"+t.priorityIndex,r=this._pointerCaptures.get(s.pointerId)||new Set;this._pointerCaptures.set(s.pointerId,r),n?(r.add(o),r.size===1&&this.eventSource&&this.eventSource.setPointerCapture(s,!0)):r.has(o)&&(r.delete(o),r.size===0&&(this._pointerCaptures.delete(s.pointerId),this.eventSource&&this.eventSource.setPointerCapture(s,!1)))}_garbageCollectRemovedHandlers(){this._handlers=this._handlers.filter(e=>!e.removed),this.updateDependencies()}_emitInputEventFromSource(e,t,s,n){this._emitInputEvent(0,e,t,s,n)}_emitInputEvent(e,t,s,n,o,r){const l=n!==void 0?n:this._currentPropagation?this._currentPropagation.timestamp:performance.now(),d=o!==void 0&&o,u={event:new Tm(t,s,l,r||this._activeKeyModifiers,d),priorityIndex:e};this._currentPropagation?this._currentPropagation.events.push(u):this._doNewPropagation(u)}_doNewPropagation(e){this._currentPropagation={events:new Ar,currentHandler:null,needsHandlerGarbageCollect:!1,timestamp:e.event.timestamp},this._currentPropagation.events.push(e),this._continuePropagation()}_continuePropagation(){var t,s;const e=Ad(this._currentPropagation);for(;e.events.length>0;){const{event:n,priorityIndex:o}=e.events.pop(),r=n.data&&n.data.eventId;if(!(r!=null&&this._stoppedPropagationEventIds.has(r)))for(e.currentHandler=this._handlersPriority[o];e.currentHandler;){if(e.currentHandler.removed)e.needsHandlerGarbageCollect=!0;else{if(e.currentHandler.active&&!n.shouldStopPropagation()&&((s=(t=e.currentHandler).eventCallback)==null||s.call(t,n)),n.shouldStopPropagation()){r!=null&&this._stoppedPropagationEventIds.add(r);break}if(n.shouldPausePropagation(()=>this._continuePropagation()))return void this._pausePropagation({event:n,priorityIndex:e.currentHandler.priorityIndex+1})}e.currentHandler=this._handlersPriority[e.currentHandler.priorityIndex+1]}}e.needsHandlerGarbageCollect&&this._garbageCollectRemovedHandlers(),this.hasPendingInputs||this._stoppedPropagationEventIds.clear(),this._currentPropagation=null,this._updateDependenciesAfterPropagation&&this.updateDependencies()}_pausePropagation(e){const t=new Ar;t.push(e);const s=this._currentPropagation;if(s){for(;s.events.length;)t.push(s.events.pop());s.events=t,s.currentHandler=null}}_compareHandlerPriority(e,t){if(e.handler.hasSideEffects!==t.handler.hasSideEffects)return e.handler.hasSideEffects?1:-1;if(e.groupPriority!==t.groupPriority)return e.groupPriority>t.groupPriority?-1:1;for(const s of e.handler.incomingEventMatches)for(const n of t.handler.incomingEventMatches){if(s.eventType!==n.eventType)continue;const o=s.keyModifiers.filter(r=>n.keyModifiers.includes(r));if(o.length===s.keyModifiers.length!=(o.length===n.keyModifiers.length))return s.keyModifiers.length>n.keyModifiers.length?-1:1}return e.priorityIndex>t.priorityIndex?-1:1}_sortHandlersPriority(e){const t=[];for(const s of e){let n=0;for(;n<t.length&&this._compareHandlerPriority(s,t[n])>=0;)n++;t.splice(n,0,s)}return t}get debug(){const e=t=>{const s=this._setPointerCapture;this._setPointerCapture=()=>{},t(),this._setPointerCapture=s};return{injectEvent:(t,s)=>{e(()=>{this._onEventReceived(t,s)})},disablePointerCapture:e}}};a([c({readOnly:!0})],tt.prototype,"hasPendingInputs",null),a([c({constructOnly:!0})],tt.prototype,"eventSource",void 0),a([c({constructOnly:!0})],tt.prototype,"recognizers",void 0),a([c()],tt.prototype,"_latestPointerType",void 0),a([c()],tt.prototype,"latestPointerType",null),a([c()],tt.prototype,"multiTouchActive",null),a([c({readOnly:!0})],tt.prototype,"latestPointerLocation",void 0),tt=a([C("esri.views.input.InputManager")],tt);let Tm=class{constructor(e,t,s,n,o){this.type=e,this.data=t,this.timestamp=s,this.modifiers=n,this.cancelable=o,this._propagationState=Kt.NONE,this._resumeCallback=null}stopPropagation(){this._propagationState|=Kt.STOPPED}shouldStopPropagation(){return(this._propagationState&Kt.STOPPED)!=0}async(e){this._propagationState|=Kt.PAUSED;const t=(s,n)=>{this._propagationState&=~Kt.PAUSED;const o=this._resumeCallback;if(this._resumeCallback=null,o&&o(),n)throw s;return s};return(typeof e=="function"?e():e).then(s=>t(s,!1),s=>t(s,!0))}shouldPausePropagation(e){return!!(this._propagationState&Kt.PAUSED)&&(this._resumeCallback=e,!0)}preventDefault(){this.data.native.preventDefault()}};var Kt;(function(i){i[i.NONE=0]="NONE",i[i.STOPPED=1]="STOPPED",i[i.PAUSED=2]="PAUSED"})(Kt||(Kt={}));const Qt={ALWAYS:1,DEFAULT:0,TOOL:-1,WIDGET:-2,INTERNAL:-3};let xm=class{};function _a(i){return i&&typeof i.highlight=="function"}const xn={iconZoom:"esri-icon-zoom-in-magnifying-glass",iconTrash:"esri-icon-trash",iconBrowseClusteredFeatures:"esri-icon-table"},wi=new Ts({id:"zoom-to-feature",title:"{messages.zoom}",className:xn.iconZoom}),ko=new Ts({id:"remove-selected-feature",title:"{messages.remove}",className:xn.iconTrash}),Ni=new Ts({id:"zoom-to-clustered-features",title:"{messages.zoom}",className:xn.iconZoom}),zi=new Ts({id:"browse-clustered-features",title:"{messages.browseClusteredFeatures}",className:xn.iconBrowseClusteredFeatures}),km="esri.widgets.Popup.PopupViewModel",mn=B.getLogger(km),Am=i=>{const{event:e,view:t}=i,{action:s}=e,n=t&&t.popup;if(!s)return Promise.reject(new $("trigger-action:missing-arguments","Event has no action"));if(!n)return Promise.reject(new $("trigger-action:missing-arguments","view.popup is missing"));const{disabled:o,id:r}=s;if(!r)return Promise.reject(new $("trigger-action:invalid-action","action.id is missing"));if(o)return Promise.reject(new $("trigger-action:invalid-action","Action is disabled"));if(r===wi.id)return $m(n.viewModel).catch(fd);if(r===Ni.id)return Sm(n.viewModel);if(r===zi.id)return n.featureMenuOpen=!n.featureMenuOpen,n.viewModel.browseClusterEnabled=!n.viewModel.browseClusterEnabled,Promise.resolve();if(n.viewModel.browseClusterEnabled=!1,r===ko.id){n.close();const{selectedFeature:l}=n;if(!l)return Promise.reject(new $(`trigger-action:${ko.id}`,"selectedFeature is required",{selectedFeature:l}));const{sourceLayer:d}=l;return d?d.remove(l):t.graphics.remove(l),Promise.resolve()}return Promise.resolve()};function hc(i){const{selectedFeature:e,location:t,view:s}=i;return s?s.type==="3d"?e||t:i.get("selectedFeature.geometry")||t:null}function fi(i){var e,t;return(i==null?void 0:i.isAggregate)&&((t=(e=i==null?void 0:i.sourceLayer)==null?void 0:e.featureReduction)==null?void 0:t.type)==="cluster"}async function Pm(i,e){if((e==null?void 0:e.type)!=="3d"||!i||i.declaredClass!=="esri.Graphic")return!0;const t=e.getViewForGraphic(i);if(t&&"whenGraphicBounds"in t){let s;try{s=await t.whenGraphicBounds(i,{useViewElevation:!0})}catch{}return!s||!s.boundingBox||s.boundingBox[0]===s.boundingBox[3]&&s.boundingBox[1]===s.boundingBox[4]&&s.boundingBox[2]===s.boundingBox[5]}return!0}async function $m(i){const{location:e,selectedFeature:t,view:s,zoomFactor:n}=i,o=hc(i);if(!o){const u=new $("zoom-to:invalid-target-or-view","Cannot zoom to location without a target and view.",{target:o,view:s});throw mn.error(u),u}const r=s.scale/n,l=i.get("selectedFeature.geometry")||e,d=l&&l.type==="point"&&await Pm(t,s);wi.active=!0,wi.disabled=!0;try{await i.zoomTo({target:{target:o,scale:d?r:void 0}})}catch{const h=new $("zoom-to:invalid-graphic","Could not zoom to the location of the graphic.",{graphic:t});mn.error(h)}finally{wi.active=!1,wi.disabled=!1,i.zoomToLocation=null,d&&(i.location=l)}}async function Sm(i){const{selectedFeature:e,view:t}=i;if((t==null?void 0:t.type)!=="2d"){const l=new $("zoomToCluster:invalid-view","View must be 2d MapView.",{view:t});throw mn.error(l),l}if(!fi(e)){const l=new $("zoomToCluster:invalid-selectedFeature","Selected feature must represent an aggregate/cluster graphic.",{selectedFeature:e});throw mn.error(l),l}const s=e.sourceLayer,n=await t.whenLayerView(s),o=n.createQuery();o.aggregateIds=[e.getObjectId()],Ni.active=!0,Ni.disabled=!0;const{extent:r}=await n.queryExtent(o);await i.zoomTo({target:r}),Ni.active=!1,Ni.disabled=!1}async function Rm(i){const{selectedFeature:e,view:t}=i,s=e.sourceLayer,n=await t.whenLayerView(s),o=n.createQuery();o.aggregateIds=[e.getObjectId()];const{extent:r}=await n.queryExtent(o);i.selectedClusterBoundaryFeature.geometry=r,t.graphics.add(i.selectedClusterBoundaryFeature)}async function Lm(i){const{selectedFeature:e,view:t}=i,s=e.sourceLayer,n=await t.whenLayerView(s),o=n.createQuery();o.aggregateIds=[e.getObjectId()],zi.active=!0,zi.disabled=!0;const{features:r}=await n.queryFeatures(o);zi.active=!1,zi.disabled=!1,t.popup.open({features:[e].concat(r),featureMenuOpen:!0})}function Fm(i){const e=i.features.filter(t=>fi(t));e.length&&(i.features=e)}const kn=i=>{let e=class extends i{constructor(...t){super(...t),this.goToOverride=null,this.view=null}callGoTo(t){const{view:s}=this;return this.goToOverride?this.goToOverride(s,t):s.goTo(t.target,t.options)}};return a([c()],e.prototype,"goToOverride",void 0),a([c()],e.prototype,"view",void 0),e=a([C("esri.widgets.support.GoTo")],e),e},_s=ee.ofType({key:"type",defaultKeyValue:"button",base:cu,typeMap:{button:Ts,toggle:du}}),Om=()=>[wi.clone()],Dm=()=>[Ni.clone(),zi.clone()];let N=class extends kn(cc){constructor(e){super(e),this._handles=new lt,this._pendingPromises=new Set,this._fetchFeaturesController=null,this._selectedClusterFeature=null,this.featurePage=null,this.actions=new _s,this.activeFeature=null,this.defaultPopupTemplateEnabled=!1,this.autoCloseEnabled=!1,this.autoOpenEnabled=!0,this.browseClusterEnabled=!1,this.content=null,this.featuresPerPage=20,this.featureViewModelAbilities=null,this.featureViewModels=[],this.highlightEnabled=!0,this.includeDefaultActions=!0,this.selectedClusterBoundaryFeature=new ct({symbol:new pu({outline:{width:1.5,color:"cyan"},style:"none"})}),this.title=null,this.updateLocationEnabled=!1,this.view=null,this.visible=!1,this.zoomFactor=4,this.zoomToLocation=null}get isLoadingFeature(){return this.featureViewModels.some(e=>e.waitingForContent)}initialize(){this._handles.add([I(()=>[this.autoOpenEnabled,this.view],()=>this._autoOpenEnabledChange()),this.on("view-change",()=>this._autoClose()),I(()=>[this.highlightEnabled,this.selectedFeature,this.visible,this.view],()=>this._highlightSelectedFeature()),I(()=>[this.highlightEnabled,this.activeFeature,this.visible,this.view],()=>this._highlightActiveFeature()),I(()=>{var e,t;return(t=(e=this.view)==null?void 0:e.animation)==null?void 0:t.state},e=>this._animationStateChange(e)),I(()=>this.location,e=>this._locationChange(e)),I(()=>this.selectedFeature,e=>this._selectedFeatureChange(e)),I(()=>[this.selectedFeatureIndex,this.featureCount,this.featuresPerPage],()=>this._selectedFeatureIndexChange()),I(()=>[this.featurePage,this.selectedFeatureIndex,this.featureCount,this.featuresPerPage,this.featureViewModels],()=>this._setGraphicOnFeatureViewModels()),I(()=>this.featureViewModels,()=>this._featureViewModelsChange()),this.on("trigger-action",e=>Am({event:e,view:this.view})),At(()=>!this.waitingForResult,()=>this._waitingForResultChange(),vs),I(()=>{var e,t;return[this.features,(e=this.view)==null?void 0:e.map,(t=this.view)==null?void 0:t.spatialReference]},()=>this._updateFeatureVMs()),I(()=>{var e;return(e=this.view)==null?void 0:e.scale},()=>this._viewScaleChange()),At(()=>!this.visible,()=>this.browseClusterEnabled=!1),I(()=>this.browseClusterEnabled,e=>e?this.enableClusterBrowsing():this.disableClusterBrowsing())])}destroy(){this._cancelFetchingFeatures(),this._handles.destroy(),this._handles=null,this._pendingPromises.clear(),this.browseClusterEnabled=!1,this.view=null}get active(){return!(!this.visible||this.waitingForResult)}get allActions(){const e=this._get("allActions")||new _s;e.removeAll();const{actions:t,defaultActions:s,defaultPopupTemplateEnabled:n,includeDefaultActions:o,selectedFeature:r}=this,l=o?s.concat(t):t,d=r&&(typeof r.getEffectivePopupTemplate=="function"&&r.getEffectivePopupTemplate(n)||r.popupTemplate),u=d&&d.actions,h=d&&d.overwriteActions?u:u?u.concat(l):l;return h&&h.filter(Boolean).forEach(p=>e.add(p)),e}get defaultActions(){const e=this._get("defaultActions")||new _s;return e.removeAll(),e.addMany(fi(this.selectedFeature)?Dm():Om()),e}get featureCount(){return this.features.length}get features(){return this._get("features")||[]}set features(e){const t=e||[];this._set("features",t);const{pendingPromisesCount:s,promiseCount:n,selectedFeatureIndex:o}=this,r=n&&t.length;r&&s&&o===-1?this.selectedFeatureIndex=0:r&&o!==-1||(this.selectedFeatureIndex=t.length?0:-1)}get location(){return this._get("location")||null}set location(e){const t=this.get("view.spatialReference.isWebMercator");e&&e.get("spatialReference.isWGS84")&&t&&(e=Uo(e)),this._set("location",e)}get pendingPromisesCount(){return this._pendingPromises.size}get waitingForResult(){return!(!(this._fetchFeaturesController||this.pendingPromisesCount>0)||this.featureCount!==0)}get promiseCount(){return this.promises.length}get promises(){return this._get("promises")||[]}set promises(e){if(this._pendingPromises.clear(),this.features=[],!Array.isArray(e)||!e.length)return this._set("promises",[]),void this.notifyChange("pendingPromisesCount");this._set("promises",e),(e=e.slice(0)).forEach(t=>{this._pendingPromises.add(t);const s=o=>{this._pendingPromises.has(t)&&this._updateFeatures(o),this._updatePendingPromises(t)},n=()=>this._updatePendingPromises(t);t.then(s,n)}),this.notifyChange("pendingPromisesCount")}get selectedFeature(){const{features:e,selectedFeatureIndex:t}=this;return t===-1?null:e[t]||null}get selectedFeatureIndex(){const e=this._get("selectedFeatureIndex");return typeof e=="number"?e:-1}set selectedFeatureIndex(e){const{featureCount:t}=this;e=isNaN(e)||e<-1||!t?-1:(e+t)%t,this.activeFeature=null,this._set("selectedFeatureIndex",e)}get selectedFeatureViewModel(){return this.featureViewModels[this.selectedFeatureIndex]||null}get state(){return this.get("view.ready")?"ready":"disabled"}centerAtLocation(){const{view:e}=this,t=hc(this);return t?this.callGoTo({target:{target:t,scale:e.scale}}):Promise.reject(new $("center-at-location:invalid-target-or-view","Cannot center at a location without a target and view.",{target:t,view:e}))}zoomTo(e){return this.callGoTo(e)}clear(){this.set({promises:[],features:[],content:null,title:null,location:null,activeFeature:null})}fetchFeatures(e,t){const{view:s}=this;if(!s||!e)throw new $("fetch-features:invalid-screenpoint-or-view","Cannot fetch features without a screenPoint and view.",{screenPoint:e,view:s});return s.fetchPopupFeatures(e,{event:t&&t.event,defaultPopupTemplateEnabled:this.defaultPopupTemplateEnabled,signal:t&&t.signal})}open(e){const t={updateLocationEnabled:!1,promises:[],fetchFeatures:!1,...e,visible:!0},{fetchFeatures:s}=t;delete t.fetchFeatures,s&&this._setFetchFeaturesPromises(t.location);const n=["actionsMenuOpen","collapsed","featureMenuOpen"];for(const o of n)delete t[o];this.set(t)}triggerAction(e){const t=this.allActions.getItemAt(e);t&&!t.disabled&&this.emit("trigger-action",{action:t})}next(){return this.selectedFeatureIndex=this.selectedFeatureIndex+1,this}previous(){return this.selectedFeatureIndex=this.selectedFeatureIndex-1,this}disableClusterBrowsing(){Fm(this),this._clearBrowsedClusterGraphics()}async enableClusterBrowsing(){const{view:e,selectedFeature:t}=this;(e==null?void 0:e.type)==="2d"?fi(t)?(await Rm(this),await Lm(this)):B.getLogger(this.declaredClass).warn("enableClusterBrowsing:invalid-selectedFeature: Selected feature must represent an aggregate/cluster graphic.",t):B.getLogger(this.declaredClass).warn("enableClusterBrowsing:invalid-view: View must be 2d MapView.",t)}_animationStateChange(e){this.zoomToLocation||(wi.disabled=e==="waiting-for-target")}_clearBrowsedClusterGraphics(){var t;const e=(t=this.view)==null?void 0:t.graphics;e&&(e.remove(this.selectedClusterBoundaryFeature),e.remove(this._selectedClusterFeature)),this._selectedClusterFeature=null,this.selectedClusterBoundaryFeature.geometry=null}_viewScaleChange(){if(fi(this.selectedFeature))return this.browseClusterEnabled=!1,this.visible=!1,void this.clear();this.browseClusterEnabled&&(this.features=[this.selectedFeature])}_locationChange(e){const{selectedFeature:t,updateLocationEnabled:s}=this;s&&e&&(!t||t.geometry)&&this.centerAtLocation()}_selectedFeatureIndexChange(){this.featurePage=this.featureCount>1?Math.floor(this.selectedFeatureIndex/this.featuresPerPage)+1:null}_featureViewModelsChange(){this.featurePage=this.featureCount>1?1:null}_setGraphicOnFeatureViewModels(){const{features:e,featureCount:t,featurePage:s,featuresPerPage:n,featureViewModels:o}=this;if(s===null)return;const r=((s-1)*n+t)%t,l=r+n;o.slice(r,l).forEach((d,u)=>{d&&!d.graphic&&(d.graphic=e[r+u])})}async _selectedFeatureChange(e){if(!e)return;const{location:t,updateLocationEnabled:s,view:n}=this;if(this.browseClusterEnabled)return this._selectedClusterFeature&&(n.graphics.remove(this._selectedClusterFeature),this._selectedClusterFeature=null),fi(e)?void 0:(e.symbol=await fm(e),this._selectedClusterFeature=e,void n.graphics.add(this._selectedClusterFeature));!s&&t||!e.geometry?s&&!e.geometry&&this.centerAtLocation().then(()=>{this.location=n.center.clone()}):this.location=Ve(this._getPointFromGeometry(e.geometry))}_waitingForResultChange(){!this.featureCount&&this.promises&&(this.visible=!1)}_setFetchFeaturesPromises(e){return this._fetchFeaturesWithController(this._getScreenPoint(e||this.location)).then(t=>{const{clientOnlyGraphics:s,promisesPerLayerView:n}=t,o=Promise.resolve(s),r=n.map(l=>l.promise);this.promises=[o,...r]})}_destroyFeatureVMs(){this.featureViewModels.forEach(e=>e&&!e.destroyed&&e.destroy()),this._set("featureViewModels",[])}_updateFeatureVMs(){const{selectedFeature:e,features:t,featureViewModels:s}=this;if(fi(e)||(this.browseClusterEnabled=!1),this._destroyFeatureVMs(),!t||!t.length)return;const n=s.slice(0),o=[];t.forEach((r,l)=>{var u,h;if(!r)return;let d=null;if(n.some((p,g)=>(p&&p.graphic===r&&(d=p,n.splice(g,1)),!!d)),d)o[l]=d;else{const p=new ar({abilities:this.featureViewModelAbilities,defaultPopupTemplateEnabled:this.defaultPopupTemplateEnabled,spatialReference:(u=this.view)==null?void 0:u.spatialReference,graphic:r===e?r:null,map:(h=this.view)==null?void 0:h.map,view:this.view});o[l]=p}}),n.forEach(r=>r&&!r.destroyed&&r.destroy()),this._set("featureViewModels",o)}_getScreenPoint(e){const{view:t}=this;return t&&e&&typeof t.toScreen=="function"?t.toScreen(e):null}_autoOpenEnabledChange(){const e="auto-fetch-features",{_handles:t,autoOpenEnabled:s}=this;if(t.remove(e),s&&this.view){const n=this.view.on("click",o=>{o.pointerType==="mouse"&&o.button!==0||this._fetchFeaturesAndOpen(o)},Qt.WIDGET);t.add(n,e)}}_cancelFetchingFeatures(){const e=this._fetchFeaturesController;e&&e.abort(),this._fetchFeaturesController=null,this.notifyChange("waitingForResult")}_fetchFeaturesWithController(e,t){this._cancelFetchingFeatures();const s=new AbortController,{signal:n}=s;this._fetchFeaturesController=s,this.notifyChange("waitingForResult");const o=this.fetchFeatures(e,{signal:n,event:t});return o.catch(()=>{}).then(()=>{this._fetchFeaturesController=null,this.notifyChange("waitingForResult")}),o}_fetchFeaturesAndOpen(e){const{screenPoint:t,mapPoint:s}=e,{view:n}=this;this._fetchFeaturesWithController(t,e).then(o=>{const{clientOnlyGraphics:r,promisesPerLayerView:l,location:d}=o,u=[Promise.resolve(r),...l.map(h=>h.promise)];return n.popup.open({location:d||s,promises:u}),o})}_updatePendingPromises(e){e&&this._pendingPromises.has(e)&&(this._pendingPromises.delete(e),this.notifyChange("pendingPromisesCount"))}_autoClose(){this.autoCloseEnabled&&(this.visible=!1)}_getPointFromGeometry(e){var t;return O(e)?null:e.type==="point"?e:e.type==="extent"?e.center:e.type==="polygon"?e.centroid:e.type==="multipoint"||e.type==="polyline"?(t=e.extent)==null?void 0:t.center:null}async _getLayerView(e,t){return await e.when(),e.whenLayerView(t)}_getHighlightLayer(e){const{layer:t,sourceLayer:s}=e;return s&&"layer"in s&&s.layer?s.layer:(s==null?void 0:s.type)==="map-notes"||(s==null?void 0:s.type)==="subtype-group"?s:t}_getHighlightTarget(e,t){const s=t.type==="imagery"?void 0:"objectIdField"in t?t.objectIdField||gm:null,n=e.attributes;return n&&s&&n[s]||e}async _highlightActiveFeature(){const e="highlight-active-feature";this._handles.remove(e);const{highlightEnabled:t,view:s,activeFeature:n,visible:o}=this;if(!(n&&s&&t&&o))return;const r=this._getHighlightLayer(n);if(!(r&&r instanceof kr))return;const l=this._getLayerView(s,r);this._highlightActiveFeaturePromise=l;const d=await l;if(!(d&&_a(d)&&this._highlightActiveFeaturePromise===l&&this.activeFeature&&this.highlightEnabled))return;const u=d.highlight(this._getHighlightTarget(n,r));this._handles.add(u,e)}async _highlightSelectedFeature(){const e="highlight-selected-feature";this._handles.remove(e);const{selectedFeature:t,highlightEnabled:s,view:n,visible:o}=this;if(!(t&&n&&s&&o))return;const r=this._getHighlightLayer(t);if(!(r&&r instanceof kr))return;const l=this._getLayerView(n,r);this._highlightSelectedFeaturePromise=l;const d=await l;if(!(d&&_a(d)&&this._highlightSelectedFeaturePromise===l&&this.selectedFeature&&this.highlightEnabled&&this.visible))return;const u=d.highlight(this._getHighlightTarget(t,r));this._handles.add(u,e)}_updateFeatures(e){const{features:t}=this;if(!e||!e.length)return;if(!t.length)return void(this.features=e);const s=e.filter(n=>!t.includes(n));this.features=t.concat(s)}};a([c()],N.prototype,"featurePage",void 0),a([c()],N.prototype,"isLoadingFeature",null),a([c({type:_s})],N.prototype,"actions",void 0),a([c({readOnly:!0})],N.prototype,"active",null),a([c()],N.prototype,"activeFeature",void 0),a([c({readOnly:!0})],N.prototype,"allActions",null),a([c({type:Boolean})],N.prototype,"defaultPopupTemplateEnabled",void 0),a([c()],N.prototype,"autoCloseEnabled",void 0),a([c()],N.prototype,"autoOpenEnabled",void 0),a([c()],N.prototype,"browseClusterEnabled",void 0),a([c()],N.prototype,"content",void 0),a([c({type:_s,readOnly:!0})],N.prototype,"defaultActions",null),a([c({readOnly:!0})],N.prototype,"featureCount",null),a([c()],N.prototype,"features",null),a([c()],N.prototype,"featuresPerPage",void 0),a([c()],N.prototype,"featureViewModelAbilities",void 0),a([c({readOnly:!0})],N.prototype,"featureViewModels",void 0),a([c()],N.prototype,"highlightEnabled",void 0),a([c()],N.prototype,"includeDefaultActions",void 0),a([c({type:X})],N.prototype,"location",null),a([c({readOnly:!0})],N.prototype,"pendingPromisesCount",null),a([c({readOnly:!0})],N.prototype,"selectedClusterBoundaryFeature",void 0),a([c({readOnly:!0})],N.prototype,"waitingForResult",null),a([c({readOnly:!0})],N.prototype,"promiseCount",null),a([c()],N.prototype,"promises",null),a([c({value:null,readOnly:!0})],N.prototype,"selectedFeature",null),a([c({value:-1})],N.prototype,"selectedFeatureIndex",null),a([c({readOnly:!0})],N.prototype,"selectedFeatureViewModel",null),a([c({readOnly:!0})],N.prototype,"state",null),a([c()],N.prototype,"title",void 0),a([c()],N.prototype,"updateLocationEnabled",void 0),a([c()],N.prototype,"view",void 0),a([c()],N.prototype,"visible",void 0),a([c()],N.prototype,"zoomFactor",void 0),a([c()],N.prototype,"zoomToLocation",void 0),a([c()],N.prototype,"centerAtLocation",null),N=a([C("esri.widgets.Popup.PopupViewModel")],N);const pc=N,ya="selected-index",Vm=0,va="popup-spinner",b={calciteThemeLight:"calcite-theme-light",calciteThemeDark:"calcite-theme-dark",iconLeftTriangleArrow:"esri-icon-left-triangle-arrow",iconRightTriangleArrow:"esri-icon-right-triangle-arrow",iconDockToTop:"esri-icon-maximize",iconDockToBottom:"esri-icon-dock-bottom",iconDockToLeft:"esri-icon-dock-left",iconDockToRight:"esri-icon-dock-right",iconClose:"esri-icon-close",iconUndock:"esri-icon-minimize",iconCheckMark:"esri-icon-check-mark",iconLoading:"esri-icon-loading-indicator",iconDefaultAction:"esri-icon-default-action",iconActionsMenu:"esri-icon-handle-horizontal",rotating:"esri-rotating",base:"esri-popup",widget:"esri-widget",main:"esri-popup__main-container",loadingContainer:"esri-popup__loading-container",isCollapsible:"esri-popup--is-collapsible",isCollapsed:"esri-popup--is-collapsed",shadow:"esri-popup--shadow",isDocked:"esri-popup--is-docked",isDockedTopLeft:"esri-popup--is-docked-top-left",isDockedTopCenter:"esri-popup--is-docked-top-center",isDockedTopRight:"esri-popup--is-docked-top-right",isDockedBottomLeft:"esri-popup--is-docked-bottom-left",isDockedBottomCenter:"esri-popup--is-docked-bottom-center",isDockedBottomRight:"esri-popup--is-docked-bottom-right",alignTopCenter:"esri-popup--aligned-top-center",alignBottomCenter:"esri-popup--aligned-bottom-center",alignTopLeft:"esri-popup--aligned-top-left",alignBottomLeft:"esri-popup--aligned-bottom-left",alignTopRight:"esri-popup--aligned-top-right",alignBottomRight:"esri-popup--aligned-bottom-right",isFeatureMenuOpen:"esri-popup--feature-menu-open",isActionsMenuOpen:"esri-popup--actions-menu-open",hasFeatureUpdated:"esri-popup--feature-updated",header:"esri-popup__header",headerButtons:"esri-popup__header-buttons",headerContainer:"esri-popup__header-container",headerContainerButton:"esri-popup__header-container--button",headerTitle:"esri-popup__header-title",content:"esri-popup__content",contentHasFlows:"esri-content--has-flows",contentFlowItem:"esri-content__flow-item",footer:"esri-popup__footer",footerHasPagination:"esri-popup__footer--has-pagination",footerHasActions:"esri-popup__footer--has-actions",footerHasActionsMenu:"esri-popup__footer--has-actions-menu",button:"esri-popup__button",buttonDisabled:"esri-popup__button--disabled",buttonDock:"esri-popup__button--dock",icon:"esri-popup__icon",iconDock:"esri-popup__icon--dock-icon",inlineActionsContainer:"esri-popup__inline-actions-container",actionsMenuButton:"esri-popup__actions-menu-button",actions:"esri-popup__actions",action:"esri-popup__action",actionImage:"esri-popup__action-image",actionText:"esri-popup__action-text",actionToggle:"esri-popup__action-toggle",actionToggleOn:"esri-popup__action-toggle--on",actionExit:"esri-popup__action--exit",pointer:"esri-popup__pointer",pointerDirection:"esri-popup__pointer-direction",navigation:"esri-popup__navigation",paginationPrevious:"esri-popup__pagination-previous",paginationNext:"esri-popup__pagination-next",paginationPreviousIconLTR:"esri-popup__pagination-previous-icon",paginationPreviousIconRTL:"esri-popup__pagination-previous-icon--rtl",paginationNextIconLTR:"esri-popup__pagination-next-icon",paginationNextIconRTL:"esri-popup__pagination-next-icon--rtl",featureMenu:"esri-popup__feature-menu",featureMenuList:"esri-popup__feature-menu-list",featureMenuItem:"esri-popup__feature-menu-item",featureMenuViewport:"esri-popup__feature-menu-viewport",featureMenuHeader:"esri-popup__feature-menu-header",featureMenuNote:"esri-popup__feature-menu-note",featureMenuSelected:"esri-popup__feature-menu-item--selected",featureMenuButton:"esri-popup__feature-menu-button",featureMenuTitle:"esri-popup__feature-menu-title",featureMenuObserver:"esri-popup__feature-menu-observer",featureMenuLoader:"esri-popup__feature-menu-loader",collapseButton:"esri-popup__collapse-button",collapseIcon:"esri-popup__collapse-icon"},wa={buttonEnabled:!0,position:"auto",breakpoint:{width:544}},ba="esri-popup";function pt(i,e){return e===void 0?`${ba}__${i}`:`${ba}__${i}-${e}`}const Ma={closeButton:!0,featureNavigation:!0};let S=class extends ac(ue){constructor(e,t){super(e,t),this._blurClose=!1,this._blurContainer=!1,this._containerNode=null,this._mainContainerNode=null,this._featureMenuNode=null,this._actionsMenuNode=null,this._focusClose=!1,this._focusContainer=!1,this._focusDockButton=!1,this._focusFeatureMenuButton=!1,this._focusActionsMenuButton=!1,this._focusFirstFeature=!1,this._focusFirstAction=!1,this._handles=new lt,this._pointerOffsetInPx=16,this._spinner=null,this._feature=null,this._featureMenuIntersectionObserverCallback=([s])=>{s!=null&&s.isIntersecting&&this.viewModel.featurePage++},this._featureMenuIntersectionObserver=new IntersectionObserver(this._featureMenuIntersectionObserverCallback,{root:window.document}),this._displaySpinnerThrottled=Ui(()=>this._displaySpinner(),Vm),this._exitRelatedRecordsActions=new WeakMap,this._flowItems=new ee,this.alignment="auto",this.collapsed=!1,this.collapseEnabled=!0,this.dockEnabled=!1,this.featureMenuOpen=!1,this.headingLevel=2,this.maxInlineActions=3,this.messages=null,this.messagesCommon=null,this.spinnerEnabled=!0,this.viewModel=new pc,this.visibleElements={...Ma},this._addSelectedFeatureIndexHandle(),this.addHandles([I(()=>{var s;return(s=this.viewModel)==null?void 0:s.screenLocation},()=>this._positionContainer()),I(()=>{var s;return[(s=this.viewModel)==null?void 0:s.active,this.dockEnabled]},()=>this._toggleScreenLocationEnabled()),I(()=>{var s;return(s=this.viewModel)==null?void 0:s.screenLocation},(s,n)=>{!!s!=!!n&&this.reposition()}),I(()=>{var s,n,o,r,l,d;return[(n=(s=this.viewModel)==null?void 0:s.view)==null?void 0:n.padding,(r=(o=this.viewModel)==null?void 0:o.view)==null?void 0:r.size,(l=this.viewModel)==null?void 0:l.active,(d=this.viewModel)==null?void 0:d.location,this.alignment]},()=>this.reposition()),I(()=>this.spinnerEnabled,s=>this._spinnerEnabledChange(s)),I(()=>{var s,n;return(n=(s=this.viewModel)==null?void 0:s.view)==null?void 0:n.size},(s,n)=>this._updateDockEnabledForViewSize(s,n)),I(()=>{var s;return(s=this.viewModel)==null?void 0:s.view},(s,n)=>this._viewChange(s,n)),I(()=>{var s,n;return(n=(s=this.viewModel)==null?void 0:s.view)==null?void 0:n.ready},(s,n)=>this._viewReadyChange(s,n)),I(()=>{var s,n;return[(s=this.viewModel)==null?void 0:s.waitingForResult,(n=this.viewModel)==null?void 0:n.location]},()=>{this._hideSpinner(),this._displaySpinnerThrottled()}),I(()=>this.selectedFeatureWidget,()=>this._destroyFlowItemWidgets()),I(()=>{var s,n,o,r;return[(n=(s=this.selectedFeatureWidget)==null?void 0:s.viewModel)==null?void 0:n.title,(r=(o=this.selectedFeatureWidget)==null?void 0:o.viewModel)==null?void 0:r.state]},()=>this._setTitleFromFeatureWidget()),I(()=>{var s,n,o,r;return[(n=(s=this.selectedFeatureWidget)==null?void 0:s.viewModel)==null?void 0:n.content,(r=(o=this.selectedFeatureWidget)==null?void 0:o.viewModel)==null?void 0:r.state]},()=>this._setContentFromFeatureWidget()),At(()=>!this.collapsed,()=>{var s,n;((n=(s=this.viewModel)==null?void 0:s.view)==null?void 0:n.widthBreakpoint)==="xsmall"&&this.viewModel.active&&this.collapseEnabled&&this.viewModel.centerAtLocation()}),Ke(()=>{var s;return(s=this.viewModel)==null?void 0:s.allActions},"change",()=>this._watchActions()),I(()=>{var s;return(s=this.viewModel)==null?void 0:s.allActions},()=>this._watchActions(),H),I(()=>{var s;return(s=this.viewModel)==null?void 0:s.featureViewModels},()=>this._featureMenuViewportScrollTop()),Ke(()=>this._flowItems,"change",()=>{this.notifyChange("_activeFlowItemWidget"),this.scheduleRender()}),I(()=>{var s,n,o,r;return[(n=(s=this._activeFlowItemWidget)==null?void 0:s.viewModel)==null?void 0:n.state,(r=(o=this._activeFlowItemWidget)==null?void 0:o.viewModel)==null?void 0:r.title]},()=>this.scheduleRender())])}loadDependencies(){return Promise.all([T(()=>import("./calcite-flow-b512b524.js"),["assets/calcite-flow-b512b524.js","assets/widget-4becb80f.js","assets/cast-6d78d3c7.js","assets/typedArrayUtil-d02f10a8.js","assets/string-9c5e03f7.js","assets/Error-4ed679d7.js","assets/ensureType-d98e08e1.js","assets/nextTick-3ee5a785.js","assets/promiseUtils-930cba29.js","assets/intl-a5c99ea3.js","assets/number-c7f1bfee.js","assets/jsonMap-5afaf2ff.js","assets/locale-30120714.js","assets/messages-634811b5.js","assets/request-e4299080.js","assets/preload-helper-101896b7.js","assets/assets-6ba3cd63.js","assets/Evented-b378ccab.js","assets/Promise-6bd0b483.js","assets/reactiveUtils-b0e56010.js","assets/uuid-73213768.js","assets/observers-32bcc375.js"]),T(()=>import("./calcite-flow-item-8da0cf87.js"),["assets/calcite-flow-item-8da0cf87.js","assets/widget-4becb80f.js","assets/cast-6d78d3c7.js","assets/typedArrayUtil-d02f10a8.js","assets/string-9c5e03f7.js","assets/Error-4ed679d7.js","assets/ensureType-d98e08e1.js","assets/nextTick-3ee5a785.js","assets/promiseUtils-930cba29.js","assets/intl-a5c99ea3.js","assets/number-c7f1bfee.js","assets/jsonMap-5afaf2ff.js","assets/locale-30120714.js","assets/messages-634811b5.js","assets/request-e4299080.js","assets/preload-helper-101896b7.js","assets/assets-6ba3cd63.js","assets/Evented-b378ccab.js","assets/Promise-6bd0b483.js","assets/reactiveUtils-b0e56010.js","assets/uuid-73213768.js","assets/guid-e49c4e43.js","assets/action-994c8c10.js","assets/observers-32bcc375.js","assets/interactive-52dcf836.js","assets/icon-ba19bc6b.js","assets/tooltip-a947abbf.js"]),T(()=>import("./calcite-action-680e7c11.js"),["assets/calcite-action-680e7c11.js","assets/action-994c8c10.js","assets/widget-4becb80f.js","assets/cast-6d78d3c7.js","assets/typedArrayUtil-d02f10a8.js","assets/string-9c5e03f7.js","assets/Error-4ed679d7.js","assets/ensureType-d98e08e1.js","assets/nextTick-3ee5a785.js","assets/promiseUtils-930cba29.js","assets/intl-a5c99ea3.js","assets/number-c7f1bfee.js","assets/jsonMap-5afaf2ff.js","assets/locale-30120714.js","assets/messages-634811b5.js","assets/request-e4299080.js","assets/preload-helper-101896b7.js","assets/assets-6ba3cd63.js","assets/Evented-b378ccab.js","assets/Promise-6bd0b483.js","assets/reactiveUtils-b0e56010.js","assets/uuid-73213768.js","assets/observers-32bcc375.js","assets/interactive-52dcf836.js","assets/icon-ba19bc6b.js","assets/guid-e49c4e43.js"]),T(()=>import("./calcite-tooltip-485111fb.js"),["assets/calcite-tooltip-485111fb.js","assets/tooltip-a947abbf.js","assets/widget-4becb80f.js","assets/cast-6d78d3c7.js","assets/typedArrayUtil-d02f10a8.js","assets/string-9c5e03f7.js","assets/Error-4ed679d7.js","assets/ensureType-d98e08e1.js","assets/nextTick-3ee5a785.js","assets/promiseUtils-930cba29.js","assets/intl-a5c99ea3.js","assets/number-c7f1bfee.js","assets/jsonMap-5afaf2ff.js","assets/locale-30120714.js","assets/messages-634811b5.js","assets/request-e4299080.js","assets/preload-helper-101896b7.js","assets/assets-6ba3cd63.js","assets/Evented-b378ccab.js","assets/Promise-6bd0b483.js","assets/reactiveUtils-b0e56010.js","assets/uuid-73213768.js","assets/guid-e49c4e43.js"]),T(()=>import("./calcite-icon-901434b0.js"),["assets/calcite-icon-901434b0.js","assets/icon-ba19bc6b.js","assets/widget-4becb80f.js","assets/cast-6d78d3c7.js","assets/typedArrayUtil-d02f10a8.js","assets/string-9c5e03f7.js","assets/Error-4ed679d7.js","assets/ensureType-d98e08e1.js","assets/nextTick-3ee5a785.js","assets/promiseUtils-930cba29.js","assets/intl-a5c99ea3.js","assets/number-c7f1bfee.js","assets/jsonMap-5afaf2ff.js","assets/locale-30120714.js","assets/messages-634811b5.js","assets/request-e4299080.js","assets/preload-helper-101896b7.js","assets/assets-6ba3cd63.js","assets/Evented-b378ccab.js","assets/Promise-6bd0b483.js","assets/reactiveUtils-b0e56010.js","assets/uuid-73213768.js","assets/observers-32bcc375.js"])])}destroy(){var e,t;this._destroyFlowItemWidgets(),this._destroySelectedFeatureWidget(),this._destroySpinner(),(e=this._handles)==null||e.destroy(),this._unobserveFeatureMenuObserver(),(t=this._featureMenuIntersectionObserver)==null||t.disconnect(),this._handles=null}get actionsMenuId(){return`${this.id}-actions-menu`}get actionsMenuButtonId(){return`${this.id}-actions-menu-button`}get featureMenuId(){return`${this.id}-feature-menu`}get titleId(){return`${this.id}-popup-title`}get contentId(){return`${this.id}-popup-content`}get hasContent(){const{selectedFeatureWidget:e,viewModel:t}=this;if(!e)return!!(t!=null&&t.content);const s=e.viewModel;if(s!=null&&s.waitingForContent||(s==null?void 0:s.state)==="error")return!0;const n=s==null?void 0:s.content;return Array.isArray(n)?!!n.length:!!n}get featureNavigationVisible(){return this.viewModel.active&&this.viewModel.featureCount>1&&this.visibleElements.featureNavigation}get collapsible(){return!!(this.collapseEnabled&&this.viewModel.title&&this.hasContent)}get featureMenuVisible(){return this.featureNavigationVisible&&this.featureMenuOpen}get contentCollapsed(){return this.collapsible&&!this.featureMenuVisible&&this.collapsed}get dividedActions(){return this._divideActions()}get _activeFlowItemWidget(){const{_flowItems:e}=this;return e.getItemAt(e.length-1)||null}get actions(){return this.viewModel.actions}set actions(e){this.viewModel.actions=e}set actionsMenuOpen(e){this._set("actionsMenuOpen",!!e)}get actionsMenuOpen(){return!!this.viewModel.active&&this._get("actionsMenuOpen")}get autoCloseEnabled(){return this.viewModel.autoCloseEnabled}set autoCloseEnabled(e){this.viewModel.autoCloseEnabled=e}get autoOpenEnabled(){return this.viewModel.autoOpenEnabled}set autoOpenEnabled(e){this.viewModel.autoOpenEnabled=e}get defaultPopupTemplateEnabled(){return this.viewModel.defaultPopupTemplateEnabled}set defaultPopupTemplateEnabled(e){this.viewModel.defaultPopupTemplateEnabled=e}get content(){return this.viewModel.content}set content(e){this.viewModel.content=e}get currentAlignment(){return this._getCurrentAlignment()}get currentDockPosition(){return this._getCurrentDockPosition()}get dockOptions(){return this._get("dockOptions")||wa}set dockOptions(e){const t={...wa},s=this.get("viewModel.view.breakpoints"),n={};s&&(n.width=s.xsmall,n.height=s.xsmall);const o={...t,...e},r={...t.breakpoint,...n},{breakpoint:l}=o;l===!0?o.breakpoint=r:typeof l=="object"&&(o.breakpoint={...r,...l}),this._set("dockOptions",o),this._setCurrentDockPosition(),this.reposition()}get featureCount(){return this.viewModel.featureCount}get features(){return this.viewModel.features}set features(e){this.viewModel.features=e}get goToOverride(){return this.viewModel.goToOverride}set goToOverride(e){this.viewModel.goToOverride=e}get highlightEnabled(){return this.viewModel.highlightEnabled}set highlightEnabled(e){this.viewModel.highlightEnabled=e}get location(){return this.viewModel.location}set location(e){this.viewModel.location=e}get label(){var e;return((e=this.messages)==null?void 0:e.widgetLabel)??""}set label(e){this._overrideIfSome("label",e)}get promises(){return this.viewModel.promises}set promises(e){this.viewModel.promises=e}get selectedFeature(){return this.viewModel.selectedFeature}get selectedFeatureIndex(){return this.viewModel.selectedFeatureIndex}set selectedFeatureIndex(e){this.viewModel.selectedFeatureIndex=e}get selectedFeatureWidget(){const{_feature:e,visibleElements:t,headingLevel:s,_flowItems:n}=this,{selectedFeatureViewModel:o}=this.viewModel,r={...t,title:!1};return o?(e?(e.viewModel=o,e.visibleElements=r):this._feature=new hm({flowItems:n,headingLevel:s+1,viewModel:o,visibleElements:r}),this._feature):null}get title(){return this.viewModel.title}set title(e){this.viewModel.title=e}get updateLocationEnabled(){return this.viewModel.updateLocationEnabled}set updateLocationEnabled(e){this.viewModel.updateLocationEnabled=e}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}get visible(){return this.viewModel.visible}set visible(e){this.viewModel.visible=e}castVisibleElements(e){return{...Ma,...e}}blur(){const{active:e}=this.viewModel;e||B.getLogger(this.declaredClass).warn("Popup can only be blurred when currently active."),this.visibleElements.closeButton?this._blurClose=!0:this._blurContainer=!0,this.scheduleRender()}clear(){return this.viewModel.clear()}close(){this.visible=!1}fetchFeatures(e,t){return this.viewModel.fetchFeatures(e,t)}focus(){const{active:e}=this.viewModel;e||B.getLogger(this.declaredClass).warn("Popup can only be focused when currently active."),this.visibleElements.closeButton?this._focusClose=!0:this._focusContainer=!0,this.scheduleRender()}next(){return this.viewModel.next()}open(e){var o,r;this._handles.remove(ya);const t=!!e&&!!e.featureMenuOpen,s=!!e&&!!e.actionsMenuOpen,n={collapsed:!!e&&!!e.collapsed,actionsMenuOpen:s,featureMenuOpen:t};((r=(o=this.viewModel)==null?void 0:o.view)==null?void 0:r.widthBreakpoint)==="xsmall"&&(n.collapsed=!0),this.set(n),this.viewModel.open(e),this._shouldFocus(e),this._addSelectedFeatureIndexHandle()}previous(){return this.viewModel.previous()}reposition(){this.renderNow(),this._positionContainer(),this._setCurrentAlignment()}triggerAction(e){return this.viewModel.triggerAction(e)}render(){var y,v,w,A;const{actionsMenuOpen:e,dockEnabled:t,featureMenuVisible:s,dividedActions:n,currentAlignment:o,currentDockPosition:r}=this,{active:l}=this.viewModel,{menuActions:d}=n,u=l&&d.length>1&&e,h=l&&t,p=l&&!t,g=(v=(y=this.selectedFeature)==null?void 0:y.layer)==null?void 0:v.title,f=(A=(w=this.selectedFeature)==null?void 0:w.layer)==null?void 0:A.id,_={[b.alignTopCenter]:o==="top-center",[b.alignBottomCenter]:o==="bottom-center",[b.alignTopLeft]:o==="top-left",[b.alignBottomLeft]:o==="bottom-left",[b.alignTopRight]:o==="top-right",[b.alignBottomRight]:o==="bottom-right",[b.isDocked]:h,[b.shadow]:p,[b.isDockedTopLeft]:r==="top-left",[b.isDockedTopCenter]:r==="top-center",[b.isDockedTopRight]:r==="top-right",[b.isDockedBottomLeft]:r==="bottom-left",[b.isDockedBottomCenter]:r==="bottom-center",[b.isDockedBottomRight]:r==="bottom-right",[b.isFeatureMenuOpen]:s,[b.isActionsMenuOpen]:u};return m("div",{class:this.classes(b.base,_),role:"presentation","data-layer-title":g,"data-layer-id":f,bind:this,afterCreate:this._positionContainer,afterUpdate:this._positionContainer},l?[this.renderMainContainer(),this.renderPointer()]:null)}renderLoadingIcon(){return m("span",{"aria-hidden":"true",class:this.classes(b.icon,b.iconLoading,b.rotating)})}renderNavigationLoading(){const{messagesCommon:e}=this;return this.viewModel.pendingPromisesCount?m("div",{key:pt("loading-container"),role:"presentation",class:b.loadingContainer,"aria-label":e.loading,title:e.loading},this.renderLoadingIcon()):null}renderPreviousIcon(){const e=at(this.container),t={[b.iconRightTriangleArrow]:e,[b.paginationPreviousIconRTL]:e,[b.iconLeftTriangleArrow]:!e,[b.paginationPreviousIconLTR]:!e};return m("span",{"aria-hidden":"true",class:this.classes(b.icon,t)})}renderPreviousButton(){const{messages:e}=this;return m("div",{role:"button",tabIndex:0,bind:this,onclick:this._previous,onkeydown:this._previous,class:this.classes(b.button,b.paginationPrevious),"aria-label":e.previous,title:e.previous},this.renderPreviousIcon())}renderNextIcon(){const e=at(this.container),t={[b.iconLeftTriangleArrow]:e,[b.paginationNextIconRTL]:e,[b.iconRightTriangleArrow]:!e,[b.paginationNextIconLTR]:!e};return m("span",{"aria-hidden":"true",class:this.classes(b.icon,t)})}renderNextButton(){const{messages:e}=this;return m("div",{role:"button",tabIndex:0,bind:this,onclick:this._next,onkeydown:this._next,class:this.classes(b.button,b.paginationNext),"aria-label":e.next,title:e.next},this.renderNextIcon())}renderFeatureMenuButton(){const{featureMenuOpen:e,featureMenuId:t,messagesCommon:s}=this,{featureCount:n,selectedFeatureIndex:o}=this.viewModel;return m("div",{role:"button",tabIndex:0,bind:this,onclick:this._toggleFeatureMenu,onkeydown:this._toggleFeatureMenu,afterCreate:this._focusFeatureMenuButtonNode,afterUpdate:this._focusFeatureMenuButtonNode,class:this.classes(b.button,b.featureMenuButton),"aria-haspopup":"true","aria-controls":t,"aria-expanded":e.toString(),"aria-label":s.menu,title:s.menu},this._getPageText(n,o))}renderNavigationButtons(){return this.featureNavigationVisible?[this.renderPreviousButton(),this.renderNavigationLoading()||this.renderFeatureMenuButton(),this.renderNextButton()]:null}renderDockIcon(){const{dockEnabled:e}=this,t=this._wouldDockTo(),s={[b.iconUndock]:e,[b.iconDock]:!e,[b.iconDockToRight]:!e&&(t==="top-right"||t==="bottom-right"),[b.iconDockToLeft]:!e&&(t==="top-left"||t==="bottom-left"),[b.iconDockToTop]:!e&&t==="top-center",[b.iconDockToBottom]:!e&&t==="bottom-center"};return m("span",{"aria-hidden":"true",class:this.classes(s,b.icon)})}renderDockButton(){var o,r,l;const{dockEnabled:e,messages:t}=this,s=(r=(o=this.viewModel)==null?void 0:o.view)==null?void 0:r.widthBreakpoint,n=e?t.undock:t.dock;return s!=="xsmall"&&((l=this.dockOptions)!=null&&l.buttonEnabled)?m("div",{role:"button","aria-label":n,title:n,tabIndex:0,bind:this,onclick:this._toggleDockEnabled,onkeydown:this._toggleDockEnabled,afterCreate:this._focusDockButtonNode,afterUpdate:this._focusDockButtonNode,class:this.classes(b.button,b.buttonDock)},this.renderDockIcon()):null}renderTitle(){const{title:e}=this.viewModel,{titleId:t,collapsible:s,contentCollapsed:n,messagesCommon:o}=this,r={[b.headerContainerButton]:s},l=m(ir,{level:this.headingLevel,class:b.headerTitle,innerHTML:e}),d=s?m("button",{key:`${e}--collapsible`,id:t,title:n?o.expand:o.collapse,bind:this,enterAnimation:this._createFeatureUpdatedAnimation(),class:this.classes(b.headerContainer,r),"aria-expanded":n?"false":"true",onclick:this._toggleCollapsed,type:"button"},l,m("calcite-icon",{class:b.collapseIcon,key:"collapse-icon",icon:n?"chevron-down":"chevron-up",scale:"m"})):m("div",{key:e,id:t,bind:this,enterAnimation:this._createFeatureUpdatedAnimation(),class:this.classes(b.headerContainer,r)},l);return e?d:null}renderCloseIcon(){return m("span",{"aria-hidden":"true",class:this.classes(b.icon,b.iconClose)})}renderCloseButton(){const{visibleElements:e,messagesCommon:t}=this;return e.closeButton?m("div",{role:"button",tabIndex:0,bind:this,onclick:this._close,onkeydown:this._close,class:b.button,"aria-label":t.close,title:t.close,afterCreate:this._closeButtonNodeUpdated,afterUpdate:this._closeButtonNodeUpdated},this.renderCloseIcon()):null}renderHeader(){return m("header",{class:b.header},this.renderTitle(),m("div",{class:b.headerButtons},this.renderDockButton(),this.renderCloseButton()))}renderContentContainer(){const{contentId:e,hasContent:t,contentCollapsed:s,_flowItems:n,messagesCommon:o}=this,{content:r}=this.viewModel,l=n.toArray(),d={[b.contentHasFlows]:!!l.length};return t&&!s?m("div",{key:r,enterAnimation:this._createFeatureUpdatedAnimation(),id:e,class:this.classes(b.content,d)},m("calcite-flow",{bind:this,onCalciteFlowItemBack:this._handleBackClick},m("calcite-flow-item",{bind:this,"data-node-ref":"_rootFlowItemNode","intl-back":o.back,afterCreate:on,key:"root-flow-item"},this.renderContent()),l.map(u=>this.renderFlowItem(u))),l.map(u=>this.renderFlowItemTooltip(u))):null}renderFlowItem(e){const{messages:t,messagesCommon:s}=this,n=pn();return m("calcite-flow-item",{class:this.classes({[b.calciteThemeDark]:!n,[b.calciteThemeLight]:n}),heading:e.title,"intl-back":s.back,description:this._getFlowItemDescription(e),key:`flow-item-${e.viewModel.uid}`},m("calcite-action",{class:b.actionExit,icon:"move-up",label:t==null?void 0:t.exitRelatedRecords,text:t==null?void 0:t.exitRelatedRecords,slot:"header-actions-start",bind:this,afterCreate:o=>this._storeExitRelatedRecordsAction(e,o),onclick:this._destroyFlowItemWidgets}),m("div",{class:this.classes(b.contentFlowItem,{[b.calciteThemeDark]:n,[b.calciteThemeLight]:!n})},e.render()))}renderFlowItemTooltip(e){const{messages:t,_exitRelatedRecordsActions:s}=this,n=pn();return m("calcite-tooltip",{class:this.classes({[b.calciteThemeDark]:!n,[b.calciteThemeLight]:n}),key:`exit-related-records-tooltip-${e.viewModel.uid}`,label:t==null?void 0:t.exitRelatedRecords,overlayPositioning:"fixed",referenceElement:s.get(e),placement:"top"},t==null?void 0:t.exitRelatedRecords)}renderActionsMenuButton(){const{actionsMenuId:e,actionsMenuButtonId:t,actionsMenuOpen:s,dividedActions:n,messagesCommon:o}=this,r=s?o.close:o.open,{menuActions:l}=n;return l.length?m("div",{key:pt("actions-menu-button"),class:this.classes(b.button,b.actionsMenuButton),role:"button",id:t,"aria-haspopup":"true","aria-controls":s?e:null,tabIndex:0,bind:this,onclick:this._toggleActionsMenu,onkeydown:this._toggleActionsMenu,afterCreate:this._focusActionsMenuButtonNode,afterUpdate:this._focusActionsMenuButtonNode,"aria-label":r,title:r},m("span",{"aria-hidden":"true",class:b.iconActionsMenu})):null}renderMenuActions(){const{actionsMenuId:e,actionsMenuButtonId:t,actionsMenuOpen:s,dividedActions:n}=this,{menuActions:o}=n;return o.length&&s?m("ul",{id:e,role:"menu","aria-labelledby":t,key:pt("actions"),class:b.actions,bind:this,onkeyup:this._handleActionMenuKeyup,afterCreate:this._actionsMenuNodeUpdated,afterUpdate:this._actionsMenuNodeUpdated},o.toArray().map(r=>this.renderAction({action:r,type:"menu-item"}))):null}renderInlineActions(){const{inlineActions:e}=this.dividedActions;return!!e.length&&e.toArray().map(t=>this.renderAction({action:t,type:"inline"}))}renderInlineActionsContainer(){const{inlineActions:e,menuActions:t}=this.dividedActions,s=!!e.length,n=!!t.length;return s||n?m("div",{key:"inline-actions-container","data-inline-actions":s.toString(),"data-menu-actions":n.toString(),class:b.inlineActionsContainer},this.renderInlineActions(),this.renderActionsMenuButton(),this.renderMenuActions()):null}renderNavigation(){return this.featureNavigationVisible?m("section",{key:pt("navigation"),class:this.classes(b.navigation)},this.renderNavigationButtons()):null}renderFooter(){const{featureNavigationVisible:e,dividedActions:t}=this,{inlineActions:s,menuActions:n}=t,o=!!s.length,r=!!n.length,l={[b.footerHasPagination]:e,[b.footerHasActions]:o,[b.footerHasActionsMenu]:r};return e||o?m("div",{key:pt("feature-buttons"),class:this.classes(b.footer,l)},this.renderInlineActionsContainer(),this.renderNavigation()):null}renderFeatureMenuContainer(){const{messages:e}=this,{featureViewModels:t,isLoadingFeature:s}=this.viewModel,n=rt(e.selectedFeatures,{total:t.length});return m("section",{key:pt("menu"),class:b.featureMenu},m("strong",{class:b.featureMenuHeader},n),m("nav",{bind:this,class:b.featureMenuViewport,"data-node-ref":"_featureMenuViewportNode",afterCreate:on},this.renderFeatureMenu(),m("div",{class:b.featureMenuObserver,bind:this,afterCreate:this._featureMenuIntersectionObserverCreated}),s?m("div",{class:b.featureMenuLoader},this.renderLoadingIcon()):null))}renderPointer(){return this.dockEnabled?null:m("div",{key:pt("pointer"),class:b.pointer,role:"presentation"},m("div",{class:this.classes(b.pointerDirection,b.shadow)}))}renderMainContainer(){const{dockEnabled:e,currentAlignment:t,currentDockPosition:s,titleId:n,contentId:o,collapsible:r,hasContent:l,contentCollapsed:d,visibleElements:u}=this,{title:h}=this.viewModel,p=t==="bottom-left"||t==="bottom-center"||t==="bottom-right"||s==="top-left"||s==="top-center"||s==="top-right",g=t==="top-left"||t==="top-center"||t==="top-right"||s==="bottom-left"||s==="bottom-center"||s==="bottom-right",f={[b.shadow]:e,[b.isCollapsible]:r,[b.isCollapsed]:d};return m("div",{class:this.classes(b.main,b.widget,f),tabIndex:u.closeButton?null:-1,role:"dialog","aria-labelledby":h?n:"","aria-describedby":l&&!d?o:"",bind:this,onkeyup:this._handleMainKeyup,afterCreate:this._mainContainerNodeUpdated,afterUpdate:this._mainContainerNodeUpdated},p?this.renderFooter():null,p?this.renderFeatureMenuContainer():null,this.renderHeader(),this.renderContentContainer(),g?this.renderFooter():null,g?this.renderFeatureMenuContainer():null)}renderContent(){var t;const e=(t=this.viewModel)==null?void 0:t.content;return e?typeof e=="string"?m("div",{class:J.contentNode,key:e,innerHTML:e}):this.renderNodeContent(e):null}renderActionText(e){return m("span",{key:"text",class:b.actionText},e)}renderActionIcon(e){const t=this._getActionClass(e),s=this._getActionImage(e),n={[b.iconLoading]:e.active,[b.rotating]:e.active,[b.icon]:!!t,[b.actionImage]:!e.active&&!!s};return t&&(n[t]=!e.active),m("span",{key:"icon","aria-hidden":"true",class:this.classes(b.icon,n),styles:this._getIconStyles(s)})}renderAction(e){const{action:t,type:s}=e,n=this._getActionTitle(t),o={[b.action]:t.type!=="toggle",[b.actionToggle]:t.type==="toggle",[b.actionToggleOn]:t.type==="toggle"&&t.value,[b.buttonDisabled]:t.disabled},r=[this.renderActionIcon(t),this.renderActionText(n)],l=s==="menu-item"?m("li",{key:t.uid,role:"menuitem",tabIndex:0,title:n,"aria-label":n,class:this.classes(b.button,o),onkeyup:this._handleActionMenuItemKeyup,bind:this,"data-action-uid":t.uid,onclick:this._triggerAction,onkeydown:this._triggerAction},r):m("div",{key:t.uid,role:"button",tabIndex:0,title:n,"aria-label":n,class:this.classes(b.button,o),onkeyup:this._handleActionMenuItemKeyup,bind:this,"data-action-uid":t.uid,onclick:this._triggerAction,onkeydown:this._triggerAction},r);return t.visible?l:null}renderFeatureMenuItem(e,t){const{messages:s,messagesCommon:n}=this,{selectedFeatureIndex:o,selectedFeatureViewModel:r}=this.viewModel,l=e===r,d={[b.featureMenuSelected]:l},u=l?m("span",{key:pt(`feature-menu-selected-feature-${o}`),title:s.selectedFeature,"aria-label":s.selectedFeature,class:b.iconCheckMark}):null,h=m("span",{innerHTML:e.title||n.untitled});return m("li",{role:"menuitem",tabIndex:-1,key:pt(`feature-menu-feature-${o}`),class:this.classes(d,b.featureMenuItem),bind:this,"data-feature-index":t,onblur:this._removeActiveFeature,onfocus:this._setActiveFeature,onkeyup:this._handleFeatureMenuItemKeyup,onclick:this._selectFeature,onkeydown:this._selectFeature,onmouseover:this._setActiveFeature,onmouseleave:this._removeActiveFeature},m("span",{class:b.featureMenuTitle},h,u))}renderFeatureMenu(){const{featureMenuId:e}=this,{featureViewModels:t}=this.viewModel;return t.length>1?m("ol",{class:b.featureMenuList,id:e,bind:this,afterCreate:this._featureMenuNodeUpdated,afterUpdate:this._featureMenuNodeUpdated,onkeyup:this._handleFeatureMenuKeyup,role:"menu"},t.filter(s=>!!s.graphic).map((s,n)=>this.renderFeatureMenuItem(s,n))):null}_storeExitRelatedRecordsAction(e,t){this._exitRelatedRecordsActions.set(e,t),this.scheduleRender()}_getFlowItemDescription(e){return"featureCountDescription"in e?e.featureCountDescription:e.viewModel.description}_destroyFlowItemWidgets(){this._flowItems.removeAll().forEach(e=>{"showAllEnabled"in e.viewModel&&(e.viewModel.showAllEnabled=!1),e.viewModel=null,e.destroy()})}_handleBackClick(){const e=this._flowItems.pop();this._exitRelatedRecordsActions.delete(e),"showAllEnabled"in e.viewModel&&(e.viewModel.showAllEnabled=!1),e&&(e.viewModel=null,e.destroy())}_getActionTitle(e){const{messages:t,selectedFeature:s,messagesCommon:n}=this,{id:o}=e,r=s==null?void 0:s.attributes,l=o==="zoom-to-feature"?rt(e.title,{messages:t}):o==="remove-selected-feature"?rt(e.title,{messages:n}):o==="zoom-to-clustered-features"||o==="browse-clustered-features"?rt(e.title,{messages:t}):e.title;return l&&r?rt(l,r):l}_getActionClass(e){const{selectedFeature:t}=this,s=t==null?void 0:t.attributes,{className:n,image:o}=e,r=o||n?n:b.iconDefaultAction;return r&&s?rt(r,s):r}_getActionImage(e){const{selectedFeature:t}=this,s=t==null?void 0:t.attributes,{image:n}=e;return n&&s?rt(n,s):n}_createFeatureUpdatedAnimation(){return Kd("enter",b.hasFeatureUpdated)}_getInlineActionCount(){const{maxInlineActions:e,featureNavigationVisible:t}=this;if(typeof e!="number")return null;const s=Math.round(e);return Math.max(t?s-1:s,0)}_watchActions(){const{allActions:e}=this.viewModel;this.notifyChange("dividedActions");const t="actions";this._handles.remove(t),e&&e.forEach(s=>{this._handles.add(I(()=>[s.uid,s.active,s.className,s.disabled,s.id,s.title,s.image,s.visible],()=>this.scheduleRender()),t)})}_divideActions(){const{allActions:e}=this.viewModel,t=e.filter(r=>r.visible),s=this._getInlineActionCount(),n=s===null,o=s===0;return{inlineActions:n?t.slice(0):o?new ee:t.slice(0,s),menuActions:n?new ee:o?t.slice(0):t.slice(s)}}_featureMenuOpenChanged(e){e?this._focusFirstFeature=!0:this._focusFeatureMenuButton=!0}_actionsMenuOpenChanged(e){e?this._focusFirstAction=!0:this._focusActionsMenuButton=!0}_setTitleFromFeatureWidget(){var s,n;const{selectedFeatureWidget:e,messagesCommon:t}=this;e&&(this.viewModel.title=((s=e.viewModel)==null?void 0:s.state)==="error"?t.errorMessage:((n=e.viewModel)==null?void 0:n.title)||"")}_setContentFromFeatureWidget(){const{selectedFeatureWidget:e}=this;e&&(this.viewModel.content=e)}_unobserveFeatureMenuObserver(){this._featureMenuIntersectionObserverNode&&this._featureMenuIntersectionObserver.unobserve(this._featureMenuIntersectionObserverNode)}_featureMenuIntersectionObserverCreated(e){this._unobserveFeatureMenuObserver(),this._featureMenuIntersectionObserver.observe(e),this._featureMenuIntersectionObserverNode=e}_handleFeatureMenuKeyup(e){gi(e)==="Escape"&&(e.stopPropagation(),this._focusFeatureMenuButton=!0,this.featureMenuOpen=!1,this.scheduleRender())}_handleActionMenuKeyup(e){gi(e)==="Escape"&&(e.stopPropagation(),this._focusActionsMenuButton=!0,this.actionsMenuOpen=!1,this.scheduleRender())}_setActiveFeature(e){const{viewModel:t}=this,s=e.currentTarget["data-feature-index"];t.activeFeature=t.features[s]||null}_removeActiveFeature(){this.viewModel.activeFeature=null}_handleFeatureMenuItemKeyup(e){const t=gi(e),{_featureMenuNode:s}=this,n=e.currentTarget["data-feature-index"];if(!s)return;const o=s.querySelectorAll("li"),r=o.length;t!=="ArrowUp"?t!=="ArrowDown"?t!=="Home"?t!=="End"||(e.stopPropagation(),o[o.length-1].focus()):(e.stopPropagation(),o[0].focus()):(e.stopPropagation(),o[(n+1+r)%r].focus()):(e.stopPropagation(),o[(n-1+r)%r].focus())}_handleActionMenuItemKeyup(e){const t=gi(e),{_actionsMenuNode:s}=this,n=e.currentTarget.dataset.actionUid,{menuActions:o}=this.dividedActions,r=o.findIndex(u=>u.uid===n);if(!s)return;const l=s.querySelectorAll("li"),d=l.length;t!=="ArrowUp"?t!=="ArrowDown"?t!=="Home"?t!=="End"||(e.stopPropagation(),l[l.length-1].focus()):(e.stopPropagation(),l[0].focus()):(e.stopPropagation(),l[(r+1+d)%d].focus()):(e.stopPropagation(),l[(r-1+d)%d].focus())}_handleMainKeyup(e){const t=gi(e);t==="ArrowLeft"&&(e.stopPropagation(),this.previous()),t==="ArrowRight"&&(e.stopPropagation(),this.next())}_spinnerEnabledChange(e){if(this._destroySpinner(),!e)return;const t=this.get("viewModel.view");this._createSpinner(t)}_hideSpinner(){const{_spinner:e}=this;e&&(e.location=null,e.hide())}_displaySpinner(){const{_spinner:e}=this;if(!e)return;const{location:t,waitingForResult:s}=this.viewModel;s?e.show({location:t}):e.hide()}_getIconStyles(e){return{"background-image":e?`url(${e})`:""}}async _shouldFocus(e){e.shouldFocus&&(await Ho(()=>{var t;return((t=this.viewModel)==null?void 0:t.active)===!0}),this.focus())}_addSelectedFeatureIndexHandle(){const e=I(()=>{var t;return(t=this.viewModel)==null?void 0:t.selectedFeatureIndex},(t,s)=>this._selectedFeatureIndexUpdated(t,s));this._handles.add(e,ya)}_selectedFeatureIndexUpdated(e,t){const{featureCount:s}=this;s&&e!==t&&e!==-1&&(this._destroyFlowItemWidgets(),this.actionsMenuOpen=!1,this.featureMenuOpen=!1,this._mainContainerNode&&(this._mainContainerNode.scrollTop=0),this._rootFlowItemNode&&this._rootFlowItemNode.scrollContentTo({top:0}))}_destroySelectedFeatureWidget(){const{_feature:e}=this;e&&(e.viewModel=null,e&&!e.destroyed&&e.destroy()),this._feature=null}_isScreenLocationWithinView(e,t){return e.x>-1&&e.y>-1&&e.x<=t.width&&e.y<=t.height}_isOutsideView(e){const{popupHeight:t,popupWidth:s,screenLocation:n,side:o,view:r}=e;if(isNaN(s)||isNaN(t)||!r||!n)return!1;const l=r.padding;return o==="right"&&n.x+s/2>r.width-l.right||o==="left"&&n.x-s/2<l.left||o==="top"&&n.y-t<l.top||o==="bottom"&&n.y+t>r.height-l.bottom}_calculateAutoAlignment(e){if(e!=="auto")return e;const{_pointerOffsetInPx:t,_containerNode:s,_mainContainerNode:n,viewModel:o}=this,{screenLocation:r,view:l}=o;if(O(r)||!l||!s)return"top-center";if(!this._isScreenLocationWithinView(r,l))return this._get("currentAlignment")||"top-center";function d(P){return parseInt(P.replace(/[^-\d\.]/g,""),10)}const u=n?window.getComputedStyle(n,null):null,h=u?d(u.getPropertyValue("max-height")):0,p=u?d(u.getPropertyValue("height")):0,{height:g,width:f}=s.getBoundingClientRect(),_=f+t,y=Math.max(g,h,p)+t,v=this._isOutsideView({popupHeight:y,popupWidth:_,screenLocation:r,side:"right",view:l}),w=this._isOutsideView({popupHeight:y,popupWidth:_,screenLocation:r,side:"left",view:l}),A=this._isOutsideView({popupHeight:y,popupWidth:_,screenLocation:r,side:"top",view:l}),M=this._isOutsideView({popupHeight:y,popupWidth:_,screenLocation:r,side:"bottom",view:l});return w?A?"bottom-right":"top-right":v?A?"bottom-left":"top-left":A?M?"top-center":"bottom-center":"top-center"}_callCurrentAlignment(e){return typeof e=="function"?e.call(this):e}_getCurrentAlignment(){const{alignment:e,dockEnabled:t}=this;return t||!this.viewModel.active?null:this._calculatePositionResult(this._calculateAutoAlignment(this._callCurrentAlignment(e)))}_setCurrentAlignment(){this._set("currentAlignment",this._getCurrentAlignment())}_setCurrentDockPosition(){this._set("currentDockPosition",this._getCurrentDockPosition())}_calculatePositionResult(e){const t=["left","right"];return at(this.container)&&t.reverse(),e.replace(/leading/gi,t[0]).replace(/trailing/gi,t[1])}_callDockPosition(e){return typeof e=="function"?e.call(this):e}_getDockPosition(){var e;return this._calculatePositionResult(this._calculateAutoDockPosition(this._callDockPosition((e=this.dockOptions)==null?void 0:e.position)))}_getCurrentDockPosition(){return this.dockEnabled&&this.viewModel.active?this._getDockPosition():null}_wouldDockTo(){return this.dockEnabled?null:this._getDockPosition()}_calculateAutoDockPosition(e){var l;if(e!=="auto")return e;const t=(l=this.viewModel)==null?void 0:l.view,s=at(this.container)?"top-left":"top-right";if(!t)return s;const n=t.padding||{left:0,right:0,top:0,bottom:0},o=t.width-n.left-n.right,{breakpoints:r}=t;return r&&o<=r.xsmall?"bottom-center":s}_positionContainer(e=this._containerNode){if(e&&(this._containerNode=e),!e)return;const{screenLocation:t}=this.viewModel,{width:s}=e.getBoundingClientRect(),n=this._calculatePositionStyle(t,s);n&&(e.style.top=n.top,e.style.left=n.left,e.style.bottom=n.bottom,e.style.right=n.right)}_calculateFullWidth(e){const{currentAlignment:t,_pointerOffsetInPx:s}=this;return t==="top-left"||t==="bottom-left"||t==="top-right"||t==="bottom-right"?e+s:e}_calculateAlignmentPosition(e,t,s,n){const{currentAlignment:o,_pointerOffsetInPx:r}=this,l=n/2,d=s.height-t,u=s.width-e,{padding:h}=this.view;return o==="bottom-center"?{top:t+r-h.top,left:e-l-h.left}:o==="top-left"?{bottom:d+r-h.bottom,right:u+r-h.right}:o==="bottom-left"?{top:t+r-h.top,right:u+r-h.right}:o==="top-right"?{bottom:d+r-h.bottom,left:e+r-h.left}:o==="bottom-right"?{top:t+r-h.top,left:e+r-h.left}:o==="top-center"?{bottom:d+r-h.bottom,left:e-l-h.left}:void 0}_calculatePositionStyle(e,t){const{dockEnabled:s,view:n}=this;if(!n)return;if(s)return{left:"",top:"",right:"",bottom:""};if(O(e)||!t)return;const o=this._calculateFullWidth(t),r=this._calculateAlignmentPosition(e.x,e.y,n,o);return r?{top:r.top!==void 0?`${r.top}px`:"auto",left:r.left!==void 0?`${r.left}px`:"auto",bottom:r.bottom!==void 0?`${r.bottom}px`:"auto",right:r.right!==void 0?`${r.right}px`:"auto"}:void 0}_viewChange(e,t){e&&t&&(this.close(),this.clear())}_viewReadyChange(e,t){if(e){const s=this.get("viewModel.view");this._wireUpView(s)}else t&&(this.close(),this.clear())}_wireUpView(e){if(this._destroySpinner(),!e)return;const{spinnerEnabled:t}=this;t&&this._createSpinner(e),this._setDockEnabledForViewSize(this.dockOptions)}_dockingThresholdCrossed(e,t,s){const[n,o]=e,[r,l]=t,{width:d,height:u}=s;return n<=d&&r>d||n>d&&r<=d||o<=u&&l>u||o>u&&l<=u}_updateDockEnabledForViewSize(e,t){if(!e||!t)return;const s=this.get("viewModel.view.padding")||{left:0,right:0,top:0,bottom:0},n=s.left+s.right,o=s.top+s.bottom,r=[],l=[];r[0]=e[0]-n,r[1]=e[1]-o,l[0]=t[0]-n,l[1]=t[1]-o;const{dockOptions:d}=this,u=d.breakpoint;this._dockingThresholdCrossed(r,l,u)&&this._setDockEnabledForViewSize(d),this._setCurrentDockPosition()}_focusDockButtonNode(e){this._focusDockButton&&(this._focusDockButton=!1,e.focus())}_closeButtonNodeUpdated(e){return this._focusClose?(this._focusClose=!1,void e.focus()):this._blurClose?(this._blurClose=!1,void e.blur()):void 0}_mainContainerNodeUpdated(e){return this._mainContainerNode=e,this._focusContainer?(this._focusContainer=!1,void e.focus()):this._blurContainer?(this._blurContainer=!1,void e.blur()):void 0}_featureMenuNodeUpdated(e){if(this._featureMenuNode=e,!e||!this._focusFirstFeature)return;this._focusFirstFeature=!1;const t=e.querySelectorAll("li");t.length&&t[0].focus()}_actionsMenuNodeUpdated(e){if(this._actionsMenuNode=e,!e||!this._focusFirstAction)return;this._focusFirstAction=!1;const t=e.querySelectorAll("li");t.length&&t[0].focus()}_focusFeatureMenuButtonNode(e){this._focusFeatureMenuButton&&(this._focusFeatureMenuButton=!1,e.focus())}_focusActionsMenuButtonNode(e){this._focusActionsMenuButton&&(this._focusActionsMenuButton=!1,e.focus())}_featureMenuViewportScrollTop(){this._featureMenuViewportNode&&(this._featureMenuViewportNode.scrollTop=0)}_toggleScreenLocationEnabled(){const{dockEnabled:e,viewModel:t}=this;if(!t)return;const s=t.active&&!e;t.screenLocationEnabled=s}_shouldDockAtCurrentViewSize(e){var d,u;const t=e.breakpoint,s=(u=(d=this.viewModel)==null?void 0:d.view)==null?void 0:u.ui;if(!s)return!1;const{width:n,height:o}=s;if(isNaN(n)||isNaN(o))return!1;const r=t.hasOwnProperty("width")&&n<=t.width,l=t.hasOwnProperty("height")&&o<=t.height;return r||l}_setDockEnabledForViewSize(e){e.breakpoint&&(this.dockEnabled=this._shouldDockAtCurrentViewSize(e))}_getPageText(e,t){return this.featureNavigationVisible?rt(this.messages.pageText,{index:t+1,total:e}):null}_destroySpinner(){const{_spinner:e,view:t}=this;e&&(t&&t.ui&&t.ui.remove(this._spinner,va),e.destroy(),this._spinner=null)}_createSpinner(e){e&&(this._spinner=new mm({view:e}),e.ui.add(this._spinner,{key:va,position:"manual"}))}_toggleCollapsed(){this.collapsed=!this.collapsed}_close(){this.close(),this.view&&this.view.focus()}_toggleDockEnabled(){this.dockEnabled=!this.dockEnabled,this._focusDockButton=!0,this.scheduleRender()}_toggleFeatureMenu(){const e=!this.featureMenuOpen;this._featureMenuOpenChanged(e),this.actionsMenuOpen=!1,this.featureMenuOpen=e}_toggleActionsMenu(){const e=!this.actionsMenuOpen;this._actionsMenuOpenChanged(e),this.featureMenuOpen=!1,this.actionsMenuOpen=e}_triggerAction(e){const t=e.currentTarget.dataset.actionUid,{allActions:s}=this.viewModel,n=s.findIndex(r=>r.uid===t),o=s.getItemAt(n);o&&o.type==="toggle"&&(o.value=!o.value),this.actionsMenuOpen=!1,this.viewModel.triggerAction(n)}_selectFeature(e){const t=e.currentTarget["data-feature-index"];isNaN(t)||(this.viewModel.selectedFeatureIndex=t),this.featureMenuOpen=!1,this._focusFeatureMenuButton=!0,this.scheduleRender()}_next(){this.next()}_previous(){this.previous()}};a([c({readOnly:!0})],S.prototype,"actionsMenuId",null),a([c({readOnly:!0})],S.prototype,"actionsMenuButtonId",null),a([c({readOnly:!0})],S.prototype,"featureMenuId",null),a([c({readOnly:!0})],S.prototype,"titleId",null),a([c({readOnly:!0})],S.prototype,"contentId",null),a([c({readOnly:!0})],S.prototype,"hasContent",null),a([c({readOnly:!0})],S.prototype,"featureNavigationVisible",null),a([c({readOnly:!0})],S.prototype,"collapsible",null),a([c({readOnly:!0})],S.prototype,"featureMenuVisible",null),a([c({readOnly:!0})],S.prototype,"contentCollapsed",null),a([c({readOnly:!0})],S.prototype,"dividedActions",null),a([c({readOnly:!0,dependsOn:["_flowItems.length"]})],S.prototype,"_activeFlowItemWidget",null),a([c()],S.prototype,"actions",null),a([c()],S.prototype,"actionsMenuOpen",null),a([c()],S.prototype,"alignment",void 0),a([c()],S.prototype,"autoCloseEnabled",null),a([c()],S.prototype,"autoOpenEnabled",null),a([c()],S.prototype,"defaultPopupTemplateEnabled",null),a([c()],S.prototype,"content",null),a([c()],S.prototype,"collapsed",void 0),a([c()],S.prototype,"collapseEnabled",void 0),a([c({readOnly:!0})],S.prototype,"currentAlignment",null),a([c({readOnly:!0})],S.prototype,"currentDockPosition",null),a([c()],S.prototype,"dockOptions",null),a([c()],S.prototype,"dockEnabled",void 0),a([c({readOnly:!0})],S.prototype,"featureCount",null),a([c()],S.prototype,"featureMenuOpen",void 0),a([c()],S.prototype,"features",null),a([c()],S.prototype,"goToOverride",null),a([c()],S.prototype,"headingLevel",void 0),a([c()],S.prototype,"highlightEnabled",null),a([c()],S.prototype,"location",null),a([c()],S.prototype,"label",null),a([c()],S.prototype,"maxInlineActions",void 0),a([c(),re("esri/widgets/Popup/t9n/Popup")],S.prototype,"messages",void 0),a([c(),re("esri/t9n/common")],S.prototype,"messagesCommon",void 0),a([c()],S.prototype,"promises",null),a([c({readOnly:!0})],S.prototype,"selectedFeature",null),a([c()],S.prototype,"selectedFeatureIndex",null),a([c({readOnly:!0})],S.prototype,"selectedFeatureWidget",null),a([c()],S.prototype,"spinnerEnabled",void 0),a([c()],S.prototype,"title",null),a([c()],S.prototype,"updateLocationEnabled",null),a([c()],S.prototype,"view",null),a([c({type:pc}),sr(["triggerAction","trigger-action"])],S.prototype,"viewModel",void 0),a([c()],S.prototype,"visible",null),a([c()],S.prototype,"visibleElements",void 0),a([be("visibleElements")],S.prototype,"castVisibleElements",null),a([Pe()],S.prototype,"_close",null),a([Pe()],S.prototype,"_toggleDockEnabled",null),a([Pe()],S.prototype,"_toggleFeatureMenu",null),a([Pe()],S.prototype,"_toggleActionsMenu",null),a([Pe()],S.prototype,"_triggerAction",null),a([Pe()],S.prototype,"_selectFeature",null),a([Pe()],S.prototype,"_next",null),a([Pe()],S.prototype,"_previous",null),S=a([C("esri.widgets.Popup")],S);const Ia=S,Qn=[0,0];function Nm(i){const e=(i.ownerDocument||window.document).defaultView,t=i.getBoundingClientRect();return Qn[0]=t.left+((e==null?void 0:e.pageXOffset)??0),Qn[1]=t.top+((e==null?void 0:e.pageYOffset)??0),Qn}function Ca(i){i&&(Il(i),i.parentNode&&i.parentNode.removeChild(i))}function zm(i){const e=document.createElement("div");return i.appendChild(e),e}const Xi=16,Fs=750,Bm=512,Um=2,Hm=i=>{let e=class extends i{constructor(...t){var s;super(...t),this._freqInfo={freq:Xi,time:Fs},this._overlayRenderTaskHandle=null,this.height=0,this.overlay=null,this.position=null,this.resizing=!1,this.root=null,this.surface=null,this.suspended=!0,this.ui=null,this.userContent=null,this.width=0,this.widthBreakpoint=null,t.length!==0&&((s=t[0])==null?void 0:s.popup)!==void 0||(this.popup=new Ia({view:this})),this.handles.add([I(()=>this.cursor,n=>{const{surface:o}=this;o&&o.setAttribute("data-cursor",n)}),I(()=>this.interacting,n=>{const{surface:o}=this;o&&o.setAttribute("data-interacting",n.toString())})])}initialize(){this.handles.add(I(()=>this.ui,(t,s)=>this._handleUIChange(t,s))),this._wireUI(this.ui),this.handles.add([this.on("focus",()=>this.notifyChange("focused")),this.on("blur",()=>this.notifyChange("focused"))])}destroy(){this.destroyed||(this.ui=Te(this.ui),this.popup&&!this.popup.destroyed&&this.popup.destroy(),this.container=null)}get container(){return this._get("container")??null}set container(t){const s=this._get("container"),n=Ml(t),o=n instanceof HTMLDivElement?n:null;if(o||typeof t!="string"||B.getLogger(this.declaredClass).error("#container",`element with id '${t}' not found`),s===o)return;const r="dom-size";if(this.handles.remove(r),this._stopMeasuring(),s&&(s.classList.remove("esri-view"),this._overlayRenderTaskHandle&&(this._overlayRenderTaskHandle.remove(),this._overlayRenderTaskHandle=null),this.overlay&&(this.overlay.destroy(),this._set("overlay",null)),this.root&&(Ca(this.root),this._set("root",null)),this.userContent&&(Cr(this.userContent,s),Ca(this.userContent),this._set("userContent",null))),!o)return this._set("width",0),this._set("height",0),this._set("position",null),this._set("suspended",!0),this._set("surface",null),void this._set("container",null);o.classList.add("esri-view");const l=document.createElement("div");l.className="esri-view-user-storage",Cr(o,l),o.appendChild(l),this._set("userContent",l);const d=document.createElement("div");d.className="esri-view-root",o.insertBefore(d,o.firstChild),this._set("root",d);const u=document.createElement("div");u.className="esri-view-surface",u.setAttribute("role","application"),u.tabIndex=0,d.appendChild(u),this._set("surface",u);const h=new qr;d.appendChild(h.surface),this._set("overlay",h),I(()=>h.needsRender,p=>{p&&!this._overlayRenderTaskHandle?this._overlayRenderTaskHandle=Hi({render:()=>{var g;return(g=this.overlay)==null?void 0:g.render()}}):this._overlayRenderTaskHandle=ti(this._overlayRenderTaskHandle)}),this.forceDOMReadyCycle(),this.handles.add(I(()=>this.size,p=>{const[g,f]=p,_="esri-view-surface--inset-outline";g>=document.body.clientWidth||f>=document.body.clientHeight?u.classList.add(_):u.classList.remove(_)},H),r),this._set("container",o),this._startMeasuring()}get focused(){const t=document.activeElement===this.surface;return document.hasFocus()&&t}set popup(t){const s=this._get("popup");s&&s!==t&&s.destroy(),this._set("popup",t)}get size(){return[this.width,this.height]}blur(){this.surface&&this.surface.blur()}focus(){this.surface&&this.surface.focus()}pageToContainer(t,s,n){const o=this.position;return t-=o?o[0]:0,s-=o?o[1]:0,n?(n[0]=t,n[1]=s):n=[t,s],n}containerToPage(t,s,n){const o=this.position;return t+=o?o[0]:0,s+=o?o[1]:0,n?(n[0]=t,n[1]=s):n=[t,s],n}_handleUIChange(t,s){s&&(this.handles.remove("ui"),s.destroy()),t&&this._wireUI(t),this._set("ui",t)}_wireUI(t){this.handles.remove("ui"),t&&(t.view=this,this.handles.add([I(()=>this.root,s=>{t.container=s?zm(s):null},H),I(()=>this.popup,(s,n)=>{const o="popup",r="manual";n&&t.remove(n,o),s&&(s.view=t.view,t.add(s,{key:o,position:r}))},H)],"ui"))}_stopMeasuring(){this.handles.remove("measuring"),this._get("resizing")&&this._set("resizing",!1)}_startMeasuring(){const t=this._freqInfo;t.freq=Xi,t.time=Fs,this.handles.add([(()=>{const s=()=>{t.freq=Xi,t.time=Fs};return window.addEventListener("resize",s),{remove(){window.removeEventListener("resize",s)}}})(),Hi({prepare:s=>{const n=this._measure(),o=this._freqInfo;if(o.time+=s.deltaTime,n&&(o.freq=Xi,this._get("resizing")||this._set("resizing",!0)),o.time<o.freq)return;o.time=0;const r=this._position();o.freq=r||n?Xi:Math.min(Fs,o.freq*Um),!n&&o.freq>=Bm&&this._get("resizing")&&this._set("resizing",!1)}})],"measuring"),this._measure(),this._position()}_measure(){const t=this.container,s=t?t.clientWidth:0,n=t?t.clientHeight:0;if(s===0||n===0)return this.suspended||this._set("suspended",!0),!1;const o=this.width,r=this.height;return s===o&&n===r?(this.suspended&&this._set("suspended",!1),!1):(this._set("width",s),this._set("height",n),this.suspended&&this._set("suspended",!1),this.emit("resize",{oldWidth:o,oldHeight:r,width:s,height:n}),!0)}_position(){const t=this.container,s=this.position,n=t&&Nm(t);return!!n&&(!s||n[0]!==s[0]||n[1]!==s[1])&&(this._set("position",[n[0],n[1]]),!0)}forceDOMReadyCycle(){}};return a([c()],e.prototype,"container",null),a([c({readOnly:!0})],e.prototype,"focused",null),a([c({readOnly:!0})],e.prototype,"height",void 0),a([c({type:Ia})],e.prototype,"popup",null),a([c({type:qr})],e.prototype,"overlay",void 0),a([c({readOnly:!0})],e.prototype,"position",void 0),a([c({readOnly:!0})],e.prototype,"resizing",void 0),a([c({readOnly:!0})],e.prototype,"root",void 0),a([c({value:null,readOnly:!0})],e.prototype,"size",null),a([c({readOnly:!0})],e.prototype,"surface",void 0),a([c({readOnly:!0})],e.prototype,"suspended",void 0),a([c()],e.prototype,"ui",void 0),a([c({readOnly:!0})],e.prototype,"userContent",void 0),a([c({readOnly:!0})],e.prototype,"width",void 0),a([c()],e.prototype,"widthBreakpoint",void 0),e=a([C("esri.views.DOMContainer")],e),e},qm=i=>{let e=class extends i{async fetchPopupFeatures(t,s){await this.when();const{location:n,queryArea:o,layerViewsAndGraphics:r,clientOnlyGraphics:l}=await this._prepareFetchPopupFeatures(t,s),d=Promise.resolve(l),u=this._queryLayerPopupFeatures(o,r,s),h=u.map(p=>p.promise);return{location:n,clientOnlyGraphics:l,allGraphicsPromise:_d([d,...h]).then(p=>Array.from(new Set(p.flat()))),promisesPerLayerView:u}}_queryLayerPopupFeatures(t,s,n){return s.map(({layerView:o,graphics:r})=>{const l={clientGraphics:r,event:E(n)?n.event:null,signal:E(n)?n.signal:null,defaultPopupTemplateEnabled:!!E(n)&&!!n.defaultPopupTemplateEnabled},d=o.fetchPopupFeatures(t,l);return{layerView:o,promise:d}})}_isValidPopupGraphic(t,s){return t&&!!t.getEffectivePopupTemplate(E(s)&&s.defaultPopupTemplateEnabled)}async _prepareFetchPopupFeatures(t,s){const{clientGraphics:n,queryArea:o,location:r}=await this._popupHitTestGraphics(t,s),l=this._getFetchPopupLayerViews(),{layerViewsAndGraphics:d,clientOnlyGraphics:u}=this._graphicsPerFetchPopupLayerView(n,l);return{clientOnlyGraphics:u,layerViewsAndGraphics:d,queryArea:o,location:r}}async _popupHitTestGraphics(t,s){const{results:n,mapPoint:o}=await this.popupHitTest(t),r=n.filter(d=>d.type==="graphic"&&this._isValidPopupGraphic(d.graphic,s)),l=r.length?r[0].mapPoint:null;return{clientGraphics:r.map(d=>d.graphic),queryArea:o,location:o||l}}_getFetchPopupLayerViews(){const t=[];return this.allLayerViews.forEach(s=>{this._isValidPopupLayerView(s)&&t.push(s)}),E(this.graphicsView)&&this._isValidPopupLayerView(this.graphicsView)&&t.push(this.graphicsView),t.reverse()}_isValidPopupLayerView(t){return E(t)&&(!("layer"in t)||!t.suspended)&&"fetchPopupFeatures"in t}_graphicsPerFetchPopupLayerView(t,s){const n=[],o=new Map,r=s.map(l=>{const d=[];return"layer"in l?o.set(l.layer,d):o.set(l.graphics,d),{layerView:l,graphics:d}});for(const l of t){const d=o.get(l.layer)||o.get(l.sourceLayer)||null;d?d.push(l):n.push(l)}return{layerViewsAndGraphics:r,clientOnlyGraphics:n}}};return e=a([C("esri.views.PopupView")],e),e};let gn=class extends Ou{constructor(e){super(e),this.handles.add(this.on("before-add",t=>{O(t.item)||t.item.parent===this.owner&&(B.getLogger(this.declaredClass).warn("Analysis inside the collection must be unique. Not adding this element again."),t.preventDefault())}))}_own(e){e.parent=this.owner}_release(e){e.parent=null}};gn=a([C("esri.support.AnalysesCollection")],gn);let zt=class extends z{constructor(e){super(e),this.view=null,this.baseLayerViews=new ee,this.referenceLayerViews=new ee,this._loadingHandle=I(()=>{var t,s;return(s=(t=this.view)==null?void 0:t.map)==null?void 0:s.basemap},t=>{t&&t.load().catch(()=>{})},H)}destroy(){this._set("view",null),this._loadingHandle&&(this._loadingHandle.remove(),this._loadingHandle=null)}get suspended(){return!this.view||this.view.suspended}get updating(){var t,s;if(this.view&&this.view.suspended)return!1;const e=(s=(t=this.view)==null?void 0:t.map)==null?void 0:s.basemap;return!!e&&!!e.loaded&&(this.baseLayerViews.some(n=>n.updating)||this.referenceLayerViews.some(n=>n.updating))}};a([c({constructOnly:!0})],zt.prototype,"view",void 0),a([c({readOnly:!0})],zt.prototype,"baseLayerViews",void 0),a([c({readOnly:!0})],zt.prototype,"referenceLayerViews",void 0),a([c({readOnly:!0})],zt.prototype,"suspended",null),a([c({type:Boolean,readOnly:!0})],zt.prototype,"updating",null),zt=a([C("esri.views.BasemapView")],zt);let Gm=class{constructor(e,t,s){this.layer=e,this.view=t,this.layerViewImporter=s,this._controller=new AbortController,this._deferred=pl(),this._started=!1,this.done=!1,br(this._controller.signal,()=>{const n=new $("cancelled:layerview-create","layerview creation cancelled",{layer:e});this._deferred.reject(n)})}get promise(){return this._deferred.promise}destroy(){this._controller.abort();const{layerView:e}=this;if(!e)return;const{layer:t,view:s}=this;t.emit("layerview-destroy",{view:s,layerView:e}),s.emit("layerview-destroy",{layer:t,layerView:e}),this.done=!0,this.layer=null,this.layerView=null,this.view=null,this.layerViewImporter=null}async start(){var n,o;if(this._started)return;this._started=!0;const{_controller:{signal:e},layer:t,view:s}=this;this._map=s.map;try{let r,l;if(await t.load({signal:e}),"prefetchResources"in t&&await t.prefetchResources({signal:e}),t.createLayerView)r=await t.createLayerView(s,{signal:e});else{if(!this.layerViewImporter.hasLayerViewModule(t))throw new $("layer:view-not-supported","No layerview implementation was found");const h=await this.layerViewImporter.importLayerView(t);Yt(e),r="default"in h?new h.default({layer:t,view:s}):new h({layer:t,view:s})}const d=()=>{l=ti(l),r.destroyed||r.destroy(),r.layer=null,r.parent=null,r.view=null,this.done=!0};l=br(e,d),Yt(e);try{await r.when()}catch(h){throw d(),h}if(!((o=(n=this._map)==null?void 0:n.allLayers)==null?void 0:o.includes(t)))return d(),void this._deferred.reject(new $("view:no-layerview-for-layer","The layer has been removed from the map",{layer:t}));this.layerView=r,t.emit("layerview-create",{view:s,layerView:r}),s.emit("layerview-create",{layer:t,layerView:r}),this.done=!0,this._deferred.resolve(r)}catch(r){t.emit("layerview-create-error",{view:s,error:r}),s.emit("layerview-create-error",{layer:t,error:r}),this.done=!0,this._deferred.reject(new $("layerview:create-error","layerview creation failed",{layer:t,error:r}))}}},He=class extends z{constructor(i){super(i),this._layerLayerViewInfoMap=new Map,this._watchUpdatingTracking=new Cl,this.supportsGround=!0,this._preloadLayerViewModules=()=>{var t;const e=(t=this.view.map)==null?void 0:t.allLayers;if(e)for(const s of e)this.layerViewImporter.hasLayerViewModule(s)&&this.layerViewImporter.importLayerView(s)},this._reschedule=()=>(O(this._workPromise)&&(this._workPromise=pl(),this._workPromise.promise.catch(()=>{})),this.removeHandles("reschedule"),this.addHandles(ud(this._doWork),"reschedule"),this._workPromise.promise),this._doWork=()=>{var r,l,d;const e=this.view.map;if(this._map!==e&&(this.clear(),this._map=e),O(this._workPromise))return void this.notifyChange("updating");this.removeHandles("reschedule"),this.removeHandles("collection-change");const t=[],s=u=>{if(!O(u))for(const h of u)h&&(t.push(h),this._createLayerView(h),"layers"in h&&h.layers&&s(h.layers))};for(const u of this._rootCollectionNames)s(this.get(u));this._refreshCollections();for(const[u,h]of this._layerLayerViewInfoMap)t.includes(u)||(this._layerLayerViewInfoMap.delete(h.layer),h.destroy());const n=t.filter(u=>u.type==="group").map(u=>u.layers),o=[(r=e==null?void 0:e.ground)==null?void 0:r.layers,(l=e==null?void 0:e.basemap)==null?void 0:l.baseLayers,(d=e==null?void 0:e.basemap)==null?void 0:d.referenceLayers,e==null?void 0:e.layers,...n].filter(u=>!!u);this.addHandles(o.map(u=>this._watchUpdatingTracking.addOnCollectionChange(()=>u,this._reschedule)),"collection-change"),this._workPromise.resolve(),this._workPromise=null}}initialize(){this.own([Ke(()=>{var i,e;return(e=(i=this.view)==null?void 0:i.map)==null?void 0:e.allLayers},"change",this._preloadLayerViewModules,{onListenerAdd:this._preloadLayerViewModules}),I(()=>{const i=this.view,e=i==null?void 0:i.map;return[e==null?void 0:e.basemap,e==null?void 0:e.ground,e==null?void 0:e.layers,i==null?void 0:i.ready]},()=>this._reschedule(),ai)]),this._preloadLayerViewModules(),this._reschedule()}destroy(){this.clear(),this._watchUpdatingTracking.destroy(),this._map=null,E(this._workPromise)&&(this._workPromise.reject(yd()),this._workPromise=null)}get _layersToLayerViews(){const i=[["view.map.basemap.baseLayers","view.basemapView.baseLayerViews"],["view.map.layers","view.layerViews"],["view.map.basemap.referenceLayers","view.basemapView.referenceLayerViews"]];return this.supportsGround&&i.push(["view.map.ground.layers","view.groundView.layerViews"]),new Map(i)}get _rootCollectionNames(){return Array.from(this._layersToLayerViews.keys())}get updating(){return E(this._workPromise)||this._watchUpdatingTracking.updating||_n(this._layerLayerViewInfoMap,i=>!i.done)}get updatingRemaining(){let i=0;for(const e of this._layerLayerViewInfoMap.values())e.done||++i;return i}clear(){if(!this.destroyed){for(const i of this._layerLayerViewInfoMap.values())i.destroy();this._layerLayerViewInfoMap.clear(),this._refreshCollections()}}async whenLayerView(i){if(await this._reschedule(),!this._layerLayerViewInfoMap.has(i))throw new $("view:no-layerview-for-layer","No layerview has been found for the layer",{layer:i});return this._layerLayerViewInfoMap.get(i).promise}_refreshCollections(){for(const[i,e]of this._layersToLayerViews)this._populateLayerViewsOwners(this.get(i),this.get(e),this.view);this.notifyChange("updating"),this.notifyChange("updatingRemaining")}_populateLayerViewsOwners(i,e,t){if(!i||!e)return void(e&&e.removeAll());let s=0;for(const n of i){const o=this._layerLayerViewInfoMap.get(n);if(!o||!o.layerView)continue;const r=o.layerView;r.layer=n,r.parent=t,e.getItemAt(s)!==r&&e.splice(s,0,r),n.layers&&this._populateLayerViewsOwners(n.layers,r.layerViews,r),s+=1}s<e.length&&e.splice(s,e.length)}_createLayerView(i){if(this._layerLayerViewInfoMap.has(i))return this.view.ready&&this._layerLayerViewInfoMap.get(i).start(),this.notifyChange("updating"),void this.notifyChange("updatingRemaining");i.load().catch(()=>{}),this.layerViewImporter.hasLayerViewModule(i)&&this.layerViewImporter.importLayerView(i);const e=new Gm(i,this.view,this.layerViewImporter);e.promise.then(()=>this._refreshCollections(),t=>{t&&(hl(t)||t.name==="cancelled:layerview-create")||B.getLogger(this.declaredClass).error(`Failed to create layerview for layer title:'${i.title??"no title"}', id:'${i.id??"no id"}' of type '${i.type}'.`,{layer:i,error:t}),this._refreshCollections()}),this._layerLayerViewInfoMap.set(i,e),this.view.ready&&e.start(),this.notifyChange("updating"),this.notifyChange("updatingRemaining")}};a([c()],He.prototype,"_workPromise",void 0),a([c({readOnly:!0})],He.prototype,"_watchUpdatingTracking",void 0),a([c({readOnly:!0})],He.prototype,"_layersToLayerViews",null),a([c({readOnly:!0})],He.prototype,"_rootCollectionNames",null),a([c()],He.prototype,"layerViewImporter",void 0),a([c()],He.prototype,"supportsGround",void 0),a([c({readOnly:!0})],He.prototype,"updating",null),a([c({readOnly:!0})],He.prototype,"updatingRemaining",null),a([c({constructOnly:!0})],He.prototype,"view",void 0),He=a([C("esri.views.LayerViewManager")],He);const jm=He;let Oe=class extends z{constructor(e){super(e),this.factor=1.5,this.offset=me(0,0),this.position=null,this.size=120,this.maskUrl=null,this.maskEnabled=!0,this.overlayUrl=null,this.overlayEnabled=!0,this.visible=!0}get version(){return this.commitProperty("factor"),this.commitProperty("offset"),this.commitProperty("position"),this.commitProperty("visible"),this.commitProperty("size"),this.commitProperty("maskUrl"),this.commitProperty("maskEnabled"),this.commitProperty("overlayUrl"),this.commitProperty("overlayEnabled"),(this._get("version")||0)+1}};a([c({type:Number})],Oe.prototype,"factor",void 0),a([c({nonNullable:!0})],Oe.prototype,"offset",void 0),a([c()],Oe.prototype,"position",void 0),a([c({type:Number,range:{min:0}})],Oe.prototype,"size",void 0),a([c()],Oe.prototype,"maskUrl",void 0),a([c()],Oe.prototype,"maskEnabled",void 0),a([c()],Oe.prototype,"overlayUrl",void 0),a([c()],Oe.prototype,"overlayEnabled",void 0),a([c({readOnly:!0})],Oe.prototype,"version",null),a([c({type:Boolean})],Oe.prototype,"visible",void 0),Oe=a([C("esri.views.Magnifier")],Oe);const mc=Oe;let us=class extends z{constructor(e,t){super({}),this._stage=e,this._textureRequests=new Map,this._frameTask=(t==null?void 0:t.registerTask(Pu.TEXTURE_UNLOAD))??$u}normalizeCtorArgs(){return{}}destroy(){super.destroy(),this._frameTask.remove(),this._textureRequests.forEach(e=>this._releaseTextureRequest(e)),this._textureRequests.clear()}get updating(){return this._frameTask.updating}fromData(e,t,s){const n=this.makeUid(e);let o=this._textureRequests.get(n);return o||(o={referenceCount:0,texture:t(),textureAsync:null,abortController:null,onRemove:s},this._stage&&(this._stage.add(o.texture),this._stage.loadImmediate(o.texture)),this._textureRequests.set(n,o)),o.referenceCount++,{uid:n,texture:o.texture,release:()=>this._release(n)}}_release(e){const t=this._textureRequests.get(e);t?(t.referenceCount<1&&console.warn("TextureCollection: reference count is < 1 for "+e),t.referenceCount--,t.referenceCount<1&&this._frameTask.schedule(()=>this._releaseNow(e))):console.warn(`TextureCollection: texture doesn't exist: '${e}'`)}get test(){return{textureRequests:this._textureRequests}}_releaseNow(e){if(!this._textureRequests)return;const t=this._textureRequests.get(e);!t||t.referenceCount>0||(this._releaseTextureRequest(t),this._textureRequests.delete(e))}_releaseTextureRequest(e){var t;e.onRemove&&e.onRemove(),e.texture?(t=this._stage)==null||t.remove(e.texture):e.abortController&&(e.abortController.abort(),e.abortController=null)}makeUid(e,t=null){return E(t)?`${e}.${t}px`:e}};a([c()],us.prototype,"_frameTask",void 0),a([c()],us.prototype,"updating",null),us=a([C("esri.views.3d.support.TextureCollection")],us);var Ea;(function(i){i[i.Left=0]="Left",i[i.Middle=1]="Middle",i[i.Right=2]="Right"})(Ea||(Ea={}));const gc=["click","double-click","immediate-click","immediate-double-click","hold","drag","key-down","key-up","pointer-down","pointer-move","pointer-up","pointer-drag","mouse-wheel","pointer-enter","pointer-leave","gamepad","focus","blur"],fc={};function _c(i){return!!fc[i]}function Wm(i){for(const e of i)if(!_c(e))return!1;return!0}gc.forEach(i=>{fc[i]=!0});let Zm=class{constructor(e){this._handlers=new Map,this._counter=0,this._handlerCounts=new Map,this.view=e,this.inputManager=null}connect(e){e&&this.disconnect(),this.inputManager=e,this._handlers.forEach(({handler:t,priority:s},n)=>this.inputManager.installHandlers(n,[t],s))}disconnect(){this.inputManager&&this._handlers.forEach((e,t)=>this.inputManager.uninstallHandlers(t)),this.inputManager=null}destroy(){this.disconnect(),this._handlers.clear(),this.view=null}on(e,t,s,n){const o=Array.isArray(e)?e:e.split(",");if(!Wm(o))return o.some(_c)&&console.error("Error: registering input events and other events on the view at the same time is not supported."),null;let r,l;Array.isArray(t)?l=t:(r=t,l=[]),typeof s=="function"?r=s:n=s,n=n??Qt.DEFAULT;const d=this._createUniqueGroupName(),u=new Km(this.view,o,l,r);this._handlers.set(d,{handler:u,priority:n});for(const h of o){const p=this._handlerCounts.get(h)||0;this._handlerCounts.set(h,p+1)}return this.inputManager&&this.inputManager.installHandlers(d,[u],n),{remove:()=>this._removeHandler(d,o)}}hasHandler(e){return!!this._handlerCounts.get(e)}_removeHandler(e,t){if(this._handlers.has(e)){this._handlers.delete(e);for(const s of t){const n=this._handlerCounts.get(s);n===void 0?console.error("Trying to remove handler for event that has no handlers registered: ",s):n===1?this._handlerCounts.delete(s):this._handlerCounts.set(s,n-1)}}this.inputManager&&this.inputManager.uninstallHandlers(e)}_createUniqueGroupName(){return this._counter+=1,`viewEvents_${this._counter}`}},Km=class extends he{constructor(e,t,s,n){super(!0),this.view=e;for(const o of t)switch(o){case"click":this.registerIncoming("click",s,r=>n(this._wrapClick(r)));break;case"double-click":this.registerIncoming("double-click",s,r=>n(this._wrapDoubleClick(r)));break;case"immediate-click":this.registerIncoming("immediate-click",s,r=>n(this._wrapImmediateClick(r)));break;case"immediate-double-click":this.registerIncoming("immediate-double-click",s,r=>n(this._wrapImmediateDoubleClick(r)));break;case"hold":this.registerIncoming("hold",s,r=>n(this._wrapHold(r)));break;case"drag":this.registerIncoming("drag",s,r=>{const l=this._wrapDrag(r);l&&n(l)});break;case"key-down":this.registerIncoming("key-down",s,r=>n(this._wrapKeyDown(r)));break;case"key-up":this.registerIncoming("key-up",s,r=>n(this._wrapKeyUp(r)));break;case"pointer-down":this.registerIncoming("pointer-down",s,r=>n(this._wrapPointer(r,"pointer-down")));break;case"pointer-move":this.registerIncoming("pointer-move",s,r=>n(this._wrapPointer(r,"pointer-move")));break;case"pointer-up":this.registerIncoming("pointer-up",s,r=>n(this._wrapPointer(r,"pointer-up")));break;case"pointer-drag":this.registerIncoming("pointer-drag",s,r=>n(this._wrapPointerDrag(r)));break;case"mouse-wheel":this.registerIncoming("mouse-wheel",s,r=>n(this._wrapMouseWheel(r)));break;case"pointer-enter":this.registerIncoming("pointer-enter",s,r=>n(this._wrapPointer(r,"pointer-enter")));break;case"pointer-leave":this.registerIncoming("pointer-leave",s,r=>n(this._wrapPointer(r,"pointer-leave")));break;case"gamepad":this.registerIncoming("gamepad",s,r=>{n(this._wrapGamepad(r))});break;case"focus":this.registerIncoming("focus",s,r=>{n(this._wrapFocus(r))});break;case"blur":this.registerIncoming("blur",s,r=>{n(this._wrapBlur(r))})}}_wrapFocus(e){return{type:"focus",timestamp:e.timestamp,native:e.data.native,cancelable:e.cancelable,stopPropagation:()=>e.stopPropagation(),async:t=>e.async(t),preventDefault:()=>e.preventDefault()}}_wrapBlur(e){return{type:"blur",timestamp:e.timestamp,native:e.data.native,cancelable:e.cancelable,stopPropagation:()=>e.stopPropagation(),async:t=>e.async(t),preventDefault:()=>e.preventDefault()}}_wrapClick(e){const{pointerType:t,button:s,buttons:n,x:o,y:r,native:l,eventId:d}=e.data,{cancelable:u,timestamp:h}=e;return{type:"click",pointerType:t,button:s,buttons:n,x:o,y:r,native:l,timestamp:h,screenPoint:me(o,r),mapPoint:this._getMapPoint(o,r),eventId:d,cancelable:u,stopPropagation:()=>e.stopPropagation(),async:p=>e.async(p),preventDefault:()=>e.preventDefault()}}_wrapDoubleClick(e){const{pointerType:t,button:s,buttons:n,x:o,y:r,native:l,eventId:d}=e.data,{cancelable:u,timestamp:h}=e;return{type:"double-click",pointerType:t,button:s,buttons:n,x:o,y:r,native:l,timestamp:h,mapPoint:this._getMapPoint(o,r),eventId:d,cancelable:u,stopPropagation:()=>e.stopPropagation(),async:p=>e.async(p),preventDefault:()=>e.preventDefault()}}_wrapImmediateClick(e){const{pointerType:t,button:s,buttons:n,x:o,y:r,native:l,eventId:d}=e.data,u=l.pointerId,{cancelable:h,timestamp:p}=e;return{type:"immediate-click",pointerId:u,pointerType:t,button:s,buttons:n,x:o,y:r,native:l,timestamp:p,mapPoint:this._getMapPoint(o,r),eventId:d,cancelable:h,stopPropagation:()=>e.stopPropagation(),async:g=>e.async(g),preventDefault:()=>e.preventDefault()}}_wrapImmediateDoubleClick(e){const{pointerType:t,button:s,buttons:n,x:o,y:r,native:l,eventId:d}=e.data,u=l.pointerId,{cancelable:h,timestamp:p}=e;return{type:"immediate-double-click",pointerId:u,pointerType:t,button:s,buttons:n,x:o,y:r,native:l,timestamp:p,mapPoint:this._getMapPoint(o,r),eventId:d,cancelable:h,stopPropagation:()=>e.stopPropagation(),async:g=>e.async(g),preventDefault:()=>e.preventDefault()}}_wrapHold(e){const{pointerType:t,button:s,buttons:n,x:o,y:r,native:l}=e.data,{cancelable:d,timestamp:u}=e;return{type:"hold",pointerType:t,button:s,buttons:n,x:o,y:r,native:l,timestamp:u,mapPoint:this._getMapPoint(o,r),cancelable:d,stopPropagation:()=>e.stopPropagation(),async:h=>e.async(h),preventDefault:()=>e.preventDefault()}}_getMapPoint(e,t){return this.view.toMap(me(e,t),{exclude:[]})}_wrapDrag(e){const t=e.data,{x:s,y:n}=t.center,{action:o,pointerType:r,button:l}=t;if(o==="start"&&(this._latestDragStart=t),!this._latestDragStart)return;const d=t.pointer.native,u=t.buttons,{cancelable:h,timestamp:p}=e,g={x:this._latestDragStart.center.x,y:this._latestDragStart.center.y};return o==="end"&&(this._latestDragStart=void 0),{type:"drag",action:o,x:s,y:n,origin:g,pointerType:r,button:l,buttons:u,radius:t.radius,angle:Vd(t.angle),native:d,timestamp:p,cancelable:h,stopPropagation:()=>e.stopPropagation(),async:f=>e.async(f),preventDefault:()=>e.preventDefault()}}_wrapKeyDown(e){const{key:t,repeat:s,native:n}=e.data,{cancelable:o,timestamp:r}=e;return{type:"key-down",key:t,repeat:s,native:n,timestamp:r,cancelable:o,stopPropagation:()=>e.stopPropagation(),async:l=>e.async(l),preventDefault:()=>e.preventDefault()}}_wrapKeyUp(e){const{key:t,native:s}=e.data,{cancelable:n,timestamp:o}=e;return{type:"key-up",key:t,native:s,timestamp:o,cancelable:n,stopPropagation:()=>e.stopPropagation(),async:r=>e.async(r),preventDefault:()=>e.preventDefault()}}_wrapPointer(e,t){const{x:s,y:n,button:o,buttons:r,native:l,eventId:d}=e.data,u=l.pointerId,h=l.pointerType,{cancelable:p,timestamp:g}=e;return{type:t,x:s,y:n,pointerId:u,pointerType:h,button:o,buttons:r,native:l,timestamp:g,eventId:d,cancelable:p,stopPropagation:()=>e.stopPropagation(),async:f=>e.async(f),preventDefault:()=>e.preventDefault()}}_wrapPointerDrag(e){const{x:t,y:s,buttons:n,native:o,eventId:r}=e.data.currentEvent,{button:l}=e.data.startEvent,d=e.data.startEvent.native.pointerId,u=e.data.startEvent.native.pointerType,h=e.data.action,p={x:e.data.startEvent.x,y:e.data.startEvent.y},{cancelable:g,timestamp:f}=e;return{type:"pointer-drag",x:t,y:s,pointerId:d,pointerType:u,button:l,buttons:n,action:h,origin:p,native:o,timestamp:f,eventId:r,cancelable:g,stopPropagation:()=>e.stopPropagation(),async:_=>e.async(_),preventDefault:()=>e.preventDefault()}}_wrapMouseWheel(e){const{cancelable:t,data:s,timestamp:n}=e,{x:o,y:r,deltaY:l,native:d}=s;return{type:"mouse-wheel",x:o,y:r,deltaY:l,native:d,timestamp:n,cancelable:t,stopPropagation:()=>e.stopPropagation(),async:u=>e.async(u),preventDefault:()=>e.preventDefault()}}_wrapGamepad(e){const{action:t,state:s,device:n}=e.data,{cancelable:o,timestamp:r}=e,{buttons:l,axes:d}=s;return{type:"gamepad",device:n,timestamp:r,action:t,buttons:l,axes:d,cancelable:o,stopPropagation:()=>e.stopPropagation(),async:u=>e.async(u),preventDefault:()=>e.preventDefault()}}};var Is,Ta,xa;(function(i){i[i.USER=0]="USER",i[i.MANAGER=1]="MANAGER"})(Is||(Is={})),function(i){i[i.None=0]="None",i[i.Unfocused=1]="Unfocused",i[i.Focused=2]="Focused",i[i.Unselected=4]="Unselected",i[i.Selected=8]="Selected",i[i.All=15]="All"}(Ta||(Ta={})),function(i){i[i.None=0]="None",i[i.Custom1=16]="Custom1",i[i.Custom2=32]="Custom2",i[i.Custom3=64]="Custom3",i[i.Custom4=128]="Custom4",i[i.Custom5=256]="Custom5",i[i.Custom6=512]="Custom6",i[i.Custom7=1024]="Custom7",i[i.Custom8=2048]="Custom8",i[i.Custom9=4096]="Custom9",i[i.Custom10=8192]="Custom10",i[i.Custom11=16384]="Custom11",i[i.Custom12=32768]="Custom12",i[i.All=65520]="All"}(xa||(xa={}));function Ym(i){return[i.on("before-add",e=>{const t=e.item;if(t==null||i.includes(t))return B.getLogger("esri.views.interactive.interactiveToolUtils").warn("Tool is either already in the list of tools or tool is `null`. Not adding tool."),void e.preventDefault();t.onAdd()}),i.on("after-remove",e=>{const t=e.item;t.active&&(t.view.activeTool=null),t.destroy()})]}function Ao(i){return i.visible&&i.getEditableFlag(Is.USER)&&i.getEditableFlag(Is.MANAGER)}function it(i){return me(i.x,i.y)}function yc(i,e){const t=(i instanceof HTMLElement?i:i.surface).getBoundingClientRect();return me(e.clientX-t.left,e.clientY-t.top)}function ka(i,e){return e instanceof Event?yc(i,e):it(e)}function Aa(i){if(i instanceof Event)return!0;if(typeof i=="object"&&"type"in i)switch(i.type){case"click":case"double-click":case"pointer-down":case"pointer-drag":case"pointer-enter":case"pointer-leave":case"pointer-up":case"pointer-move":case"immediate-click":case"immediate-double-click":case"hold":case"drag":case"mouse-wheel":return!0;default:return!1}return!1}let Qm=class{constructor(){this._pointerLocations=new Map,this._hoveredManipulators=new Map,this._grabbedManipulators=new Map,this._draggedManipulators=new Map,this._stopDrag=!1,this._revertToNullActiveTool=!1,this._cursor=null}get cursor(){return this._cursor}handleInputEvent(e,t){const s=()=>e.stopPropagation();switch(e.type){case"pointer-move":Pa(e.pointerType)&&this._pointerLocations.set(e.pointerId,{x:e.x,y:e.y,pointerType:e.pointerType});break;case"drag":this._grabbedManipulators.size>0&&(this._stopDrag=!0),this._stopDrag&&(s(),e.action==="end"&&(this._stopDrag=!1));break;case"pointer-down":{if(!$a(e))break;const n=it(e),o=this._intersect(n,e.pointerType,t.forEachTool);if(O(o))break;const r=o.manipulator,l=o.tool;!(E(r)&&E(l)&&r.interactive)||r.grabbable&&r.grabbableForEvent(e)||!r.grabbing||r.dragging||this._ungrabManipulatorBeforeDragging(r,e,t),E(r)&&E(l)&&r.interactive&&r.grabbable&&r.grabbableForEvent(e)&&!r.grabbing&&(this._grabbedManipulators.set(e.pointerId,{manipulator:r,tool:l,start:n,pointerType:e.pointerType}),this._grabbedManipulators.size===1&&O(t.activeTool)&&(this._revertToNullActiveTool=!0,t.setActiveTool(o.tool)),r.grabbing=!0,r.events.emit("grab-changed",{action:"start",pointerType:e.pointerType,screenPoint:n}),s());break}case"pointer-up":this._draggedManipulators.has(e.pointerId)||this._handlePointerEnd(e,t);break;case"pointer-drag":{if(!$a(e))break;const n=this._grabbedManipulators.get(e.pointerId),o=os(n,({manipulator:h})=>h),r=os(n,({tool:h})=>h);if(O(o)||O(r))break;const l=it(e);l.x=Gi(l.x,0,t.view.width),l.y=Gi(l.y,0,t.view.height);const d=Ve(n).start,u=this._draggedManipulators.get(e.pointerId);switch(e.action){case"start":case"update":e.action!=="update"&&this._grabbedManipulators.size!==1||(o.dragging=!0,u?o.events.emit("drag",{action:"update",start:d,screenPoint:l}):o.events.emit("drag",{action:"start",start:d,screenPoint:l,pointerType:e.pointerType}),this._draggedManipulators.set(e.pointerId,{tool:r,manipulator:o,start:d}));break;case"end":o.dragging=!1,u&&o.events.emit("drag",{action:"end",start:d,screenPoint:l}),this._draggedManipulators.delete(e.pointerId),this._handlePointerEnd(e,t)}s();break}case"immediate-click":{const n=it(e),o=this._intersect(n,e.pointerType,t.forEachTool);if(Jm(e)||t.forEachTool(u=>{if((!E(o)||o.tool!==u||u.automaticManipulatorSelection)&&u.manipulators){let h=!1;u.manipulators.forEach(({manipulator:p})=>{p.selected&&(p.selected=!1,h=!0)}),h&&u.onManipulatorSelectionChanged&&u.onManipulatorSelectionChanged()}}),O(o))break;const{manipulator:r,tool:l}=o;if(!r.interactive)break;r.selectable&&l.automaticManipulatorSelection&&(r.selected=!r.selected,l.onManipulatorSelectionChanged&&l.onManipulatorSelectionChanged());const d=e.native.shiftKey;r.events.emit("immediate-click",{screenPoint:n,button:e.button,pointerType:e.pointerType,shiftKey:d,stopPropagation:s});break}case"click":{const n=it(e),o=this._intersect(n,e.pointerType,t.forEachTool),r=E(o)?o.manipulator:null;if(O(r)||!r.interactive)break;const l=e.native.shiftKey;r.events.emit(e.type,{screenPoint:n,button:e.button,pointerType:e.pointerType,shiftKey:l}),s();break}case"double-click":{const n=it(e),o=this._intersect(n,e.pointerType,t.forEachTool),r=E(o)?o.manipulator:null;if(O(r)||!r.interactive)break;const l=e.native.shiftKey;r.events.emit("double-click",{screenPoint:n,button:e.button,pointerType:e.pointerType,shiftKey:l,stopPropagation:s});break}case"immediate-double-click":{const n=it(e),o=this._intersect(n,e.pointerType,t.forEachTool),r=E(o)?o.manipulator:null;if(O(r)||!r.interactive)break;const l=e.native.shiftKey;r.events.emit("immediate-double-click",{screenPoint:n,button:e.button,pointerType:e.pointerType,shiftKey:l,stopPropagation:s});break}}this._onFocusChange(t.forEachTool)}_ungrabManipulatorBeforeDragging(e,t,s){e.grabbing=!1,e.events.emit("grab-changed",{action:"end",pointerType:t.pointerType,screenPoint:it(t)}),this._grabbedManipulators.forEach(({manipulator:n},o)=>{n===e&&this._grabbedManipulators.delete(o)}),this._afterManipulatorUngrab(s.setActiveTool)}_handlePointerEnd(e,t){const s=os(this._grabbedManipulators.get(e.pointerId),({manipulator:n})=>n);O(s)||s.grabbing&&(s.grabbing=!1,s.events.emit("grab-changed",{action:"end",pointerType:e.pointerType,screenPoint:it(e)}),this._grabbedManipulators.delete(e.pointerId),this._afterManipulatorUngrab(t.setActiveTool))}_cursorFromMap(e){let t=null;return _n(e,({manipulator:s})=>!(O(s)||!s.interactive)&&(s.grabbing&&s.grabCursor?(t=s.grabCursor,!0):!!s.cursor&&(t=s.cursor,!0))),t}_onFocusChange(e){this._updateCursor(),this._updateFocusedManipulatorTools(e)}_updateCursor(){this._grabbedManipulators.size>0?this._cursor=this._cursorFromMap(this._grabbedManipulators)||"grabbing":this._hoveredManipulators.size>0?this._cursor=this._cursorFromMap(this._hoveredManipulators)||"pointer":this._cursor=null}_updateFocusedManipulatorTools(e){const t=new Set,s=new Set;this._grabbedManipulators.forEach(({tool:n})=>{t.add(n)}),this._hoveredManipulators.forEach(({tool:n})=>{s.add(n)}),e(n=>{n.hasGrabbedManipulators=t.has(n),n.hasHoveredManipulators=s.has(n);const o=this._grabbedManipulators.values(),r=hd(o,({tool:l})=>l===n);n.firstGrabbedManipulator=E(r)?r.manipulator:null})}clearPointers(e,{forEachTool:t,setActiveTool:s},n=!0,o){const r=(l,d)=>l===e&&(O(o)||o===d);this._grabbedManipulators.forEach(({tool:l,manipulator:d,pointerType:u},h)=>{r(l,d)&&(this._grabbedManipulators.delete(h),d.grabbing=!1,d.events.emit("grab-changed",{action:"end",screenPoint:null,pointerType:u}))}),this._draggedManipulators.forEach(({tool:l,manipulator:d},u)=>{r(l,d)&&(this._draggedManipulators.delete(u),d.dragging=!1,d.events.emit("drag",{action:"cancel"}))}),n&&this._hoveredManipulators.forEach(({tool:l,manipulator:d},u)=>{r(l,d)&&(this._hoveredManipulators.delete(u),d.hovering=!1)}),this._afterManipulatorUngrab(s),this._onFocusChange(t)}_intersect(e,t,s){let n=null;return s(o=>{if(o.manipulators==null||!Ao(o))return!1;const r=o.manipulators.intersect(e,t);return!O(r)&&(n={tool:o,manipulator:r},!0)}),n}updateHoveredStateFromKnownPointers(e){this._pointerLocations.forEach((t,s)=>{this._updateHoveredStateForPointerAtScreenPosition(me(t.x,t.y),s,t.pointerType,e)})}handleHoverEvent(e,t){e.type!=="pointer-up"&&e.type!=="immediate-click"&&e.type!=="pointer-move"||!Pa(e.pointerType)||this._updateHoveredStateForPointerAtScreenPosition(it(e),e.pointerId,e.pointerType,t)}_updateHoveredStateForPointerAtScreenPosition(e,t,s,n){let o=this._intersect(e,s,n);const r=os(this._hoveredManipulators.get(t),({manipulator:l})=>l);E(o)&&!o.manipulator.interactive&&(o=null),E(o)&&r===o.manipulator||(E(r)&&(r.hovering=!1),E(o)?(o.manipulator.hovering=!0,this._hoveredManipulators.set(t,o)):this._hoveredManipulators.delete(t),this._onFocusChange(n))}_afterManipulatorUngrab(e){this._grabbedManipulators.size===0&&this._revertToNullActiveTool&&(e(null),this._revertToNullActiveTool=!1)}};function Pa(i){return i==="mouse"}function $a(i){return i.pointerType!=="mouse"||i.button===0}function Jm(i){return!!i.native.shiftKey}const Sa="attached",Jn="tools";let vt=class extends El{constructor(e){super(e),this._manipulatorState=new Qm,this.tools=new ee,this.cursor=null,this._forEachTool=t=>{for(const s of this.tools.items)if(t(s))return}}initialize(){this.handles.add([this.view.on(gc,e=>{this._handleInputEvent(e)},Qt.TOOL),...Ym(this.tools),this.tools.on("before-add",({item:e})=>{this._updateToolEditableFlag(e)}),this.tools.on("before-remove",({item:e})=>{this._manipulatorState.clearPointers(e,this._manipulatorStateEventArgs),this._updateCursor()}),this.tools.on("change",()=>{this._refreshToolWatchers()})])}destroy(){this.detach(),this.handles.removeAll()}get _manipulatorStateEventArgs(){return{forEachTool:this._forEachTool,activeTool:this.activeTool,setActiveTool:e=>{this.activeTool=e},view:this.view}}set activeTool(e){if(E(e)&&!this.view.ready)return void B.getLogger(this.declaredClass).error("Cannot set active tool while view is not ready.");if(e===this.activeTool)return;const t=this.activeTool;this._set("activeTool",e),E(t)&&t.deactivate(),E(e)&&e.activate(),this._removeIncompleteTools(e);for(const s of this.tools){this._updateToolEditableFlag(s);const n=Ao(s);!O(this.activeTool)&&n||this._manipulatorState.clearPointers(s,this._manipulatorStateEventArgs,!n)}this._updateCursor()}get updating(){var e;return this.updatingHandles.updating||this.tools.some(t=>t.updating)||(((e=this.textures)==null?void 0:e.updating)??!1)}attach(){this.view.type==="3d"?(this._set("textures",new us(this.view._stage,this.view.resourceController.scheduler)),this.handles.add([I(()=>{const{state:e}=this.view;return"camera"in e&&e.camera},()=>{this._forEachManipulator(e=>{e.onViewChange!=null&&e.onViewChange()})}),this.view.elevationProvider.on("elevation-change",e=>{this._forEachManipulator(t=>{t.onElevationChange!=null&&t.onElevationChange(e)})}),ul(()=>this._set("textures",Te(this.textures)))],Sa)):this.handles.add(I(()=>this.view.extent,()=>{this._forEachManipulator(e=>{e.onViewChange!=null&&e.onViewChange()})}))}detach(){E(this.activeTool)&&(this.activeTool=null),this.tools.removeAll(),this.handles.remove(Sa)}_forEachManipulator(e){this._forEachTool(t=>{t.manipulators&&t.manipulators.forEach(({manipulator:s})=>e(s,t))})}_handleInputEvent(e){let t=!1;const s={...e,stopPropagation:()=>{t=!0,e.stopPropagation()}};E(this.activeTool)?this.activeTool.handleInputEvent&&this.activeTool.handleInputEvent(s):this._forEachTool(n=>{!t&&n.visible&&n.handleInputEvent(s)}),!t&&e.type==="key-down"&&e.key==="Escape"&&this.activeTool&&(e.stopPropagation(),this.activeTool=null),this._manipulatorState.handleInputEvent(s,this._manipulatorStateEventArgs),!t&&E(this.activeTool)&&this.activeTool.handleInputEventAfter(s),this._manipulatorState.handleHoverEvent(s,this._forEachTool),this._updateCursor()}_refreshToolWatchers(){this.handles.remove(Jn),this._forEachTool(e=>{if(e instanceof z){const t=I(()=>[e.cursor,e.visible,e.editable],()=>{Ao(e)||this._manipulatorState.clearPointers(e,this._manipulatorStateEventArgs),this._updateCursor()});this.handles.add(t,Jn)}e.manipulators&&this.handles.add([e.manipulators.on("after-remove",t=>{this._manipulatorState.clearPointers(e,this._manipulatorStateEventArgs,!0,t.item.manipulator)}),e.manipulators.on("change",()=>{this._manipulatorState.updateHoveredStateFromKnownPointers(this._forEachTool),this._updateCursor()})],Jn)}),this._manipulatorState.updateHoveredStateFromKnownPointers(this._forEachTool),this._updateCursor()}_updateToolEditableFlag(e){e.setEditableFlag(Is.MANAGER,O(this.activeTool)||e===this.activeTool)}_updateCursor(){let e=this._manipulatorState.cursor;O(e)&&this._forEachTool(t=>!(!E(t.cursor)||!t.visible)&&(e=t.cursor,!0)),this._get("cursor")!==e&&this._set("cursor",e)}_removeIncompleteTools(e){this.tools.filter(t=>(O(e)||t!==e)&&!t.created&&t.removeIncompleteOnCancel).forEach(t=>{this.tools.remove(t)})}};a([c({constructOnly:!0,nonNullable:!0})],vt.prototype,"view",void 0),a([c({readOnly:!0,nonNullable:!0})],vt.prototype,"textures",void 0),a([c({value:null})],vt.prototype,"activeTool",null),a([c({readOnly:!0,type:ee})],vt.prototype,"tools",void 0),a([c({readOnly:!0})],vt.prototype,"cursor",void 0),a([c({readOnly:!0})],vt.prototype,"updating",null),vt=a([C("esri.views.ToolViewManager")],vt);const Xm=vt;let Si=class extends z{constructor(e){super(),this.nativeIndex=null,this._detectedDeviceType="unknown",e.mapping==="standard"?this._detectedDeviceType="standard":eg.test(e.id)?this._detectedDeviceType="spacemouse":this._detectedDeviceType="unknown",this.nativeIndex=e.index}get native(){const e=navigator.getGamepads?navigator.getGamepads():[];return this.nativeIndex!=null&&this.nativeIndex<e.length?e[this.nativeIndex]:null}get deviceType(){return this._detectedDeviceType}get axisThreshold(){return tg[this.deviceType]}};a([c({nonNullable:!0,readOnly:!0})],Si.prototype,"nativeIndex",void 0),a([c({type:String,readOnly:!0})],Si.prototype,"deviceType",null),a([c({type:Number,readOnly:!0})],Si.prototype,"axisThreshold",null),Si=a([C("esri.views.input.gamepad.GamepadInputDevice")],Si);const eg=new RegExp("^(3dconnexion|space(mouse|navigator|pilot|explorer))","i"),tg={standard:.15,spacemouse:.025,unknown:0},lr=Si;let hs=class extends z{constructor(...e){super(...e),this.devices=new ee,this.enabledFocusMode="document"}};a([c({type:ee.ofType(lr),readOnly:!0})],hs.prototype,"devices",void 0),a([c({type:["document","view","none"]})],hs.prototype,"enabledFocusMode",void 0),hs=a([C("esri.views.input.gamepad.GamepadSettings")],hs);const ig=hs;let Ks=class extends z{constructor(){super(...arguments),this.gamepad=new ig}};a([c({readOnly:!0})],Ks.prototype,"gamepad",void 0),Ks=a([C("esri.views.input.Input")],Ks);const sg=Ks;let Bt=class extends z{constructor(e){super(e),this.enabled=!0,this.device=null,this.mode="pan",this.tiltDirection="forward-down",this.velocityFactor=1}};a([c({type:Boolean,nonNullable:!0})],Bt.prototype,"enabled",void 0),a([c({type:lr})],Bt.prototype,"device",void 0),a([c({type:["pan","zoom"],nonNullable:!0})],Bt.prototype,"mode",void 0),a([c({type:["forward-down","forward-up"],nonNullable:!0})],Bt.prototype,"tiltDirection",void 0),a([c({type:Number,nonNullable:!0})],Bt.prototype,"velocityFactor",void 0),Bt=a([C("esri.views.navigation.gamepad.GamepadSettings")],Bt);const vc=Bt;let di=class extends z{constructor(e){super(e),this.browserTouchPanEnabled=!0,this.gamepad=new vc,this.momentumEnabled=!0,this.mouseWheelZoomEnabled=!0}};a([c({type:Boolean})],di.prototype,"browserTouchPanEnabled",void 0),a([c({type:vc,nonNullable:!0})],di.prototype,"gamepad",void 0),a([c({type:Boolean})],di.prototype,"momentumEnabled",void 0),a([c({type:Boolean})],di.prototype,"mouseWheelZoomEnabled",void 0),di=a([C("esri.views.navigation.Navigation")],di);const wc=di;var Ra;function ng(i){var s;const e=i.url?Vu(i.url):void 0;return!(((s=i.spatialReference)==null?void 0:s.vcsWkid)==null&&E(e)&&e.serverType==="ImageServer")&&bc(i)&&i.heightModelInfo?i.heightModelInfo:og(i)?Zo.deriveUnitFromSR(ag,i.spatialReference):null}function bc(i){return"heightModelInfo"in i}function Mc(i){if(i.type==="unknown"||!("capabilities"in i))return!1;switch(i.type){case"csv":case"feature":case"geojson":case"subtype-group":case"ogc-feature":case"oriented-imagery":case"wfs":return!0;default:return!1}}function og(i){return Mc(i)?!!(i.capabilities&&i.capabilities.data&&i.capabilities.data.supportsZ):Ic(i)}function rg(i){return i.layers!=null||Ic(i)||Mc(i)||bc(i)}function Ic(i){switch(i.type){case"building-scene":case"elevation":case"integrated-mesh":case"point-cloud":case"scene":case"voxel":return!0;case"base-dynamic":case"base-elevation":case"base-tile":case"bing-maps":case"csv":case"dimension":case"geojson":case"feature":case"subtype-group":case"geo-rss":case"graphics":case"group":case"imagery":case"imagery-tile":case"kml":case"line-of-sight":case"map-image":case"map-notes":case"media":case"ogc-feature":case"open-street-map":case"oriented-imagery":case"route":case"stream":case"tile":case"unknown":case"unsupported":case"vector-tile":case"wcs":case"web-tile":case"wfs":case"wms":case"wmts":case null:return!1}return!1}(function(i){i[i.Ok=0]="Ok",i[i.Units=1]="Units",i[i.HeightModel=2]="HeightModel",i[i.CRS=3]="CRS",i[i.Unsupported=4]="Unsupported"})(Ra||(Ra={}));const ag=new Zo({heightModel:"gravity-related-height"});let Po,Xn=null;async function lg(i){Xn||(Xn=T(()=>import("./geometryServiceUtils-31abe085.js"),["assets/geometryServiceUtils-31abe085.js","assets/Error-4ed679d7.js","assets/string-9c5e03f7.js","assets/typedArrayUtil-d02f10a8.js","assets/Portal-fbb2b73d.js","assets/preload-helper-101896b7.js","assets/cast-6d78d3c7.js","assets/ensureType-d98e08e1.js","assets/nextTick-3ee5a785.js","assets/promiseUtils-930cba29.js","assets/request-e4299080.js","assets/Loadable-b0d5bb7e.js","assets/Promise-6bd0b483.js","assets/Extent-d5fff12d.js","assets/locale-30120714.js","assets/PortalGroup-813428fa.js","assets/jsonMap-5afaf2ff.js","assets/PortalUser-cf18ae9d.js","assets/Basemap-5353f87f.js","assets/Collection-42fe629f.js","assets/Evented-b378ccab.js","assets/SimpleObservable-e0897cc6.js","assets/collectionUtils-3d8a9611.js","assets/deprecate-46fadabd.js","assets/loadAll-1ae88564.js","assets/asyncUtils-18831bb1.js","assets/PortalItem-69c4a143.js","assets/assets-6ba3cd63.js","assets/messages-634811b5.js","assets/writeUtils-44b0e78b.js","assets/layerUtils-6996b9ea.js","assets/Color-b7b9e6bb.js","assets/colorUtils-639f4d25.js","assets/mathUtils-daf59e84.js","assets/common-701a4199.js","assets/compilerUtils-eefea0ec.js","assets/enumeration-497ef064.js","assets/opacityUtils-8b7acc4e.js","assets/CollectionFlattener-b89887c0.js","assets/TablesMixin-402d03d2.js","assets/Layer-739799ab.js","assets/geometry-70b2a4a5.js","assets/Polyline-42dcc920.js","assets/typeUtils-b6c52390.js","assets/Identifiable-57df9761.js","assets/Graphic-e4fb7090.js","assets/PopupTemplate-d6e0b369.js","assets/Clonable-58355d3c.js","assets/fieldUtils-141b2ff2.js","assets/arcadeOnDemand-72c57f7a.js","assets/number-c7f1bfee.js","assets/symbols-64db5dd6.js","assets/CIMSymbol-a95ceb49.js","assets/Symbol-1bb07043.js","assets/screenUtils-7afeb41c.js","assets/aaBoundingBox-33fc923c.js","assets/persistableUrlUtils-d18becd9.js","assets/jsonUtils-5115c7e5.js","assets/Cyclical-1a93cb12.js","assets/reactiveUtils-b0e56010.js","assets/workers-7aef8bf1.js","assets/Connection-dd24ab83.js","assets/Queue-8aae62d3.js","assets/intl-a5c99ea3.js","assets/projection-6146477c.js","assets/unitUtils-b69647a1.js","assets/mat4-62d5e6a4.js","assets/zscale-72b4355d.js","assets/TileInfo-92f7dc61.js","assets/aaBoundingRect-ca34962d.js","assets/widget-4becb80f.js","assets/uuid-73213768.js","assets/HandleOwner-6ac6f00a.js","assets/byteSizeEstimations-90c5a50d.js","assets/executeQueryJSON-bf3dc024.js","assets/normalizeUtils-91a64c2b.js","assets/query-4348ce6f.js","assets/pbfQueryUtils-91f50fb5.js","assets/pbf-e4fd0249.js","assets/OptimizedFeature-1bba65b5.js","assets/OptimizedFeatureSet-1d1ac4b9.js","assets/queryZScale-1674984c.js","assets/FeatureSet-1cc04f9b.js","assets/Field-bb784640.js","assets/fieldType-9bddd3d4.js","assets/Query-066f2ccf.js","assets/TimeExtent-0fd238ea.js","assets/RelationshipQuery-b5b427dc.js","assets/LegendOptions-e31ff575.js","assets/utils-46b35833.js","assets/parser-f68dd732.js","assets/ItemCache-b4db8f82.js","assets/MemCache-1e028041.js","assets/jsonUtils-c5ba7295.js","assets/UniqueValueRenderer-cd716182.js","assets/diffUtils-713e5c9b.js","assets/colorRamps-c00f504b.js","assets/sizeVariableUtils-d4870b0d.js","assets/lengthUtils-0dde2114.js","assets/jsonUtils-b1b224a3.js","assets/styleUtils-0c73f570.js","assets/DictionaryLoader-29adda53.js","assets/LRUCache-4d56ba4d.js","assets/heatmapUtils-90a13d85.js","assets/vec4f64-018b3fa6.js","assets/featureConversionUtils-d9ec654e.js","assets/TopFeaturesQuery-7da1d7c1.js","assets/FeatureLayer-1a0dd9ce.js","assets/MultiOriginJSONSupport-1970ed0f.js","assets/LayerFloorInfo-0d02c503.js","assets/FeatureLayerBase-d34c9a8c.js","assets/HeightModelInfo-645087b5.js","assets/arcgisLayerUrl-02fe1a62.js","assets/OperationalLayer-54654858.js","assets/ElevationInfo-28459ff1.js","assets/editsZScale-e318eb4a.js","assets/APIKeyMixin-f90cfebd.js","assets/ArcGISService-f6f32fbc.js","assets/BlendLayer-7a735871.js","assets/CustomParametersMixin-5e3018da.js","assets/EditBusLayer-1372e92b.js","assets/FeatureReductionLayer-0deeb262.js","assets/labelingInfo-681dda19.js","assets/labelUtils-87bb22ff.js","assets/defaultsJSON-b087dd4d.js","assets/OrderedLayer-7b3473c8.js","assets/PortalLayer-644d657e.js","assets/RefreshableLayer-84ec1468.js","assets/ScaleRangeLayer-c6a35aba.js","assets/TemporalLayer-d41a81db.js","assets/TimeInfo-a1791ae0.js","assets/FeatureTemplate-773a8865.js","assets/FeatureType-6c50f4e3.js","assets/fieldProperties-c2bdcd57.js","assets/FieldsIndex-c06d221a.js","assets/versionUtils-5ccafbea.js","assets/styleUtils-45e2d86c.js","assets/popupUtils-ea7b7951.js","assets/mat2d-80bd93af.js","assets/Scheduler-343fdba6.js","assets/GraphicsLayer-caff0dcf.js","assets/ViewingMode-fb6259a5.js","assets/unitBezier-881ac1eb.js","assets/vec2-f978aef8.js","assets/vec2f64-e0301652.js","assets/mat3-45e3f2eb.js","assets/mat3f32-d3d088e8.js","assets/vec2f32-461e65a9.js","assets/TileStrategy-40f1ecb0.js","assets/TileStore-a368d16c.js","assets/TileKey-ed432ae5.js","assets/rbush-8e36784a.js","assets/quickselect-322ec8e1.js","assets/capabilities-5736b16f.js","assets/context-util-abf86a85.js","assets/datetime-7cb5ae9e.js"]).then(e=>Po=e)),await Xn,Yt(i)}async function Cc(i,e,t,s){if(!i)return null;const n=i.spatialReference;return ws()||vn(n,e)?Es(i,e):Po?Po.projectGeometry(i,e,t,s):(await Promise.race([lg(s),wn(s)]),Cc(i,e,t,s))}let j=class extends z{constructor(e){super(e),this.required={tileInfo:!1,heightModelInfo:!1,extent:!1},this.defaultSpatialReference=null,this.userSpatialReference=null,this.sourcePreloadCount=10,this.priorityCollection=null,this.requiresExtentInSpatialReference=!0,this.suspended=!1,this._projectExtentTask={task:null,input:null,output:null,spatialReference:null}}destroy(){this._projectExtentTask.task&&(this._projectExtentTask.task=uo(this._projectExtentTask.task)),this._set("map",null)}get ready(){return!this._spatialReferenceTask.updating&&!this._tileInfoTask.updating&&!this._extentTask.updating}get heightModelInfoReady(){return!this._heightModelInfoTask.updating}get spatialReference(){return E(this.userSpatialReference)?this.userSpatialReference:Ve(this._spatialReferenceTask.spatialReference)}get extent(){return Ve(this._extentTask.extent)}get heightModelInfo(){return Ve(this._heightModelInfoTask.heightModelInfo)}get vcsWkid(){return Ve(this._heightModelInfoTask.vcsWkid)}get latestVcsWkid(){return Ve(this._heightModelInfoTask.latestVcsWkid)}get viewingMode(){return O(this.userSpatialReference)||this.userSpatialReference.equals(Ve(this._spatialReferenceTask.spatialReference))?Ve(this._spatialReferenceTask.viewingMode):null}get tileInfo(){return Ve(this._tileInfoTask.tileInfo)}get mapCollections(){var s,n,o,r;const e=(s=this.map)==null?void 0:s.call(this),t=[];return E(this.priorityCollection)&&t.push(this.priorityCollection),t.push({parent:e==null?void 0:e.basemap,layers:(n=e==null?void 0:e.basemap)==null?void 0:n.baseLayers},{layers:e==null?void 0:e.layers},{parent:e==null?void 0:e.ground,layers:(o=e==null?void 0:e.ground)==null?void 0:o.layers},{parent:e==null?void 0:e.basemap,layers:(r=e==null?void 0:e.basemap)==null?void 0:r.referenceLayers}),t}get _allLayers(){return this._collectLayers(this.mapCollections)}get _spatialReferenceTask(){if(this.suspended)return this._get("_spatialReferenceTask")??{updating:!1};const{layers:e,updating:t}=this._allLayers;let s=null;for(const o of e){const r=this._getSupportedSpatialReferences(o);if(r.length>0){const l=this._narrowDownSpatialReferenceCandidates(s,r);E(l)&&(s=l)}if(E(s)&&s.length===1)break}if(t&&(O(s)||s.length!==1))return{updating:!0};const n=this._pickSpatialReferenceCandidate(s);return{spatialReference:E(n)?n.spatialReference:null,viewingMode:E(n)?n.viewingMode:null,updating:!1}}get _tileInfoTask(){var s,n,o,r,l,d,u;if(!this.required.tileInfo)return this._get("_tileInfoTask")??{updating:!1};if(!this.spatialReference)return{updating:this._spatialReferenceTask.updating};const{layers:e,updating:t}=this._collectLayers([{parent:(n=(s=this.map)==null?void 0:s.call(this))==null?void 0:n.basemap,layers:(l=(r=(o=this.map)==null?void 0:o.call(this))==null?void 0:r.basemap)==null?void 0:l.baseLayers},{layers:(u=(d=this.map)==null?void 0:d.call(this))==null?void 0:u.layers}]);if(e&&e.length>0&&"tileInfo"in e[0]){const h=e[0].tileInfo;return{tileInfo:h&&h.spatialReference.equals(this.spatialReference)?h:null,updating:!1}}return{updating:t}}get _heightModelInfoTask(){var s,n,o;if(!this.required.heightModelInfo||this.suspended&&((s=this._get("_heightModelInfoTask"))!=null&&s.heightModelInfo))return this._get("_heightModelInfoTask")??{updating:!1};const{layers:e,updating:t}=this._allLayers;for(const r of e)if(rg(r)){const l=ng(r);if(l)return{heightModelInfo:l,vcsWkid:(n=r.spatialReference)==null?void 0:n.vcsWkid,latestVcsWkid:(o=r.spatialReference)==null?void 0:o.latestVcsWkid,updating:!1}}return{updating:t}}get _extentCandidatesTask(){if(this.suspended||!this.required.extent)return this._get("_extentCandidatesTask")??{updating:!1};if(!this.spatialReference)return{updating:this._spatialReferenceTask.updating};const e=this._allLayers,t=e.updating,s=[];for(const n of e.layers){const o="fullExtents"in n&&n.fullExtents||(E(n.fullExtent)?[n.fullExtent]:[]),r=this.requiresExtentInSpatialReference?null:o[0],l=o.find(d=>d.spatialReference.equals(this.spatialReference))??r;if(l)return{candidates:[{extent:l,layer:n}],updating:!1};if(this._getSupportedSpatialReferences(n).length>0)for(const d of o)s.push({extent:d,layer:n})}return{candidates:s,updating:t}}get _extentTask(){const{candidates:e,updating:t}=this._extentCandidatesTask;if(t)return{updating:t};if(O(e)||e.length===0)return{updating:!1};if(!this.spatialReference)return{updating:this._spatialReferenceTask.updating};const s=this._pickExtentCandidate(e),n=this.spatialReference;return s.extent.equals(this._projectExtentTask.input)&&n.equals(this._projectExtentTask.spatialReference)?{extent:this._projectExtentTask.output,updating:E(this._projectExtentTask.task)&&!this._projectExtentTask.task.finished}:(E(this._projectExtentTask.task)&&(this._projectExtentTask.task=uo(this._projectExtentTask.task)),this._projectExtentTask={input:s.extent.clone(),output:null,spatialReference:n.clone(),task:Dl(async o=>{try{const r=await Cc(s.extent,n,s.layer.portalItem,o);this._projectExtentTask={...this._projectExtentTask,task:null,output:r}}catch{if(vd(o))return;this._projectExtentTask={...this._projectExtentTask,task:null}}})},{updating:!0})}_narrowDownSpatialReferenceCandidates(e,t){if(O(e))return t;const s=[],n=(o,r)=>E(o)?E(r)?o===r&&o:o:r;for(const o of e)for(const r of t){if(!o.spatialReference.equals(r.spatialReference))continue;const l=n(o.viewingMode,r.viewingMode);if(l!==!1){s.push({spatialReference:o.spatialReference,viewingMode:l});break}}return s.length>0?s:null}_pickSpatialReferenceCandidate(e){const t=this.defaultSpatialReference;return O(e)||e.length<1?E(t)?{spatialReference:t,viewingMode:null}:null:(E(t)&&e.length>1&&e.some(({spatialReference:s})=>s.equals(t))&&(e=e.filter(({spatialReference:s})=>s.equals(t))),e.length>1&&e.some(({viewingMode:s})=>s!==$r.Local)&&(e=e.filter(({viewingMode:s})=>s!==$r.Local)),e[0])}_getSupportedSpatialReferences(e){const t="supportedSpatialReferences"in e&&e.supportedSpatialReferences||(e.spatialReference?[e.spatialReference]:[]);if(t.length===0)return[];const s=[];for(const n of t){const o=this.getSpatialReferenceSupport({spatialReference:n,layer:e});if(E(o)){const r=E(o.constraints)?o.constraints:[{spatialReference:n,viewingMode:null}];for(const{spatialReference:l,viewingMode:d}of r)(!this.requiresExtentInSpatialReference||O(this.userSpatialReference)||l.equals(this.userSpatialReference))&&s.push({spatialReference:l,viewingMode:d})}}return s}_pickExtentCandidate(e){const t=this.spatialReference;return e.find(({extent:s})=>t.equals(s.spatialReference))||e[0]}_collectLayers(e){var s;if(this._loadMaybe((s=this.map)==null?void 0:s.call(this))!=="loaded")return{layers:[],updating:!0};const t={layers:[],preloading:-1,updating:!1};for(const n of e)if(this._collectCollection(n,t),t.preloading===this.sourcePreloadCount)break;return{layers:t.layers,updating:t.updating}}_collectCollection(e,t){if(e.layers){switch(this._loadMaybe(e.parent)){case"loading":return t.updating=!0,void++t.preloading;case"failed":return}for(const s of e.layers){switch(this._loadMaybe(s)){case"failed":continue;case"loading":t.updating=!0,++t.preloading;break;case"loaded":t.updating||t.layers.push(s),"layers"in s&&this._collectCollection({layers:s.layers},t)}if(t.preloading===this.sourcePreloadCount)break}}}_loadMaybe(e){return e&&"loadStatus"in e?e.loadStatus==="not-loaded"?(e.load().catch(()=>{}),"loading"):e.loadStatus:"loaded"}};a([c()],j.prototype,"required",void 0),a([c({constructOnly:!0})],j.prototype,"map",void 0),a([c({constructOnly:!0})],j.prototype,"getSpatialReferenceSupport",void 0),a([c()],j.prototype,"defaultSpatialReference",void 0),a([c()],j.prototype,"userSpatialReference",void 0),a([c()],j.prototype,"sourcePreloadCount",void 0),a([c()],j.prototype,"priorityCollection",void 0),a([c()],j.prototype,"requiresExtentInSpatialReference",void 0),a([c()],j.prototype,"suspended",void 0),a([c({readOnly:!0})],j.prototype,"ready",null),a([c({readOnly:!0})],j.prototype,"heightModelInfoReady",null),a([c({readOnly:!0})],j.prototype,"spatialReference",null),a([c({readOnly:!0})],j.prototype,"extent",null),a([c({readOnly:!0})],j.prototype,"heightModelInfo",null),a([c({readOnly:!0})],j.prototype,"vcsWkid",null),a([c({readOnly:!0})],j.prototype,"latestVcsWkid",null),a([c({readOnly:!0})],j.prototype,"viewingMode",null),a([c({readOnly:!0})],j.prototype,"tileInfo",null),a([c({readOnly:!0})],j.prototype,"mapCollections",null),a([c({readOnly:!0})],j.prototype,"_allLayers",null),a([c({readOnly:!0})],j.prototype,"_spatialReferenceTask",null),a([c({readOnly:!0})],j.prototype,"_tileInfoTask",null),a([c({readOnly:!0})],j.prototype,"_heightModelInfoTask",null),a([c({readOnly:!0})],j.prototype,"_extentCandidatesTask",null),a([c()],j.prototype,"_extentTask",null),a([c()],j.prototype,"_projectExtentTask",void 0),j=a([C("esri.views.support.DefaultsFromMap")],j);var Ys;let R=Ys=class extends bn(Wi.EventedMixin(Lu(z))){constructor(i){super(i),this._userSpatialReference=null,this._cursor=null,this.allLayerViews=new nn({getCollections:()=>{var e,t,s;return[(e=this.basemapView)==null?void 0:e.baseLayerViews,(t=this.groundView)==null?void 0:t.layerViews,this.layerViews,(s=this.basemapView)==null?void 0:s.referenceLayerViews]},getChildrenFunction:e=>e.layerViews}),this.groundView=null,this.basemapView=null,this.fatalError=null,this.graphics=new Vl,this.analyses=new gn,this.typeSpecificPreconditionsReady=!0,this.layerViews=new ee,this.magnifier=new mc,this.padding={left:0,top:0,right:0,bottom:0},this.ready=!1,this.spatialReferenceWarningDelay=1e3,this.supportsGround=!0,this.timeExtent=null,this.type=null,this.scale=null,this.updating=!1,this.initialExtentRequired=!0,this.input=new sg,this.navigation=new wc,this.layerViewManager=null,this.analysisViewManager=null,this.isHeightModelInfoRequired=!1,this.width=null,this.height=null,this.resizing=!1,this.suspended=!1,this.viewEvents=new Zm(this),this.persistableViewModels=new ee,this._isValid=!1,this._readyCycleForced=!1,this.handles.add(I(()=>this.preconditionsReady,e=>{var t,s;e?(this._currentSpatialReference=this.spatialReference,Ys.views.add(this)):(this._currentSpatialReference=null,Ys.views.remove(this)),this.notifyChange("spatialReference"),!e&&this.ready?((t=this.toolViewManager)==null||t.detach(),E(this.analysisViewManager)&&this.analysisViewManager.detach(),(s=this.layerViewManager)==null||s.clear(),this._teardown()):e&&!this.ready&&(this._startup(),E(this.analysisViewManager)&&this.analysisViewManager.attach(),this.toolViewManager.attach())},vs))}initialize(){this.addResolvingPromise(this.validate().then(()=>(this._isValid=!0,Ho(()=>this.ready)))),this.basemapView=new zt({view:this}),this.layerViewManager=new jm({view:this,layerViewImporter:{importLayerView:i=>this.importLayerView(i),hasLayerViewModule:i=>this.hasLayerViewModule(i)},supportsGround:this.supportsGround}),this.toolViewManager=new Xm({view:this}),this._setupSpatialReferenceLogger(),this.handles.add([I(()=>this.initialExtentRequired,i=>this.defaultsFromMap.required={...this.defaultsFromMap.required,extent:i},{sync:!0,initial:!0}),I(()=>this.ready,i=>{this.defaultsFromMap&&(this.defaultsFromMap.suspended=i,this.defaultsFromMap.userSpatialReference=i?this.spatialReference:this._userSpatialReference)},{sync:!0}),I(()=>this._userSpatialReference,i=>{this.defaultsFromMap&&(this.defaultsFromMap.userSpatialReference=i)},{sync:!0,initial:!0})])}_setupSpatialReferenceLogger(){let i=null;this.handles.add([I(()=>{var e;return(e=this.defaultsFromMap)==null?void 0:e.ready},e=>{var s;const t=((s=this.map)==null?void 0:s.allLayers.length)>0;if(e&&!this.spatialReference&&t){if(E(i))return;const n=ul(()=>i=uo(i));i=Dl(async o=>{try{await Bo(this.spatialReferenceWarningDelay,null,o)}catch{return}finally{i=null}B.getLogger(this.declaredClass).warn("#spatialReference","no spatial reference could be derived from the currently added map layers")}),this.handles.add(n,"spatial-reference-logger-task")}else this.handles.remove("spatial-reference-logger-task")},{sync:!0})])}destroy(){if(this.destroyed)return;this.viewEvents.destroy(),this.allLayerViews.destroy(),this.navigation&&(this.navigation.destroy(),this._set("navigation",null)),this.graphics=Te(this.graphics),this.analyses=Te(this.analyses),this.handles.remove("defaultsFromMap"),this.defaultsFromMap.destroy(),this._set("defaultsFromMap",null),Te(this.analysisViewManager),this.toolViewManager=Te(this.toolViewManager),this.layerViewManager=Te(this.layerViewManager),this.basemapView=Te(this.basemapView),this.invalidate(),this._emitter.clear(),this.handles.removeAll();const i=this.map;this.map=null,i==null||i.destroy()}_startup(){this._set("ready",!0)}_teardown(){this._set("ready",!1)}whenReady(){return Promise.resolve(this)}toMap(){return B.getLogger(this.declaredClass).error("#toMap()","Not implemented on this instance of View"),null}get activeTool(){var i;return(i=this.toolViewManager)==null?void 0:i.activeTool}set activeTool(i){this.toolViewManager&&(this.toolViewManager.activeTool=i)}get animation(){return this._get("animation")}set animation(i){this._set("animation",i)}get _defaultsFromMapSettings(){return{}}get defaultsFromMap(){return new j({required:{tileInfo:!1,heightModelInfo:!1,extent:!1},map:()=>this.map,getSpatialReferenceSupport:i=>this.getSpatialReferenceSupport(i),...this._defaultsFromMapSettings})}get extent(){return this._get("extent")}set extent(i){this._set("extent",i)}get heightModelInfo(){return this.getDefaultHeightModelInfo()}get interacting(){return this.navigating}get navigating(){return!1}get preconditionsReady(){var i;return!(this.fatalError||!this._isValid||this._readyCycleForced||!this.map||co.isLoadable(this.map)&&!this.map.loaded||this.width===0||this.height===0||!this.spatialReference||!this._validateSpatialReference(this.spatialReference)||!this._currentSpatialReference&&!((i=this.defaultsFromMap)!=null&&i.ready)||!this.typeSpecificPreconditionsReady)}set map(i){i!==this._get("map")&&(i!=null&&i.destroyed&&(B.getLogger(this.declaredClass).warn("#map","The provided map is already destroyed",{map:i}),i=null),co.isLoadable(i)&&i.load().catch(()=>{}),this.constructed&&(this.forceReadyCycle(),this._currentSpatialReference=null),this._set("map",i))}get spatialReference(){var e,t;let i=this._userSpatialReference||this._currentSpatialReference||this.getDefaultSpatialReference()||null;return i&&((t=(e=this.defaultsFromMap)==null?void 0:e.required)!=null&&t.heightModelInfo)&&(i=i.clone(),i.vcsWkid=this.defaultsFromMap.vcsWkid,i.latestVcsWkid=this.defaultsFromMap.latestVcsWkid),i}set spatialReference(i){const e=!yn(i,this._get("spatialReference"));this._set("_userSpatialReference",i),e&&(this._set("spatialReference",i),this._spatialReferenceChanged(i))}_spatialReferenceChanged(i){}get stationary(){return!this.animation&&!this.navigating&&!this.resizing}get tools(){var i;return(i=this.toolViewManager)==null?void 0:i.tools}get initialExtent(){var i;return(i=this.defaultsFromMap)==null?void 0:i.extent}get cursor(){const i=this.toolViewManager?this.toolViewManager.cursor:null;return E(i)?i:this._cursor||"default"}set cursor(i){this._cursor=i,this.notifyChange("cursor")}get size(){return[this.width,this.height]}whenLayerView(i){return this.layerViewManager.whenLayerView(i)}getDefaultSpatialReference(){var i;return(i=this.defaultsFromMap)==null?void 0:i.spatialReference}getDefaultHeightModelInfo(){var i;return(this.map&&"heightModelInfo"in this.map?this.map.heightModelInfo:void 0)??((i=this.defaultsFromMap)==null?void 0:i.heightModelInfo)??null}importLayerView(i){throw new $("importLayerView() not implemented")}hasLayerViewModule(i){return!1}async validate(){}invalidate(){this._isValid=!1}getSpatialReferenceSupport(){return{constraints:null}}_validateSpatialReference(i){return E(this.getSpatialReferenceSupport({spatialReference:i}))}when(i,e){return this.isResolved()&&!this.ready&&B.getLogger(this.declaredClass).warn("#when()","Calling view.when() while the view is no longer ready but was already resolved once will resolve immediately. Use reactiveUtils.whenOnce(() => view.ready).then(...) instead."),super.when(i,e)}forceReadyCycle(){this.ready&&(At(()=>this.preconditionsReady===!1,()=>this._readyCycleForced=!1,{once:!0}),this._readyCycleForced=!0)}addAndActivateTool(i){this.toolViewManager.tools.add(i),this.activeTool=i}tryFatalErrorRecovery(){this.fatalError=null}};R.views=new ee,a([c()],R.prototype,"_userSpatialReference",void 0),a([c()],R.prototype,"activeTool",null),a([c({readOnly:!0})],R.prototype,"allLayerViews",void 0),a([c()],R.prototype,"groundView",void 0),a([c()],R.prototype,"animation",null),a([c()],R.prototype,"basemapView",void 0),a([c({readOnly:!0})],R.prototype,"_defaultsFromMapSettings",null),a([c()],R.prototype,"defaultsFromMap",null),a([c()],R.prototype,"fatalError",void 0),a([c({type:ji})],R.prototype,"extent",null),a([c(Pr(Vl,"graphics"))],R.prototype,"graphics",void 0),a([c(Pr(gn,"analyses"))],R.prototype,"analyses",void 0),a([c({readOnly:!0,type:Zo})],R.prototype,"heightModelInfo",null),a([c({readOnly:!0})],R.prototype,"interacting",null),a([c({readOnly:!0})],R.prototype,"navigating",null),a([c({readOnly:!0,dependsOn:["fatalError","_isValid","_readyCycleForced","map","map.loaded?","width","height","spatialReference","_currentSpatialReference","defaultsFromMap.ready","typeSpecificPreconditionsReady"]})],R.prototype,"preconditionsReady",null),a([c({readOnly:!0})],R.prototype,"typeSpecificPreconditionsReady",void 0),a([c({type:ee,readOnly:!0})],R.prototype,"layerViews",void 0),a([c({type:mc})],R.prototype,"magnifier",void 0),a([c({value:null,type:Gl})],R.prototype,"map",null),a([c()],R.prototype,"padding",void 0),a([c({readOnly:!0})],R.prototype,"ready",void 0),a([c({type:Cs})],R.prototype,"spatialReference",null),a([c()],R.prototype,"spatialReferenceWarningDelay",void 0),a([c()],R.prototype,"stationary",null),a([c({readOnly:!0})],R.prototype,"supportsGround",void 0),a([c({type:Su})],R.prototype,"timeExtent",void 0),a([c()],R.prototype,"tools",null),a([c()],R.prototype,"toolViewManager",void 0),a([c({readOnly:!0})],R.prototype,"type",void 0),a([c({type:Number})],R.prototype,"scale",void 0),a([c({readOnly:!0})],R.prototype,"updating",void 0),a([c({readOnly:!0})],R.prototype,"initialExtentRequired",void 0),a([c({readOnly:!0})],R.prototype,"initialExtent",null),a([c()],R.prototype,"cursor",null),a([c({readOnly:!0})],R.prototype,"input",void 0),a([c({type:wc,nonNullable:!0})],R.prototype,"navigation",void 0),a([c()],R.prototype,"layerViewManager",void 0),a([c()],R.prototype,"analysisViewManager",void 0),a([c()],R.prototype,"width",void 0),a([c()],R.prototype,"height",void 0),a([c({readOnly:!0})],R.prototype,"resizing",void 0),a([c({value:null,readOnly:!0})],R.prototype,"size",null),a([c({readOnly:!0})],R.prototype,"suspended",void 0),a([c({readOnly:!0})],R.prototype,"viewEvents",void 0),a([c({readOnly:!0})],R.prototype,"persistableViewModels",void 0),a([c()],R.prototype,"_isValid",void 0),a([c()],R.prototype,"_readyCycleForced",void 0),a([c()],R.prototype,"_currentSpatialReference",void 0),R=Ys=a([C("esri.views.View")],R);const cg=R;let Ut=class extends Fu{constructor(e){super(e),this.state="running",this.target=null,this._dfd=null}initialize(){this.addResolvingPromise(new Promise((e,t)=>this._dfd={resolve:e,reject:t}))}get done(){return this.state==="finished"||this.state==="stopped"}stop(){var e;this.state!=="stopped"&&this.state!=="finished"&&(this._set("state","stopped"),(e=this._dfd)==null||e.reject(new $("ViewAnimation stopped")))}finish(){var e;this.state!=="stopped"&&this.state!=="finished"&&(this._set("state","finished"),(e=this._dfd)==null||e.resolve())}update(e,t){t||(t=wd(e)?"waiting-for-target":"running"),this._set("target",e),this._set("state",t)}};a([c({readOnly:!0})],Ut.prototype,"done",null),a([c({readOnly:!0,type:String})],Ut.prototype,"state",void 0),a([c()],Ut.prototype,"target",void 0),Ut=a([C("esri.views.ViewAnimation")],Ut),function(i){i.State={RUNNING:"running",STOPPED:"stopped",FINISHED:"finished",WAITING_FOR_TARGET:"waiting-for-target"}}(Ut||(Ut={}));const $o=Ut;function Jt(){return[1,0,0,1,0,0]}function dg(i){return[i[0],i[1],i[2],i[3],i[4],i[5]]}function ug(i,e,t,s,n,o){return[i,e,t,s,n,o]}function hg(i,e){return new Float64Array(i,e,6)}Object.freeze(Object.defineProperty({__proto__:null,create:Jt,clone:dg,fromValues:ug,createView:hg},Symbol.toStringTag,{value:"Module"}));const Ec=96,Tc=39.37,pg=180/Math.PI;function xc(i){return i.wkid?i:i.spatialReference||Cs.WGS84}function cr(i,e){return e.type?ye(i,e.x,e.y):ln(i,e)}function kc(i){return Yd(i)}function ys(i,e){const t=Math.max(1,e[0]),s=Math.max(1,e[1]);return Math.max(i.width/t,i.height/s)*Mg(i.spatialReference)}async function ps(i,e,t,s){let n,o;if(!i||Array.isArray(i)&&!i.length)return null;if(ee.isCollection(i)&&(i=i.toArray()),Array.isArray(i)&&i.length&&typeof i[0]=="object"){const l=i.every(h=>"attributes"in h),d=i.some(h=>!h.geometry);let u=i;if(l&&d&&e&&e.allLayerViews){const h=new Map;for(const _ of i){const y=_.layer,v=h.get(y)||[],w=_.attributes[y.objectIdField];w!=null&&v.push(w),h.set(y,v)}const p=[];h.forEach((_,y)=>{const v=e.allLayerViews.find(w=>w.layer.id===y.id);if("queryFeatures"in v){const w=y.createQuery();w.objectIds=_,w.returnGeometry=!0,p.push(v.queryFeatures(w))}});const g=await Promise.all(p),f=[];for(const _ of g)if(_&&_.features&&_.features.length)for(const y of _.features)E(y.geometry)&&f.push(y.geometry);u=f}for(const h of u)s=await ps(h,e,t,s);return s}if(Array.isArray(i)&&i.length===2&&typeof i[0]=="number"&&typeof i[1]=="number")n=new X(i);else if(i instanceof Id)n=i;else if("geometry"in i){if(i.geometry)n=i.geometry;else if(i.layer){const l=i.layer,d=e.allLayerViews.find(u=>u.layer.id===l.id);if("queryFeatures"in d){const u=l.createQuery();u.objectIds=[i.attributes[l.objectIdField]],u.returnGeometry=!0;const h=await d.queryFeatures(u);n=Pd(h,"features",0,"geometry")}}}if(O(n)||(o=n.type==="point"?new ji({xmin:n.x,ymin:n.y,xmax:n.x,ymax:n.y,spatialReference:n.spatialReference}):n.extent,!o))return null;ws()||vn(o.spatialReference,t)||await wn();const r=Es(o,t);return r?s=s?s.union(r):r:null}function mg(i){if(i&&(!Array.isArray(i)||typeof i[0]!="number")&&(typeof i=="object"||Array.isArray(i)&&typeof i[0]=="object")){if("layer"in i&&i.layer&&i.layer.minScale&&i.layer.maxScale){const e=i.layer;return{min:e.minScale,max:e.maxScale}}if(Array.isArray(i)&&i.length&&i.every(e=>"layer"in e)){let e=0,t=0;for(const s of i){const n=s.layer;n&&n.minScale&&n.maxScale&&(e=n.minScale<e?n.minScale:e,t=n.maxScale>t?n.maxScale:t)}return e&&t?{min:e,max:t}:null}}}function eo(i,e){return yn(xc(i),e)?i:Es(i,e)}async function gg(i,e){if(!i||!e)return new Ze({targetGeometry:new X,scale:0,rotation:0});let t=e.spatialReference;const{constraints:s,padding:n,viewpoint:o,size:r}=e,l=[n?r[0]-n.left-n.right:r[0],n?r[1]-n.top-n.bottom:r[1]];let d=null;i instanceof Ze?d=i:i.viewpoint?d=i.viewpoint:i.target&&i.target.declaredClass==="esri.Viewpoint"&&(d=i.target);let u=null;d&&d.targetGeometry?u=d.targetGeometry:i instanceof ji?u=i:(i||i&&("center"in i||"extent"in i||"target"in i))&&(u=await ps(i.center,e,t)||await ps(i.extent,e,t)||await ps(i.target,e,t)||await ps(i,e,t)),!u&&o&&o.targetGeometry?u=o.targetGeometry:!u&&e.extent&&(u=e.extent),t||(t=xc(e.spatialReference||e.extent||u)),ws()||yn(u.spatialReference,t)||vn(u,t)||await wn();const h=eo(u.center?u.center:u,t);let p=null;if(d&&E(d.targetGeometry)&&d.targetGeometry.type==="point")p=d.scale;else if("scale"in i&&i.scale)p=i.scale;else if("zoom"in i&&i.zoom!==-1&&s&&s.effectiveLODs)p=s.zoomToScale(i.zoom);else if(Array.isArray(u)||u.type==="point"||u.type==="extent"&&u.width===0&&u.height===0){const y=eo(e.extent,t);p=E(y)?ys(y,l):e.extent?ys(e.extent,l):o.scale}else p=ys(eo(u.extent,t),l);const g=mg(i);g&&(g.min&&g.min>p?p=g.min:g.max&&g.max<p&&(p=g.max));let f=0;d?f=d.rotation:i.hasOwnProperty("rotation")?f=i.rotation:o&&(f=o.rotation);let _=new Ze({targetGeometry:h,scale:p,rotation:f});return s&&(_=s.fit(_),s.constrainByGeometry(_),s.rotationEnabled||(_.rotation=f)),_}function Qe(i,e){const t=i.targetGeometry,s=e.targetGeometry;return t.x=s.x,t.y=s.y,t.spatialReference=s.spatialReference,i.scale=e.scale,i.rotation=e.rotation,i}function fg(i,e,t){return t?ye(i,.5*(e[0]-t.right+t.left),.5*(e[1]-t.bottom+t.top)):Mn(i,e,.5)}const _g=function(){const i=ce();return function(e,t,s){const n=t.targetGeometry;cr(i,n);const o=.5*Ki(t);return e.xmin=i[0]-o*s[0],e.ymin=i[1]-o*s[1],e.xmax=i[0]+o*s[0],e.ymax=i[1]+o*s[1],e.spatialReference=n.spatialReference,e}}();function yg(i,e,t,s,n){return So(i,e,t.center),i.scale=ys(t,s),n&&n.constraints&&n.constraints.constrain(i),i}function vg(i,e,t,s){return hr(i,e,t,s),Ol(i,i)}const Ac=function(){const i=ce();return function(e,t,s){return zl(e,Ig(e,t),fg(i,t,s))}}(),wg=function(){const i=Jt(),e=ce();return function(t,s,n,o){const r=Ki(s),l=dr(s);return ye(e,r,r),xu(i,e),Wo(i,i,l),an(i,i,Ac(e,n,o)),an(i,i,[0,o.top-o.bottom]),ye(t,i[4],i[5])}}();function Ki(i){return i.scale*bg(i.targetGeometry)}function bg(i){return E(i)&&gl(i.spatialReference)?1/(kc(i.spatialReference)*Tc*Ec):1}function dr(i){return Nl(i.rotation)||0}function Mg(i){return gl(i)?kc(i)*Tc*Ec:1}function Ig(i,e){return Mn(i,e,.5)}const ur=function(){const i=ce(),e=ce(),t=ce();return function(s,n,o,r,l,d){return Uu(i,n),Mn(e,o,.5*d),ye(t,1/r*d,-1/r*d),Fl(s,e),l&&Wo(s,s,l),Ll(s,s,t),an(s,s,i),s}}(),hr=function(){const i=ce();return function(e,t,s,n){const o=Ki(t),r=dr(t);return cr(i,t.targetGeometry),ur(e,i,s,o,r,n)}}(),Cg=function(){const i=ce();return function(e,t,s,n){const o=Ki(t);return cr(i,t.targetGeometry),ur(e,i,s,o,0,n)}}();function Eg(i){const e=fl(i);return e?e.valid[1]-e.valid[0]:0}function Tg(i,e){return Math.round(Eg(i)/e)}const xg=function(){const i=ce(),e=ce(),t=[0,0,0];return function(s,n,o){go(i,s,n),Sr(i,i),go(e,s,o),Sr(e,e),zu(t,i,e);let r=Math.acos(Bu(i,e)/(Rr(i)*Rr(e)))*pg;return t[2]<0&&(r=-r),isNaN(r)&&(r=0),r}}(),kg=function(){const i=ce();return function(e,t,s,n){const o=e.targetGeometry;return Qe(e,t),wg(i,t,s,n),o.x+=i[0],o.y+=i[1],e}}(),So=function(i,e,t){Qe(i,e);const s=i.targetGeometry;return s.x=t.x,s.y=t.y,s.spatialReference=t.spatialReference,i},Ag=function(){const i=ce();return function(e,t,s,n,o){o||(o="center"),zl(i,s,n),Mn(i,i,.5);const r=i[0],l=i[1];switch(o){case"center":ye(i,0,0);break;case"left":ye(i,-r,0);break;case"top":ye(i,0,l);break;case"right":ye(i,r,0);break;case"bottom":ye(i,0,-l);break;case"top-left":ye(i,-r,l);break;case"bottom-left":ye(i,-r,-l);break;case"top-right":ye(i,r,l);break;case"bottom-right":ye(i,r,-l)}return An(e,t,i),e}}();function Db(i,e,t){return Qe(i,e),i.rotation+=t,i}function Pg(i,e,t){return Qe(i,e),i.rotation=t,i}const $g=function(){const i=ce();return function(e,t,s,n,o){return Qe(e,t),isNaN(s)||s===0||($c(i,n,t,o),e.scale=t.scale*s,Sc(i,i,e,o),An(e,e,ye(i,i[0]-n[0],n[1]-i[1]))),e}}();function La(i,e,t){return Qe(i,e),i.scale=t,i}const Pc=function(){const i=ce();return function(e,t,s,n,o,r){return Qe(e,t),isNaN(s)||s===0||($c(i,o,t,r),e.scale=t.scale*s,e.rotation+=n,Sc(i,i,e,r),An(e,e,ye(i,i[0]-o[0],o[1]-i[1]))),e}}(),Vb=function(){const i=ce(),e=ce();return function(t,s,n,o,r,l,d){return Ac(e,l,d),Hu(i,r,e),o?Pc(t,s,n,o,i,l):$g(t,s,n,i,l)}}(),$c=function(){const i=Jt();return function(e,t,s,n){return Ct(e,t,vg(i,s,n,1))}}(),Sc=function(){const i=Jt();return function(e,t,s,n){return Ct(e,t,hr(i,s,n,1))}}(),An=function(){const i=ce(),e=Jt();return function(t,s,n){Qe(t,s);const o=Ki(s),r=t.targetGeometry;return Tu(e,dr(s)),Ll(e,e,Gu(o,o)),Ct(i,n,e),r.x+=i[0],r.y+=i[1],t}}();let Sg=class{constructor(e,t,s,n){const o=e.targetGeometry,r=t.targetGeometry;n?typeof n=="string"&&(n=Nu(n)||mo.ease):n=mo.ease,this.easing=n,this.duration=s,this.sCenterX=o.x,this.sCenterY=o.y,this.sScale=e.scale,this.sRotation=e.rotation,this.tCenterX=r.x,this.tCenterY=r.y,this.tScale=t.scale,this.tRotation=t.rotation,this.dCenterX=this.tCenterX-this.sCenterX,this.dCenterY=this.tCenterY-this.sCenterY,this.dScale=this.tScale-this.sScale,this.dRotation=this.tRotation-this.sRotation,this.dRotation>180?this.dRotation-=360:this.dRotation<-180&&(this.dRotation+=360)}applyRatio(e,t){const s=this.easing(t);let n,o,r,l;t>=1?(n=this.tCenterX,o=this.tCenterY,r=this.tRotation,l=this.tScale):(n=this.sCenterX+s*this.dCenterX,o=this.sCenterY+s*this.dCenterY,r=this.sRotation+s*this.dRotation,l=this.sScale+s*this.dScale),e.targetGeometry.x=n,e.targetGeometry.y=o,e.scale=l,e.rotation=r}},wt=class extends z{constructor(e){super(e),this.duration=200,this.transition=null,this.easing=mo.ease,this.view=null,this.viewpoint=null,this.viewpoint=new Ze({targetGeometry:new X,scale:0,rotation:0}),this._updateTask=Hi({postRender:this._postRender.bind(this)}),this._updateTask.pause()}destroy(){this._updateTask.remove(),this._updateTask=null}animate(e,t,s){this.stop();const n=this.viewpoint;Qe(n,t),this.transition=new Sg(this.viewpoint,e.target,s&&s.duration||this.duration,s&&s.easing||this.easing);const o=()=>{this.animation===e&&this._updateTask&&(e.state==="finished"&&(this.transition.applyRatio(this.viewpoint,1),this.view.state&&(this.view.state.viewpoint=this.viewpoint.clone())),this.animation=null,this.updateFunction=null)};return e.when(o,o),this._startTime=performance.now(),this._updateTask.resume(),this.animation=e,e}animateContinous(e,t){this.stop(),this.updateFunction=t,this.viewpoint=e;const s=new $o({target:e.clone()}),n=()=>{this.animation===s&&this._updateTask&&(this.animation=null,this.updateFunction=null)};return s.when(n,n),this._startTime=performance.now(),this._updateTask.resume(),this.animation=s,s}stop(){this.animation&&(this.animation.stop(),this.animation=null,this.updateFunction=null)}_postRender(e){const t=this.animation;if(t&&t.state!==$o.State.STOPPED){if(this.updateFunction)this.updateFunction(this.viewpoint,e.deltaTime);else{const s=(performance.now()-this._startTime)/this.transition.duration,n=s>=1;this.transition.applyRatio(this.viewpoint,s),n&&this.animation.finish()}this.view.state&&(this.view.state.viewpoint=this.viewpoint.clone())}else this._updateTask.pause()}};a([c()],wt.prototype,"animation",void 0),a([c()],wt.prototype,"duration",void 0),a([c()],wt.prototype,"transition",void 0),a([c()],wt.prototype,"easing",void 0),a([c()],wt.prototype,"view",void 0),a([c()],wt.prototype,"viewpoint",void 0),wt=a([C("esri.views.2d.AnimationManager")],wt);const Rg=wt;let Lg=class{constructor(e){this.view=e,this._frameTaskHandle=null,this._updateRequested=!1,this.stationary=!0,this.animationInProgress=!1,this.prepare=()=>{this._updateParameters.state=this.view.state,this._updateParameters.stationary=this.view.stationary,this._updateParameters.pixelRatio=window.devicePixelRatio,this._updateParameters.renderingOptions=this.view.renderingOptions},this.update=()=>{this._updateRequested=!1;const{basemapView:t,graphicsView:s,labelManager:n,layerViews:o,state:{id:r}}=this.view;t.baseLayerViews.forEach(this._updateLayerView,this),o.forEach(this._updateLayerView,this),t.referenceLayerViews.forEach(this._updateLayerView,this),E(n)&&(n.lastUpdateId!==r&&(n.viewChange(),n.lastUpdateId=r),n.updateRequested&&n.processUpdate(this._updateParameters)),E(s)&&(s.lastUpdateId!==r&&(s.viewChange(),s.lastUpdateId=r),s.updateRequested&&s.processUpdate(this._updateParameters)),this.view.graphicsTileStore.setViewState(this._updateParameters.state),this.animationInProgress||this._updateRequested||this._frameTaskHandle.pause()}}destroy(){this.stop()}start(){if(this._frameTaskHandle)return;const e=this.view;this.stationary=e.stationary,this._updateParameters={state:e.state,pixelRatio:window.devicePixelRatio,stationary:this.stationary,renderingOptions:e.renderingOptions},this._stationaryHandle=I(()=>e.stationary,t=>{this.stationary=t,this.requestFrame()}),this._frameTaskHandle=Hi(this),this.requestUpdate()}stop(){this._frameTaskHandle&&(this._updateRequested=!1,this._stationaryHandle.remove(),this._frameTaskHandle.remove(),this._updateParameters=this._stationaryHandle=this._frameTaskHandle=null,this.stationary=!0,this.animationInProgress=!1)}requestUpdate(){this._updateRequested||(this._updateRequested=!0,this.requestFrame())}requestFrame(){this._frameTaskHandle&&this._frameTaskHandle.resume()}_updateLayerView(e){const t=this.view.state,s=e.lastUpdateId;s!=null&&(this.stationary||e.moving)||(e.moving=!0,e.moveStart()),s!==t.id&&e.viewChange(),this.stationary&&e.moving&&(e.moving=!1,e.moveEnd()),e.lastUpdateId=t.id,e.updateRequested&&e.processUpdate(this._updateParameters),"layerViews"in e&&e.layerViews.forEach(this._updateLayerView,this)}};function ae(){return Promise.all([T(()=>import("./webglDeps-2d5668fb.js"),["assets/webglDeps-2d5668fb.js","assets/VertexArrayObject-e1e46e3f.js","assets/Error-4ed679d7.js","assets/string-9c5e03f7.js","assets/typedArrayUtil-d02f10a8.js","assets/Texture-c2297638.js","assets/mathUtils-daf59e84.js","assets/common-701a4199.js","assets/context-util-abf86a85.js","assets/enums-64ab819c.js","assets/ProgramTemplate-1afb8353.js","assets/programUtils-fb70f3b3.js"]),T(()=>import("./mapViewDeps-87ed0f5b.js"),["assets/mapViewDeps-87ed0f5b.js","assets/Error-4ed679d7.js","assets/string-9c5e03f7.js","assets/typedArrayUtil-d02f10a8.js","assets/promiseUtils-930cba29.js","assets/reactiveUtils-b0e56010.js","assets/cast-6d78d3c7.js","assets/ensureType-d98e08e1.js","assets/nextTick-3ee5a785.js","assets/mat3f32-d3d088e8.js","assets/request-e4299080.js","assets/preload-helper-101896b7.js","assets/_commonjsHelpers-a430e9ea.js","assets/imageutils-418e9de0.js","assets/utils-1bc9587b.js","assets/parser-f68dd732.js","assets/colorUtils-639f4d25.js","assets/screenUtils-7afeb41c.js","assets/mat4-62d5e6a4.js","assets/common-701a4199.js","assets/Evented-b378ccab.js","assets/enums-4ca4641f.js","assets/MaterialKey-cec287ae.js","assets/Utils-b6ef920f.js","assets/mathUtils-daf59e84.js","assets/enums-ef042d89.js","assets/enums-64ab819c.js","assets/Texture-c2297638.js","assets/context-util-abf86a85.js","assets/VertexElementDescriptor-2925c6af.js","assets/heatmapUtils-90a13d85.js","assets/vec4f64-018b3fa6.js","assets/Color-b7b9e6bb.js","assets/BufferPool-b738111d.js","assets/WGLContainer-69c7e591.js","assets/mat3-45e3f2eb.js","assets/vec2f32-461e65a9.js","assets/pixelUtils-a3529416.js","assets/vec2f64-e0301652.js","assets/VertexArrayObject-e1e46e3f.js","assets/ProgramTemplate-1afb8353.js","assets/StyleDefinition-ae208a94.js","assets/config-1337d16e.js","assets/GeometryUtils-c093d234.js","assets/earcut-58237617.js","assets/vec2-f978aef8.js","assets/featureConversionUtils-d9ec654e.js","assets/jsonUtils-5115c7e5.js","assets/Extent-d5fff12d.js","assets/Polyline-42dcc920.js","assets/OptimizedFeature-1bba65b5.js","assets/OptimizedFeatureSet-1d1ac4b9.js","assets/enums-bfc9e4e9.js","assets/programUtils-fb70f3b3.js","assets/RenderingContext-b8526b4a.js","assets/OrderIndependentTransparency-602f26c2.js","assets/floatRGBA-305df8f3.js","assets/ExpandedCIM-91f67fd3.js","assets/arcadeOnDemand-72c57f7a.js","assets/geometry-70b2a4a5.js","assets/typeUtils-b6c52390.js","assets/jsonMap-5afaf2ff.js","assets/BidiEngine-836b7ef6.js","assets/aaBoundingRect-ca34962d.js","assets/mat2d-80bd93af.js","assets/Rect-ea14f53a.js","assets/quantizationUtils-8770173e.js","assets/GeometryUtils-eebff0a0.js","assets/rasterizingUtils-18039619.js","assets/pbf-e4fd0249.js","assets/Matcher-1409f335.js","assets/TileStrategy-40f1ecb0.js","assets/TileStore-a368d16c.js","assets/Queue-8aae62d3.js","assets/TileKey-ed432ae5.js","assets/rbush-8e36784a.js","assets/quickselect-322ec8e1.js","assets/Query-066f2ccf.js","assets/TimeExtent-0fd238ea.js","assets/enumeration-497ef064.js","assets/Field-bb784640.js","assets/fieldType-9bddd3d4.js","assets/Clonable-58355d3c.js","assets/visualVariablesUtils-9310c846.js","assets/visualVariablesUtils-4833b8d3.js","assets/tileUtils-23b52606.js","assets/TileClipper-48ccb501.js","assets/assets-6ba3cd63.js","assets/Geometry-daada628.js","assets/defaultsJSON-b087dd4d.js","assets/LRUCache-4d56ba4d.js","assets/MemCache-1e028041.js","assets/devEnvironmentUtils-5002a058.js","assets/Portal-fbb2b73d.js","assets/Loadable-b0d5bb7e.js","assets/Promise-6bd0b483.js","assets/locale-30120714.js","assets/PortalGroup-813428fa.js","assets/PortalUser-cf18ae9d.js","assets/persistableUrlUtils-d18becd9.js","assets/styleUtils-0c73f570.js","assets/CircularArray-ace048ef.js","assets/imageUtils-c2d0d1ae.js","assets/HandleOwner-6ac6f00a.js","assets/FeatureSetReader-9e0a2b1d.js","assets/centroid-7800ee74.js","assets/lengthUtils-0dde2114.js","assets/unitUtils-b69647a1.js","assets/sizeVariableUtils-d4870b0d.js","assets/BaseGraphicContainer-baad2cd4.js","assets/normalizeUtilsSync-1f26dd3f.js","assets/normalizeUtils-91a64c2b.js","assets/projectionSupport-38cc9dc5.js","assets/projection-6146477c.js","assets/SimpleObservable-e0897cc6.js","assets/zscale-72b4355d.js","assets/json-48e3ea08.js","assets/labelingInfo-681dda19.js","assets/symbols-64db5dd6.js","assets/CIMSymbol-a95ceb49.js","assets/fieldUtils-141b2ff2.js","assets/Symbol-1bb07043.js","assets/opacityUtils-8b7acc4e.js","assets/aaBoundingBox-33fc923c.js","assets/Collection-42fe629f.js","assets/collectionUtils-3d8a9611.js","assets/labelUtils-87bb22ff.js","assets/jsonUtils-b1b224a3.js","assets/FeatureContainer-e4e1ed67.js","assets/TileContainer-efb37002.js","assets/capabilities-5736b16f.js","assets/schemaUtils-36753600.js","assets/LayerFloorInfo-0d02c503.js","assets/diffUtils-713e5c9b.js","assets/createSymbolSchema-976acefa.js","assets/rendererUtils-a093890e.js","assets/FeatureReductionLayer-0deeb262.js","assets/BlendLayer-7a735871.js","assets/PopupTemplate-d6e0b369.js","assets/number-c7f1bfee.js","assets/Identifiable-57df9761.js","assets/UniqueValueRenderer-cd716182.js","assets/LegendOptions-e31ff575.js","assets/colorRamps-c00f504b.js","assets/Graphic-e4fb7090.js","assets/compilerUtils-eefea0ec.js","assets/jsonUtils-c5ba7295.js","assets/DictionaryLoader-29adda53.js","assets/deprecate-46fadabd.js","assets/OperationalLayer-54654858.js","assets/ElevationInfo-28459ff1.js","assets/util-94bdf933.js","assets/ComputedAttributeStorage-efef8862.js","assets/FieldsIndex-c06d221a.js","assets/vec3f32-4322908d.js","assets/GraphicContainer-cd91331c.js","assets/asyncUtils-18831bb1.js","assets/requestImageUtils-2fafd053.js","assets/Basemap-5353f87f.js","assets/loadAll-1ae88564.js","assets/PortalItem-69c4a143.js","assets/messages-634811b5.js","assets/writeUtils-44b0e78b.js","assets/layerUtils-6996b9ea.js","assets/CollectionFlattener-b89887c0.js","assets/TablesMixin-402d03d2.js","assets/Layer-739799ab.js","assets/Cyclical-1a93cb12.js","assets/workers-7aef8bf1.js","assets/Connection-dd24ab83.js","assets/intl-a5c99ea3.js","assets/TileInfo-92f7dc61.js","assets/widget-4becb80f.js","assets/uuid-73213768.js","assets/byteSizeEstimations-90c5a50d.js","assets/executeQueryJSON-bf3dc024.js","assets/query-4348ce6f.js","assets/pbfQueryUtils-91f50fb5.js","assets/queryZScale-1674984c.js","assets/FeatureSet-1cc04f9b.js","assets/RelationshipQuery-b5b427dc.js","assets/utils-46b35833.js","assets/ItemCache-b4db8f82.js","assets/TopFeaturesQuery-7da1d7c1.js","assets/FeatureLayer-1a0dd9ce.js","assets/MultiOriginJSONSupport-1970ed0f.js","assets/FeatureLayerBase-d34c9a8c.js","assets/HeightModelInfo-645087b5.js","assets/arcgisLayerUrl-02fe1a62.js","assets/editsZScale-e318eb4a.js","assets/APIKeyMixin-f90cfebd.js","assets/ArcGISService-f6f32fbc.js","assets/CustomParametersMixin-5e3018da.js","assets/EditBusLayer-1372e92b.js","assets/OrderedLayer-7b3473c8.js","assets/PortalLayer-644d657e.js","assets/RefreshableLayer-84ec1468.js","assets/ScaleRangeLayer-c6a35aba.js","assets/TemporalLayer-d41a81db.js","assets/TimeInfo-a1791ae0.js","assets/FeatureTemplate-773a8865.js","assets/FeatureType-6c50f4e3.js","assets/fieldProperties-c2bdcd57.js","assets/versionUtils-5ccafbea.js","assets/styleUtils-45e2d86c.js","assets/popupUtils-ea7b7951.js","assets/Scheduler-343fdba6.js","assets/GraphicsLayer-caff0dcf.js","assets/ViewingMode-fb6259a5.js","assets/unitBezier-881ac1eb.js","assets/datetime-7cb5ae9e.js"])])}const es=()=>ae().then(()=>T(()=>import("./TileLayerView2D-a2cd784c.js"),["assets/TileLayerView2D-a2cd784c.js","assets/cast-6d78d3c7.js","assets/typedArrayUtil-d02f10a8.js","assets/string-9c5e03f7.js","assets/Error-4ed679d7.js","assets/ensureType-d98e08e1.js","assets/nextTick-3ee5a785.js","assets/promiseUtils-930cba29.js","assets/reactiveUtils-b0e56010.js","assets/Extent-d5fff12d.js","assets/imageUtils-f5c68deb.js","assets/BitmapTileContainer-f80c60ba.js","assets/aaBoundingRect-ca34962d.js","assets/mathUtils-daf59e84.js","assets/common-701a4199.js","assets/mat3f32-d3d088e8.js","assets/Bitmap-b5446edf.js","assets/mat3-45e3f2eb.js","assets/vec2f32-461e65a9.js","assets/utils-1bc9587b.js","assets/parser-f68dd732.js","assets/colorUtils-639f4d25.js","assets/screenUtils-7afeb41c.js","assets/mat4-62d5e6a4.js","assets/Evented-b378ccab.js","assets/enums-4ca4641f.js","assets/MaterialKey-cec287ae.js","assets/Utils-b6ef920f.js","assets/enums-ef042d89.js","assets/enums-64ab819c.js","assets/Texture-c2297638.js","assets/context-util-abf86a85.js","assets/VertexElementDescriptor-2925c6af.js","assets/heatmapUtils-90a13d85.js","assets/vec4f64-018b3fa6.js","assets/Color-b7b9e6bb.js","assets/TileContainer-efb37002.js","assets/TileKey-ed432ae5.js","assets/WGLContainer-69c7e591.js","assets/pixelUtils-a3529416.js","assets/vec2f64-e0301652.js","assets/VertexArrayObject-e1e46e3f.js","assets/ProgramTemplate-1afb8353.js","assets/StyleDefinition-ae208a94.js","assets/config-1337d16e.js","assets/GeometryUtils-c093d234.js","assets/earcut-58237617.js","assets/vec2-f978aef8.js","assets/featureConversionUtils-d9ec654e.js","assets/jsonUtils-5115c7e5.js","assets/Polyline-42dcc920.js","assets/OptimizedFeature-1bba65b5.js","assets/OptimizedFeatureSet-1d1ac4b9.js","assets/LayerView-5e92a124.js","assets/Collection-42fe629f.js","assets/SimpleObservable-e0897cc6.js","assets/collectionUtils-3d8a9611.js","assets/geometry-70b2a4a5.js","assets/typeUtils-b6c52390.js","assets/jsonMap-5afaf2ff.js","assets/HandleOwner-6ac6f00a.js","assets/Identifiable-57df9761.js","assets/Promise-6bd0b483.js","assets/TileStore-a368d16c.js","assets/Queue-8aae62d3.js","assets/rbush-8e36784a.js","assets/quickselect-322ec8e1.js","assets/Query-066f2ccf.js","assets/TimeExtent-0fd238ea.js","assets/enumeration-497ef064.js","assets/Field-bb784640.js","assets/fieldType-9bddd3d4.js","assets/Clonable-58355d3c.js","assets/TileStrategy-40f1ecb0.js","assets/RefreshableLayerView-6d197c7a.js","assets/drapedUtils-06632e8a.js","assets/unitUtils-b69647a1.js"])),ts=()=>ae().then(()=>T(()=>import("./FeatureLayerView2D-813b3c9f.js"),["assets/FeatureLayerView2D-813b3c9f.js","assets/cast-6d78d3c7.js","assets/typedArrayUtil-d02f10a8.js","assets/string-9c5e03f7.js","assets/Error-4ed679d7.js","assets/ensureType-d98e08e1.js","assets/nextTick-3ee5a785.js","assets/promiseUtils-930cba29.js","assets/Graphic-e4fb7090.js","assets/geometry-70b2a4a5.js","assets/Extent-d5fff12d.js","assets/Polyline-42dcc920.js","assets/typeUtils-b6c52390.js","assets/jsonMap-5afaf2ff.js","assets/PopupTemplate-d6e0b369.js","assets/Clonable-58355d3c.js","assets/Collection-42fe629f.js","assets/Evented-b378ccab.js","assets/SimpleObservable-e0897cc6.js","assets/fieldUtils-141b2ff2.js","assets/preload-helper-101896b7.js","assets/arcadeOnDemand-72c57f7a.js","assets/enumeration-497ef064.js","assets/number-c7f1bfee.js","assets/locale-30120714.js","assets/Identifiable-57df9761.js","assets/symbols-64db5dd6.js","assets/CIMSymbol-a95ceb49.js","assets/Symbol-1bb07043.js","assets/Color-b7b9e6bb.js","assets/colorUtils-639f4d25.js","assets/mathUtils-daf59e84.js","assets/common-701a4199.js","assets/screenUtils-7afeb41c.js","assets/opacityUtils-8b7acc4e.js","assets/aaBoundingBox-33fc923c.js","assets/request-e4299080.js","assets/persistableUrlUtils-d18becd9.js","assets/collectionUtils-3d8a9611.js","assets/Portal-fbb2b73d.js","assets/Loadable-b0d5bb7e.js","assets/Promise-6bd0b483.js","assets/PortalGroup-813428fa.js","assets/PortalUser-cf18ae9d.js","assets/jsonUtils-5115c7e5.js","assets/reactiveUtils-b0e56010.js","assets/utils-1bc9587b.js","assets/mat3f32-d3d088e8.js","assets/parser-f68dd732.js","assets/mat4-62d5e6a4.js","assets/enums-4ca4641f.js","assets/MaterialKey-cec287ae.js","assets/Utils-b6ef920f.js","assets/enums-ef042d89.js","assets/enums-64ab819c.js","assets/Texture-c2297638.js","assets/context-util-abf86a85.js","assets/VertexElementDescriptor-2925c6af.js","assets/heatmapUtils-90a13d85.js","assets/vec4f64-018b3fa6.js","assets/FeatureReductionLayer-0deeb262.js","assets/BlendLayer-7a735871.js","assets/TimeExtent-0fd238ea.js","assets/Query-066f2ccf.js","assets/Field-bb784640.js","assets/fieldType-9bddd3d4.js","assets/UniqueValueRenderer-cd716182.js","assets/LegendOptions-e31ff575.js","assets/diffUtils-713e5c9b.js","assets/colorRamps-c00f504b.js","assets/sizeVariableUtils-d4870b0d.js","assets/compilerUtils-eefea0ec.js","assets/lengthUtils-0dde2114.js","assets/unitUtils-b69647a1.js","assets/jsonUtils-b1b224a3.js","assets/styleUtils-0c73f570.js","assets/jsonUtils-c5ba7295.js","assets/DictionaryLoader-29adda53.js","assets/LRUCache-4d56ba4d.js","assets/MemCache-1e028041.js","assets/deprecate-46fadabd.js","assets/OperationalLayer-54654858.js","assets/ElevationInfo-28459ff1.js","assets/labelingInfo-681dda19.js","assets/labelUtils-87bb22ff.js","assets/defaultsJSON-b087dd4d.js","assets/FeatureSet-1cc04f9b.js","assets/LayerView-5e92a124.js","assets/HandleOwner-6ac6f00a.js","assets/schemaUtils-36753600.js","assets/LayerFloorInfo-0d02c503.js","assets/visualVariablesUtils-4833b8d3.js","assets/createSymbolSchema-976acefa.js","assets/ExpandedCIM-91f67fd3.js","assets/BidiEngine-836b7ef6.js","assets/aaBoundingRect-ca34962d.js","assets/mat2d-80bd93af.js","assets/vec2-f978aef8.js","assets/vec2f32-461e65a9.js","assets/Rect-ea14f53a.js","assets/quantizationUtils-8770173e.js","assets/GeometryUtils-eebff0a0.js","assets/floatRGBA-305df8f3.js","assets/rendererUtils-a093890e.js","assets/capabilities-5736b16f.js","assets/util-94bdf933.js","assets/TileStore-a368d16c.js","assets/Queue-8aae62d3.js","assets/TileKey-ed432ae5.js","assets/rbush-8e36784a.js","assets/quickselect-322ec8e1.js","assets/workers-7aef8bf1.js","assets/Connection-dd24ab83.js","assets/assets-6ba3cd63.js","assets/intl-a5c99ea3.js","assets/messages-634811b5.js","assets/floorFilterUtils-080a7cd2.js","assets/popupUtils-1c109923.js","assets/RefreshableLayerView-6d197c7a.js"])),Fa={"base-dynamic":()=>ae().then(()=>T(()=>import("./BaseDynamicLayerView2D-c9455d79.js"),["assets/BaseDynamicLayerView2D-c9455d79.js","assets/cast-6d78d3c7.js","assets/typedArrayUtil-d02f10a8.js","assets/string-9c5e03f7.js","assets/Error-4ed679d7.js","assets/ensureType-d98e08e1.js","assets/nextTick-3ee5a785.js","assets/promiseUtils-930cba29.js","assets/BitmapContainer-480e821d.js","assets/WGLContainer-69c7e591.js","assets/mat3f32-d3d088e8.js","assets/enums-64ab819c.js","assets/mat3-45e3f2eb.js","assets/common-701a4199.js","assets/vec2f32-461e65a9.js","assets/pixelUtils-a3529416.js","assets/utils-1bc9587b.js","assets/parser-f68dd732.js","assets/colorUtils-639f4d25.js","assets/screenUtils-7afeb41c.js","assets/mat4-62d5e6a4.js","assets/Evented-b378ccab.js","assets/enums-4ca4641f.js","assets/MaterialKey-cec287ae.js","assets/Utils-b6ef920f.js","assets/mathUtils-daf59e84.js","assets/enums-ef042d89.js","assets/Texture-c2297638.js","assets/context-util-abf86a85.js","assets/VertexElementDescriptor-2925c6af.js","assets/heatmapUtils-90a13d85.js","assets/vec4f64-018b3fa6.js","assets/Color-b7b9e6bb.js","assets/vec2f64-e0301652.js","assets/VertexArrayObject-e1e46e3f.js","assets/ProgramTemplate-1afb8353.js","assets/StyleDefinition-ae208a94.js","assets/config-1337d16e.js","assets/GeometryUtils-c093d234.js","assets/reactiveUtils-b0e56010.js","assets/earcut-58237617.js","assets/vec2-f978aef8.js","assets/featureConversionUtils-d9ec654e.js","assets/jsonUtils-5115c7e5.js","assets/Extent-d5fff12d.js","assets/Polyline-42dcc920.js","assets/OptimizedFeature-1bba65b5.js","assets/OptimizedFeatureSet-1d1ac4b9.js","assets/LayerView-5e92a124.js","assets/Collection-42fe629f.js","assets/SimpleObservable-e0897cc6.js","assets/collectionUtils-3d8a9611.js","assets/geometry-70b2a4a5.js","assets/typeUtils-b6c52390.js","assets/jsonMap-5afaf2ff.js","assets/HandleOwner-6ac6f00a.js","assets/Identifiable-57df9761.js","assets/Promise-6bd0b483.js","assets/ExportStrategy-aa28d495.js","assets/aaBoundingRect-ca34962d.js","assets/TileInfo-92f7dc61.js","assets/unitUtils-b69647a1.js","assets/Bitmap-b5446edf.js","assets/TileStore-a368d16c.js","assets/Queue-8aae62d3.js","assets/TileKey-ed432ae5.js","assets/rbush-8e36784a.js","assets/quickselect-322ec8e1.js","assets/Query-066f2ccf.js","assets/TimeExtent-0fd238ea.js","assets/enumeration-497ef064.js","assets/Field-bb784640.js","assets/fieldType-9bddd3d4.js","assets/Clonable-58355d3c.js","assets/RefreshableLayerView-6d197c7a.js"])),"base-tile":es,"bing-maps":es,csv:ts,"geo-rss":()=>ae().then(()=>T(()=>import("./GeoRSSLayerView2D-47745795.js"),["assets/GeoRSSLayerView2D-47745795.js","assets/cast-6d78d3c7.js","assets/typedArrayUtil-d02f10a8.js","assets/string-9c5e03f7.js","assets/Error-4ed679d7.js","assets/ensureType-d98e08e1.js","assets/nextTick-3ee5a785.js","assets/promiseUtils-930cba29.js","assets/PopupTemplate-d6e0b369.js","assets/Clonable-58355d3c.js","assets/Collection-42fe629f.js","assets/Evented-b378ccab.js","assets/SimpleObservable-e0897cc6.js","assets/Extent-d5fff12d.js","assets/fieldUtils-141b2ff2.js","assets/preload-helper-101896b7.js","assets/arcadeOnDemand-72c57f7a.js","assets/geometry-70b2a4a5.js","assets/Polyline-42dcc920.js","assets/typeUtils-b6c52390.js","assets/jsonMap-5afaf2ff.js","assets/enumeration-497ef064.js","assets/number-c7f1bfee.js","assets/locale-30120714.js","assets/Identifiable-57df9761.js","assets/reactiveUtils-b0e56010.js","assets/jsonUtils-c5ba7295.js","assets/UniqueValueRenderer-cd716182.js","assets/symbols-64db5dd6.js","assets/CIMSymbol-a95ceb49.js","assets/Symbol-1bb07043.js","assets/Color-b7b9e6bb.js","assets/colorUtils-639f4d25.js","assets/mathUtils-daf59e84.js","assets/common-701a4199.js","assets/screenUtils-7afeb41c.js","assets/opacityUtils-8b7acc4e.js","assets/aaBoundingBox-33fc923c.js","assets/request-e4299080.js","assets/persistableUrlUtils-d18becd9.js","assets/collectionUtils-3d8a9611.js","assets/Portal-fbb2b73d.js","assets/Loadable-b0d5bb7e.js","assets/Promise-6bd0b483.js","assets/PortalGroup-813428fa.js","assets/PortalUser-cf18ae9d.js","assets/LegendOptions-e31ff575.js","assets/diffUtils-713e5c9b.js","assets/colorRamps-c00f504b.js","assets/sizeVariableUtils-d4870b0d.js","assets/Graphic-e4fb7090.js","assets/jsonUtils-5115c7e5.js","assets/compilerUtils-eefea0ec.js","assets/lengthUtils-0dde2114.js","assets/unitUtils-b69647a1.js","assets/jsonUtils-b1b224a3.js","assets/styleUtils-0c73f570.js","assets/DictionaryLoader-29adda53.js","assets/LRUCache-4d56ba4d.js","assets/MemCache-1e028041.js","assets/deprecate-46fadabd.js","assets/heatmapUtils-90a13d85.js","assets/vec4f64-018b3fa6.js","assets/FeatureSet-1cc04f9b.js","assets/Field-bb784640.js","assets/fieldType-9bddd3d4.js","assets/LayerView-5e92a124.js","assets/utils-1bc9587b.js","assets/mat3f32-d3d088e8.js","assets/parser-f68dd732.js","assets/mat4-62d5e6a4.js","assets/enums-4ca4641f.js","assets/MaterialKey-cec287ae.js","assets/Utils-b6ef920f.js","assets/enums-ef042d89.js","assets/enums-64ab819c.js","assets/Texture-c2297638.js","assets/context-util-abf86a85.js","assets/VertexElementDescriptor-2925c6af.js","assets/HandleOwner-6ac6f00a.js","assets/GraphicContainer-cd91331c.js","assets/BaseGraphicContainer-baad2cd4.js","assets/ExpandedCIM-91f67fd3.js","assets/BidiEngine-836b7ef6.js","assets/aaBoundingRect-ca34962d.js","assets/mat2d-80bd93af.js","assets/vec2-f978aef8.js","assets/vec2f32-461e65a9.js","assets/Rect-ea14f53a.js","assets/quantizationUtils-8770173e.js","assets/GeometryUtils-eebff0a0.js","assets/floatRGBA-305df8f3.js","assets/normalizeUtilsSync-1f26dd3f.js","assets/normalizeUtils-91a64c2b.js","assets/projectionSupport-38cc9dc5.js","assets/projection-6146477c.js","assets/assets-6ba3cd63.js","assets/zscale-72b4355d.js","assets/json-48e3ea08.js","assets/labelingInfo-681dda19.js","assets/labelUtils-87bb22ff.js","assets/defaultsJSON-b087dd4d.js","assets/VertexArrayObject-e1e46e3f.js","assets/FeatureContainer-e4e1ed67.js","assets/mat3-45e3f2eb.js","assets/TileContainer-efb37002.js","assets/TileKey-ed432ae5.js","assets/WGLContainer-69c7e591.js","assets/pixelUtils-a3529416.js","assets/vec2f64-e0301652.js","assets/ProgramTemplate-1afb8353.js","assets/StyleDefinition-ae208a94.js","assets/config-1337d16e.js","assets/GeometryUtils-c093d234.js","assets/earcut-58237617.js","assets/featureConversionUtils-d9ec654e.js","assets/OptimizedFeature-1bba65b5.js","assets/OptimizedFeatureSet-1d1ac4b9.js","assets/Queue-8aae62d3.js","assets/visualVariablesUtils-9310c846.js","assets/visualVariablesUtils-4833b8d3.js","assets/capabilities-5736b16f.js","assets/Matcher-1409f335.js","assets/TileStrategy-40f1ecb0.js","assets/TileStore-a368d16c.js","assets/rbush-8e36784a.js","assets/quickselect-322ec8e1.js","assets/Query-066f2ccf.js","assets/TimeExtent-0fd238ea.js","assets/tileUtils-23b52606.js","assets/TileClipper-48ccb501.js","assets/Geometry-daada628.js","assets/devEnvironmentUtils-5002a058.js","assets/schemaUtils-36753600.js","assets/LayerFloorInfo-0d02c503.js","assets/createSymbolSchema-976acefa.js","assets/rendererUtils-a093890e.js","assets/FeatureReductionLayer-0deeb262.js","assets/BlendLayer-7a735871.js","assets/OperationalLayer-54654858.js","assets/ElevationInfo-28459ff1.js","assets/util-94bdf933.js","assets/ComputedAttributeStorage-efef8862.js","assets/FeatureSetReader-9e0a2b1d.js","assets/centroid-7800ee74.js","assets/FieldsIndex-c06d221a.js","assets/vec3f32-4322908d.js"])),feature:ts,geojson:ts,graphics:()=>ae().then(()=>T(()=>import("./GraphicsLayerView2D-19f2899f.js"),["assets/GraphicsLayerView2D-19f2899f.js","assets/cast-6d78d3c7.js","assets/typedArrayUtil-d02f10a8.js","assets/string-9c5e03f7.js","assets/Error-4ed679d7.js","assets/ensureType-d98e08e1.js","assets/nextTick-3ee5a785.js","assets/promiseUtils-930cba29.js","assets/Graphic-e4fb7090.js","assets/geometry-70b2a4a5.js","assets/Extent-d5fff12d.js","assets/Polyline-42dcc920.js","assets/typeUtils-b6c52390.js","assets/jsonMap-5afaf2ff.js","assets/PopupTemplate-d6e0b369.js","assets/Clonable-58355d3c.js","assets/Collection-42fe629f.js","assets/Evented-b378ccab.js","assets/SimpleObservable-e0897cc6.js","assets/fieldUtils-141b2ff2.js","assets/preload-helper-101896b7.js","assets/arcadeOnDemand-72c57f7a.js","assets/enumeration-497ef064.js","assets/number-c7f1bfee.js","assets/locale-30120714.js","assets/Identifiable-57df9761.js","assets/symbols-64db5dd6.js","assets/CIMSymbol-a95ceb49.js","assets/Symbol-1bb07043.js","assets/Color-b7b9e6bb.js","assets/colorUtils-639f4d25.js","assets/mathUtils-daf59e84.js","assets/common-701a4199.js","assets/screenUtils-7afeb41c.js","assets/opacityUtils-8b7acc4e.js","assets/aaBoundingBox-33fc923c.js","assets/request-e4299080.js","assets/persistableUrlUtils-d18becd9.js","assets/collectionUtils-3d8a9611.js","assets/Portal-fbb2b73d.js","assets/Loadable-b0d5bb7e.js","assets/Promise-6bd0b483.js","assets/PortalGroup-813428fa.js","assets/PortalUser-cf18ae9d.js","assets/jsonUtils-5115c7e5.js","assets/LayerView-5e92a124.js","assets/reactiveUtils-b0e56010.js","assets/utils-1bc9587b.js","assets/mat3f32-d3d088e8.js","assets/parser-f68dd732.js","assets/mat4-62d5e6a4.js","assets/enums-4ca4641f.js","assets/MaterialKey-cec287ae.js","assets/Utils-b6ef920f.js","assets/enums-ef042d89.js","assets/enums-64ab819c.js","assets/Texture-c2297638.js","assets/context-util-abf86a85.js","assets/VertexElementDescriptor-2925c6af.js","assets/heatmapUtils-90a13d85.js","assets/vec4f64-018b3fa6.js","assets/HandleOwner-6ac6f00a.js","assets/GraphicContainer-cd91331c.js","assets/BaseGraphicContainer-baad2cd4.js","assets/ExpandedCIM-91f67fd3.js","assets/BidiEngine-836b7ef6.js","assets/aaBoundingRect-ca34962d.js","assets/mat2d-80bd93af.js","assets/vec2-f978aef8.js","assets/vec2f32-461e65a9.js","assets/Rect-ea14f53a.js","assets/quantizationUtils-8770173e.js","assets/GeometryUtils-eebff0a0.js","assets/floatRGBA-305df8f3.js","assets/normalizeUtilsSync-1f26dd3f.js","assets/normalizeUtils-91a64c2b.js","assets/projectionSupport-38cc9dc5.js","assets/projection-6146477c.js","assets/unitUtils-b69647a1.js","assets/assets-6ba3cd63.js","assets/zscale-72b4355d.js","assets/json-48e3ea08.js","assets/labelingInfo-681dda19.js","assets/labelUtils-87bb22ff.js","assets/defaultsJSON-b087dd4d.js","assets/jsonUtils-b1b224a3.js","assets/VertexArrayObject-e1e46e3f.js","assets/FeatureContainer-e4e1ed67.js","assets/mat3-45e3f2eb.js","assets/TileContainer-efb37002.js","assets/TileKey-ed432ae5.js","assets/WGLContainer-69c7e591.js","assets/pixelUtils-a3529416.js","assets/vec2f64-e0301652.js","assets/ProgramTemplate-1afb8353.js","assets/StyleDefinition-ae208a94.js","assets/config-1337d16e.js","assets/GeometryUtils-c093d234.js","assets/earcut-58237617.js","assets/featureConversionUtils-d9ec654e.js","assets/OptimizedFeature-1bba65b5.js","assets/OptimizedFeatureSet-1d1ac4b9.js","assets/Queue-8aae62d3.js","assets/visualVariablesUtils-9310c846.js","assets/visualVariablesUtils-4833b8d3.js","assets/lengthUtils-0dde2114.js","assets/capabilities-5736b16f.js","assets/Matcher-1409f335.js","assets/TileStrategy-40f1ecb0.js","assets/TileStore-a368d16c.js","assets/rbush-8e36784a.js","assets/quickselect-322ec8e1.js","assets/Query-066f2ccf.js","assets/TimeExtent-0fd238ea.js","assets/Field-bb784640.js","assets/fieldType-9bddd3d4.js","assets/tileUtils-23b52606.js","assets/TileClipper-48ccb501.js","assets/Geometry-daada628.js","assets/LRUCache-4d56ba4d.js","assets/MemCache-1e028041.js","assets/devEnvironmentUtils-5002a058.js","assets/styleUtils-0c73f570.js","assets/schemaUtils-36753600.js","assets/LayerFloorInfo-0d02c503.js","assets/diffUtils-713e5c9b.js","assets/createSymbolSchema-976acefa.js","assets/rendererUtils-a093890e.js","assets/FeatureReductionLayer-0deeb262.js","assets/BlendLayer-7a735871.js","assets/UniqueValueRenderer-cd716182.js","assets/LegendOptions-e31ff575.js","assets/colorRamps-c00f504b.js","assets/sizeVariableUtils-d4870b0d.js","assets/compilerUtils-eefea0ec.js","assets/jsonUtils-c5ba7295.js","assets/DictionaryLoader-29adda53.js","assets/deprecate-46fadabd.js","assets/OperationalLayer-54654858.js","assets/ElevationInfo-28459ff1.js","assets/util-94bdf933.js","assets/ComputedAttributeStorage-efef8862.js","assets/FeatureSetReader-9e0a2b1d.js","assets/centroid-7800ee74.js","assets/FieldsIndex-c06d221a.js","assets/vec3f32-4322908d.js"])),group:()=>ae().then(()=>T(()=>import("./GroupLayerView2D-fe9c8ae5.js"),["assets/GroupLayerView2D-fe9c8ae5.js","assets/cast-6d78d3c7.js","assets/typedArrayUtil-d02f10a8.js","assets/string-9c5e03f7.js","assets/Error-4ed679d7.js","assets/ensureType-d98e08e1.js","assets/nextTick-3ee5a785.js","assets/promiseUtils-930cba29.js","assets/GroupContainer-13f6834c.js","assets/WGLContainer-69c7e591.js","assets/mat3f32-d3d088e8.js","assets/enums-64ab819c.js","assets/mat3-45e3f2eb.js","assets/common-701a4199.js","assets/vec2f32-461e65a9.js","assets/pixelUtils-a3529416.js","assets/utils-1bc9587b.js","assets/parser-f68dd732.js","assets/colorUtils-639f4d25.js","assets/screenUtils-7afeb41c.js","assets/mat4-62d5e6a4.js","assets/Evented-b378ccab.js","assets/enums-4ca4641f.js","assets/MaterialKey-cec287ae.js","assets/Utils-b6ef920f.js","assets/mathUtils-daf59e84.js","assets/enums-ef042d89.js","assets/Texture-c2297638.js","assets/context-util-abf86a85.js","assets/VertexElementDescriptor-2925c6af.js","assets/heatmapUtils-90a13d85.js","assets/vec4f64-018b3fa6.js","assets/Color-b7b9e6bb.js","assets/vec2f64-e0301652.js","assets/VertexArrayObject-e1e46e3f.js","assets/ProgramTemplate-1afb8353.js","assets/StyleDefinition-ae208a94.js","assets/config-1337d16e.js","assets/GeometryUtils-c093d234.js","assets/reactiveUtils-b0e56010.js","assets/earcut-58237617.js","assets/vec2-f978aef8.js","assets/featureConversionUtils-d9ec654e.js","assets/jsonUtils-5115c7e5.js","assets/Extent-d5fff12d.js","assets/Polyline-42dcc920.js","assets/OptimizedFeature-1bba65b5.js","assets/OptimizedFeatureSet-1d1ac4b9.js","assets/LayerView-5e92a124.js","assets/Collection-42fe629f.js","assets/SimpleObservable-e0897cc6.js","assets/collectionUtils-3d8a9611.js","assets/geometry-70b2a4a5.js","assets/typeUtils-b6c52390.js","assets/jsonMap-5afaf2ff.js","assets/HandleOwner-6ac6f00a.js","assets/Identifiable-57df9761.js","assets/Promise-6bd0b483.js"])),imagery:()=>ae().then(()=>T(()=>import("./ImageryLayerView2D-25ec4288.js"),["assets/ImageryLayerView2D-25ec4288.js","assets/cast-6d78d3c7.js","assets/typedArrayUtil-d02f10a8.js","assets/string-9c5e03f7.js","assets/Error-4ed679d7.js","assets/ensureType-d98e08e1.js","assets/nextTick-3ee5a785.js","assets/promiseUtils-930cba29.js","assets/Graphic-e4fb7090.js","assets/geometry-70b2a4a5.js","assets/Extent-d5fff12d.js","assets/Polyline-42dcc920.js","assets/typeUtils-b6c52390.js","assets/jsonMap-5afaf2ff.js","assets/PopupTemplate-d6e0b369.js","assets/Clonable-58355d3c.js","assets/Collection-42fe629f.js","assets/Evented-b378ccab.js","assets/SimpleObservable-e0897cc6.js","assets/fieldUtils-141b2ff2.js","assets/preload-helper-101896b7.js","assets/arcadeOnDemand-72c57f7a.js","assets/enumeration-497ef064.js","assets/number-c7f1bfee.js","assets/locale-30120714.js","assets/Identifiable-57df9761.js","assets/symbols-64db5dd6.js","assets/CIMSymbol-a95ceb49.js","assets/Symbol-1bb07043.js","assets/Color-b7b9e6bb.js","assets/colorUtils-639f4d25.js","assets/mathUtils-daf59e84.js","assets/common-701a4199.js","assets/screenUtils-7afeb41c.js","assets/opacityUtils-8b7acc4e.js","assets/aaBoundingBox-33fc923c.js","assets/request-e4299080.js","assets/persistableUrlUtils-d18becd9.js","assets/collectionUtils-3d8a9611.js","assets/Portal-fbb2b73d.js","assets/Loadable-b0d5bb7e.js","assets/Promise-6bd0b483.js","assets/PortalGroup-813428fa.js","assets/PortalUser-cf18ae9d.js","assets/jsonUtils-5115c7e5.js","assets/reactiveUtils-b0e56010.js","assets/GraphicsLayer-caff0dcf.js","assets/HandleOwner-6ac6f00a.js","assets/Layer-739799ab.js","assets/BlendLayer-7a735871.js","assets/parser-f68dd732.js","assets/mat4-62d5e6a4.js","assets/ScaleRangeLayer-c6a35aba.js","assets/ElevationInfo-28459ff1.js","assets/lengthUtils-0dde2114.js","assets/unitUtils-b69647a1.js","assets/RasterVFDisplayObject-22512552.js","assets/VertexArrayObject-e1e46e3f.js","assets/Texture-c2297638.js","assets/context-util-abf86a85.js","assets/enums-64ab819c.js","assets/VertexElementDescriptor-2925c6af.js","assets/dataUtils-06f77c91.js","assets/pixelUtils-a3529416.js","assets/WGLContainer-69c7e591.js","assets/mat3f32-d3d088e8.js","assets/mat3-45e3f2eb.js","assets/vec2f32-461e65a9.js","assets/utils-1bc9587b.js","assets/enums-4ca4641f.js","assets/MaterialKey-cec287ae.js","assets/Utils-b6ef920f.js","assets/enums-ef042d89.js","assets/heatmapUtils-90a13d85.js","assets/vec4f64-018b3fa6.js","assets/vec2f64-e0301652.js","assets/ProgramTemplate-1afb8353.js","assets/StyleDefinition-ae208a94.js","assets/config-1337d16e.js","assets/GeometryUtils-c093d234.js","assets/earcut-58237617.js","assets/vec2-f978aef8.js","assets/featureConversionUtils-d9ec654e.js","assets/OptimizedFeature-1bba65b5.js","assets/OptimizedFeatureSet-1d1ac4b9.js","assets/LayerView-5e92a124.js","assets/BaseGraphicContainer-baad2cd4.js","assets/ExpandedCIM-91f67fd3.js","assets/BidiEngine-836b7ef6.js","assets/aaBoundingRect-ca34962d.js","assets/mat2d-80bd93af.js","assets/Rect-ea14f53a.js","assets/quantizationUtils-8770173e.js","assets/GeometryUtils-eebff0a0.js","assets/floatRGBA-305df8f3.js","assets/normalizeUtilsSync-1f26dd3f.js","assets/normalizeUtils-91a64c2b.js","assets/projectionSupport-38cc9dc5.js","assets/projection-6146477c.js","assets/assets-6ba3cd63.js","assets/zscale-72b4355d.js","assets/json-48e3ea08.js","assets/labelingInfo-681dda19.js","assets/labelUtils-87bb22ff.js","assets/defaultsJSON-b087dd4d.js","assets/jsonUtils-b1b224a3.js","assets/FeatureContainer-e4e1ed67.js","assets/TileContainer-efb37002.js","assets/TileKey-ed432ae5.js","assets/Queue-8aae62d3.js","assets/visualVariablesUtils-9310c846.js","assets/visualVariablesUtils-4833b8d3.js","assets/capabilities-5736b16f.js","assets/Matcher-1409f335.js","assets/TileStrategy-40f1ecb0.js","assets/TileStore-a368d16c.js","assets/rbush-8e36784a.js","assets/quickselect-322ec8e1.js","assets/Query-066f2ccf.js","assets/TimeExtent-0fd238ea.js","assets/Field-bb784640.js","assets/fieldType-9bddd3d4.js","assets/tileUtils-23b52606.js","assets/TileClipper-48ccb501.js","assets/Geometry-daada628.js","assets/LRUCache-4d56ba4d.js","assets/MemCache-1e028041.js","assets/devEnvironmentUtils-5002a058.js","assets/styleUtils-0c73f570.js","assets/schemaUtils-36753600.js","assets/LayerFloorInfo-0d02c503.js","assets/diffUtils-713e5c9b.js","assets/createSymbolSchema-976acefa.js","assets/rendererUtils-a093890e.js","assets/FeatureReductionLayer-0deeb262.js","assets/UniqueValueRenderer-cd716182.js","assets/LegendOptions-e31ff575.js","assets/colorRamps-c00f504b.js","assets/sizeVariableUtils-d4870b0d.js","assets/compilerUtils-eefea0ec.js","assets/jsonUtils-c5ba7295.js","assets/DictionaryLoader-29adda53.js","assets/deprecate-46fadabd.js","assets/OperationalLayer-54654858.js","assets/util-94bdf933.js","assets/ComputedAttributeStorage-efef8862.js","assets/FeatureSetReader-9e0a2b1d.js","assets/centroid-7800ee74.js","assets/FieldsIndex-c06d221a.js","assets/vec3f32-4322908d.js","assets/HighlightGraphicContainer-cb442d71.js","assets/BitmapContainer-480e821d.js","assets/Bitmap-b5446edf.js","assets/ExportStrategy-aa28d495.js","assets/TileInfo-92f7dc61.js","assets/rasterProjectionHelper-050c29c5.js","assets/popupUtils-1c109923.js","assets/RefreshableLayerView-6d197c7a.js"])),"imagery-tile":()=>ae().then(()=>T(()=>import("./ImageryTileLayerView2D-bd352349.js"),["assets/ImageryTileLayerView2D-bd352349.js","assets/cast-6d78d3c7.js","assets/typedArrayUtil-d02f10a8.js","assets/string-9c5e03f7.js","assets/Error-4ed679d7.js","assets/ensureType-d98e08e1.js","assets/nextTick-3ee5a785.js","assets/promiseUtils-930cba29.js","assets/Graphic-e4fb7090.js","assets/geometry-70b2a4a5.js","assets/Extent-d5fff12d.js","assets/Polyline-42dcc920.js","assets/typeUtils-b6c52390.js","assets/jsonMap-5afaf2ff.js","assets/PopupTemplate-d6e0b369.js","assets/Clonable-58355d3c.js","assets/Collection-42fe629f.js","assets/Evented-b378ccab.js","assets/SimpleObservable-e0897cc6.js","assets/fieldUtils-141b2ff2.js","assets/preload-helper-101896b7.js","assets/arcadeOnDemand-72c57f7a.js","assets/enumeration-497ef064.js","assets/number-c7f1bfee.js","assets/locale-30120714.js","assets/Identifiable-57df9761.js","assets/symbols-64db5dd6.js","assets/CIMSymbol-a95ceb49.js","assets/Symbol-1bb07043.js","assets/Color-b7b9e6bb.js","assets/colorUtils-639f4d25.js","assets/mathUtils-daf59e84.js","assets/common-701a4199.js","assets/screenUtils-7afeb41c.js","assets/opacityUtils-8b7acc4e.js","assets/aaBoundingBox-33fc923c.js","assets/request-e4299080.js","assets/persistableUrlUtils-d18becd9.js","assets/collectionUtils-3d8a9611.js","assets/Portal-fbb2b73d.js","assets/Loadable-b0d5bb7e.js","assets/Promise-6bd0b483.js","assets/PortalGroup-813428fa.js","assets/PortalUser-cf18ae9d.js","assets/jsonUtils-5115c7e5.js","assets/reactiveUtils-b0e56010.js","assets/multidimensionalUtils-6e1dd9aa.js","assets/RasterVFDisplayObject-22512552.js","assets/HandleOwner-6ac6f00a.js","assets/VertexArrayObject-e1e46e3f.js","assets/Texture-c2297638.js","assets/context-util-abf86a85.js","assets/enums-64ab819c.js","assets/VertexElementDescriptor-2925c6af.js","assets/dataUtils-06f77c91.js","assets/pixelUtils-a3529416.js","assets/WGLContainer-69c7e591.js","assets/mat3f32-d3d088e8.js","assets/mat3-45e3f2eb.js","assets/vec2f32-461e65a9.js","assets/utils-1bc9587b.js","assets/parser-f68dd732.js","assets/mat4-62d5e6a4.js","assets/enums-4ca4641f.js","assets/MaterialKey-cec287ae.js","assets/Utils-b6ef920f.js","assets/enums-ef042d89.js","assets/heatmapUtils-90a13d85.js","assets/vec4f64-018b3fa6.js","assets/vec2f64-e0301652.js","assets/ProgramTemplate-1afb8353.js","assets/StyleDefinition-ae208a94.js","assets/config-1337d16e.js","assets/GeometryUtils-c093d234.js","assets/earcut-58237617.js","assets/vec2-f978aef8.js","assets/featureConversionUtils-d9ec654e.js","assets/OptimizedFeature-1bba65b5.js","assets/OptimizedFeatureSet-1d1ac4b9.js","assets/LayerView-5e92a124.js","assets/aaBoundingRect-ca34962d.js","assets/TileContainer-efb37002.js","assets/TileKey-ed432ae5.js","assets/TileInfo-92f7dc61.js","assets/unitUtils-b69647a1.js","assets/RawBlockCache-7d1f94ee.js","assets/rasterProjectionHelper-050c29c5.js","assets/projection-6146477c.js","assets/assets-6ba3cd63.js","assets/zscale-72b4355d.js","assets/TileStrategy-40f1ecb0.js","assets/TileStore-a368d16c.js","assets/Queue-8aae62d3.js","assets/rbush-8e36784a.js","assets/quickselect-322ec8e1.js","assets/Query-066f2ccf.js","assets/TimeExtent-0fd238ea.js","assets/Field-bb784640.js","assets/fieldType-9bddd3d4.js","assets/capabilities-5736b16f.js","assets/util-94bdf933.js","assets/OperationalLayer-54654858.js","assets/ElevationInfo-28459ff1.js","assets/lengthUtils-0dde2114.js","assets/popupUtils-1c109923.js","assets/RefreshableLayerView-6d197c7a.js","assets/Basemap-5353f87f.js","assets/deprecate-46fadabd.js","assets/loadAll-1ae88564.js","assets/asyncUtils-18831bb1.js","assets/PortalItem-69c4a143.js","assets/messages-634811b5.js","assets/writeUtils-44b0e78b.js","assets/layerUtils-6996b9ea.js","assets/compilerUtils-eefea0ec.js","assets/CollectionFlattener-b89887c0.js","assets/TablesMixin-402d03d2.js","assets/Layer-739799ab.js","assets/Cyclical-1a93cb12.js","assets/workers-7aef8bf1.js","assets/Connection-dd24ab83.js","assets/intl-a5c99ea3.js","assets/widget-4becb80f.js","assets/uuid-73213768.js","assets/byteSizeEstimations-90c5a50d.js","assets/executeQueryJSON-bf3dc024.js","assets/normalizeUtils-91a64c2b.js","assets/query-4348ce6f.js","assets/pbfQueryUtils-91f50fb5.js","assets/pbf-e4fd0249.js","assets/queryZScale-1674984c.js","assets/FeatureSet-1cc04f9b.js","assets/RelationshipQuery-b5b427dc.js","assets/LegendOptions-e31ff575.js","assets/utils-46b35833.js","assets/ItemCache-b4db8f82.js","assets/MemCache-1e028041.js","assets/jsonUtils-c5ba7295.js","assets/UniqueValueRenderer-cd716182.js","assets/diffUtils-713e5c9b.js","assets/colorRamps-c00f504b.js","assets/sizeVariableUtils-d4870b0d.js","assets/jsonUtils-b1b224a3.js","assets/styleUtils-0c73f570.js","assets/DictionaryLoader-29adda53.js","assets/LRUCache-4d56ba4d.js","assets/TopFeaturesQuery-7da1d7c1.js","assets/FeatureLayer-1a0dd9ce.js","assets/MultiOriginJSONSupport-1970ed0f.js","assets/LayerFloorInfo-0d02c503.js","assets/FeatureLayerBase-d34c9a8c.js","assets/HeightModelInfo-645087b5.js","assets/arcgisLayerUrl-02fe1a62.js","assets/editsZScale-e318eb4a.js","assets/APIKeyMixin-f90cfebd.js","assets/ArcGISService-f6f32fbc.js","assets/BlendLayer-7a735871.js","assets/CustomParametersMixin-5e3018da.js","assets/EditBusLayer-1372e92b.js","assets/FeatureReductionLayer-0deeb262.js","assets/labelingInfo-681dda19.js","assets/labelUtils-87bb22ff.js","assets/defaultsJSON-b087dd4d.js","assets/OrderedLayer-7b3473c8.js","assets/PortalLayer-644d657e.js","assets/RefreshableLayer-84ec1468.js","assets/ScaleRangeLayer-c6a35aba.js","assets/TemporalLayer-d41a81db.js","assets/TimeInfo-a1791ae0.js","assets/FeatureTemplate-773a8865.js","assets/FeatureType-6c50f4e3.js","assets/fieldProperties-c2bdcd57.js","assets/FieldsIndex-c06d221a.js","assets/versionUtils-5ccafbea.js","assets/styleUtils-45e2d86c.js","assets/popupUtils-ea7b7951.js","assets/mat2d-80bd93af.js","assets/Scheduler-343fdba6.js","assets/GraphicsLayer-caff0dcf.js","assets/ViewingMode-fb6259a5.js","assets/unitBezier-881ac1eb.js","assets/datetime-7cb5ae9e.js"])),kml:()=>ae().then(()=>T(()=>import("./KMLLayerView2D-2bdaeda5.js"),["assets/KMLLayerView2D-2bdaeda5.js","assets/cast-6d78d3c7.js","assets/typedArrayUtil-d02f10a8.js","assets/string-9c5e03f7.js","assets/Error-4ed679d7.js","assets/ensureType-d98e08e1.js","assets/nextTick-3ee5a785.js","assets/promiseUtils-930cba29.js","assets/request-e4299080.js","assets/preload-helper-101896b7.js","assets/Collection-42fe629f.js","assets/Evented-b378ccab.js","assets/SimpleObservable-e0897cc6.js","assets/reactiveUtils-b0e56010.js","assets/Extent-d5fff12d.js","assets/projection-6146477c.js","assets/mathUtils-daf59e84.js","assets/common-701a4199.js","assets/unitUtils-b69647a1.js","assets/jsonMap-5afaf2ff.js","assets/mat4-62d5e6a4.js","assets/Polyline-42dcc920.js","assets/assets-6ba3cd63.js","assets/zscale-72b4355d.js","assets/kmlUtils-ea5853f3.js","assets/PopupTemplate-d6e0b369.js","assets/Clonable-58355d3c.js","assets/fieldUtils-141b2ff2.js","assets/arcadeOnDemand-72c57f7a.js","assets/geometry-70b2a4a5.js","assets/typeUtils-b6c52390.js","assets/enumeration-497ef064.js","assets/number-c7f1bfee.js","assets/locale-30120714.js","assets/Identifiable-57df9761.js","assets/aaBoundingBox-33fc923c.js","assets/jsonUtils-c5ba7295.js","assets/UniqueValueRenderer-cd716182.js","assets/symbols-64db5dd6.js","assets/CIMSymbol-a95ceb49.js","assets/Symbol-1bb07043.js","assets/Color-b7b9e6bb.js","assets/colorUtils-639f4d25.js","assets/screenUtils-7afeb41c.js","assets/opacityUtils-8b7acc4e.js","assets/persistableUrlUtils-d18becd9.js","assets/collectionUtils-3d8a9611.js","assets/Portal-fbb2b73d.js","assets/Loadable-b0d5bb7e.js","assets/Promise-6bd0b483.js","assets/PortalGroup-813428fa.js","assets/PortalUser-cf18ae9d.js","assets/LegendOptions-e31ff575.js","assets/diffUtils-713e5c9b.js","assets/colorRamps-c00f504b.js","assets/sizeVariableUtils-d4870b0d.js","assets/Graphic-e4fb7090.js","assets/jsonUtils-5115c7e5.js","assets/compilerUtils-eefea0ec.js","assets/lengthUtils-0dde2114.js","assets/jsonUtils-b1b224a3.js","assets/styleUtils-0c73f570.js","assets/DictionaryLoader-29adda53.js","assets/LRUCache-4d56ba4d.js","assets/MemCache-1e028041.js","assets/deprecate-46fadabd.js","assets/heatmapUtils-90a13d85.js","assets/vec4f64-018b3fa6.js","assets/FeatureSet-1cc04f9b.js","assets/Field-bb784640.js","assets/fieldType-9bddd3d4.js","assets/normalizeUtils-91a64c2b.js","assets/GraphicsLayer-caff0dcf.js","assets/HandleOwner-6ac6f00a.js","assets/Layer-739799ab.js","assets/BlendLayer-7a735871.js","assets/parser-f68dd732.js","assets/ScaleRangeLayer-c6a35aba.js","assets/ElevationInfo-28459ff1.js","assets/Bitmap-b5446edf.js","assets/mat3-45e3f2eb.js","assets/mat3f32-d3d088e8.js","assets/vec2f32-461e65a9.js","assets/utils-1bc9587b.js","assets/enums-4ca4641f.js","assets/MaterialKey-cec287ae.js","assets/Utils-b6ef920f.js","assets/enums-ef042d89.js","assets/enums-64ab819c.js","assets/Texture-c2297638.js","assets/context-util-abf86a85.js","assets/VertexElementDescriptor-2925c6af.js","assets/BitmapContainer-480e821d.js","assets/WGLContainer-69c7e591.js","assets/pixelUtils-a3529416.js","assets/vec2f64-e0301652.js","assets/VertexArrayObject-e1e46e3f.js","assets/ProgramTemplate-1afb8353.js","assets/StyleDefinition-ae208a94.js","assets/config-1337d16e.js","assets/GeometryUtils-c093d234.js","assets/earcut-58237617.js","assets/vec2-f978aef8.js","assets/featureConversionUtils-d9ec654e.js","assets/OptimizedFeature-1bba65b5.js","assets/OptimizedFeatureSet-1d1ac4b9.js","assets/LayerView-5e92a124.js","assets/GraphicContainer-cd91331c.js","assets/BaseGraphicContainer-baad2cd4.js","assets/ExpandedCIM-91f67fd3.js","assets/BidiEngine-836b7ef6.js","assets/aaBoundingRect-ca34962d.js","assets/mat2d-80bd93af.js","assets/Rect-ea14f53a.js","assets/quantizationUtils-8770173e.js","assets/GeometryUtils-eebff0a0.js","assets/floatRGBA-305df8f3.js","assets/normalizeUtilsSync-1f26dd3f.js","assets/projectionSupport-38cc9dc5.js","assets/json-48e3ea08.js","assets/labelingInfo-681dda19.js","assets/labelUtils-87bb22ff.js","assets/defaultsJSON-b087dd4d.js","assets/FeatureContainer-e4e1ed67.js","assets/TileContainer-efb37002.js","assets/TileKey-ed432ae5.js","assets/Queue-8aae62d3.js","assets/visualVariablesUtils-9310c846.js","assets/visualVariablesUtils-4833b8d3.js","assets/capabilities-5736b16f.js","assets/Matcher-1409f335.js","assets/TileStrategy-40f1ecb0.js","assets/TileStore-a368d16c.js","assets/rbush-8e36784a.js","assets/quickselect-322ec8e1.js","assets/Query-066f2ccf.js","assets/TimeExtent-0fd238ea.js","assets/tileUtils-23b52606.js","assets/TileClipper-48ccb501.js","assets/Geometry-daada628.js","assets/devEnvironmentUtils-5002a058.js","assets/schemaUtils-36753600.js","assets/LayerFloorInfo-0d02c503.js","assets/createSymbolSchema-976acefa.js","assets/rendererUtils-a093890e.js","assets/FeatureReductionLayer-0deeb262.js","assets/OperationalLayer-54654858.js","assets/util-94bdf933.js","assets/ComputedAttributeStorage-efef8862.js","assets/FeatureSetReader-9e0a2b1d.js","assets/centroid-7800ee74.js","assets/FieldsIndex-c06d221a.js","assets/vec3f32-4322908d.js","assets/rasterProjectionHelper-050c29c5.js","assets/RenderingContext-b8526b4a.js","assets/programUtils-fb70f3b3.js","assets/OrderIndependentTransparency-602f26c2.js"])),"map-image":()=>ae().then(()=>T(()=>import("./MapImageLayerView2D-d759bc4a.js"),["assets/MapImageLayerView2D-d759bc4a.js","assets/cast-6d78d3c7.js","assets/typedArrayUtil-d02f10a8.js","assets/string-9c5e03f7.js","assets/Error-4ed679d7.js","assets/ensureType-d98e08e1.js","assets/nextTick-3ee5a785.js","assets/promiseUtils-930cba29.js","assets/Graphic-e4fb7090.js","assets/geometry-70b2a4a5.js","assets/Extent-d5fff12d.js","assets/Polyline-42dcc920.js","assets/typeUtils-b6c52390.js","assets/jsonMap-5afaf2ff.js","assets/PopupTemplate-d6e0b369.js","assets/Clonable-58355d3c.js","assets/Collection-42fe629f.js","assets/Evented-b378ccab.js","assets/SimpleObservable-e0897cc6.js","assets/fieldUtils-141b2ff2.js","assets/preload-helper-101896b7.js","assets/arcadeOnDemand-72c57f7a.js","assets/enumeration-497ef064.js","assets/number-c7f1bfee.js","assets/locale-30120714.js","assets/Identifiable-57df9761.js","assets/symbols-64db5dd6.js","assets/CIMSymbol-a95ceb49.js","assets/Symbol-1bb07043.js","assets/Color-b7b9e6bb.js","assets/colorUtils-639f4d25.js","assets/mathUtils-daf59e84.js","assets/common-701a4199.js","assets/screenUtils-7afeb41c.js","assets/opacityUtils-8b7acc4e.js","assets/aaBoundingBox-33fc923c.js","assets/request-e4299080.js","assets/persistableUrlUtils-d18becd9.js","assets/collectionUtils-3d8a9611.js","assets/Portal-fbb2b73d.js","assets/Loadable-b0d5bb7e.js","assets/Promise-6bd0b483.js","assets/PortalGroup-813428fa.js","assets/PortalUser-cf18ae9d.js","assets/jsonUtils-5115c7e5.js","assets/reactiveUtils-b0e56010.js","assets/BitmapContainer-480e821d.js","assets/WGLContainer-69c7e591.js","assets/mat3f32-d3d088e8.js","assets/enums-64ab819c.js","assets/mat3-45e3f2eb.js","assets/vec2f32-461e65a9.js","assets/pixelUtils-a3529416.js","assets/utils-1bc9587b.js","assets/parser-f68dd732.js","assets/mat4-62d5e6a4.js","assets/enums-4ca4641f.js","assets/MaterialKey-cec287ae.js","assets/Utils-b6ef920f.js","assets/enums-ef042d89.js","assets/Texture-c2297638.js","assets/context-util-abf86a85.js","assets/VertexElementDescriptor-2925c6af.js","assets/heatmapUtils-90a13d85.js","assets/vec4f64-018b3fa6.js","assets/vec2f64-e0301652.js","assets/VertexArrayObject-e1e46e3f.js","assets/ProgramTemplate-1afb8353.js","assets/StyleDefinition-ae208a94.js","assets/config-1337d16e.js","assets/GeometryUtils-c093d234.js","assets/earcut-58237617.js","assets/vec2-f978aef8.js","assets/featureConversionUtils-d9ec654e.js","assets/OptimizedFeature-1bba65b5.js","assets/OptimizedFeatureSet-1d1ac4b9.js","assets/LayerView-5e92a124.js","assets/HandleOwner-6ac6f00a.js","assets/BaseGraphicContainer-baad2cd4.js","assets/ExpandedCIM-91f67fd3.js","assets/BidiEngine-836b7ef6.js","assets/aaBoundingRect-ca34962d.js","assets/mat2d-80bd93af.js","assets/Rect-ea14f53a.js","assets/quantizationUtils-8770173e.js","assets/GeometryUtils-eebff0a0.js","assets/floatRGBA-305df8f3.js","assets/normalizeUtilsSync-1f26dd3f.js","assets/normalizeUtils-91a64c2b.js","assets/projectionSupport-38cc9dc5.js","assets/projection-6146477c.js","assets/unitUtils-b69647a1.js","assets/assets-6ba3cd63.js","assets/zscale-72b4355d.js","assets/json-48e3ea08.js","assets/labelingInfo-681dda19.js","assets/labelUtils-87bb22ff.js","assets/defaultsJSON-b087dd4d.js","assets/jsonUtils-b1b224a3.js","assets/FeatureContainer-e4e1ed67.js","assets/TileContainer-efb37002.js","assets/TileKey-ed432ae5.js","assets/Queue-8aae62d3.js","assets/visualVariablesUtils-9310c846.js","assets/visualVariablesUtils-4833b8d3.js","assets/lengthUtils-0dde2114.js","assets/capabilities-5736b16f.js","assets/Matcher-1409f335.js","assets/TileStrategy-40f1ecb0.js","assets/TileStore-a368d16c.js","assets/rbush-8e36784a.js","assets/quickselect-322ec8e1.js","assets/Query-066f2ccf.js","assets/TimeExtent-0fd238ea.js","assets/Field-bb784640.js","assets/fieldType-9bddd3d4.js","assets/tileUtils-23b52606.js","assets/TileClipper-48ccb501.js","assets/Geometry-daada628.js","assets/LRUCache-4d56ba4d.js","assets/MemCache-1e028041.js","assets/devEnvironmentUtils-5002a058.js","assets/styleUtils-0c73f570.js","assets/schemaUtils-36753600.js","assets/LayerFloorInfo-0d02c503.js","assets/diffUtils-713e5c9b.js","assets/createSymbolSchema-976acefa.js","assets/rendererUtils-a093890e.js","assets/FeatureReductionLayer-0deeb262.js","assets/BlendLayer-7a735871.js","assets/UniqueValueRenderer-cd716182.js","assets/LegendOptions-e31ff575.js","assets/colorRamps-c00f504b.js","assets/sizeVariableUtils-d4870b0d.js","assets/compilerUtils-eefea0ec.js","assets/jsonUtils-c5ba7295.js","assets/DictionaryLoader-29adda53.js","assets/deprecate-46fadabd.js","assets/OperationalLayer-54654858.js","assets/ElevationInfo-28459ff1.js","assets/util-94bdf933.js","assets/ComputedAttributeStorage-efef8862.js","assets/FeatureSetReader-9e0a2b1d.js","assets/centroid-7800ee74.js","assets/FieldsIndex-c06d221a.js","assets/vec3f32-4322908d.js","assets/HighlightGraphicContainer-cb442d71.js","assets/ExportStrategy-aa28d495.js","assets/TileInfo-92f7dc61.js","assets/Bitmap-b5446edf.js","assets/scaleUtils-a6834d30.js","assets/ExportImageParameters-322c872d.js","assets/floorFilterUtils-080a7cd2.js","assets/sublayerUtils-5b8ae1f1.js","assets/drapedUtils-06632e8a.js","assets/GraphicsLayer-caff0dcf.js","assets/Layer-739799ab.js","assets/ScaleRangeLayer-c6a35aba.js","assets/popupUtils-1c109923.js","assets/RefreshableLayerView-6d197c7a.js"])),"map-notes":()=>ae().then(()=>T(()=>import("./MapNotesLayerView2D-54707575.js"),["assets/MapNotesLayerView2D-54707575.js","assets/cast-6d78d3c7.js","assets/typedArrayUtil-d02f10a8.js","assets/string-9c5e03f7.js","assets/Error-4ed679d7.js","assets/ensureType-d98e08e1.js","assets/nextTick-3ee5a785.js","assets/promiseUtils-930cba29.js","assets/Graphic-e4fb7090.js","assets/geometry-70b2a4a5.js","assets/Extent-d5fff12d.js","assets/Polyline-42dcc920.js","assets/typeUtils-b6c52390.js","assets/jsonMap-5afaf2ff.js","assets/PopupTemplate-d6e0b369.js","assets/Clonable-58355d3c.js","assets/Collection-42fe629f.js","assets/Evented-b378ccab.js","assets/SimpleObservable-e0897cc6.js","assets/fieldUtils-141b2ff2.js","assets/preload-helper-101896b7.js","assets/arcadeOnDemand-72c57f7a.js","assets/enumeration-497ef064.js","assets/number-c7f1bfee.js","assets/locale-30120714.js","assets/Identifiable-57df9761.js","assets/symbols-64db5dd6.js","assets/CIMSymbol-a95ceb49.js","assets/Symbol-1bb07043.js","assets/Color-b7b9e6bb.js","assets/colorUtils-639f4d25.js","assets/mathUtils-daf59e84.js","assets/common-701a4199.js","assets/screenUtils-7afeb41c.js","assets/opacityUtils-8b7acc4e.js","assets/aaBoundingBox-33fc923c.js","assets/request-e4299080.js","assets/persistableUrlUtils-d18becd9.js","assets/collectionUtils-3d8a9611.js","assets/Portal-fbb2b73d.js","assets/Loadable-b0d5bb7e.js","assets/Promise-6bd0b483.js","assets/PortalGroup-813428fa.js","assets/PortalUser-cf18ae9d.js","assets/jsonUtils-5115c7e5.js","assets/reactiveUtils-b0e56010.js","assets/utils-1bc9587b.js","assets/mat3f32-d3d088e8.js","assets/parser-f68dd732.js","assets/mat4-62d5e6a4.js","assets/enums-4ca4641f.js","assets/MaterialKey-cec287ae.js","assets/Utils-b6ef920f.js","assets/enums-ef042d89.js","assets/enums-64ab819c.js","assets/Texture-c2297638.js","assets/context-util-abf86a85.js","assets/VertexElementDescriptor-2925c6af.js","assets/heatmapUtils-90a13d85.js","assets/vec4f64-018b3fa6.js","assets/GroupContainer-13f6834c.js","assets/WGLContainer-69c7e591.js","assets/mat3-45e3f2eb.js","assets/vec2f32-461e65a9.js","assets/pixelUtils-a3529416.js","assets/vec2f64-e0301652.js","assets/VertexArrayObject-e1e46e3f.js","assets/ProgramTemplate-1afb8353.js","assets/StyleDefinition-ae208a94.js","assets/config-1337d16e.js","assets/GeometryUtils-c093d234.js","assets/earcut-58237617.js","assets/vec2-f978aef8.js","assets/featureConversionUtils-d9ec654e.js","assets/OptimizedFeature-1bba65b5.js","assets/OptimizedFeatureSet-1d1ac4b9.js","assets/LayerView-5e92a124.js","assets/HandleOwner-6ac6f00a.js","assets/GraphicContainer-cd91331c.js","assets/BaseGraphicContainer-baad2cd4.js","assets/ExpandedCIM-91f67fd3.js","assets/BidiEngine-836b7ef6.js","assets/aaBoundingRect-ca34962d.js","assets/mat2d-80bd93af.js","assets/Rect-ea14f53a.js","assets/quantizationUtils-8770173e.js","assets/GeometryUtils-eebff0a0.js","assets/floatRGBA-305df8f3.js","assets/normalizeUtilsSync-1f26dd3f.js","assets/normalizeUtils-91a64c2b.js","assets/projectionSupport-38cc9dc5.js","assets/projection-6146477c.js","assets/unitUtils-b69647a1.js","assets/assets-6ba3cd63.js","assets/zscale-72b4355d.js","assets/json-48e3ea08.js","assets/labelingInfo-681dda19.js","assets/labelUtils-87bb22ff.js","assets/defaultsJSON-b087dd4d.js","assets/jsonUtils-b1b224a3.js","assets/FeatureContainer-e4e1ed67.js","assets/TileContainer-efb37002.js","assets/TileKey-ed432ae5.js","assets/Queue-8aae62d3.js","assets/visualVariablesUtils-9310c846.js","assets/visualVariablesUtils-4833b8d3.js","assets/lengthUtils-0dde2114.js","assets/capabilities-5736b16f.js","assets/Matcher-1409f335.js","assets/TileStrategy-40f1ecb0.js","assets/TileStore-a368d16c.js","assets/rbush-8e36784a.js","assets/quickselect-322ec8e1.js","assets/Query-066f2ccf.js","assets/TimeExtent-0fd238ea.js","assets/Field-bb784640.js","assets/fieldType-9bddd3d4.js","assets/tileUtils-23b52606.js","assets/TileClipper-48ccb501.js","assets/Geometry-daada628.js","assets/LRUCache-4d56ba4d.js","assets/MemCache-1e028041.js","assets/devEnvironmentUtils-5002a058.js","assets/styleUtils-0c73f570.js","assets/schemaUtils-36753600.js","assets/LayerFloorInfo-0d02c503.js","assets/diffUtils-713e5c9b.js","assets/createSymbolSchema-976acefa.js","assets/rendererUtils-a093890e.js","assets/FeatureReductionLayer-0deeb262.js","assets/BlendLayer-7a735871.js","assets/UniqueValueRenderer-cd716182.js","assets/LegendOptions-e31ff575.js","assets/colorRamps-c00f504b.js","assets/sizeVariableUtils-d4870b0d.js","assets/compilerUtils-eefea0ec.js","assets/jsonUtils-c5ba7295.js","assets/DictionaryLoader-29adda53.js","assets/deprecate-46fadabd.js","assets/OperationalLayer-54654858.js","assets/ElevationInfo-28459ff1.js","assets/util-94bdf933.js","assets/ComputedAttributeStorage-efef8862.js","assets/FeatureSetReader-9e0a2b1d.js","assets/centroid-7800ee74.js","assets/FieldsIndex-c06d221a.js","assets/vec3f32-4322908d.js"])),media:()=>ae().then(()=>T(()=>import("./MediaLayerView2D-09c164da.js"),["assets/MediaLayerView2D-09c164da.js","assets/cast-6d78d3c7.js","assets/typedArrayUtil-d02f10a8.js","assets/string-9c5e03f7.js","assets/Error-4ed679d7.js","assets/ensureType-d98e08e1.js","assets/nextTick-3ee5a785.js","assets/promiseUtils-930cba29.js","assets/geometry-70b2a4a5.js","assets/Extent-d5fff12d.js","assets/Polyline-42dcc920.js","assets/typeUtils-b6c52390.js","assets/jsonMap-5afaf2ff.js","assets/Collection-42fe629f.js","assets/Evented-b378ccab.js","assets/SimpleObservable-e0897cc6.js","assets/reactiveUtils-b0e56010.js","assets/aaBoundingRect-ca34962d.js","assets/mathUtils-daf59e84.js","assets/common-701a4199.js","assets/projection-6146477c.js","assets/preload-helper-101896b7.js","assets/unitUtils-b69647a1.js","assets/mat4-62d5e6a4.js","assets/assets-6ba3cd63.js","assets/request-e4299080.js","assets/zscale-72b4355d.js","assets/normalizeUtilsSync-1f26dd3f.js","assets/jsonUtils-5115c7e5.js","assets/normalizeUtils-91a64c2b.js","assets/TileStrategy-40f1ecb0.js","assets/vec2-f978aef8.js","assets/TileStore-a368d16c.js","assets/Queue-8aae62d3.js","assets/TileKey-ed432ae5.js","assets/rbush-8e36784a.js","assets/quickselect-322ec8e1.js","assets/Query-066f2ccf.js","assets/TimeExtent-0fd238ea.js","assets/enumeration-497ef064.js","assets/Field-bb784640.js","assets/fieldType-9bddd3d4.js","assets/Clonable-58355d3c.js","assets/mat3-45e3f2eb.js","assets/mat3f64-b33e332c.js","assets/vec2f64-e0301652.js","assets/utils-1bc9587b.js","assets/mat3f32-d3d088e8.js","assets/parser-f68dd732.js","assets/colorUtils-639f4d25.js","assets/screenUtils-7afeb41c.js","assets/enums-4ca4641f.js","assets/MaterialKey-cec287ae.js","assets/Utils-b6ef920f.js","assets/enums-ef042d89.js","assets/enums-64ab819c.js","assets/Texture-c2297638.js","assets/context-util-abf86a85.js","assets/VertexElementDescriptor-2925c6af.js","assets/heatmapUtils-90a13d85.js","assets/vec4f64-018b3fa6.js","assets/Color-b7b9e6bb.js","assets/VertexArrayObject-e1e46e3f.js","assets/vec2f32-461e65a9.js","assets/vec3f32-4322908d.js","assets/WGLContainer-69c7e591.js","assets/pixelUtils-a3529416.js","assets/ProgramTemplate-1afb8353.js","assets/StyleDefinition-ae208a94.js","assets/config-1337d16e.js","assets/GeometryUtils-c093d234.js","assets/earcut-58237617.js","assets/featureConversionUtils-d9ec654e.js","assets/OptimizedFeature-1bba65b5.js","assets/OptimizedFeatureSet-1d1ac4b9.js","assets/LayerView-5e92a124.js","assets/collectionUtils-3d8a9611.js","assets/HandleOwner-6ac6f00a.js","assets/Identifiable-57df9761.js","assets/Promise-6bd0b483.js","assets/Basemap-5353f87f.js","assets/deprecate-46fadabd.js","assets/Loadable-b0d5bb7e.js","assets/loadAll-1ae88564.js","assets/asyncUtils-18831bb1.js","assets/Portal-fbb2b73d.js","assets/locale-30120714.js","assets/PortalGroup-813428fa.js","assets/PortalUser-cf18ae9d.js","assets/PortalItem-69c4a143.js","assets/messages-634811b5.js","assets/writeUtils-44b0e78b.js","assets/layerUtils-6996b9ea.js","assets/compilerUtils-eefea0ec.js","assets/opacityUtils-8b7acc4e.js","assets/CollectionFlattener-b89887c0.js","assets/TablesMixin-402d03d2.js","assets/Layer-739799ab.js","assets/Graphic-e4fb7090.js","assets/PopupTemplate-d6e0b369.js","assets/fieldUtils-141b2ff2.js","assets/arcadeOnDemand-72c57f7a.js","assets/number-c7f1bfee.js","assets/symbols-64db5dd6.js","assets/CIMSymbol-a95ceb49.js","assets/Symbol-1bb07043.js","assets/aaBoundingBox-33fc923c.js","assets/persistableUrlUtils-d18becd9.js","assets/Cyclical-1a93cb12.js","assets/workers-7aef8bf1.js","assets/Connection-dd24ab83.js","assets/intl-a5c99ea3.js","assets/TileInfo-92f7dc61.js","assets/widget-4becb80f.js","assets/uuid-73213768.js","assets/byteSizeEstimations-90c5a50d.js","assets/executeQueryJSON-bf3dc024.js","assets/query-4348ce6f.js","assets/pbfQueryUtils-91f50fb5.js","assets/pbf-e4fd0249.js","assets/queryZScale-1674984c.js","assets/FeatureSet-1cc04f9b.js","assets/RelationshipQuery-b5b427dc.js","assets/LegendOptions-e31ff575.js","assets/utils-46b35833.js","assets/ItemCache-b4db8f82.js","assets/MemCache-1e028041.js","assets/jsonUtils-c5ba7295.js","assets/UniqueValueRenderer-cd716182.js","assets/diffUtils-713e5c9b.js","assets/colorRamps-c00f504b.js","assets/sizeVariableUtils-d4870b0d.js","assets/lengthUtils-0dde2114.js","assets/jsonUtils-b1b224a3.js","assets/styleUtils-0c73f570.js","assets/DictionaryLoader-29adda53.js","assets/LRUCache-4d56ba4d.js","assets/TopFeaturesQuery-7da1d7c1.js","assets/FeatureLayer-1a0dd9ce.js","assets/MultiOriginJSONSupport-1970ed0f.js","assets/LayerFloorInfo-0d02c503.js","assets/FeatureLayerBase-d34c9a8c.js","assets/HeightModelInfo-645087b5.js","assets/arcgisLayerUrl-02fe1a62.js","assets/OperationalLayer-54654858.js","assets/ElevationInfo-28459ff1.js","assets/editsZScale-e318eb4a.js","assets/APIKeyMixin-f90cfebd.js","assets/ArcGISService-f6f32fbc.js","assets/BlendLayer-7a735871.js","assets/CustomParametersMixin-5e3018da.js","assets/EditBusLayer-1372e92b.js","assets/FeatureReductionLayer-0deeb262.js","assets/labelingInfo-681dda19.js","assets/labelUtils-87bb22ff.js","assets/defaultsJSON-b087dd4d.js","assets/OrderedLayer-7b3473c8.js","assets/PortalLayer-644d657e.js","assets/RefreshableLayer-84ec1468.js","assets/ScaleRangeLayer-c6a35aba.js","assets/TemporalLayer-d41a81db.js","assets/TimeInfo-a1791ae0.js","assets/FeatureTemplate-773a8865.js","assets/FeatureType-6c50f4e3.js","assets/fieldProperties-c2bdcd57.js","assets/FieldsIndex-c06d221a.js","assets/versionUtils-5ccafbea.js","assets/styleUtils-45e2d86c.js","assets/popupUtils-ea7b7951.js","assets/mat2d-80bd93af.js","assets/Scheduler-343fdba6.js","assets/GraphicsLayer-caff0dcf.js","assets/ViewingMode-fb6259a5.js","assets/unitBezier-881ac1eb.js","assets/capabilities-5736b16f.js","assets/datetime-7cb5ae9e.js"])),"ogc-feature":()=>ae().then(()=>T(()=>import("./OGCFeatureLayerView2D-2b328c67.js"),["assets/OGCFeatureLayerView2D-2b328c67.js","assets/cast-6d78d3c7.js","assets/typedArrayUtil-d02f10a8.js","assets/string-9c5e03f7.js","assets/Error-4ed679d7.js","assets/ensureType-d98e08e1.js","assets/nextTick-3ee5a785.js","assets/promiseUtils-930cba29.js","assets/FeatureLayerView2D-813b3c9f.js","assets/Graphic-e4fb7090.js","assets/geometry-70b2a4a5.js","assets/Extent-d5fff12d.js","assets/Polyline-42dcc920.js","assets/typeUtils-b6c52390.js","assets/jsonMap-5afaf2ff.js","assets/PopupTemplate-d6e0b369.js","assets/Clonable-58355d3c.js","assets/Collection-42fe629f.js","assets/Evented-b378ccab.js","assets/SimpleObservable-e0897cc6.js","assets/fieldUtils-141b2ff2.js","assets/preload-helper-101896b7.js","assets/arcadeOnDemand-72c57f7a.js","assets/enumeration-497ef064.js","assets/number-c7f1bfee.js","assets/locale-30120714.js","assets/Identifiable-57df9761.js","assets/symbols-64db5dd6.js","assets/CIMSymbol-a95ceb49.js","assets/Symbol-1bb07043.js","assets/Color-b7b9e6bb.js","assets/colorUtils-639f4d25.js","assets/mathUtils-daf59e84.js","assets/common-701a4199.js","assets/screenUtils-7afeb41c.js","assets/opacityUtils-8b7acc4e.js","assets/aaBoundingBox-33fc923c.js","assets/request-e4299080.js","assets/persistableUrlUtils-d18becd9.js","assets/collectionUtils-3d8a9611.js","assets/Portal-fbb2b73d.js","assets/Loadable-b0d5bb7e.js","assets/Promise-6bd0b483.js","assets/PortalGroup-813428fa.js","assets/PortalUser-cf18ae9d.js","assets/jsonUtils-5115c7e5.js","assets/reactiveUtils-b0e56010.js","assets/utils-1bc9587b.js","assets/mat3f32-d3d088e8.js","assets/parser-f68dd732.js","assets/mat4-62d5e6a4.js","assets/enums-4ca4641f.js","assets/MaterialKey-cec287ae.js","assets/Utils-b6ef920f.js","assets/enums-ef042d89.js","assets/enums-64ab819c.js","assets/Texture-c2297638.js","assets/context-util-abf86a85.js","assets/VertexElementDescriptor-2925c6af.js","assets/heatmapUtils-90a13d85.js","assets/vec4f64-018b3fa6.js","assets/FeatureReductionLayer-0deeb262.js","assets/BlendLayer-7a735871.js","assets/TimeExtent-0fd238ea.js","assets/Query-066f2ccf.js","assets/Field-bb784640.js","assets/fieldType-9bddd3d4.js","assets/UniqueValueRenderer-cd716182.js","assets/LegendOptions-e31ff575.js","assets/diffUtils-713e5c9b.js","assets/colorRamps-c00f504b.js","assets/sizeVariableUtils-d4870b0d.js","assets/compilerUtils-eefea0ec.js","assets/lengthUtils-0dde2114.js","assets/unitUtils-b69647a1.js","assets/jsonUtils-b1b224a3.js","assets/styleUtils-0c73f570.js","assets/jsonUtils-c5ba7295.js","assets/DictionaryLoader-29adda53.js","assets/LRUCache-4d56ba4d.js","assets/MemCache-1e028041.js","assets/deprecate-46fadabd.js","assets/OperationalLayer-54654858.js","assets/ElevationInfo-28459ff1.js","assets/labelingInfo-681dda19.js","assets/labelUtils-87bb22ff.js","assets/defaultsJSON-b087dd4d.js","assets/FeatureSet-1cc04f9b.js","assets/LayerView-5e92a124.js","assets/HandleOwner-6ac6f00a.js","assets/schemaUtils-36753600.js","assets/LayerFloorInfo-0d02c503.js","assets/visualVariablesUtils-4833b8d3.js","assets/createSymbolSchema-976acefa.js","assets/ExpandedCIM-91f67fd3.js","assets/BidiEngine-836b7ef6.js","assets/aaBoundingRect-ca34962d.js","assets/mat2d-80bd93af.js","assets/vec2-f978aef8.js","assets/vec2f32-461e65a9.js","assets/Rect-ea14f53a.js","assets/quantizationUtils-8770173e.js","assets/GeometryUtils-eebff0a0.js","assets/floatRGBA-305df8f3.js","assets/rendererUtils-a093890e.js","assets/capabilities-5736b16f.js","assets/util-94bdf933.js","assets/TileStore-a368d16c.js","assets/Queue-8aae62d3.js","assets/TileKey-ed432ae5.js","assets/rbush-8e36784a.js","assets/quickselect-322ec8e1.js","assets/workers-7aef8bf1.js","assets/Connection-dd24ab83.js","assets/assets-6ba3cd63.js","assets/intl-a5c99ea3.js","assets/messages-634811b5.js","assets/floorFilterUtils-080a7cd2.js","assets/popupUtils-1c109923.js","assets/RefreshableLayerView-6d197c7a.js"])),"open-street-map":es,"oriented-imagery":ts,route:()=>ae().then(()=>T(()=>import("./RouteLayerView2D-fd84e04c.js"),["assets/RouteLayerView2D-fd84e04c.js","assets/cast-6d78d3c7.js","assets/typedArrayUtil-d02f10a8.js","assets/string-9c5e03f7.js","assets/Error-4ed679d7.js","assets/ensureType-d98e08e1.js","assets/nextTick-3ee5a785.js","assets/promiseUtils-930cba29.js","assets/Collection-42fe629f.js","assets/Evented-b378ccab.js","assets/SimpleObservable-e0897cc6.js","assets/CollectionFlattener-b89887c0.js","assets/reactiveUtils-b0e56010.js","assets/Stop-edfcfc47.js","assets/Graphic-e4fb7090.js","assets/geometry-70b2a4a5.js","assets/Extent-d5fff12d.js","assets/Polyline-42dcc920.js","assets/typeUtils-b6c52390.js","assets/jsonMap-5afaf2ff.js","assets/PopupTemplate-d6e0b369.js","assets/Clonable-58355d3c.js","assets/fieldUtils-141b2ff2.js","assets/preload-helper-101896b7.js","assets/arcadeOnDemand-72c57f7a.js","assets/enumeration-497ef064.js","assets/number-c7f1bfee.js","assets/locale-30120714.js","assets/Identifiable-57df9761.js","assets/symbols-64db5dd6.js","assets/CIMSymbol-a95ceb49.js","assets/Symbol-1bb07043.js","assets/Color-b7b9e6bb.js","assets/colorUtils-639f4d25.js","assets/mathUtils-daf59e84.js","assets/common-701a4199.js","assets/screenUtils-7afeb41c.js","assets/opacityUtils-8b7acc4e.js","assets/aaBoundingBox-33fc923c.js","assets/request-e4299080.js","assets/persistableUrlUtils-d18becd9.js","assets/collectionUtils-3d8a9611.js","assets/Portal-fbb2b73d.js","assets/Loadable-b0d5bb7e.js","assets/Promise-6bd0b483.js","assets/PortalGroup-813428fa.js","assets/PortalUser-cf18ae9d.js","assets/jsonUtils-5115c7e5.js","assets/LayerView-5e92a124.js","assets/utils-1bc9587b.js","assets/mat3f32-d3d088e8.js","assets/parser-f68dd732.js","assets/mat4-62d5e6a4.js","assets/enums-4ca4641f.js","assets/MaterialKey-cec287ae.js","assets/Utils-b6ef920f.js","assets/enums-ef042d89.js","assets/enums-64ab819c.js","assets/Texture-c2297638.js","assets/context-util-abf86a85.js","assets/VertexElementDescriptor-2925c6af.js","assets/heatmapUtils-90a13d85.js","assets/vec4f64-018b3fa6.js","assets/HandleOwner-6ac6f00a.js","assets/GraphicContainer-cd91331c.js","assets/BaseGraphicContainer-baad2cd4.js","assets/ExpandedCIM-91f67fd3.js","assets/BidiEngine-836b7ef6.js","assets/aaBoundingRect-ca34962d.js","assets/mat2d-80bd93af.js","assets/vec2-f978aef8.js","assets/vec2f32-461e65a9.js","assets/Rect-ea14f53a.js","assets/quantizationUtils-8770173e.js","assets/GeometryUtils-eebff0a0.js","assets/floatRGBA-305df8f3.js","assets/normalizeUtilsSync-1f26dd3f.js","assets/normalizeUtils-91a64c2b.js","assets/projectionSupport-38cc9dc5.js","assets/projection-6146477c.js","assets/unitUtils-b69647a1.js","assets/assets-6ba3cd63.js","assets/zscale-72b4355d.js","assets/json-48e3ea08.js","assets/labelingInfo-681dda19.js","assets/labelUtils-87bb22ff.js","assets/defaultsJSON-b087dd4d.js","assets/jsonUtils-b1b224a3.js","assets/VertexArrayObject-e1e46e3f.js","assets/FeatureContainer-e4e1ed67.js","assets/mat3-45e3f2eb.js","assets/TileContainer-efb37002.js","assets/TileKey-ed432ae5.js","assets/WGLContainer-69c7e591.js","assets/pixelUtils-a3529416.js","assets/vec2f64-e0301652.js","assets/ProgramTemplate-1afb8353.js","assets/StyleDefinition-ae208a94.js","assets/config-1337d16e.js","assets/GeometryUtils-c093d234.js","assets/earcut-58237617.js","assets/featureConversionUtils-d9ec654e.js","assets/OptimizedFeature-1bba65b5.js","assets/OptimizedFeatureSet-1d1ac4b9.js","assets/Queue-8aae62d3.js","assets/visualVariablesUtils-9310c846.js","assets/visualVariablesUtils-4833b8d3.js","assets/lengthUtils-0dde2114.js","assets/capabilities-5736b16f.js","assets/Matcher-1409f335.js","assets/TileStrategy-40f1ecb0.js","assets/TileStore-a368d16c.js","assets/rbush-8e36784a.js","assets/quickselect-322ec8e1.js","assets/Query-066f2ccf.js","assets/TimeExtent-0fd238ea.js","assets/Field-bb784640.js","assets/fieldType-9bddd3d4.js","assets/tileUtils-23b52606.js","assets/TileClipper-48ccb501.js","assets/Geometry-daada628.js","assets/LRUCache-4d56ba4d.js","assets/MemCache-1e028041.js","assets/devEnvironmentUtils-5002a058.js","assets/styleUtils-0c73f570.js","assets/schemaUtils-36753600.js","assets/LayerFloorInfo-0d02c503.js","assets/diffUtils-713e5c9b.js","assets/createSymbolSchema-976acefa.js","assets/rendererUtils-a093890e.js","assets/FeatureReductionLayer-0deeb262.js","assets/BlendLayer-7a735871.js","assets/UniqueValueRenderer-cd716182.js","assets/LegendOptions-e31ff575.js","assets/colorRamps-c00f504b.js","assets/sizeVariableUtils-d4870b0d.js","assets/compilerUtils-eefea0ec.js","assets/jsonUtils-c5ba7295.js","assets/DictionaryLoader-29adda53.js","assets/deprecate-46fadabd.js","assets/OperationalLayer-54654858.js","assets/ElevationInfo-28459ff1.js","assets/util-94bdf933.js","assets/ComputedAttributeStorage-efef8862.js","assets/FeatureSetReader-9e0a2b1d.js","assets/centroid-7800ee74.js","assets/FieldsIndex-c06d221a.js","assets/vec3f32-4322908d.js"])),stream:()=>ae().then(()=>T(()=>import("./StreamLayerView2D-5013b09a.js"),["assets/StreamLayerView2D-5013b09a.js","assets/cast-6d78d3c7.js","assets/typedArrayUtil-d02f10a8.js","assets/string-9c5e03f7.js","assets/Error-4ed679d7.js","assets/ensureType-d98e08e1.js","assets/nextTick-3ee5a785.js","assets/promiseUtils-930cba29.js","assets/reactiveUtils-b0e56010.js","assets/FeatureSet-1cc04f9b.js","assets/geometry-70b2a4a5.js","assets/Extent-d5fff12d.js","assets/Polyline-42dcc920.js","assets/typeUtils-b6c52390.js","assets/jsonMap-5afaf2ff.js","assets/Graphic-e4fb7090.js","assets/PopupTemplate-d6e0b369.js","assets/Clonable-58355d3c.js","assets/Collection-42fe629f.js","assets/Evented-b378ccab.js","assets/SimpleObservable-e0897cc6.js","assets/fieldUtils-141b2ff2.js","assets/preload-helper-101896b7.js","assets/arcadeOnDemand-72c57f7a.js","assets/enumeration-497ef064.js","assets/number-c7f1bfee.js","assets/locale-30120714.js","assets/Identifiable-57df9761.js","assets/symbols-64db5dd6.js","assets/CIMSymbol-a95ceb49.js","assets/Symbol-1bb07043.js","assets/Color-b7b9e6bb.js","assets/colorUtils-639f4d25.js","assets/mathUtils-daf59e84.js","assets/common-701a4199.js","assets/screenUtils-7afeb41c.js","assets/opacityUtils-8b7acc4e.js","assets/aaBoundingBox-33fc923c.js","assets/request-e4299080.js","assets/persistableUrlUtils-d18becd9.js","assets/collectionUtils-3d8a9611.js","assets/Portal-fbb2b73d.js","assets/Loadable-b0d5bb7e.js","assets/Promise-6bd0b483.js","assets/PortalGroup-813428fa.js","assets/PortalUser-cf18ae9d.js","assets/jsonUtils-5115c7e5.js","assets/Field-bb784640.js","assets/fieldType-9bddd3d4.js","assets/FeatureLayerView2D-813b3c9f.js","assets/utils-1bc9587b.js","assets/mat3f32-d3d088e8.js","assets/parser-f68dd732.js","assets/mat4-62d5e6a4.js","assets/enums-4ca4641f.js","assets/MaterialKey-cec287ae.js","assets/Utils-b6ef920f.js","assets/enums-ef042d89.js","assets/enums-64ab819c.js","assets/Texture-c2297638.js","assets/context-util-abf86a85.js","assets/VertexElementDescriptor-2925c6af.js","assets/heatmapUtils-90a13d85.js","assets/vec4f64-018b3fa6.js","assets/FeatureReductionLayer-0deeb262.js","assets/BlendLayer-7a735871.js","assets/TimeExtent-0fd238ea.js","assets/Query-066f2ccf.js","assets/UniqueValueRenderer-cd716182.js","assets/LegendOptions-e31ff575.js","assets/diffUtils-713e5c9b.js","assets/colorRamps-c00f504b.js","assets/sizeVariableUtils-d4870b0d.js","assets/compilerUtils-eefea0ec.js","assets/lengthUtils-0dde2114.js","assets/unitUtils-b69647a1.js","assets/jsonUtils-b1b224a3.js","assets/styleUtils-0c73f570.js","assets/jsonUtils-c5ba7295.js","assets/DictionaryLoader-29adda53.js","assets/LRUCache-4d56ba4d.js","assets/MemCache-1e028041.js","assets/deprecate-46fadabd.js","assets/OperationalLayer-54654858.js","assets/ElevationInfo-28459ff1.js","assets/labelingInfo-681dda19.js","assets/labelUtils-87bb22ff.js","assets/defaultsJSON-b087dd4d.js","assets/LayerView-5e92a124.js","assets/HandleOwner-6ac6f00a.js","assets/schemaUtils-36753600.js","assets/LayerFloorInfo-0d02c503.js","assets/visualVariablesUtils-4833b8d3.js","assets/createSymbolSchema-976acefa.js","assets/ExpandedCIM-91f67fd3.js","assets/BidiEngine-836b7ef6.js","assets/aaBoundingRect-ca34962d.js","assets/mat2d-80bd93af.js","assets/vec2-f978aef8.js","assets/vec2f32-461e65a9.js","assets/Rect-ea14f53a.js","assets/quantizationUtils-8770173e.js","assets/GeometryUtils-eebff0a0.js","assets/floatRGBA-305df8f3.js","assets/rendererUtils-a093890e.js","assets/capabilities-5736b16f.js","assets/util-94bdf933.js","assets/TileStore-a368d16c.js","assets/Queue-8aae62d3.js","assets/TileKey-ed432ae5.js","assets/rbush-8e36784a.js","assets/quickselect-322ec8e1.js","assets/workers-7aef8bf1.js","assets/Connection-dd24ab83.js","assets/assets-6ba3cd63.js","assets/intl-a5c99ea3.js","assets/messages-634811b5.js","assets/floorFilterUtils-080a7cd2.js","assets/popupUtils-1c109923.js","assets/RefreshableLayerView-6d197c7a.js"])),"subtype-group":()=>ae().then(()=>T(()=>import("./SubtypeGroupLayerView2D-0a3107c9.js"),["assets/SubtypeGroupLayerView2D-0a3107c9.js","assets/cast-6d78d3c7.js","assets/typedArrayUtil-d02f10a8.js","assets/string-9c5e03f7.js","assets/Error-4ed679d7.js","assets/ensureType-d98e08e1.js","assets/nextTick-3ee5a785.js","assets/promiseUtils-930cba29.js","assets/reactiveUtils-b0e56010.js","assets/FeatureReductionLayer-0deeb262.js","assets/BlendLayer-7a735871.js","assets/parser-f68dd732.js","assets/colorUtils-639f4d25.js","assets/screenUtils-7afeb41c.js","assets/mat4-62d5e6a4.js","assets/common-701a4199.js","assets/geometry-70b2a4a5.js","assets/Extent-d5fff12d.js","assets/Polyline-42dcc920.js","assets/typeUtils-b6c52390.js","assets/jsonMap-5afaf2ff.js","assets/TimeExtent-0fd238ea.js","assets/Query-066f2ccf.js","assets/enumeration-497ef064.js","assets/jsonUtils-5115c7e5.js","assets/Field-bb784640.js","assets/fieldType-9bddd3d4.js","assets/Clonable-58355d3c.js","assets/PopupTemplate-d6e0b369.js","assets/Collection-42fe629f.js","assets/Evented-b378ccab.js","assets/SimpleObservable-e0897cc6.js","assets/fieldUtils-141b2ff2.js","assets/preload-helper-101896b7.js","assets/arcadeOnDemand-72c57f7a.js","assets/number-c7f1bfee.js","assets/locale-30120714.js","assets/Identifiable-57df9761.js","assets/UniqueValueRenderer-cd716182.js","assets/symbols-64db5dd6.js","assets/CIMSymbol-a95ceb49.js","assets/Symbol-1bb07043.js","assets/Color-b7b9e6bb.js","assets/mathUtils-daf59e84.js","assets/opacityUtils-8b7acc4e.js","assets/aaBoundingBox-33fc923c.js","assets/request-e4299080.js","assets/persistableUrlUtils-d18becd9.js","assets/collectionUtils-3d8a9611.js","assets/Portal-fbb2b73d.js","assets/Loadable-b0d5bb7e.js","assets/Promise-6bd0b483.js","assets/PortalGroup-813428fa.js","assets/PortalUser-cf18ae9d.js","assets/LegendOptions-e31ff575.js","assets/diffUtils-713e5c9b.js","assets/colorRamps-c00f504b.js","assets/sizeVariableUtils-d4870b0d.js","assets/Graphic-e4fb7090.js","assets/compilerUtils-eefea0ec.js","assets/lengthUtils-0dde2114.js","assets/unitUtils-b69647a1.js","assets/jsonUtils-b1b224a3.js","assets/styleUtils-0c73f570.js","assets/jsonUtils-c5ba7295.js","assets/DictionaryLoader-29adda53.js","assets/LRUCache-4d56ba4d.js","assets/MemCache-1e028041.js","assets/deprecate-46fadabd.js","assets/heatmapUtils-90a13d85.js","assets/vec4f64-018b3fa6.js","assets/OperationalLayer-54654858.js","assets/ElevationInfo-28459ff1.js","assets/labelingInfo-681dda19.js","assets/labelUtils-87bb22ff.js","assets/defaultsJSON-b087dd4d.js","assets/FeatureLayerView2D-813b3c9f.js","assets/utils-1bc9587b.js","assets/mat3f32-d3d088e8.js","assets/enums-4ca4641f.js","assets/MaterialKey-cec287ae.js","assets/Utils-b6ef920f.js","assets/enums-ef042d89.js","assets/enums-64ab819c.js","assets/Texture-c2297638.js","assets/context-util-abf86a85.js","assets/VertexElementDescriptor-2925c6af.js","assets/FeatureSet-1cc04f9b.js","assets/LayerView-5e92a124.js","assets/HandleOwner-6ac6f00a.js","assets/schemaUtils-36753600.js","assets/LayerFloorInfo-0d02c503.js","assets/visualVariablesUtils-4833b8d3.js","assets/createSymbolSchema-976acefa.js","assets/ExpandedCIM-91f67fd3.js","assets/BidiEngine-836b7ef6.js","assets/aaBoundingRect-ca34962d.js","assets/mat2d-80bd93af.js","assets/vec2-f978aef8.js","assets/vec2f32-461e65a9.js","assets/Rect-ea14f53a.js","assets/quantizationUtils-8770173e.js","assets/GeometryUtils-eebff0a0.js","assets/floatRGBA-305df8f3.js","assets/rendererUtils-a093890e.js","assets/capabilities-5736b16f.js","assets/util-94bdf933.js","assets/TileStore-a368d16c.js","assets/Queue-8aae62d3.js","assets/TileKey-ed432ae5.js","assets/rbush-8e36784a.js","assets/quickselect-322ec8e1.js","assets/workers-7aef8bf1.js","assets/Connection-dd24ab83.js","assets/assets-6ba3cd63.js","assets/intl-a5c99ea3.js","assets/messages-634811b5.js","assets/floorFilterUtils-080a7cd2.js","assets/popupUtils-1c109923.js","assets/RefreshableLayerView-6d197c7a.js"])),tile:es,"vector-tile":()=>ae().then(()=>T(()=>import("./VectorTileLayerView2D-7e507d8a.js"),["assets/VectorTileLayerView2D-7e507d8a.js","assets/cast-6d78d3c7.js","assets/typedArrayUtil-d02f10a8.js","assets/string-9c5e03f7.js","assets/Error-4ed679d7.js","assets/ensureType-d98e08e1.js","assets/nextTick-3ee5a785.js","assets/promiseUtils-930cba29.js","assets/Graphic-e4fb7090.js","assets/geometry-70b2a4a5.js","assets/Extent-d5fff12d.js","assets/Polyline-42dcc920.js","assets/typeUtils-b6c52390.js","assets/jsonMap-5afaf2ff.js","assets/PopupTemplate-d6e0b369.js","assets/Clonable-58355d3c.js","assets/Collection-42fe629f.js","assets/Evented-b378ccab.js","assets/SimpleObservable-e0897cc6.js","assets/fieldUtils-141b2ff2.js","assets/preload-helper-101896b7.js","assets/arcadeOnDemand-72c57f7a.js","assets/enumeration-497ef064.js","assets/number-c7f1bfee.js","assets/locale-30120714.js","assets/Identifiable-57df9761.js","assets/symbols-64db5dd6.js","assets/CIMSymbol-a95ceb49.js","assets/Symbol-1bb07043.js","assets/Color-b7b9e6bb.js","assets/colorUtils-639f4d25.js","assets/mathUtils-daf59e84.js","assets/common-701a4199.js","assets/screenUtils-7afeb41c.js","assets/opacityUtils-8b7acc4e.js","assets/aaBoundingBox-33fc923c.js","assets/request-e4299080.js","assets/persistableUrlUtils-d18becd9.js","assets/collectionUtils-3d8a9611.js","assets/Portal-fbb2b73d.js","assets/Loadable-b0d5bb7e.js","assets/Promise-6bd0b483.js","assets/PortalGroup-813428fa.js","assets/PortalUser-cf18ae9d.js","assets/jsonUtils-5115c7e5.js","assets/reactiveUtils-b0e56010.js","assets/diffUtils-713e5c9b.js","assets/aaBoundingRect-ca34962d.js","assets/enums-bfc9e4e9.js","assets/workers-7aef8bf1.js","assets/Connection-dd24ab83.js","assets/Queue-8aae62d3.js","assets/assets-6ba3cd63.js","assets/intl-a5c99ea3.js","assets/messages-634811b5.js","assets/Rect-ea14f53a.js","assets/enums-64ab819c.js","assets/Texture-c2297638.js","assets/context-util-abf86a85.js","assets/pbf-e4fd0249.js","assets/rasterizingUtils-18039619.js","assets/floatRGBA-305df8f3.js","assets/TileKey-ed432ae5.js","assets/LRUCache-4d56ba4d.js","assets/MemCache-1e028041.js","assets/TileStore-a368d16c.js","assets/rbush-8e36784a.js","assets/quickselect-322ec8e1.js","assets/Query-066f2ccf.js","assets/TimeExtent-0fd238ea.js","assets/Field-bb784640.js","assets/fieldType-9bddd3d4.js","assets/mat3-45e3f2eb.js","assets/mat3f32-d3d088e8.js","assets/VertexArrayObject-e1e46e3f.js","assets/config-1337d16e.js","assets/TileContainer-efb37002.js","assets/utils-1bc9587b.js","assets/parser-f68dd732.js","assets/mat4-62d5e6a4.js","assets/enums-4ca4641f.js","assets/MaterialKey-cec287ae.js","assets/Utils-b6ef920f.js","assets/enums-ef042d89.js","assets/VertexElementDescriptor-2925c6af.js","assets/heatmapUtils-90a13d85.js","assets/vec4f64-018b3fa6.js","assets/WGLContainer-69c7e591.js","assets/vec2f32-461e65a9.js","assets/pixelUtils-a3529416.js","assets/vec2f64-e0301652.js","assets/ProgramTemplate-1afb8353.js","assets/StyleDefinition-ae208a94.js","assets/GeometryUtils-c093d234.js","assets/earcut-58237617.js","assets/vec2-f978aef8.js","assets/featureConversionUtils-d9ec654e.js","assets/OptimizedFeature-1bba65b5.js","assets/OptimizedFeatureSet-1d1ac4b9.js","assets/StyleRepository-f1c54372.js","assets/colorUtils-0c057879.js","assets/unitBezier-881ac1eb.js","assets/GeometryUtils-eebff0a0.js","assets/Geometry-daada628.js","assets/LayerView-5e92a124.js","assets/HandleOwner-6ac6f00a.js","assets/TileInfo-92f7dc61.js","assets/unitUtils-b69647a1.js","assets/TileStrategy-40f1ecb0.js"])),wcs:()=>ae().then(()=>T(()=>import("./ImageryTileLayerView2D-bd352349.js"),["assets/ImageryTileLayerView2D-bd352349.js","assets/cast-6d78d3c7.js","assets/typedArrayUtil-d02f10a8.js","assets/string-9c5e03f7.js","assets/Error-4ed679d7.js","assets/ensureType-d98e08e1.js","assets/nextTick-3ee5a785.js","assets/promiseUtils-930cba29.js","assets/Graphic-e4fb7090.js","assets/geometry-70b2a4a5.js","assets/Extent-d5fff12d.js","assets/Polyline-42dcc920.js","assets/typeUtils-b6c52390.js","assets/jsonMap-5afaf2ff.js","assets/PopupTemplate-d6e0b369.js","assets/Clonable-58355d3c.js","assets/Collection-42fe629f.js","assets/Evented-b378ccab.js","assets/SimpleObservable-e0897cc6.js","assets/fieldUtils-141b2ff2.js","assets/preload-helper-101896b7.js","assets/arcadeOnDemand-72c57f7a.js","assets/enumeration-497ef064.js","assets/number-c7f1bfee.js","assets/locale-30120714.js","assets/Identifiable-57df9761.js","assets/symbols-64db5dd6.js","assets/CIMSymbol-a95ceb49.js","assets/Symbol-1bb07043.js","assets/Color-b7b9e6bb.js","assets/colorUtils-639f4d25.js","assets/mathUtils-daf59e84.js","assets/common-701a4199.js","assets/screenUtils-7afeb41c.js","assets/opacityUtils-8b7acc4e.js","assets/aaBoundingBox-33fc923c.js","assets/request-e4299080.js","assets/persistableUrlUtils-d18becd9.js","assets/collectionUtils-3d8a9611.js","assets/Portal-fbb2b73d.js","assets/Loadable-b0d5bb7e.js","assets/Promise-6bd0b483.js","assets/PortalGroup-813428fa.js","assets/PortalUser-cf18ae9d.js","assets/jsonUtils-5115c7e5.js","assets/reactiveUtils-b0e56010.js","assets/multidimensionalUtils-6e1dd9aa.js","assets/RasterVFDisplayObject-22512552.js","assets/HandleOwner-6ac6f00a.js","assets/VertexArrayObject-e1e46e3f.js","assets/Texture-c2297638.js","assets/context-util-abf86a85.js","assets/enums-64ab819c.js","assets/VertexElementDescriptor-2925c6af.js","assets/dataUtils-06f77c91.js","assets/pixelUtils-a3529416.js","assets/WGLContainer-69c7e591.js","assets/mat3f32-d3d088e8.js","assets/mat3-45e3f2eb.js","assets/vec2f32-461e65a9.js","assets/utils-1bc9587b.js","assets/parser-f68dd732.js","assets/mat4-62d5e6a4.js","assets/enums-4ca4641f.js","assets/MaterialKey-cec287ae.js","assets/Utils-b6ef920f.js","assets/enums-ef042d89.js","assets/heatmapUtils-90a13d85.js","assets/vec4f64-018b3fa6.js","assets/vec2f64-e0301652.js","assets/ProgramTemplate-1afb8353.js","assets/StyleDefinition-ae208a94.js","assets/config-1337d16e.js","assets/GeometryUtils-c093d234.js","assets/earcut-58237617.js","assets/vec2-f978aef8.js","assets/featureConversionUtils-d9ec654e.js","assets/OptimizedFeature-1bba65b5.js","assets/OptimizedFeatureSet-1d1ac4b9.js","assets/LayerView-5e92a124.js","assets/aaBoundingRect-ca34962d.js","assets/TileContainer-efb37002.js","assets/TileKey-ed432ae5.js","assets/TileInfo-92f7dc61.js","assets/unitUtils-b69647a1.js","assets/RawBlockCache-7d1f94ee.js","assets/rasterProjectionHelper-050c29c5.js","assets/projection-6146477c.js","assets/assets-6ba3cd63.js","assets/zscale-72b4355d.js","assets/TileStrategy-40f1ecb0.js","assets/TileStore-a368d16c.js","assets/Queue-8aae62d3.js","assets/rbush-8e36784a.js","assets/quickselect-322ec8e1.js","assets/Query-066f2ccf.js","assets/TimeExtent-0fd238ea.js","assets/Field-bb784640.js","assets/fieldType-9bddd3d4.js","assets/capabilities-5736b16f.js","assets/util-94bdf933.js","assets/OperationalLayer-54654858.js","assets/ElevationInfo-28459ff1.js","assets/lengthUtils-0dde2114.js","assets/popupUtils-1c109923.js","assets/RefreshableLayerView-6d197c7a.js","assets/Basemap-5353f87f.js","assets/deprecate-46fadabd.js","assets/loadAll-1ae88564.js","assets/asyncUtils-18831bb1.js","assets/PortalItem-69c4a143.js","assets/messages-634811b5.js","assets/writeUtils-44b0e78b.js","assets/layerUtils-6996b9ea.js","assets/compilerUtils-eefea0ec.js","assets/CollectionFlattener-b89887c0.js","assets/TablesMixin-402d03d2.js","assets/Layer-739799ab.js","assets/Cyclical-1a93cb12.js","assets/workers-7aef8bf1.js","assets/Connection-dd24ab83.js","assets/intl-a5c99ea3.js","assets/widget-4becb80f.js","assets/uuid-73213768.js","assets/byteSizeEstimations-90c5a50d.js","assets/executeQueryJSON-bf3dc024.js","assets/normalizeUtils-91a64c2b.js","assets/query-4348ce6f.js","assets/pbfQueryUtils-91f50fb5.js","assets/pbf-e4fd0249.js","assets/queryZScale-1674984c.js","assets/FeatureSet-1cc04f9b.js","assets/RelationshipQuery-b5b427dc.js","assets/LegendOptions-e31ff575.js","assets/utils-46b35833.js","assets/ItemCache-b4db8f82.js","assets/MemCache-1e028041.js","assets/jsonUtils-c5ba7295.js","assets/UniqueValueRenderer-cd716182.js","assets/diffUtils-713e5c9b.js","assets/colorRamps-c00f504b.js","assets/sizeVariableUtils-d4870b0d.js","assets/jsonUtils-b1b224a3.js","assets/styleUtils-0c73f570.js","assets/DictionaryLoader-29adda53.js","assets/LRUCache-4d56ba4d.js","assets/TopFeaturesQuery-7da1d7c1.js","assets/FeatureLayer-1a0dd9ce.js","assets/MultiOriginJSONSupport-1970ed0f.js","assets/LayerFloorInfo-0d02c503.js","assets/FeatureLayerBase-d34c9a8c.js","assets/HeightModelInfo-645087b5.js","assets/arcgisLayerUrl-02fe1a62.js","assets/editsZScale-e318eb4a.js","assets/APIKeyMixin-f90cfebd.js","assets/ArcGISService-f6f32fbc.js","assets/BlendLayer-7a735871.js","assets/CustomParametersMixin-5e3018da.js","assets/EditBusLayer-1372e92b.js","assets/FeatureReductionLayer-0deeb262.js","assets/labelingInfo-681dda19.js","assets/labelUtils-87bb22ff.js","assets/defaultsJSON-b087dd4d.js","assets/OrderedLayer-7b3473c8.js","assets/PortalLayer-644d657e.js","assets/RefreshableLayer-84ec1468.js","assets/ScaleRangeLayer-c6a35aba.js","assets/TemporalLayer-d41a81db.js","assets/TimeInfo-a1791ae0.js","assets/FeatureTemplate-773a8865.js","assets/FeatureType-6c50f4e3.js","assets/fieldProperties-c2bdcd57.js","assets/FieldsIndex-c06d221a.js","assets/versionUtils-5ccafbea.js","assets/styleUtils-45e2d86c.js","assets/popupUtils-ea7b7951.js","assets/mat2d-80bd93af.js","assets/Scheduler-343fdba6.js","assets/GraphicsLayer-caff0dcf.js","assets/ViewingMode-fb6259a5.js","assets/unitBezier-881ac1eb.js","assets/datetime-7cb5ae9e.js"])),"web-tile":es,wfs:ts,wms:()=>ae().then(()=>T(()=>import("./WMSLayerView2D-a9752057.js"),["assets/WMSLayerView2D-a9752057.js","assets/cast-6d78d3c7.js","assets/typedArrayUtil-d02f10a8.js","assets/string-9c5e03f7.js","assets/Error-4ed679d7.js","assets/ensureType-d98e08e1.js","assets/nextTick-3ee5a785.js","assets/promiseUtils-930cba29.js","assets/reactiveUtils-b0e56010.js","assets/Extent-d5fff12d.js","assets/BitmapContainer-480e821d.js","assets/WGLContainer-69c7e591.js","assets/mat3f32-d3d088e8.js","assets/enums-64ab819c.js","assets/mat3-45e3f2eb.js","assets/common-701a4199.js","assets/vec2f32-461e65a9.js","assets/pixelUtils-a3529416.js","assets/utils-1bc9587b.js","assets/parser-f68dd732.js","assets/colorUtils-639f4d25.js","assets/screenUtils-7afeb41c.js","assets/mat4-62d5e6a4.js","assets/Evented-b378ccab.js","assets/enums-4ca4641f.js","assets/MaterialKey-cec287ae.js","assets/Utils-b6ef920f.js","assets/mathUtils-daf59e84.js","assets/enums-ef042d89.js","assets/Texture-c2297638.js","assets/context-util-abf86a85.js","assets/VertexElementDescriptor-2925c6af.js","assets/heatmapUtils-90a13d85.js","assets/vec4f64-018b3fa6.js","assets/Color-b7b9e6bb.js","assets/vec2f64-e0301652.js","assets/VertexArrayObject-e1e46e3f.js","assets/ProgramTemplate-1afb8353.js","assets/StyleDefinition-ae208a94.js","assets/config-1337d16e.js","assets/GeometryUtils-c093d234.js","assets/earcut-58237617.js","assets/vec2-f978aef8.js","assets/featureConversionUtils-d9ec654e.js","assets/jsonUtils-5115c7e5.js","assets/Polyline-42dcc920.js","assets/OptimizedFeature-1bba65b5.js","assets/OptimizedFeatureSet-1d1ac4b9.js","assets/LayerView-5e92a124.js","assets/Collection-42fe629f.js","assets/SimpleObservable-e0897cc6.js","assets/collectionUtils-3d8a9611.js","assets/geometry-70b2a4a5.js","assets/typeUtils-b6c52390.js","assets/jsonMap-5afaf2ff.js","assets/HandleOwner-6ac6f00a.js","assets/Identifiable-57df9761.js","assets/Promise-6bd0b483.js","assets/ExportStrategy-aa28d495.js","assets/aaBoundingRect-ca34962d.js","assets/TileInfo-92f7dc61.js","assets/unitUtils-b69647a1.js","assets/Bitmap-b5446edf.js","assets/TileStore-a368d16c.js","assets/Queue-8aae62d3.js","assets/TileKey-ed432ae5.js","assets/rbush-8e36784a.js","assets/quickselect-322ec8e1.js","assets/Query-066f2ccf.js","assets/TimeExtent-0fd238ea.js","assets/enumeration-497ef064.js","assets/Field-bb784640.js","assets/fieldType-9bddd3d4.js","assets/Clonable-58355d3c.js","assets/RefreshableLayerView-6d197c7a.js","assets/OperationalLayer-54654858.js","assets/request-e4299080.js","assets/preload-helper-101896b7.js","assets/persistableUrlUtils-d18becd9.js","assets/ElevationInfo-28459ff1.js","assets/fieldUtils-141b2ff2.js","assets/arcadeOnDemand-72c57f7a.js","assets/lengthUtils-0dde2114.js","assets/opacityUtils-8b7acc4e.js","assets/ExportWMSImageParameters-df879937.js"])),wmts:()=>ae().then(()=>T(()=>import("./WMTSLayerView2D-ac689bff.js"),["assets/WMTSLayerView2D-ac689bff.js","assets/cast-6d78d3c7.js","assets/typedArrayUtil-d02f10a8.js","assets/string-9c5e03f7.js","assets/Error-4ed679d7.js","assets/ensureType-d98e08e1.js","assets/nextTick-3ee5a785.js","assets/promiseUtils-930cba29.js","assets/reactiveUtils-b0e56010.js","assets/Extent-d5fff12d.js","assets/imageUtils-f5c68deb.js","assets/BitmapTileContainer-f80c60ba.js","assets/aaBoundingRect-ca34962d.js","assets/mathUtils-daf59e84.js","assets/common-701a4199.js","assets/mat3f32-d3d088e8.js","assets/Bitmap-b5446edf.js","assets/mat3-45e3f2eb.js","assets/vec2f32-461e65a9.js","assets/utils-1bc9587b.js","assets/parser-f68dd732.js","assets/colorUtils-639f4d25.js","assets/screenUtils-7afeb41c.js","assets/mat4-62d5e6a4.js","assets/Evented-b378ccab.js","assets/enums-4ca4641f.js","assets/MaterialKey-cec287ae.js","assets/Utils-b6ef920f.js","assets/enums-ef042d89.js","assets/enums-64ab819c.js","assets/Texture-c2297638.js","assets/context-util-abf86a85.js","assets/VertexElementDescriptor-2925c6af.js","assets/heatmapUtils-90a13d85.js","assets/vec4f64-018b3fa6.js","assets/Color-b7b9e6bb.js","assets/TileContainer-efb37002.js","assets/TileKey-ed432ae5.js","assets/WGLContainer-69c7e591.js","assets/pixelUtils-a3529416.js","assets/vec2f64-e0301652.js","assets/VertexArrayObject-e1e46e3f.js","assets/ProgramTemplate-1afb8353.js","assets/StyleDefinition-ae208a94.js","assets/config-1337d16e.js","assets/GeometryUtils-c093d234.js","assets/earcut-58237617.js","assets/vec2-f978aef8.js","assets/featureConversionUtils-d9ec654e.js","assets/jsonUtils-5115c7e5.js","assets/Polyline-42dcc920.js","assets/OptimizedFeature-1bba65b5.js","assets/OptimizedFeatureSet-1d1ac4b9.js","assets/LayerView-5e92a124.js","assets/Collection-42fe629f.js","assets/SimpleObservable-e0897cc6.js","assets/collectionUtils-3d8a9611.js","assets/geometry-70b2a4a5.js","assets/typeUtils-b6c52390.js","assets/jsonMap-5afaf2ff.js","assets/HandleOwner-6ac6f00a.js","assets/Identifiable-57df9761.js","assets/Promise-6bd0b483.js","assets/TileStore-a368d16c.js","assets/Queue-8aae62d3.js","assets/rbush-8e36784a.js","assets/quickselect-322ec8e1.js","assets/Query-066f2ccf.js","assets/TimeExtent-0fd238ea.js","assets/enumeration-497ef064.js","assets/Field-bb784640.js","assets/fieldType-9bddd3d4.js","assets/Clonable-58355d3c.js","assets/TileStrategy-40f1ecb0.js","assets/RefreshableLayerView-6d197c7a.js"])),"line-of-sight":null,"base-elevation":null,"building-scene":null,dimension:null,elevation:null,"integrated-mesh":null,"point-cloud":null,voxel:null,scene:null,unknown:null,unsupported:null};function Fg(i){const e=i.declaredClass?i.declaredClass.slice(i.declaredClass.lastIndexOf(".")+1):"Unknown",t=e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();return new $(`${t}:view-not-supported`,`${e} is not supported in 2D`)}const Oa={hasLayerViewModule:i=>E(Fa[i.type]),importLayerView:i=>{const e=Fa[i.type];if(O(e))throw Fg(i);return e(i)}};function Og(i,e){const{spatialReference:t}=e,s=[e.x,e.y];let n=Number.POSITIVE_INFINITY,o=0,r=0;const l=[0,0],d=i.type==="extent"?[[[i.xmin,i.ymin],[i.xmin,i.ymax],[i.xmax,i.ymax],[i.xmax,i.ymin],[i.xmin,i.ymin]]]:i.rings;for(const u of d)for(let h=0;h<u.length-1;h++){yu(l,s,u,h);const p=qu(s,l);p<n&&(n=p,o=l[0],r=l[1])}return{coordinate:new X({x:o,y:r,spatialReference:t}),distance:n}}var Ro;let _i=Ro=class extends jo(z){constructor(i){super(i),this.geometry=null,this.spatialReference=null}get normalizedGeometry(){if(O(this.geometry)||!this.spatialReference)return null;if(!this.spatialReference.equals(this.geometry.spatialReference))try{return Es(this.geometry,this.spatialReference)}catch(i){return B.getLogger(this.declaredClass).error("#constraints.geometry","could not project the geometry to the view's spatial reference",{geometry:this.geometry,spatialReference:this.spatialReference,error:i}),null}return this.geometry}constrain(i,e){if(O(this.normalizedGeometry))return i;const t=i.targetGeometry;if(this.normalizedGeometry.type==="extent"?_l(this.normalizedGeometry,t):Cd(this.normalizedGeometry,t))return i;const{coordinate:s}=Og(this.normalizedGeometry,t);return s&&(i.targetGeometry=s),i}clone(){var i,e;return new Ro({geometry:(i=this.geometry)==null?void 0:i.clone(),spatialReference:(e=this.spatialReference)==null?void 0:e.clone()})}};a([c({constructOnly:!0})],_i.prototype,"geometry",void 0),a([c({readOnly:!0})],_i.prototype,"normalizedGeometry",null),a([c({constructOnly:!0})],_i.prototype,"spatialReference",void 0),_i=Ro=a([C("esri.views.2d.constraints.GeometryConstraint")],_i);var Lo;let ms=Lo=class extends jo(z){constructor(){super(...arguments),this.enabled=!0,this.rotationEnabled=!0}constrain(i,e){return this.enabled&&e&&(this.rotationEnabled||(i.rotation=e.rotation)),i}clone(){return new Lo({enabled:this.enabled,rotationEnabled:this.rotationEnabled})}};a([c()],ms.prototype,"enabled",void 0),a([c()],ms.prototype,"rotationEnabled",void 0),ms=Lo=a([C("esri.views.2d.constraints.RotationConstraint")],ms);const Rc=ms;var Fo;let Ae=Fo=class extends jo(z){constructor(i){super(i),this._lodByScale={},this._scales=[],this.effectiveLODs=null,this.effectiveMinZoom=-1,this.effectiveMaxZoom=-1,this.effectiveMinScale=0,this.effectiveMaxScale=0,this.lods=null,this.minZoom=-1,this.maxZoom=-1,this.minScale=0,this.maxScale=0,this.snapToZoom=!0}initialize(){let i,{lods:e,minScale:t,maxScale:s,minZoom:n,maxZoom:o}=this,r=-1,l=-1,d=!1,u=!1;if(t!==0&&s!==0&&t<s&&([t,s]=[s,t]),!e||!e.length)return this._set("effectiveMinScale",t),void this._set("effectiveMaxScale",s);e=e.map(h=>h.clone()),e.sort((h,p)=>p.scale-h.scale),e.forEach((h,p)=>h.level=p);for(const h of e)!d&&t>0&&t>=h.scale&&(r=h.level,d=!0),!u&&s>0&&s>=h.scale&&(l=i?i.level:-1,u=!0),i=h;n===-1&&(n=t===0?0:r),o===-1&&(o=s===0?e.length-1:l),n=Math.max(n,0),n=Math.min(n,e.length-1),o=Math.max(o,0),o=Math.min(o,e.length-1),n>o&&([n,o]=[o,n]),t=e[n].scale,s=e[o].scale,e.splice(0,n),e.splice(o-n+1,e.length),e.forEach((h,p)=>{this._lodByScale[h.scale]=h,this._scales[p]=h.scale}),this._set("effectiveLODs",e),this._set("effectiveMinZoom",n),this._set("effectiveMaxZoom",o),this._set("effectiveMinScale",t),this._set("effectiveMaxScale",s)}constrain(i,e){if(e&&i.scale===e.scale)return i;const t=this.effectiveMinScale,s=this.effectiveMaxScale,n=i.targetGeometry,o=e&&e.targetGeometry,r=s!==0&&i.scale<s,l=t!==0&&i.scale>t;if(r||l){const d=l?t:s;if(e&&o){const u=(d-e.scale)/(i.scale-e.scale);n.x=o.x+(n.x-o.x)*u,n.y=o.y+(n.y-o.y)*u}i.scale=d}return this.snapToZoom&&this.effectiveLODs&&(i.scale=this._getClosestScale(i.scale)),i}fit(i){if(!this.effectiveLODs||!this.snapToZoom)return this.constrain(i,null);const e=this.scaleToZoom(i.scale),t=Math.abs(e-Math.floor(e));return i.scale=this.zoomToScale(t>.99?Math.round(e):Math.floor(e)),i}zoomToScale(i){if(!this.effectiveLODs)return 0;i-=this.effectiveMinZoom,i=Math.max(0,i);const e=this._scales;if(i<=0)return e[0];if(i>=e.length)return e[e.length-1];const t=Math.round(i-.5),s=Math.round(i);return e[s]+(s-i)*(e[t]-e[s])}scaleToZoom(i){if(!this.effectiveLODs)return-1;const e=this._scales;let t,s;if(i>=e[0])return this.effectiveMinZoom;if(i<=e[e.length-1])return this.effectiveMaxZoom;for(let n=0;n<e.length-1;n++){if(t=e[n],s=e[n+1],s===i)return n+this.effectiveMinZoom+1;if(t>i&&s<i)return n+this.effectiveMinZoom+1-(i-s)/(t-s)}return-1}snapToClosestScale(i){if(!this.effectiveLODs)return i;const e=this.scaleToZoom(i);return this.zoomToScale(Math.round(e))}snapToNextScale(i,e=.5){if(!this.effectiveLODs)return i*e;const t=Math.round(this.scaleToZoom(i));return this.zoomToScale(t+1)}snapToPreviousScale(i,e=2){if(!this.effectiveLODs)return i*e;const t=Math.round(this.scaleToZoom(i));return this.zoomToScale(t-1)}clone(){return new Fo({lods:this.lods,minZoom:this.minZoom,maxZoom:this.maxZoom,minScale:this.minScale,maxScale:this.maxScale})}_getClosestScale(i){return this._lodByScale[i]||(i=this._scales.reduce((e,t)=>Math.abs(t-i)<=Math.abs(e-i)?t:e,this._scales[0])),this._lodByScale[i].scale}};a([c({readOnly:!0})],Ae.prototype,"effectiveLODs",void 0),a([c({readOnly:!0})],Ae.prototype,"effectiveMinZoom",void 0),a([c({readOnly:!0})],Ae.prototype,"effectiveMaxZoom",void 0),a([c({readOnly:!0})],Ae.prototype,"effectiveMinScale",void 0),a([c({readOnly:!0})],Ae.prototype,"effectiveMaxScale",void 0),a([c()],Ae.prototype,"lods",void 0),a([c()],Ae.prototype,"minZoom",void 0),a([c()],Ae.prototype,"maxZoom",void 0),a([c()],Ae.prototype,"minScale",void 0),a([c()],Ae.prototype,"maxScale",void 0),a([c()],Ae.prototype,"snapToZoom",void 0),Ae=Fo=a([C("esri.views.2d.constraints.ZoomConstraint")],Ae);const Lc=Ae,Dg={base:null,key:"type",typeMap:{extent:ji,polygon:vu}};let oe=class extends z{constructor(e){super(e),this.lods=null,this.minScale=0,this.maxScale=0,this.minZoom=-1,this.maxZoom=-1,this.rotationEnabled=!0,this.snapToZoom=!0}destroy(){this.view=null}get effectiveLODs(){return this._zoom.effectiveLODs}get effectiveMinScale(){return this._zoom.effectiveMinScale}get effectiveMaxScale(){return this._zoom.effectiveMaxScale}get effectiveMinZoom(){return this._zoom.effectiveMinZoom}get effectiveMaxZoom(){return this._zoom.effectiveMaxZoom}set geometry(e){e?this._set("geometry",e):this._set("geometry",null)}get version(){var e,t,s;return`${(e=this._zoom)==null?void 0:e.uid}/${(t=this._rotation)==null?void 0:t.uid}/${(s=this._geometry)==null?void 0:s.uid}`}get _defaultLODs(){var s,n,o;const e=(n=(s=this.view)==null?void 0:s.defaultsFromMap)==null?void 0:n.tileInfo,t=(o=this.view)==null?void 0:o.spatialReference;return e&&t&&e.spatialReference.equals(t)?e.lods:null}get _geometry(){var e;return new _i({geometry:this.geometry,spatialReference:(e=this.view)==null?void 0:e.spatialReference})}get _rotation(){return new Rc({rotationEnabled:this.rotationEnabled})}get _zoom(){const e=this._get("_zoom"),t=this.lods||this._defaultLODs,s=this.minZoom,n=this.maxZoom,o=this.minScale,r=this.maxScale,l=this.snapToZoom;return e&&e.lods===t&&e.minZoom===s&&e.maxZoom===n&&e.minScale===o&&e.maxScale===r&&e.snapToZoom===l?e:new Lc({lods:t,minZoom:s,maxZoom:n,minScale:o,maxScale:r,snapToZoom:l})}canZoomInTo(e){const t=this.effectiveMaxScale;return t===0||e>=t}canZoomOutTo(e){const t=this.effectiveMinScale;return t===0||e<=t}constrain(e,t){return this._zoom.constrain(e,t),this._rotation.constrain(e,t),this._geometry.constrain(e,t),e}constrainByGeometry(e){return this._geometry.constrain(e)}fit(e){return this._zoom.fit(e)}zoomToScale(e){return this._zoom.zoomToScale(e)}scaleToZoom(e){return this._zoom.scaleToZoom(e)}snapScale(e){return this._zoom.snapToClosestScale(e)}snapToNextScale(e){return this._zoom.snapToNextScale(e)}snapToPreviousScale(e){return this._zoom.snapToPreviousScale(e)}};a([c({readOnly:!0})],oe.prototype,"effectiveLODs",null),a([c({readOnly:!0})],oe.prototype,"effectiveMinScale",null),a([c({readOnly:!0})],oe.prototype,"effectiveMaxScale",null),a([c({readOnly:!0})],oe.prototype,"effectiveMinZoom",null),a([c({readOnly:!0})],oe.prototype,"effectiveMaxZoom",null),a([c({types:Dg,value:null})],oe.prototype,"geometry",null),a([c({type:[qd]})],oe.prototype,"lods",void 0),a([c()],oe.prototype,"minScale",void 0),a([c()],oe.prototype,"maxScale",void 0),a([c()],oe.prototype,"minZoom",void 0),a([c()],oe.prototype,"maxZoom",void 0),a([c()],oe.prototype,"rotationEnabled",void 0),a([c()],oe.prototype,"snapToZoom",void 0),a([c()],oe.prototype,"view",void 0),a([c({readOnly:!0})],oe.prototype,"version",null),a([c()],oe.prototype,"_defaultLODs",null),a([c({type:_i})],oe.prototype,"_geometry",null),a([c({type:Rc})],oe.prototype,"_rotation",null),a([c({readOnly:!0,type:Lc})],oe.prototype,"_zoom",null),oe=a([C("esri.views.2d.MapViewConstraints")],oe);const Fc=oe;function Vg(i){return i instanceof Float32Array&&i.length>=2}function Ng(i){return Array.isArray(i)&&i.length>=2}function to(i){return Vg(i)||Ng(i)}var Oo;const mt=[0,0];let Ht=Oo=class extends Ye{constructor(i){super(i),this._viewpoint2D={center:ce(),rotation:0,scale:0,spatialReference:null},this.center=[0,0],this.extent=new ji,this.id=0,this.inverseTransform=Jt(),this.resolution=0,this.rotation=0,this.scale=0,this.transform=Jt(),this.transformNoRotation=Jt(),this.displayMat3=Dn(),this.displayViewMat3=Dn(),this.viewMat3=Dn(),this.viewMat2d=ku(),this.worldScreenWidth=0,this.size=[0,0]}set pixelRatio(i){this._set("pixelRatio",i),this._update()}set size(i){this._set("size",i),this._update()}set viewpoint(i){if(i){const e=this._viewpoint2D,t=i.targetGeometry;e.center[0]=t.x,e.center[1]=t.y,e.rotation=i.rotation,e.scale=i.scale,e.spatialReference=t.spatialReference}this._update()}copy(i){const e=this.size,t=this.viewpoint;return t&&e?(this.viewpoint=Qe(t,i.viewpoint),this._set("size",ln(e,i.size))):(this.viewpoint=i.viewpoint.clone(),this._set("size",[i.size[0],i.size[1]])),this._set("pixelRatio",i.pixelRatio),this}clone(){return new Oo({size:this.size,viewpoint:this.viewpoint.clone(),pixelRatio:this.pixelRatio})}toMap(i,e,t){return to(e)?Ct(i,e,this.inverseTransform):(mt[0]=e,mt[1]=t,Ct(i,mt,this.inverseTransform))}toScreen(i,e,t){return to(e)?Ct(i,e,this.transform):(mt[0]=e,mt[1]=t,Ct(i,mt,this.transform))}toScreenNoRotation(i,e,t){return to(e)?Ct(i,e,this.transformNoRotation):(mt[0]=e,mt[1]=t,Ct(i,mt,this.transformNoRotation))}getScreenTransform(i,e){const{center:t}=this._viewpoint2D,s=this._get("pixelRatio")||1,n=this._get("size");return ur(i,t,n,e,0,s),i}_update(){const{center:i,spatialReference:e,scale:t,rotation:s}=this._viewpoint2D,n=this._get("pixelRatio")||1,o=this._get("size"),r=new Ze({targetGeometry:new X(i[0],i[1],e),scale:t,rotation:s});if(this._set("viewpoint",r),!o||!e||!t)return;this.resolution=Ki(r),this.rotation=s,this.scale=t,this.spatialReference=e,ln(this.center,i);const l=o[0]!==0?2/o[0]:0,d=o[1]!==0?-2/o[1]:0;ju(this.displayMat3,l,0,0,0,d,0,-1,1,1);const u=Wu(this.viewMat3),h=Fr(o[0]/2,o[1]/2),p=Fr(-o[0]/2,-o[1]/2),g=Nl(s);Lr(u,u,h),Zu(u,u,g),Lr(u,u,p),Ku(this.displayViewMat3,this.displayMat3,u);const f=Fl(this.viewMat2d,h);return Wo(f,f,g),an(f,f,p),_g(this.extent,r,o),hr(this.transform,r,o,n),Ol(this.inverseTransform,this.transform),Cg(this.transformNoRotation,r,o,n),this.worldScreenWidth=Tg(this.spatialReference,this.resolution),this._set("id",this.id+1),this}};a([c({readOnly:!0})],Ht.prototype,"id",void 0),a([c({value:1,json:{write:!0}})],Ht.prototype,"pixelRatio",null),a([c({json:{write:!0}})],Ht.prototype,"size",null),a([c()],Ht.prototype,"spatialReference",void 0),a([c({type:Ze,json:{write:!0}})],Ht.prototype,"viewpoint",null),Ht=Oo=a([C("esri.views.2d.ViewState")],Ht);const Da=Ht;var Do,Vo;let Et=Do=class extends z{constructor(){super(...arguments),this.left=0,this.top=0,this.right=0,this.bottom=0}clone(){return new Do({left:this.left,top:this.top,right:this.right,bottom:this.bottom})}};a([c()],Et.prototype,"left",void 0),a([c()],Et.prototype,"top",void 0),a([c()],Et.prototype,"right",void 0),a([c()],Et.prototype,"bottom",void 0),Et=Do=a([C("esri.views.2d.PaddedViewState.Padding")],Et);let Ri=Vo=class extends Da{constructor(...i){super(...i),this.paddedViewState=new Da,this._updateContent=(()=>{const e=ce();return()=>{const t=this._get("size"),s=this._get("padding");if(!t||!s)return;const n=this.paddedViewState;ye(e,s.left+s.right,s.top+s.bottom),go(e,t,e),ln(n.size,e);const o=n.viewpoint;o&&(this.viewpoint=o)}})(),this.addHandles(I(()=>[this.size,this.padding],()=>this._updateContent(),vs)),this.padding=new Et,this.size=[0,0]}set padding(i){this._set("padding",i||new Et)}set viewpoint(i){if(i){const e=i.clone();this.paddedViewState.viewpoint=i,kg(e,i,this._get("size"),this._get("padding"));const t=this._viewpoint2D,s=e.targetGeometry;t.center[0]=s.x,t.center[1]=s.y,t.rotation=e.rotation,t.scale=e.scale,t.spatialReference=s.spatialReference,this._update()}}clone(){return new Vo({padding:this.padding.clone(),size:this.size.slice(),viewpoint:this.paddedViewState.viewpoint.clone(),pixelRatio:this.pixelRatio})}};a([c()],Ri.prototype,"paddedViewState",void 0),a([c({type:Et})],Ri.prototype,"padding",null),a([c()],Ri.prototype,"viewpoint",null),Ri=Vo=a([C("esri.views.2d.PaddedViewState")],Ri);const zg=Ri;function pr(i,e){switch(e){case"primary":return i.pointerType==="touch"||i.button===0;case"secondary":return i.pointerType!=="touch"&&i.button===2;case"tertiary":return i.pointerType!=="touch"&&i.button===1}}let Va=class extends he{constructor(e,t){super(!0),this._view=e,this.registerIncoming("double-click",t,s=>this._handleDoubleClick(s,t))}_handleDoubleClick(e,t){pr(e.data,"primary")&&(e.stopPropagation(),t?this._view.mapViewNavigation.zoomOut([e.data.x,e.data.y]):this._view.mapViewNavigation.zoomIn([e.data.x,e.data.y]))}},Bg=class extends he{constructor(e,t,s){super(!0),this.view=e,this.pointerType=t,this.registerIncoming("double-tap-drag",s,n=>this._handleDoubleTapDrag(n))}_handleDoubleTapDrag(e){const{data:t}=e,{pointerType:s}=t;if(s!==this.pointerType)return;e.stopPropagation();const{action:n,delta:o}=t,{view:r}=this,{mapViewNavigation:l}=r;switch(n){case"begin":{const{scale:d}=r;this._startScale=d,this._currentScale=d,this._previousDelta=o,l.begin();break}case"update":{if(this._previousDelta.y===o.y)return;this._previousDelta=o;const d=1.015**o.y,u=this._startScale*d,h=u/this._currentScale;l.setViewpointImmediate(h),this._currentScale=u;break}case"end":{const{constraints:d}=r,{effectiveLODs:u,snapToZoom:h}=d;if(!h||!u)return void l.end();const p=d.snapScale(this._currentScale),g=(o.y>0?Math.max(p,d.snapToPreviousScale(this._startScale)):Math.min(p,d.snapToNextScale(this._startScale)))/this._currentScale;l.zoom(g);break}}}},Pn=class{constructor(e){this._callbacks=e,this._currentCount=0,this._callbacks.condition||(this._callbacks.condition=()=>!0)}handle(e){const t=e.data,s=t.pointers.size;switch(t.action){case"start":this._currentCount=s,this._emitStart(e);break;case"added":this._emitEnd(this._previousEvent),this._currentCount=s,this._emitStart(e);break;case"update":this._emitUpdate(e);break;case"removed":this._startEvent&&this._emitEnd(this._previousEvent),this._currentCount=s,this._emitStart(e);break;case"end":this._emitEnd(e),this._currentCount=0}this._previousEvent=e}_emitStart(e){var t,s;this._startEvent=e,(s=(t=this._callbacks).condition)!=null&&s.call(t,this._currentCount,e)&&this._callbacks.start(this._currentCount,e,this._startEvent)}_emitUpdate(e){var t,s;(s=(t=this._callbacks).condition)!=null&&s.call(t,this._currentCount,e)&&this._callbacks.update(this._currentCount,e,this._startEvent)}_emitEnd(e){var t,s;(s=(t=this._callbacks).condition)!=null&&s.call(t,this._currentCount,e)&&this._callbacks.end(this._currentCount,e,this._startEvent),this._startEvent=null}},Ug=class extends he{constructor(e,t,s){super(!0),this.view=e,this.pointerAction=t,this.registerIncoming("drag",s,n=>this._handleDrag(n)),this.registerIncoming("pointer-down",()=>this.stopMomentumNavigation())}onInstall(e){super.onInstall(e),this._dragEventSeparator=new Pn({start:(t,s)=>{this.view.mapViewNavigation.pan.begin(this.view,s.data),s.stopPropagation()},update:(t,s)=>{this.view.mapViewNavigation.pan.update(this.view,s.data),s.stopPropagation()},end:(t,s)=>{this.view.mapViewNavigation.pan.end(this.view,s.data),s.stopPropagation()},condition:(t,s)=>t===1&&pr(s.data,this.pointerAction)})}_handleDrag(e){const t=this.view.mapViewNavigation;t.pinch.zoomMomentum||t.pinch.rotateMomentum?this.stopMomentumNavigation():this._dragEventSeparator.handle(e)}stopMomentumNavigation(){this.view.mapViewNavigation.pan.stopMomentumNavigation()}},Hg=class extends he{constructor(e,t,s){super(!0),this._view=e,this.pointerAction=t;const n=this._view.mapViewNavigation;this._dragEventSeparator=new Pn({start:(o,r)=>{n.rotate.begin(this._view,r.data),r.stopPropagation()},update:(o,r)=>{n.rotate.update(this._view,r.data),r.stopPropagation()},end:(o,r)=>{n.rotate.end(),r.stopPropagation()},condition:(o,r)=>o===1&&pr(r.data,this.pointerAction)}),this.registerIncoming("drag",s,o=>this._dragEventSeparator.handle(o))}};function Ge(i){let e=i*i;return i<0&&(e*=-1),e}function qg(i){return i.translation[0]=0,i.translation[1]=0,i.translation[2]=0,i.heading=0,i.tilt=0,i}function Gg(i,e,t){const s=t,n=i.state,o=i.device,r=e.tiltDirection==="forward-down"?1:-1,l=1;return o.deviceType==="standard"?(s.translation[0]=Ge(n.axes[0]),s.translation[1]=Ge(n.axes[1]),s.translation[2]=Ge(n.buttons[7])-Ge(n.buttons[6]),s.heading=Ge(n.axes[2]),s.tilt=Ge(n.axes[3])):o.deviceType==="spacemouse"&&(s.translation[0]=1.2*Ge(n.axes[0]),s.translation[1]=1.2*Ge(n.axes[1]),s.translation[2]=2*-Ge(n.axes[2]),s.heading=1.2*Ge(n.axes[5]),s.tilt=1.2*Ge(n.axes[3])),s.tilt*=r,Nd(s.translation,s.translation,l),s}function jg(i){return i.translation[0]===0&&i.translation[1]===0&&i.translation[2]===0&&i.heading===0&&i.tilt===0&&i.zoom===0}let Wg=class extends he{constructor(e){super(!0),this._view=e,this._frameTask=null,this._watchHandles=new lt,this._currentDevice=null,this._transformation={translation:[0,0,0],heading:0,tilt:0,zoom:0},this._handle=this.registerIncoming("gamepad",t=>this._handleGamePadEvent(t)),this._handle.pause()}onInstall(e){super.onInstall(e),this._watchHandles.add([I(()=>{var t;return(t=this._view.navigation.gamepad)==null?void 0:t.enabled},t=>{t?(this._handle.resume(),this._frameTask||(this._frameTask=Hi({update:s=>this._frameUpdate(s.deltaTime)}))):(this._handle.pause(),this._frameTask&&(this._frameTask.remove(),this._frameTask=null))},H)])}onUninstall(){this._watchHandles.removeAll(),this._frameTask&&(this._frameTask.remove(),this._frameTask=null),super.onUninstall()}_handleGamePadEvent(e){const t=this._view.navigation.gamepad.device;t&&e.data.device!==t||this._currentDevice&&this._currentDevice!==e.data.device||(e.data.action==="end"?(this._currentDevice=null,qg(this._transformation)):(this._currentDevice=e.data.device,Gg(e.data,this._view.navigation.gamepad,this._transformation)))}_frameUpdate(e){const t=this._transformation;if(jg(t))return;const s=this._view.viewpoint.clone(),n=this._view.navigation.gamepad.velocityFactor,o=Kg*n*e;An(s,s,[t.translation[0]*o,-t.translation[1]*o]);const r=1+t.translation[2]*Yg*e,l=this._view.constraints.rotationEnabled?-t.heading*Zg*e:0,d=this._view.size,u=[d[0]/2,d[1]];Pc(s,s,r,l,u,d);const h=this._view.constraints.constrain(s,this._view.viewpoint);this._view.viewpoint=h}};const Zg=.06,Kg=.7,Yg=6e-4;let Qg=class extends he{constructor(e,t,s){super(!0),this.view=e,this.keys=t,this._pressed=!1,this._keyMap={[t.left]:"left",[t.right]:"right",[t.up]:"up",[t.down]:"down"},this.registerIncoming("key-down",s,n=>this._handleKeyDown(n)),this.registerIncoming("key-up",s,n=>this._handleKeyUp(n)),this.registerIncoming("blur",s,()=>this._handleBlur())}_handleKeyDown(e){e.data.repeat||this._handleKey(e,!0)}_handleKeyUp(e){this._handleKey(e,!1)}_handleBlur(){this._pressed&&(this._pressed=!1,this.view.mapViewNavigation.stop())}_handleKey(e,t){const s=this._keyMap[e.data.key];if(this._pressed=s!=null,this._pressed){if(t)switch(this.view.mapViewNavigation.begin(),s){case"left":this.view.mapViewNavigation.continousPanLeft();break;case"right":this.view.mapViewNavigation.continousPanRight();break;case"up":this.view.mapViewNavigation.continousPanUp();break;case"down":this.view.mapViewNavigation.continousPanDown()}else this._pressed=!1,this.view.mapViewNavigation.stop();e.stopPropagation()}}},Jg=class extends he{constructor(e,t,s){super(!0),this.view=e,this.keys=t,this._pressed=!1,this._keyToDirection={[t.clockwiseOption1]:"clockwise",[t.clockwiseOption2]:"clockwise",[t.counterClockwiseOption1]:"counterClockwise",[t.counterClockwiseOption2]:"counterClockwise",[t.resetOption1]:"reset",[t.resetOption2]:"reset"},this.registerIncoming("key-down",s,n=>this._handleKeyDown(n)),this.registerIncoming("key-up",s,n=>this._handleKeyUp(n)),this.registerIncoming("blur",s,()=>this._handleBlur())}_handleKeyDown(e){e.data.repeat||this._handleKey(e,!0)}_handleKeyUp(e){this._handleKey(e,!1)}_handleBlur(){this._pressed&&(this._pressed=!1,this.view.mapViewNavigation.stop())}_handleKey(e,t){const s=e.modifiers;if(s.size>0&&!s.has("Shift")||!this.view.constraints.rotationEnabled)return;const n=this._keyToDirection[e.data.key];if(this._pressed=n!=null,this._pressed){if(t)switch(this.view.mapViewNavigation.begin(),n){case"clockwise":this.view.mapViewNavigation.continousRotateClockwise();break;case"counterClockwise":this.view.mapViewNavigation.continousRotateCounterclockwise();break;case"reset":this.view.mapViewNavigation.resetRotation()}else this._pressed=!1,this.view.mapViewNavigation.stop();e.stopPropagation()}}};var Bi;(function(i){i[i.IN=0]="IN",i[i.OUT=1]="OUT"})(Bi||(Bi={}));let Xg=class extends he{constructor(e,t,s){super(!0),this.view=e,this.keys=t,this._keysToZoomAction={},this.registerIncoming("key-down",s,n=>this._handleKeyDown(n)),t.zoomIn.forEach(n=>this._keysToZoomAction[n]=Bi.IN),t.zoomOut.forEach(n=>this._keysToZoomAction[n]=Bi.OUT)}_handleKeyDown(e){this._handleKey(e)}_handleKey(e){const t=e.modifiers;if(t.size>0&&!t.has("Shift"))return;const{key:s}=e.data;if(!(s in this._keysToZoomAction))return;const n=this._keysToZoomAction[s],{mapViewNavigation:o}=this.view;let r=null;switch(n){case Bi.IN:r=o.zoomIn();break;case Bi.OUT:r=o.zoomOut();break;default:return}o.begin(),r.then(()=>o.end()),e.stopPropagation()}};const ef=.6;let tf=class extends he{constructor(e,t){super(!0),this._view=e,this._canZoom=!0,this.registerIncoming("mouse-wheel",t,s=>this._handleMouseWheel(s))}_handleMouseWheel(e){if(!this._view.navigation.mouseWheelZoomEnabled||(e.preventDefault(),e.stopPropagation(),!this._canZoom))return;const t=this._view.mapViewNavigation,{x:s,y:n,deltaY:o}=e.data,r=1/ef**(1/60*o),l=t.zoom(r,[s,n]);l&&(this._canZoom=!1,l.catch(()=>{}).then(()=>{this._canZoom=!0,t.end()}))}},sf=class extends he{constructor(e){super(!0),this.view=e,this.registerIncoming("drag",s=>this._handleDrag(s)),this.registerIncoming("pointer-down",()=>this._stopMomentumNavigation());const t=this.view.mapViewNavigation;this._dragEventSeparator=new Pn({start:(s,n)=>{t.pinch.begin(this.view,n.data),n.stopPropagation()},update:(s,n)=>{t.pinch.update(this.view,n.data),n.stopPropagation()},end:(s,n)=>{t.pinch.end(this.view),n.stopPropagation()},condition:s=>s>=2})}_handleDrag(e){this._dragEventSeparator.handle(e)}_stopMomentumNavigation(){this.view.mapViewNavigation.pinch.stopMomentumNavigation()}};function Na(i){const e=i.native;return e?{buttons:e.buttons.map(t=>t.pressed?t.value?t.value:1:0),axes:e.axes.map(t=>rf(t,i.axisThreshold))}:{buttons:[],axes:[]}}function nf(i,e){if(i.axes.length!==e.axes.length||i.buttons.length!==e.buttons.length)return!1;for(let t=0;t<i.axes.length;t++)if(i.axes[t]!==e.axes[t])return!1;for(let t=0;t<i.buttons.length;t++)if(i.buttons[t]!==e.buttons[t])return!1;return!0}function of(i){for(let e=0;e<i.axes.length;e++)if(i.axes[e]!==0)return!1;for(let e=0;e<i.buttons.length;e++)if(i.buttons[e]!==0)return!1;return!0}function rf(i,e){const t=Math.abs(i);return t<e?0:Math.sign(i)*(t-e)/(1-e)}let af=class{constructor(e,t){this._element=e,this._input=t,this._hasEventListeners=!1,this._onConnectGamepad=o=>{this._connectGamepad(o.gamepad)},this._onDisconnectGamepad=o=>{const r=o.gamepad,l=r.index,d=this._inputDevices[l];d&&(this._emitGamepadEvent(r,Na(d),!1),this._inputDevices.splice(l,1),this._latestUpdate.splice(l,1),this._input.gamepad.devices.remove(d),this.ensurePollingState())},this._frameTask=null,this._latestUpdate=new Array,this._inputDevices=new Array,this._callback=null;const s="getGamepads"in window.navigator,n=window.isSecureContext;this.supported=s&&n,this.supported&&(this._forEachGamepad(o=>this._connectGamepad(o)),window.addEventListener("gamepadconnected",this._onConnectGamepad),window.addEventListener("gamepaddisconnected",this._onDisconnectGamepad),this.ensurePollingState())}destroy(){this.hasEventListeners=!1,this.supported&&(window.removeEventListener("gamepadconnected",this._onConnectGamepad),window.removeEventListener("gamepaddisconnected",this._onDisconnectGamepad))}set hasEventListeners(e){this._hasEventListeners!==e&&(this._hasEventListeners=e,this.ensurePollingState())}get _eventsEnabled(){return this.supported&&this._inputDevices.length>0&&this._hasEventListeners}set onEvent(e){this._callback=e}_connectGamepad(e){const t=new lr(e);t.deviceType!=="unknown"&&(this._inputDevices[e.index]=t,this._input.gamepad.devices.add(t)),this.ensurePollingState()}ensurePollingState(){this._eventsEnabled?this._startPolling():this._stopPolling()}_startPolling(){this._frameTask==null&&(this._frameTask=Hi({update:()=>this._readGamepadState()}))}_stopPolling(){this._frameTask!=null&&(this._frameTask.remove(),this._frameTask=null,this._latestUpdate=new Array)}_readGamepadState(){const e=document.hasFocus(),t=this._element.contains(document.activeElement),s=this._input.gamepad.enabledFocusMode==="document"&&!e||this._input.gamepad.enabledFocusMode==="view"&&!t;this._forEachGamepad(n=>{const o=this._inputDevices[n.index];if(!o)return;const r=this._latestUpdate[n.index],l=Na(o),d=s||of(l);r&&(r.timestamp===n.timestamp||!r.active&&d||nf(r.state,l))||this._emitGamepadEvent(n,l,!d)})}_forEachGamepad(e){const t=window.navigator.getGamepads();for(let s=0;s<t.length;s++){const n=t[s];this._validate(n)&&e(n)}}_emitGamepadEvent(e,t,s){const n=this._latestUpdate[e.index],o=n&&n.active;if(!o&&!s)return;const r=!o&&s?"start":o&&s?"update":"end";this._latestUpdate[e.index]={timestamp:e.timestamp,state:t,active:s},this._callback&&this._callback({device:this._inputDevices[e.index],state:t,action:r})}_validate(e){if(!e||!e.connected)return!1;for(let t=0;t<e.axes.length;t++)if(isNaN(e.axes[t]))return!1;return!0}};const za=$e("trident"),Ba=$e("edge"),lf=$e("chrome"),cf=$e("ff"),df=$e("safari"),xi={touchNone:"esri-view-surface--touch-none",touchPan:"esri-view-surface--touch-pan"};let mr=class{constructor(e,t){this._input=t,this._active={},this._activePointerCaptures=new Set,this._keyDownState=new Set,this._eventId=1,this._browserTouchPanningEnabled=!1,this._element=e,e.getAttribute("tabindex")||e.setAttribute("tabindex","0"),this._eventHandlers={"key-down":this._handleKey,"key-up":this._handleKey,"pointer-down":this._handlePointer,"pointer-move":this._handlePointerPreventDefault,"pointer-up":this._handlePointerPreventDefault,"pointer-enter":this._handlePointer,"pointer-leave":this._handlePointer,"pointer-cancel":this._handlePointer,"mouse-wheel":this._handleMouseWheel,"pointer-capture-lost":this._handlePointerCaptureLost},this._updateTouchAction(),this._element.addEventListener("keydown",this._preventAltKeyDefault),this._gamepadSource=new af(e,this._input),this._gamepadSource.onEvent=s=>this._callback("gamepad",s)}destroy(){this._callback=null,this.activeEvents=null,this._activePointerCaptures.forEach(e=>{this._releasePointerCaptureSafe(e)}),this._gamepadSource=Te(this._gamepadSource),this._activePointerCaptures=null,this._removeTouchAction(),this._element.removeEventListener("keydown",this._preventAltKeyDefault)}get browserTouchPanningEnabled(){return this._browserTouchPanningEnabled}set browserTouchPanningEnabled(e){this._browserTouchPanningEnabled=e,this._updateTouchAction(),this._updateTouchEventHandling()}set onEventReceived(e){this._callback=e}set activeEvents(e){for(const t in this._active)if(!e||!e.has(t)){const s=this._active[t];this._element.removeEventListener(io[t],s),delete this._active[t]}e&&e.forEach(t=>{if(!this._active[t]&&io[t]){const s=(this._eventHandlers[t]||this._handleDefault).bind(this,t);this._element.addEventListener(io[t],s),this._active[t]=s}}),this._gamepadSource.hasEventListeners=e&&e.has("gamepad")}setPointerCapture(e,t){t?(this._element.setPointerCapture(e.pointerId),this._activePointerCaptures.add(e.pointerId)):(this._releasePointerCaptureSafe(e.pointerId),this._activePointerCaptures.delete(e.pointerId))}_updateTouchAction(){this._element.classList.remove(this._browserTouchPanningEnabled?xi.touchNone:xi.touchPan),this._element.classList.add(this._browserTouchPanningEnabled?xi.touchPan:xi.touchNone)}_updateTouchEventHandling(){this._browserTouchPanningEnabled?this._element.addEventListener("touchmove",this._preventMultiTouchPanning):this._element.removeEventListener("touchmove",this._preventMultiTouchPanning)}_removeTouchAction(){this._element.classList.remove(xi.touchNone),this._element.classList.remove(xi.touchPan),this._element.removeEventListener("touchmove",this._preventMultiTouchPanning)}_releasePointerCaptureSafe(e){try{if(this._element.hasPointerCapture&&!this._element.hasPointerCapture(e))return;this._element.releasePointerCapture(e)}catch{}}_updateNormalizedPointerLikeEvent(e,t){const s=yc(this._element,e);return mr.test.disableSubpixelCoordinates&&(s.x=Math.round(s.x),s.y=Math.round(s.y)),t.x=s.x,t.y=s.y,t}_handleKey(e,t){const s=vm(t);s&&e==="key-up"&&this._keyDownState.delete(s);const n={native:t,key:s,repeat:s&&this._keyDownState.has(s)};s&&e==="key-down"&&this._keyDownState.add(n.key),this._callback(e,n)}_handlePointer(e,t){const s=this._updateNormalizedPointerLikeEvent(t,{native:t,x:0,y:0,pointerType:t.pointerType,button:t.button,buttons:t.buttons,eventId:this._eventId++});this._callback(e,s)}_handlePointerPreventDefault(e,t){const s=this._updateNormalizedPointerLikeEvent(t,{native:t,x:0,y:0,pointerType:t.pointerType,button:t.button,buttons:t.buttons,eventId:this._eventId++});t.preventDefault(),this._callback(e,s)}_handleMouseWheel(e,t){let s=t.deltaY;switch(t.deltaMode){case 0:(za||Ba)&&(s=s/document.documentElement.clientHeight*600);break;case 1:s*=30;break;case 2:s*=900}za||Ba?s*=.7:lf||df?s*=.6:cf&&(s*=1.375);const n=100,o=Math.abs(s);o>n&&(s=s/o*200/(1+Math.exp(-.02*(o-n))));const r=this._updateNormalizedPointerLikeEvent(t,{native:t,x:0,y:0,deltaY:s});this._callback(e,r)}_handlePointerCaptureLost(e,t){this._activePointerCaptures.delete(t.pointerId),this._handleDefault(e,t)}_handleDefault(e,t){const s={native:t};t.preventDefault(),this._callback(e,s)}_preventAltKeyDefault(e){e.key==="Alt"&&e.preventDefault()}_preventMultiTouchPanning(e){e.touches.length>1&&e.preventDefault()}};mr.test={disableSubpixelCoordinates:!1};const io={"key-down":"keydown","key-up":"keyup","pointer-down":"pointerdown","pointer-up":"pointerup","pointer-move":"pointermove","mouse-wheel":"wheel","pointer-capture-got":"gotpointercapture","pointer-capture-lost":"lostpointercapture","context-menu":"contextmenu","pointer-enter":"pointerenter","pointer-leave":"pointerleave","pointer-cancel":"pointercancel",focus:"focus",blur:"blur"};let uf=class extends he{constructor(){super(!0),this.registerIncoming("context-menu",e=>{e.data.native.preventDefault()})}};function gr(i,e){return Math.abs(e.x-i.x)+Math.abs(e.y-i.y)}function hf(i,e){const t=e.x-i.x,s=e.y-i.y;return Math.sqrt(t*t+s*s)}function pf(i,e){if(e?(e.radius=0,e.center.x=0,e.center.y=0):e={radius:0,center:me()},i.length===0)return e;if(i.length===1)return e.center.x=i[0].x,e.center.y=i[0].y,e;if(i.length===2){const[M,P]=i,[L,k]=[P.x-M.x,P.y-M.y];return e.radius=Math.sqrt(L*L+k*k)/2,e.center.x=(M.x+P.x)/2,e.center.y=(M.y+P.y)/2,e}let t=0,s=0;for(let M=0;M<i.length;M++)t+=i[M].x,s+=i[M].y;t/=i.length,s/=i.length;const n=i.map(M=>M.x-t),o=i.map(M=>M.y-s);let r=0,l=0,d=0,u=0,h=0,p=0,g=0;for(let M=0;M<n.length;M++){const P=n[M],L=o[M],k=P*P,Y=L*L;r+=k,l+=Y,d+=P*L,u+=k*P,h+=Y*L,p+=P*Y,g+=L*k}const f=.5*(u+p),_=.5*(h+g),y=r*l-d*d,v=(f*l-_*d)/y,w=(r*_-d*f)/y,A=me(v+t,w+s);return{radius:Math.sqrt(v*v+w*w+(r+l)/i.length),center:A}}function bi(i){const{native:e}=i,{pointerId:t,button:s,pointerType:n}=e;return n==="mouse"?`${t}:${s}`:`${n}`}const qe={maximumDoubleClickDelay:250,maximumDoubleClickDistance:10,maximumDoubleTouchDelay:350,maximumDoubleTouchDistance:35};let mf=class extends he{constructor(e=qe.maximumDoubleClickDelay,t=qe.maximumDoubleClickDistance,s=qe.maximumDoubleTouchDelay,n=qe.maximumDoubleTouchDistance,o=fn){super(!1),this._maximumDoubleClickDelay=e,this._maximumDoubleClickDistance=t,this._maximumDoubleTouchDelay=s,this._maximumDoubleTouchDistance=n,this._clock=o,this._pointerState=new Map,this._click=this.registerOutgoing("click"),this._doubleClick=this.registerOutgoing("double-click"),this.registerIncoming("immediate-click",this._handleImmediateClick.bind(this)),this.registerIncoming("pointer-down",this._handlePointerDown.bind(this))}onUninstall(){this._pointerState.forEach(e=>e.doubleClickTimer=ti(e.doubleClickTimer))}get hasPendingInputs(){return _n(this._pointerState,e=>e.doubleClickTimer!=null)}_clearDoubleClickTimer(e,t){const s=this._pointerState.get(e);s&&(s.doubleClickTimer=ti(s.doubleClickTimer),t&&this._click.emit(s.event.data,void 0,s.event.modifiers),this._pointerState.delete(e),this.refreshHasPendingInputs())}_doubleClickTimeoutExceeded(e){const t=this._pointerState.get(e);t.pointerDownCount===1&&this._click.emit(t.event.data,void 0,t.event.modifiers),t.doubleClickTimer=null,this._pointerState.delete(e),this.refreshHasPendingInputs()}_getPointerId(e){const{pointerId:t,pointerType:s,button:n}=e.native;return s==="mouse"?`${t}:${n}`:`${s}`}_handleImmediateClick(e){const t=e.data,{pointerType:s}=t.native,n=this._getPointerId(t);if(!this._pointerState.has(n))return void this._startClick(e);const o=this._pointerState.get(n),{data:r,modifiers:l}=o.event,d=s==="touch"?this._maximumDoubleTouchDistance:this._maximumDoubleClickDistance;gr(r,t)>d?(this._clearDoubleClickTimer(n,!0),this._startClick(e)):(this._clearDoubleClickTimer(n,!1),o.pointerDownCount===2&&this._doubleClick.emit(r,void 0,l))}_handlePointerDown(e){const t=bi(e.data),s=this._pointerState.get(t);s&&(s.pointerDownCount+=1)}_startClick(e){const{data:t}=e,{native:{pointerType:s}}=t,n=bi(t),o=s==="touch"?this._maximumDoubleTouchDelay:this._maximumDoubleClickDelay,r=this._clock.setTimeout(()=>this._doubleClickTimeoutExceeded(n),o),l=1;this._pointerState.set(n,{event:e,doubleClickTimer:r,pointerDownCount:l}),this.refreshHasPendingInputs()}},gf=class extends he{constructor(e=qe.maximumDoubleClickDelay,t=qe.maximumDoubleClickDistance,s=qe.maximumDoubleTouchDelay,n=qe.maximumDoubleTouchDistance,o=fn){super(!1),this._maximumDoubleClickDelay=e,this._maximumDoubleClickDistance=t,this._maximumDoubleTouchDelay=s,this._maximumDoubleTouchDistance=n,this._clock=o,this._doubleTapDragReady=!1,this._doubleTapDragActive=!1,this._dragStartCenter=me(0,0),this._pointerState=new Map,this._doubleTapDrag=this.registerOutgoing("double-tap-drag"),this._dragEventSeparator=new Pn({start:(r,l)=>this._dragStart(r,l),update:(r,l)=>this._dragUpdate(l),end:(r,l)=>this._dragEnd(l)}),this.registerIncoming("drag",r=>this._dragEventSeparator.handle(r)),this.registerIncoming("pointer-down",r=>this._handlePointerDown(r)),this.registerIncoming("pointer-up",()=>this._handlePointerUp())}onUninstall(){this._pointerState.forEach(e=>{e.doubleTapTimeout=ti(e.doubleTapTimeout)})}get hasPendingInputs(){return _n(this._pointerState,e=>e.doubleTapTimeout!=null)}_clearPointerDown(e){const t=this._pointerState.get(e);t&&(t.doubleTapTimeout=ti(t.doubleTapTimeout),this._pointerState.delete(e),this.refreshHasPendingInputs())}_createDoubleTapDragData(e,t,s){const{button:n,buttons:o,pointer:r,pointers:l,pointerType:d,timestamp:u}=s;return{action:e,delta:t,button:n,buttons:o,pointer:r,pointers:l,pointerType:d,timestamp:u}}_dragStart(e,t){if(!this._doubleTapDragReady||e!==1)return;this._doubleTapDragReady=!1,this._doubleTapDragActive=!0;const{data:s,modifiers:n}=t,{center:o}=s;this._dragStartCenter=o;const r=this._createDoubleTapDragData("begin",me(0,0),s);this._doubleTapDrag.emit(r,void 0,n),t.stopPropagation()}_dragUpdate(e){if(!this._doubleTapDragActive)return;const{data:t,modifiers:s}=e,{center:n}=t,o=me(n.x-this._dragStartCenter.x,n.y-this._dragStartCenter.y),r=this._createDoubleTapDragData("update",o,t);this._doubleTapDrag.emit(r,void 0,s),e.stopPropagation()}_dragEnd(e){if(!this._doubleTapDragActive)return;const{data:t,modifiers:s}=e,{center:n}=t,o=me(n.x-this._dragStartCenter.x,n.y-this._dragStartCenter.y),r=this._createDoubleTapDragData("end",o,t);this._doubleTapDrag.emit(r,void 0,s),this._doubleTapDragActive=!1,e.stopPropagation()}_handlePointerDown(e){const{data:t}=e,s=bi(t),n=this._pointerState.get(s),{pointerType:o}=t.native;if(n){const r=o==="touch"?this._maximumDoubleTouchDistance:this._maximumDoubleClickDistance;this._clearPointerDown(s),gr(n.event.data,t)>r?this._storePointerDown(e):this._doubleTapDragReady=!0}else this._storePointerDown(e)}_handlePointerUp(){this._doubleTapDragReady=!1}_storePointerDown(e){const{data:t}=e,{pointerType:s}=t.native,n=bi(t),o=s==="touch"?this._maximumDoubleTouchDelay:this._maximumDoubleClickDelay,r=this._clock.setTimeout(()=>this._clearPointerDown(n),o);this._pointerState.set(n,{event:e,doubleTapTimeout:r}),this.refreshHasPendingInputs()}},ff=class extends he{constructor(e){super(!1),this._navigationTouch=e,this._startStateModifiers=new Set,this._activePointerMap=new Map,this._isDragging=!1,this._isCurrentDragSuppressed=!1,this._drag=this.registerOutgoing("drag"),this.registerIncoming("pointer-drag",this._handlePointerDrag.bind(this)),this.registerIncoming("pointer-up",this._handlePointerUpAndPointerLost.bind(this)),this.registerIncoming("pointer-capture-lost",this._handlePointerUpAndPointerLost.bind(this)),this.registerIncoming("pointer-cancel",this._handlePointerUpAndPointerLost.bind(this))}_createPayload(e,t,s,n){return{action:e,pointerType:this._pointerType,button:this._mouseButton,buttons:t.buttons,timestamp:n,pointers:_f(this._activePointerMap),pointer:t,angle:s.angle,radius:s.radius,center:s.center}}_addPointer(e){const t=e.native.pointerId,s=Os(this._activePointerMap).angle,n={event:e,initialAngle:0,lastAngle:0};this._activePointerMap.set(t,n);const o=Qs(n,Oc(this._activePointerMap));n.initialAngle=o,n.lastAngle=o,this._updatePointerAngles(s)}_updatePointer(e){if(e&&e.x==null&&e.y==null)return;const t=e.native.pointerId,s=this._activePointerMap.get(t);s?s.event=e:this._addPointer(e)}_removePointer(e){const t=Os(this._activePointerMap).angle;this._activePointerMap.delete(e),this._updatePointerAngles(t)}_updatePointerAngles(e){const t=Os(this._activePointerMap);this._activePointerMap.forEach(s=>{s.initialAngle=Qs(s,t)-e,s.lastAngle=Qs(s,t)-e})}_emitEvent(e,t,s){const n=Os(this._activePointerMap);this._drag.emit(this._createPayload(e,t,n,s),void 0,this._startStateModifiers)}_handlePointerUpAndPointerLost(e){const t=e.data.native.pointerId,s=Rn(e.timestamp);this._activePointerMap.get(t)&&(this._activePointerMap.size===1?(this._updatePointer(e.data),!this._isCurrentDragSuppressed&&this._emitEvent("end",e.data,s),this._isDragging=!1,this._isCurrentDragSuppressed=!1,this._removePointer(t)):(this._removePointer(t),this._emitEvent("removed",e.data,Rn(e.timestamp))))}_handlePointerDrag(e){const t=e.data,s=t.currentEvent,n=Rn(e.timestamp);switch(t.action){case"start":case"update":this._isDragging?this._activePointerMap.has(s.native.pointerId)?(this._updatePointer(s),!this._isCurrentDragSuppressed&&this._emitEvent("update",s,n)):(this._addPointer(s),this._emitEvent("added",s,n),this._isCurrentDragSuppressed=this._isSuppressed):(this._updatePointer(s),this._pointerType=e.data.startEvent.pointerType,this._mouseButton=e.data.startEvent.button,this._startStateModifiers=e.modifiers,this._isDragging=!0,this._isCurrentDragSuppressed=this._isSuppressed,!this._isCurrentDragSuppressed&&this._emitEvent("start",s,n))}}get _isSuppressed(){return!!this._navigationTouch&&!this._navigationTouch.browserTouchPanEnabled&&this._pointerType==="touch"&&this._activePointerMap.size===1}};function Oc(i){const e=[];return i.forEach(t=>{e.push(me(t.event.x,t.event.y))}),pf(e)}function Os(i){const e=Oc(i);let t=0;return i.forEach(s=>{let n=Qs(s,e),o=n-s.lastAngle;for(;o>Math.PI;)o-=2*Math.PI;for(;o<-Math.PI;)o+=2*Math.PI;n=s.lastAngle+o,s.lastAngle=n;const r=n-s.initialAngle;t+=r}),t/=i.size||1,{angle:t,radius:e.radius,center:e.center}}function _f(i){const e=new Map;return i.forEach((t,s)=>e.set(s,t.event)),e}function Qs(i,e){const t=i.event,s=t.x-e.center.x,n=t.y-e.center.y;return Math.atan2(n,s)}var Ua;(function(i){i[i.Left=0]="Left",i[i.Middle=1]="Middle",i[i.Right=2]="Right",i[i.Back=3]="Back",i[i.Forward=4]="Forward",i[i.Undefined=-1]="Undefined"})(Ua||(Ua={}));let yf=class extends he{constructor(e=qe.maximumDoubleClickDelay,t=qe.maximumDoubleClickDistance,s=qe.maximumDoubleTouchDelay,n=qe.maximumDoubleTouchDistance,o=fn){super(!1),this._maximumDoubleClickDelay=e,this._maximumDoubleClickDistance=t,this._maximumDoubleTouchDelay=s,this._maximumDoubleTouchDistance=n,this._clock=o,this._pointerState=new Map,this._immediateDoubleClick=this.registerOutgoing("immediate-double-click"),this.registerIncoming("pointer-down",this._handlePointerDown.bind(this)),this.registerIncoming("pointer-up",this._handlePointerUp.bind(this))}onUninstall(){this._pointerState.forEach(e=>{e.immediateDoubleClick&&e.immediateDoubleClick.timeoutHandle.remove()}),super.onUninstall()}_handlePointerDown(e){const t=e.data,s=bi(t);if(!this._pointerState.has(s)){const n={downButton:t.native.button,immediateDoubleClick:null};this._pointerState.set(s,n),this.startCapturingPointer(t.native)}}_handlePointerUp(e){const t=e.data,s=bi(t),n=this._pointerState.get(s);if(n&&n.downButton===t.native.button){const o=n.immediateDoubleClick;if(o){o.timeoutHandle.remove();const r=e.data.native.pointerType==="touch"?this._maximumDoubleTouchDistance:this._maximumDoubleClickDistance;gr(o,e.data)>r?this._startImmediateDoubleClick(e,n):(this._immediateDoubleClick.emit(e.data,void 0,o.modifiers),this._removeState(t))}else this._startImmediateDoubleClick(e,n)}}_startImmediateDoubleClick(e,t){const s=e.data.native.pointerType==="touch"?this._maximumDoubleTouchDelay:this._maximumDoubleClickDelay;t.immediateDoubleClick={x:e.data.x,y:e.data.y,modifiers:e.modifiers,timeoutHandle:this._clock.setTimeout(()=>this._removeState(e.data),s)}}_removeState(e){const t=bi(e);this._pointerState.delete(t),this.stopCapturingPointer(e.native),this.refreshHasPendingInputs()}};const is={maximumClickDelay:300,movementUntilMouseDrag:1.5,movementUntilPenDrag:6,movementUntilTouchDrag:6,holdDelay:500};let vf=class extends he{constructor(e=is.maximumClickDelay,t=is.movementUntilMouseDrag,s=is.movementUntilPenDrag,n=is.movementUntilTouchDrag,o=is.holdDelay,r=fn){super(!1),this._maximumClickDelay=e,this._movementUntilMouseDrag=t,this._movementUntilPenDrag=s,this._movementUntilTouchDrag=n,this._holdDelay=o,this._clock=r,this._pointerState=new Map,this._pointerDrag=this.registerOutgoing("pointer-drag"),this._immediateClick=this.registerOutgoing("immediate-click"),this._pointerHold=this.registerOutgoing("hold"),this.registerIncoming("pointer-down",this._handlePointerDown.bind(this)),this.registerIncoming("pointer-up",l=>{this._handlePointerLoss(l,"pointer-up")}),this.registerIncoming("pointer-capture-lost",l=>{this._handlePointerLoss(l,"pointer-capture-lost")}),this.registerIncoming("pointer-cancel",l=>{this._handlePointerLoss(l,"pointer-cancel")}),this._moveHandle=this.registerIncoming("pointer-move",this._handlePointerMove.bind(this)),this._moveHandle.pause()}onUninstall(){this._pointerState.forEach(e=>{e.holdTimeout=ti(e.holdTimeout)}),super.onUninstall()}_handlePointerDown(e){const t=e.data,s=t.native.pointerId;let n=null;this._pointerState.size===0&&(n=this._clock.setTimeout(()=>{const r=this._pointerState.get(s);if(r){if(!r.isDragging){const l=r.previousEvent;this._pointerHold.emit(l,void 0,e.modifiers),r.holdEmitted=!0}r.holdTimeout=null}},this._holdDelay));const o={startEvent:t,previousEvent:t,startTimestamp:e.timestamp,isDragging:!1,downButton:t.native.button,holdTimeout:n,modifiers:new Set};this._pointerState.set(s,o),this.startCapturingPointer(t.native),this._moveHandle.resume(),this._pointerState.size>1&&this._startDragging(e)}_createPointerDragData(e,t,s){return{action:e,startEvent:t.startEvent,previousEvent:t.previousEvent,currentEvent:s}}_handlePointerMove(e){const t=e.data,s=t.native.pointerId,n=this._pointerState.get(s);n&&(n.isDragging?this._pointerDrag.emit(this._createPointerDragData("update",n,t),void 0,n.modifiers):hf(t,n.startEvent)>this._getDragThreshold(t.native.pointerType)&&this._startDragging(e),n.previousEvent=t)}_getDragThreshold(e){switch(e){case"touch":return this._movementUntilTouchDrag;case"pen":return this._movementUntilPenDrag;default:return this._movementUntilMouseDrag}}_startDragging(e){const t=e.data,s=t.native.pointerId;this._pointerState.forEach(n=>{n.holdTimeout!=null&&(n.holdTimeout.remove(),n.holdTimeout=null),n.isDragging||(n.modifiers=e.modifiers,n.isDragging=!0,s===n.startEvent.native.pointerId?this._pointerDrag.emit(this._createPointerDragData("start",n,t)):this._pointerDrag.emit(this._createPointerDragData("start",n,n.previousEvent),e.timestamp))})}_handlePointerLoss(e,t){const s=e.data,n=s.native.pointerId,o=this._pointerState.get(n);o&&(o.holdTimeout!=null&&(o.holdTimeout.remove(),o.holdTimeout=null),o.isDragging?this._pointerDrag.emit(this._createPointerDragData("end",o,t==="pointer-up"?s:o.previousEvent),void 0,o.modifiers):t==="pointer-up"&&o.downButton===s.native.button&&e.timestamp-o.startTimestamp<=this._maximumClickDelay&&!o.holdEmitted&&this._immediateClick.emit(s),this._pointerState.delete(n),this.stopCapturingPointer(s.native),this._pointerState.size===0&&this._moveHandle.pause())}};const Ds={counter:"Ctrl",pan:{left:"ArrowLeft",right:"ArrowRight",up:"ArrowUp",down:"ArrowDown"},zoom:{zoomIn:["=","+"],zoomOut:["-","_"]},rotate:{clockwiseOption1:"a",clockwiseOption2:"A",counterClockwiseOption1:"d",counterClockwiseOption2:"D",resetOption1:"n",resetOption2:"N"}};let ui=class extends z{constructor(){super(...arguments),this._handles=new lt}initialize(){const e=()=>{var t;return(t=this.view)==null?void 0:t.ready};this._handles.add([At(()=>!e(),()=>this._disconnect()),At(e,()=>this._connect())])}destroy(){this._handles&&(this._handles.removeAll(),this._handles=null),this._disconnect()}get latestPointerType(){var e;return(e=this._inputManager)==null?void 0:e.latestPointerType}get latestPointerLocation(){var e;return(e=this._inputManager)==null?void 0:e.latestPointerLocation}get multiTouchActive(){var e;return((e=this._inputManager)==null?void 0:e.multiTouchActive)??!1}_disconnect(){this.view.viewEvents.disconnect(),this._inputManager=Te(this._inputManager)}_connect(){const e=this.view.surface,t=new mr(e,this.view.input),s=[new yf,new vf,new mf,new ff(this.view.navigation),new gf],n=new tt({eventSource:t,recognizers:s});n.installHandlers("prevent-context-menu",[new uf],Qt.INTERNAL),n.installHandlers("navigation",[new sf(this.view),new Wg(this.view),new tf(this.view),new Va(this.view),new Va(this.view,[Ds.counter]),new Ug(this.view,"primary"),new Qg(this.view,Ds.pan),new Xg(this.view,Ds.zoom),new Jg(this.view,Ds.rotate),new Hg(this.view,"secondary"),new Bg(this.view,"touch")],Qt.INTERNAL),this.view.viewEvents.connect(n),this._source=t,this._inputManager=n,I(()=>{var o,r;return(r=(o=this.view)==null?void 0:o.navigation)==null?void 0:r.browserTouchPanEnabled},o=>{this._source&&(this._source.browserTouchPanningEnabled=!o)},H)}get test(){return{inputManager:this._inputManager}}};a([c()],ui.prototype,"view",void 0),a([c()],ui.prototype,"latestPointerType",null),a([c()],ui.prototype,"latestPointerLocation",null),a([c()],ui.prototype,"multiTouchActive",null),ui=a([C("esri.views.2d.input.MapViewInputManager")],ui);const wf=ui;let bf=0,qt=class extends z{constructor(){super(...arguments),this.color=new Xt([0,255,255]),this.haloOpacity=1,this.fillOpacity=.25}get version(){return bf++}};a([c({readOnly:!0})],qt.prototype,"version",null),a([c({type:Xt})],qt.prototype,"color",void 0),a([c({type:Xt})],qt.prototype,"haloColor",void 0),a([c()],qt.prototype,"haloOpacity",void 0),a([c()],qt.prototype,"fillOpacity",void 0),qt=a([C("esri.views.2d.support.HighlightOptions")],qt);const Dc=qt,Mf=i=>i.includes("Brush");let Vc=class{constructor(){this._names=new Map}begin(e){this._names.has(e)||(this._names.set(e,!1),Mf(e)&&this.record("Esri.FirstDraw"),performance.mark(`Esri.${e}.Start`))}end(e){this._names.has(e)&&!this._names.get(e)&&(this._names.set(e,!0),performance.mark(`Esri.${e}.End`))}record(e){this._names.has(e)||(this._names.set(e,!0),performance.mark(`Esri.${e}`))}};function If(i,e,t,s,n,o,r,l){let d;i.ignorePadding&&(s={left:0,right:0,top:0,bottom:0}),i.width!=null&&i.height!=null?d=[i.width,i.height]:i.width==null&&i.height!=null?d=[i.height,i.height]:i.width!=null&&i.height==null?d=[i.width,i.width]:i.width==null&&i.height==null&&(d=null);const u=t[0]-(s.left+s.right),h=t[1]-(s.top+s.bottom);let p,g,f=i.area||{x:0,y:0,width:u,height:h};if(d){const _=u/h,y=d[0]/d[1];if(y>_){const v=f.width/y;f={x:f.x,y:Math.round(f.y+(f.height-v)/2),width:f.width,height:Math.round(v)}}else{const v=f.height*y;f={x:Math.round(f.x+(f.width-v)/2),y:f.y,width:Math.round(v),height:f.height}}}else d=[f.width,f.height];return d[0]>f.width?(p=Math.min(d[0]/f.width,e),g=d[0]/f.width/p):(p=1,g=d[0]/f.width),{resolutionScale:p,cropArea:{x:Math.round((f.x+s.left)*p),y:Math.round((f.y+s.top)*p),width:Math.round(f.width*p),height:Math.round(f.height*p)},outputScale:g,format:n,quality:o,children:r,rotation:l}}function Cf(i,e,t){const{ctx:s,canvas:n}=Nc(i,t),o=s.getImageData(0,0,i.width,i.height),r=xf(n,e);return zc(n),{dataUrl:r,data:o}}function Ef(i,e){const{ctx:t,canvas:s}=Nc(i,e),n=t.getImageData(0,0,i.width,i.height);return zc(s),n}function Nc(i,e){const t=Tf();e.premultipliedAlpha&&Sf(i),t.width=i.width,t.height=i.height;const s=t.getContext("2d");return s.putImageData(i,0,0),e.flipY&&$f(s),{ctx:s,canvas:t}}function zc(i){i.width=0,i.height=0}function Tf(){return O(so)&&(so=document.createElement("canvas")),so}let so=null;function xf(i,e){const t=Rf[e.format],s=e.quality/100;return i.toDataURL(t,s)}function kf(i,e){const t=Pf(i),s=Ff[t];return{format:t,quality:Gi(e??s,0,100)}}function Af(i,e){return e/Math.max(i[0],i[1])}function u0(i,e,t,s=0,n=0,o=i.width-s,r=i.height-n,l=!1){const{data:d}=i,{width:u,height:h,data:p}=e,g=o/u,f=r/h,_=Math.ceil(g/2),y=Math.ceil(f/2),v=i.width;for(let w=0;w<h;w++)for(let A=0;A<u;A++){const M=4*(A+(l?h-w-1:w)*u);let P=0,L=0,k=0,Y=0,ge=0,ve=0;const Me=(w+.5)*f;for(let ne=Math.floor(w*f);ne<(w+1)*f;ne++){const ze=Math.abs(Me-(ne+.5))/y,Pt=(A+.5)*g,fe=ze*ze;for(let V=Math.floor(A*g);V<(A+1)*g;V++){const Be=Math.abs(Pt-(V+.5))/_,Se=Math.sqrt(fe+Be*Be);if(Se>=1)continue;let Re=2*Se*Se*Se-3*Se*Se+1;const dt=4*(s+V+(n+ne)*v);ve+=Re*d[dt+3],L+=Re,!t&&d[dt+3]<255&&(Re=Re*d[dt+3]/255),k+=Re*d[dt],Y+=Re*d[dt+1],ge+=Re*d[dt+2],P+=Re}}p[M]=k/P,p[M+1]=Y/P,p[M+2]=ge/P,p[M+3]=ve/L}return e}function Pf(i){switch(i){case"png":case"jpg":case"jpeg":return i;default:return Lf}}function $f(i){i.save(),i.globalCompositeOperation="copy",i.scale(1,-1),i.translate(0,-i.canvas.height),i.drawImage(i.canvas,0,0),i.restore()}function Sf(i){const e=i.data,t=e.length;for(let s=0;s<t;s+=4){const n=e[s+3];if(n!==255&&n>0){const o=255/n;e[s+0]=e[s+0]*o,e[s+1]=e[s+1]*o,e[s+2]=e[s+2]*o}}}const Rf={png:"image/png",jpg:"image/jpeg",jpeg:"image/jpeg"},Ha=98,Lf="png",Ff={png:100,jpg:Ha,jpeg:Ha};function Of(i){const e=Ju(i);if(!e.available)return new $("webgl:required","WebGL is required but not supported.");if(i==="3d"&&e.majorPerformanceCaveat)return new $("webgl:major-performance-caveat-detected","Your WebGL implementation doesn't seem to support hardware accelerated rendering. Check your browser settings or if your GPU is in a blocklist.");if(!e.supportsHighPrecisionFragment)return new $("webgl:high-precision-fragment-required","WebGL support for high precision fragment shaders is required but not supported.");if(!e.supportsVertexShaderSamplers)return new $("webgl:vertex-shader-samplers-required","WebGL support for vertex shader samplers is required but not supported.");if(e.type===Xu.WEBGL1){if(!e.supportsElementIndexUint)return new $("webgl:element-index-uint-required","WebGL support for uint vertex indices is required but not supported.");if(!e.supportsStandardDerivatives)return new $("webgl:standard-derivatives-required","WebGL support for standard derivatives is required but not supported.");if(!e.supportsInstancedArrays)return new $("webgl:instanced-arrays-required","WebGL support for instanced rendering is required but not supported.")}return null}function Df(i){return i&&"nodeType"in i}function Vf(i){return i&&typeof i.render=="function"}const qa={component:"esri-component"};let hi=class extends z{constructor(){super(...arguments),this.widget=null}destroy(){this.widget&&this.widget.destroy(),this.node=null}get id(){return this.get("widget.id")||this.get("node.id")}set node(e){const t=this._get("node");e!==t&&(e&&e.classList.add(qa.component),t&&t.classList.remove(qa.component),this._set("node",e))}castNode(e){return e?typeof e=="string"||Df(e)?(this._set("widget",null),Ml(e)):(Vf(e)&&!e.domNode&&(e.domNode=document.createElement("div")),this._set("widget",e),e.domNode):(this._set("widget",null),null)}};a([c({dependsOn:[]})],hi.prototype,"id",null),a([c()],hi.prototype,"node",null),a([be("node")],hi.prototype,"castNode",null),a([c({readOnly:!0})],hi.prototype,"widget",void 0),hi=a([C("esri.views.ui.Component")],hi);const Js=hi,Nf={left:0,top:0,bottom:0,right:0},Bc={bottom:30,top:15,right:15,left:15},no="manual",Ie={ui:"esri-ui",corner:"esri-ui-corner",innerContainer:"esri-ui-inner-container",manualContainer:"esri-ui-manual-container",cornerContainer:"esri-ui-corner-container",topLeft:"esri-ui-top-left",topRight:"esri-ui-top-right",bottomLeft:"esri-ui-bottom-left",bottomRight:"esri-ui-bottom-right"};function zf(i){return i&&!i._started&&typeof i.postMixInProperties=="function"&&typeof i.buildRendering=="function"&&typeof i.postCreate=="function"&&typeof i.startup=="function"}function oo(i){const e=i,t=typeof e=="object"&&e!==null&&Object.getPrototypeOf(e);return(t===null||t===Object.prototype)&&("component"in e||"index"in e||"position"in e)?i:null}function ro(i,{top:e,bottom:t,left:s,right:n}){i.style.top=e,i.style.bottom=t,i.style.left=s,i.style.right=n}let bt=class extends Wi.EventedAccessor{constructor(e){super(e),this._cornerNameToContainerLookup={},this._positionNameToContainerLookup={},this._components=new Array,this._componentToKey=new Map,this._handles=new lt,this.view=null,this._applyViewPadding=()=>{const t=this.container;t&&ro(t,this._toPxPosition(this._getViewPadding()))},this._applyUIPadding=()=>{const t=this._innerContainer;t&&ro(t,this._toPxPosition(this.padding))},this._initContainers()}initialize(){this._handles.add([I(()=>{var e;return[(e=this.view)==null?void 0:e.padding,this.container]},this._applyViewPadding,H),I(()=>this.padding,this._applyUIPadding,H)])}destroy(){this.container=null;for(const e of this._components)e.destroy();this._components.length=0,this._handles.destroy(),this._componentToKey.clear()}set container(e){const t=this._get("container");e!==t&&(e&&(e.classList.add(Ie.ui),gp(e),this._attachContainers(e)),t&&(t.classList.remove(Ie.ui),ro(t,{top:"",bottom:"",left:"",right:""}),Il(t)),this._set("container",e))}get height(){const e=this.get("view.height")||0;if(e===0)return e;const t=this._getViewPadding(),s=t.top+t.bottom;return Math.max(e-s,0)}get padding(){return this._get("padding")}set padding(e){this._overrideIfSome("padding",e)}castPadding(e){return typeof e=="number"?{bottom:e,top:e,right:e,left:e}:{...Bc,...e}}get width(){const e=this.get("view.width")||0;if(e===0)return e;const t=this._getViewPadding(),s=t.left+t.right;return Math.max(e-s,0)}add(e,t){let s,n;if(Array.isArray(e))return void e.forEach(r=>this.add(r,t));const o=oo(e);o&&({index:s,position:t,component:e,key:n}=o),t&&typeof t=="object"&&({index:s,key:n,position:t}=t),!e||t&&!this._isValidPosition(t)||this._add(e,t,s,n)}remove(e,t){if(!e)return;if(Array.isArray(e))return e.map(n=>this.remove(n,t));const s=this._find(e);if(s){const n=this._componentToKey;if(n.has(e)&&n.get(e)!==t)return;const o=this._components.indexOf(s);return s.node.parentNode&&s.node.parentNode.removeChild(s.node),this._componentToKey.delete(e),this._components.splice(o,1)[0]}}empty(e){return Array.isArray(e)?e.map(t=>this.empty(t)).reduce((t,s)=>t.concat(s)):(e=e||no)===no?Array.prototype.slice.call(this._manualContainer.children).filter(t=>!t.classList.contains(Ie.corner)).map(t=>this.remove(t)):this._isValidPosition(e)?Array.prototype.slice.call(this._cornerNameToContainerLookup[e].children).map(this.remove,this):null}move(e,t){if(Array.isArray(e)&&e.forEach(r=>this.move(r,t)),!e)return;let s;const n=oo(e)||oo(t);if(n&&(s=n.index,t=n.position,e=n.component||e),t&&!this._isValidPosition(t))return;const o=this.remove(e);o&&this.add(o,{position:t,index:s})}find(e){if(!e)return null;const t=this._findById(e);return t&&(t.widget||t.node)}getPosition(e){for(const t in this._positionNameToContainerLookup)if(this._positionNameToContainerLookup[t].contains(e))return t;return null}_add(e,t,s,n){e instanceof Js||(e=new Js({node:e})),this._place({component:e,position:t,index:s}),this._components.push(e),n&&this._componentToKey.set(e,n)}_find(e){return e?e instanceof Js?this._findByComponent(e):typeof e=="string"?this._findById(e):this._findByNode(e.domNode||e):null}_getViewPadding(){return this.get("view.padding")||Nf}_attachContainers(e){e.appendChild(this._innerContainer),e.appendChild(this._manualContainer)}_initContainers(){const e=document.createElement("div");e.classList.add(Ie.innerContainer),e.classList.add(Ie.cornerContainer);const t=document.createElement("div");t.classList.add(Ie.innerContainer),t.classList.add(Ie.manualContainer);const s=document.createElement("div");s.classList.add(Ie.topLeft),s.classList.add(Ie.corner),e.appendChild(s);const n=document.createElement("div");n.classList.add(Ie.topRight),n.classList.add(Ie.corner),e.appendChild(n);const o=document.createElement("div");o.classList.add(Ie.bottomLeft),o.classList.add(Ie.corner),e.appendChild(o);const r=document.createElement("div");r.classList.add(Ie.bottomRight),r.classList.add(Ie.corner),e.appendChild(r),this._innerContainer=e,this._manualContainer=t;const l=at();this._cornerNameToContainerLookup={"top-left":s,"top-right":n,"bottom-left":o,"bottom-right":r,"top-leading":l?n:s,"top-trailing":l?s:n,"bottom-leading":l?r:o,"bottom-trailing":l?o:r},this._positionNameToContainerLookup={manual:t,...this._cornerNameToContainerLookup}}_isValidPosition(e){return!!this._positionNameToContainerLookup[e]}_place(e){const t=e.component,s=e.position||no,n=e.index,o=this._positionNameToContainerLookup[s],r=n>-1;if(zf(t.widget)&&t.widget.startup(),!r)return void o.appendChild(t.node);const l=Array.prototype.slice.call(o.children);if(n===0)return void(o.firstChild?Er(t.node,o.firstChild):o.appendChild(t.node));n>=l.length?o.appendChild(t.node):Er(t.node,l[n])}_toPxPosition(e){return{top:this._toPxUnit(e.top),left:this._toPxUnit(e.left),right:this._toPxUnit(e.right),bottom:this._toPxUnit(e.bottom)}}_toPxUnit(e){return e===0?"0":e+"px"}_findByComponent(e){let t,s=null;return this._components.some(n=>(t=n===e,t&&(s=n),t)),s}_findById(e){let t,s=null;return this._components.some(n=>(t=n.id===e,t&&(s=n),t)),s}_findByNode(e){let t,s=null;return this._components.some(n=>(t=n.node===e,t&&(s=n),t)),s}};a([c()],bt.prototype,"container",null),a([c()],bt.prototype,"height",null),a([c({value:Bc})],bt.prototype,"padding",null),a([be("padding")],bt.prototype,"castPadding",null),a([c()],bt.prototype,"view",void 0),a([c()],bt.prototype,"width",null),bt=a([C("esri.views.ui.UI")],bt);const Bf=bt;function Ga(i,e){return i&&"copyright"in i&&(!e||typeof i.originOf=="function"&&i.originOf("copyright")==="user")}function Uf(i,e){return i.length!==e.length||i.some((t,s)=>t.text!==e[s].text)}function Vs(i,e,t){!t||!e||i.find(s=>s.layerView===e&&s.text===t)||i.push({text:t,layerView:e})}function Hf(i){return i.type==="bing-maps"}const St=[];let Li=class extends El{constructor(e){super(e),this._clear=()=>{this._fetchedAttributionData.clear(),this._pendingAttributions.clear(),this.handles.remove("suspension"),this.notifyChange("state")},this._pendingAttributions=new Set,this._fetchedAttributionData=new Map,this.items=new ee,this.view=null,this._allLayerViewsChange=t=>{this.handles.remove("suspension");const s=this.get("view.allLayerViews");s&&this.handles.add(s.map(n=>I(()=>{var o;return[n.suspended,(o=n.layer)==null?void 0:o.attributionVisible]},()=>this._updateAttributionItems())),"suspension"),t&&t.removed&&t.removed.forEach(n=>{this._pendingAttributions.delete(n),this._fetchedAttributionData.delete(n)}),this._updateAttributionItems()},this.handles.add([Ke(()=>{var t;return(t=this.view)==null?void 0:t.allLayerViews},"change",t=>this._allLayerViewsChange(t),{onListenerAdd:()=>this._allLayerViewsChange(),onListenerRemove:this._clear}),At(()=>{var t;return((t=this.view)==null?void 0:t.stationary)===!0},()=>this._updateAttributionItems())])}destroy(){this.view=null,this._fetchedAttributionData.clear(),this._pendingAttributions.clear(),this.items.removeAll()}get state(){return this.get("view.ready")?this._pendingAttributions.size>0?"loading":"ready":"disabled"}_updateAttributionItems(){const e=this.get("view.allLayerViews");St.length=0,e?(e.forEach(t=>{var o;if(t.suspended||!((o=t.layer)!=null&&o.attributionVisible))return;const s=t.layer;if(Ga(s,"user"))return void Vs(St,t,s.copyright);if(s.hasAttributionData){if(this._fetchedAttributionData.has(t)){const r=this._fetchedAttributionData.get(t);return void(r?Vs(St,t,this._getDynamicAttribution(r,this.view,s)):Ga(s)&&Vs(St,t,s.copyright))}return void this._fetchAttributionData(t)}const n=s.get("portalItem.accessInformation");Vs(St,t,n||s.copyright)}),Uf(this.items,St)&&(this.items.removeAll(),this.items.addMany(St)),St.length=0,this.notifyChange("state")):this._clear()}async _fetchAttributionData(e){if(this._pendingAttributions.has(e))return;this._pendingAttributions.add(e);const t=await Ru(e.layer.fetchAttributionData());if(this._pendingAttributions.has(e)){const s=t.ok?this._createContributionIndex(t.value,Hf(e.layer)):null;this._pendingAttributions.delete(e),this._fetchedAttributionData.set(e,s)}this._updateAttributionItems()}_createContributionIndex(e,t){const s=e.contributors,n={};if(!s)return n;for(let o=0;o<s.length;o++){const r=s[o],l=r.coverageAreas;if(!l)return;for(const d of l){const u=d.bbox,h=d.zoomMin-(t&&d.zoomMin?1:0),p=d.zoomMax-(t&&d.zoomMax?1:0),g={xmin:u[1],ymin:u[0],xmax:u[3],ymax:u[2],spatialReference:Cs.WGS84},f={extent:Uo(g),attribution:r.attribution||"",score:d.score!=null?d.score:100,id:o};for(let _=h;_<=p;_++)n[_]=n[_]||[],n[_].push(f)}}return n.maxKey=Math.max.apply(null,Object.keys(n)),n}_getDynamicAttribution(e,t,s){const{extent:n,scale:o}=t;let r=s.tileInfo.scaleToZoom(o);if(r=Math.min(e.maxKey,Math.round(r)),!n||r==null||r<=-1)return"";const l=e[r],d=Ed(n.center.clone().normalize(),t.spatialReference),u={};return l?l.filter(h=>{const p=!u[h.id]&&d&&_l(h.extent,d);return p&&(u[h.id]=!0),p}).sort((h,p)=>p.score-h.score||h.objectId-p.objectId).map(h=>h.attribution).join(", "):""}};a([c({readOnly:!0,type:ee})],Li.prototype,"items",void 0),a([c({readOnly:!0})],Li.prototype,"state",null),a([c()],Li.prototype,"view",void 0),Li=a([C("esri.widgets.Attribution.AttributionViewModel")],Li);const Uc=Li,Rt={base:"esri-attribution esri-widget",poweredBy:"esri-attribution__powered-by",sources:"esri-attribution__sources",open:"esri-attribution--open",sourcesOpen:"esri-attribution__sources--open",link:"esri-attribution__link",widgetIcon:"esri-icon-description",interactive:"esri-interactive"};let Ee=class extends ue{constructor(e,t){super(e,t),this._isOpen=!1,this._attributionTextOverflowed=!1,this._prevSourceNodeHeight=0,this._resizeObserver=new ResizeObserver(s=>s.forEach(({target:n})=>this._checkSourceTextOverflow(n))),this.iconClass=Rt.widgetIcon,this.itemDelimiter=" | ",this.messages=null,this.viewModel=new Uc}initialize(){this.addHandles(Ke(()=>{var e;return(e=this.viewModel)==null?void 0:e.items},"change",()=>this.scheduleRender()))}destroy(){var e;(e=this._resizeObserver)==null||e.disconnect()}get _isInteractive(){return this._isOpen||this._attributionTextOverflowed}get attributionText(){return this.viewModel.items.reduce((e,t)=>(e.includes(t.text)||e.push(t.text),e),[]).join(this.itemDelimiter)}get label(){var e;return((e=this.messages)==null?void 0:e.widgetLabel)??""}set label(e){this._overrideIfSome("label",e)}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}render(){const e={[Rt.open]:this._isOpen};return m("div",{bind:this,class:this.classes(Rt.base,e),dir:"ltr",onclick:this._toggleState,onkeydown:this._toggleState},this.renderSourcesNode(),this.renderPoweredBy())}renderPoweredBy(){return m("div",{class:Rt.poweredBy},"Powered by"," ",m("a",{class:Rt.link,href:"http://www.esri.com/",target:"_blank",rel:"noreferrer"},"Esri"))}renderSourcesNode(){const e=this._isOpen,t=this._isInteractive,s=t?"0":"",{attributionText:n}=this,o={[Rt.sourcesOpen]:e,[Rt.interactive]:t};return m("div",{afterCreate:this._afterSourcesNodeCreate,bind:this,class:this.classes(Rt.sources,o),innerHTML:n,tabindex:s})}_afterSourcesNodeCreate(e){this._prevSourceNodeHeight=e.clientWidth,this._resizeObserver.observe(e)}_checkSourceTextOverflow(e){let t=!1;const{clientHeight:s,clientWidth:n,scrollWidth:o}=e,r=o>n,l=this._attributionTextOverflowed!==r;if(this._attributionTextOverflowed=r,l&&(t=!0),this._isOpen){const d=s<this._prevSourceNodeHeight;this._prevSourceNodeHeight=s,d&&(this._isOpen=!1,t=!0)}t&&this.scheduleRender()}_toggleState(){this._isInteractive&&(this._isOpen=!this._isOpen)}};a([c()],Ee.prototype,"_isOpen",void 0),a([c()],Ee.prototype,"_isInteractive",null),a([c()],Ee.prototype,"_attributionTextOverflowed",void 0),a([c()],Ee.prototype,"_prevSourceNodeHeight",void 0),a([c({readOnly:!0,dependsOn:["viewModel.items.length","itemDelimiter"]})],Ee.prototype,"attributionText",null),a([c()],Ee.prototype,"iconClass",void 0),a([c()],Ee.prototype,"itemDelimiter",void 0),a([c()],Ee.prototype,"label",null),a([c(),re("esri/widgets/Attribution/t9n/Attribution")],Ee.prototype,"messages",void 0),a([c()],Ee.prototype,"view",null),a([c({type:Uc})],Ee.prototype,"viewModel",void 0),a([Pe()],Ee.prototype,"_toggleState",null),Ee=a([C("esri.widgets.Attribution")],Ee);const qf=Ee,Gf="esri.widgets.CompassViewModel";let pi=class extends kn(z){constructor(e){super(e),this._handles=new lt,this.orientation={x:0,y:0,z:0},this.view=null,this._updateForCamera=this._updateForCamera.bind(this),this._updateForRotation=this._updateForRotation.bind(this),this._updateRotationWatcher=this._updateRotationWatcher.bind(this)}initialize(){this._handles.add(I(()=>this.view,this._updateRotationWatcher,H))}destroy(){this._handles=ti(this._handles),this.view=null}get canShowNorth(){const e=this.get("view.spatialReference");return!(!e||!e.isWebMercator&&!e.isGeographic)}get state(){return this.get("view.ready")?this.canShowNorth?"compass":"rotation":"disabled"}reset(){if(!this.get("view.ready"))return;const e={};this.view.type==="2d"?e.rotation=0:e.heading=0,this.callGoTo({target:e})}_updateForRotation(e){e!=null&&(this.orientation={z:e})}_updateForCamera(e){if(!e)return;const t=-e.heading;this.orientation={x:0,y:0,z:t}}_updateRotationWatcher(e){this._handles.removeAll(),e&&this._handles.add(e.type==="2d"?I(()=>e==null?void 0:e.rotation,this._updateForRotation,H):I(()=>e==null?void 0:e.camera,this._updateForCamera,H))}};a([c({readOnly:!0})],pi.prototype,"canShowNorth",null),a([c()],pi.prototype,"orientation",void 0),a([c({readOnly:!0})],pi.prototype,"state",null),a([c()],pi.prototype,"view",void 0),pi=a([C(Gf)],pi);const Hc=pi,Lt={base:"esri-compass esri-widget--button esri-widget",text:"esri-icon-font-fallback-text",icon:"esri-compass__icon",rotationIcon:"esri-icon-dial",northIcon:"esri-icon-compass",widgetIcon:"esri-icon-locate-circled",interactive:"esri-interactive",disabled:"esri-disabled"};let st=class extends ue{constructor(e,t){super(e,t),this.iconClass=Lt.widgetIcon,this.messages=null,this.viewModel=new Hc}get goToOverride(){return this.viewModel.goToOverride}set goToOverride(e){this.viewModel.goToOverride=e}get label(){var e;return((e=this.messages)==null?void 0:e.widgetLabel)??""}set label(e){this._overrideIfSome("label",e)}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}reset(){return this.viewModel.reset()}render(){const{orientation:e,state:t}=this.viewModel,s=t==="disabled",n=(t==="rotation"?"rotation":"compass")=="compass",o=s?-1:0,r={[Lt.disabled]:s,[Lt.interactive]:!s},l={[Lt.northIcon]:n,[Lt.rotationIcon]:!n},{messages:d}=this;return m("div",{bind:this,class:this.classes(Lt.base,r),onclick:this._reset,onkeydown:this._reset,role:"button",tabIndex:o,"aria-label":d.reset,title:d.reset},m("span",{"aria-hidden":"true",class:this.classes(Lt.icon,l),styles:this._toRotationTransform(e)}),m("span",{class:Lt.text},d.reset))}_reset(){this.viewModel.reset()}_toRotationTransform(e){return{transform:`rotateZ(${e.z}deg)`}}};a([c()],st.prototype,"goToOverride",null),a([c()],st.prototype,"iconClass",void 0),a([c()],st.prototype,"label",null),a([c(),re("esri/widgets/Compass/t9n/Compass")],st.prototype,"messages",void 0),a([c()],st.prototype,"view",null),a([c({type:Hc})],st.prototype,"viewModel",void 0),a([Pe()],st.prototype,"_reset",null),st=a([C("esri.widgets.Compass")],st);const jf=st;let Fi=class extends z{constructor(i){super(i),this.navigationMode="pan",this.view=null}initialize(){this.own(At(()=>{var i;return(i=this.view)==null?void 0:i.inputManager},()=>this._setNavigationMode()))}destroy(){this.view=null}get state(){return this.get("view.ready")&&this.view.type==="3d"?"ready":"disabled"}toggle(){this.state!=="disabled"&&(this.navigationMode=this.navigationMode!=="pan"?"pan":"rotate",this._setNavigationMode())}_setNavigationMode(){this.get("view.inputManager").primaryDragAction=this.navigationMode==="pan"?"pan":"rotate"}};a([c({readOnly:!0})],Fi.prototype,"state",null),a([c()],Fi.prototype,"navigationMode",void 0),a([c()],Fi.prototype,"view",void 0),Fi=a([C("esri.widgets.NavigationToggleViewModel")],Fi);const qc=Fi,Ue={base:"esri-navigation-toggle esri-widget",button:"esri-navigation-toggle__button esri-widget--button",activeButton:"esri-navigation-toggle__button--active",panButton:"esri-navigation-toggle__button--pan",rotateButton:"esri-navigation-toggle__button--rotate",isLayoutHorizontal:"esri-navigation-toggle--horizontal",rotationIcon:"esri-icon-rotate",panIcon:"esri-icon-pan",widgetIcon:"esri-icon-pan2",disabled:"esri-disabled"};let nt=class extends ue{constructor(e,t){super(e,t),this.iconClass=Ue.widgetIcon,this.messages=null,this.viewModel=new qc}get label(){var e;return((e=this.messages)==null?void 0:e.widgetLabel)??""}set label(e){this._overrideIfSome("label",e)}set layout(e){e!=="horizontal"&&(e="vertical"),this._set("layout",e)}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}toggle(){return this.viewModel.toggle()}render(){const e=this.get("viewModel.state")==="disabled",t=this.get("viewModel.navigationMode")==="pan",s={[Ue.disabled]:e,[Ue.isLayoutHorizontal]:this.layout==="horizontal"},n={[Ue.activeButton]:t},o={[Ue.activeButton]:!t},r=e?-1:0,l=this.messages.toggle;return m("div",{bind:this,class:this.classes(Ue.base,s),onclick:this._toggle,onkeydown:this._toggle,tabIndex:r,"aria-label":l,title:l},m("div",{class:this.classes(Ue.button,Ue.panButton,n)},m("span",{class:Ue.panIcon})),m("div",{class:this.classes(Ue.button,Ue.rotateButton,o)},m("span",{class:Ue.rotationIcon})))}_toggle(){this.toggle()}};a([c()],nt.prototype,"iconClass",void 0),a([c()],nt.prototype,"label",null),a([c({value:"vertical"})],nt.prototype,"layout",null),a([c(),re("esri/widgets/NavigationToggle/t9n/NavigationToggle")],nt.prototype,"messages",void 0),a([c()],nt.prototype,"view",null),a([c({type:qc})],nt.prototype,"viewModel",void 0),a([Pe()],nt.prototype,"_toggle",null),nt=a([C("esri.widgets.NavigationToggle")],nt);const Wf=nt,ss={button:"esri-widget--button esri-widget",disabled:"esri-disabled",interactive:"esri-interactive",iconText:"esri-icon-font-fallback-text",icon:"esri-icon"};let Gt=class extends ue{constructor(){super(...arguments),this.enabled=!0,this.iconClass="",this.title=""}render(){const e=this.enabled?0:-1,t={[ss.disabled]:!this.enabled,[ss.interactive]:this.enabled},s={[this.iconClass]:!!this.iconClass};return m("div",{bind:this,class:this.classes(ss.button,t),onclick:this._triggerAction,onkeydown:this._triggerAction,role:"button",tabIndex:e,title:this.title},m("span",{"aria-hidden":"true",role:"presentation",class:this.classes(ss.icon,s)}),m("span",{class:ss.iconText},this.title))}_triggerAction(){this.action.call(this)}};a([c()],Gt.prototype,"action",void 0),a([c()],Gt.prototype,"enabled",void 0),a([c()],Gt.prototype,"iconClass",void 0),a([c()],Gt.prototype,"title",void 0),a([Pe()],Gt.prototype,"_triggerAction",null),Gt=a([C("esri.widgets.IconButton")],Gt);const ja=Gt;let Oi=class extends z{get canZoomIn(){if(!this.get("view.ready"))return!1;const i=this.get("view.animation.target.scale")||this.get("view.scale"),e=this.get("view.constraints.effectiveMaxScale");return e===0||i>e}get canZoomOut(){if(!this.get("view.ready"))return!1;const i=this.get("view.animation.target.scale")||this.get("view.scale"),e=this.get("view.constraints.effectiveMinScale");return e===0||i<e}};a([c({readOnly:!0})],Oi.prototype,"canZoomIn",null),a([c({readOnly:!0})],Oi.prototype,"canZoomOut",null),a([c()],Oi.prototype,"view",void 0),Oi=a([C("esri.widgets.Zoom.ZoomConditions2D")],Oi);const Zf=Oi;let Di=class extends z{get canZoomIn(){return!!this.view.ready}get canZoomOut(){return!!this.view.ready}};a([c({readOnly:!0})],Di.prototype,"canZoomIn",null),a([c({readOnly:!0})],Di.prototype,"canZoomOut",null),a([c()],Di.prototype,"view",void 0),Di=a([C("esri.widgets.Zoom.ZoomConditions3D")],Di);const Kf=Di;let jt=class extends z{constructor(e){super(e)}destroy(){this.view=null}get canZoomIn(){return E(this._zoomConditions)&&this._zoomConditions.canZoomIn}get canZoomOut(){var e;return E(this._zoomConditions)&&((e=this._zoomConditions)==null?void 0:e.canZoomOut)}get state(){var e;return(e=this.view)!=null&&e.ready?"ready":"disabled"}set view(e){e?e.type==="2d"?this._zoomConditions=new Zf({view:e}):e.type==="3d"&&(this._zoomConditions=new Kf({view:e})):this._zoomConditions=null,this._set("view",e)}zoomIn(){if(!this.canZoomIn)return;const e=this.view;e.type==="2d"?e.mapViewNavigation.zoomIn():gs(e.goTo({zoomFactor:2}))}zoomOut(){if(!this.canZoomOut)return;const e=this.view;e.type==="2d"?e.mapViewNavigation.zoomOut():gs(e.goTo({zoomFactor:.5}))}};a([c()],jt.prototype,"_zoomConditions",void 0),a([c()],jt.prototype,"canZoomIn",null),a([c()],jt.prototype,"canZoomOut",null),a([c({readOnly:!0})],jt.prototype,"state",null),a([c()],jt.prototype,"view",null),jt=a([C("esri.widgets.Zoom.ZoomViewModel")],jt);const Gc=jt,ns={base:"esri-zoom esri-widget",horizontalLayout:"esri-zoom--horizontal",zoomInIcon:"esri-icon-plus",zoomOutIcon:"esri-icon-minus",widgetIcon:"esri-icon-zoom-in-magnifying-glass"};let Mt=class extends ue{constructor(e,t){super(e,t),this.iconClass=ns.widgetIcon,this.messages=null,this.viewModel=new Gc}initialize(){this._zoomInButton=new ja({action:this.zoomIn.bind(this),iconClass:ns.zoomInIcon}),this._zoomOutButton=new ja({action:this.zoomOut.bind(this),iconClass:ns.zoomOutIcon})}destroy(){this._zoomInButton=Te(this._zoomInButton),this._zoomOutButton=Te(this._zoomOutButton)}get label(){var e;return((e=this.messages)==null?void 0:e.widgetLabel)??""}set label(e){this._overrideIfSome("label",e)}set layout(e){e!=="horizontal"&&(e="vertical"),this._set("layout",e)}set view(e){this.viewModel.view=e}get view(){return this.viewModel.view}render(){const e=this.viewModel,t={[ns.horizontalLayout]:this.layout==="horizontal"},{canZoomIn:s,canZoomOut:n}=e;this._zoomInButton.enabled=s,this._zoomOutButton.enabled=n;const{zoomIn:o,zoomOut:r}=this.messages;return this._zoomInButton.title=o,this._zoomOutButton.title=r,m("div",{class:this.classes(ns.base,t)},this._zoomInButton.render(),this._zoomOutButton.render())}zoomIn(){return this.viewModel.zoomIn()}zoomOut(){return this.viewModel.zoomOut()}};a([c()],Mt.prototype,"iconClass",void 0),a([c()],Mt.prototype,"label",null),a([c({value:"vertical"})],Mt.prototype,"layout",null),a([c(),re("esri/widgets/Zoom/t9n/Zoom")],Mt.prototype,"messages",void 0),a([c()],Mt.prototype,"view",null),a([c({type:Gc})],Mt.prototype,"viewModel",void 0),Mt=a([C("esri.widgets.Zoom")],Mt);const Yf=Mt;function Qf(i){return i&&i.view!==void 0}let Xs=class extends Bf{constructor(e){super(e),this._defaultPositionLookup={attribution:"manual",compass:"top-left","navigation-toggle":"top-left",zoom:"top-left"},this.components=[]}initialize(){this._handles.add([I(()=>this.components,this._componentsWatcher.bind(this),H),I(()=>this.view,this._updateViewAwareWidgets.bind(this),H)])}_add(e,t,s,n){if(typeof e=="string"&&this._defaultPositionLookup[e]){if(this._find(e))return;e=this._createComponent(e)}super._add(e,t,s,n)}_removeComponents(e){e.forEach(t=>{const s=this._find(t);s&&(this.remove(s),s.destroy())})}_updateViewAwareWidgets(e){this.components.forEach(t=>{const s=this._find(t),n=s&&s.widget;Qf(n)&&(n.view=e)})}_componentsWatcher(e,t){this._removeComponents(t),this._addComponents(e),this._adjustPadding(e)}_adjustPadding(e){if(!e.includes("attribution")&&!this._isOverridden("padding")){const{top:t}=this.padding;this.padding=t}}_addComponents(e){this.constructed&&e.forEach(t=>this.add(this._createComponent(t),this._defaultPositionLookup[t]))}_createComponent(e){const t=this._createWidget(e);if(t)return new Js({id:e,node:t})}_createWidget(e){return e==="attribution"?this._createAttribution():e==="compass"?this._createCompass():e==="navigation-toggle"?this._createNavigationToggle():e==="zoom"?this._createZoom():void 0}_createAttribution(){return new qf({view:this.view})}_createCompass(){return new jf({view:this.view})}_createNavigationToggle(){return new Wf({view:this.view})}_createZoom(){return new Yf({view:this.view})}};a([c()],Xs.prototype,"components",void 0),Xs=a([C("esri.views.ui.DefaultUI")],Xs);const Jf=Xs;let en=class extends Jf{constructor(i){super(i),this.components=["attribution","zoom"]}};a([c()],en.prototype,"components",void 0),en=a([C("esri.views.ui.2d.DefaultUI2D")],en);const jc=en;var No;let tn=No=class extends Ye{constructor(i){super(i),this.color=new Xt([0,0,0,1])}clone(){return new No(lo({color:this.color}))}};a([c({type:Xt,json:{write:!0}})],tn.prototype,"color",void 0),tn=No=a([C("esri.webmap.background.ColorBackground")],tn);const Xf=tn;let Wc,Zc,Kc,Yc,Qc,Jc;async function e_(){const[,{GraphicsView2D:i,GraphicContainer:e,LabelManager:t,MapViewNavigation:s,MagnifierView2D:n,Stage:o}]=await Promise.all([T(()=>import("./webglDeps-2d5668fb.js"),["assets/webglDeps-2d5668fb.js","assets/VertexArrayObject-e1e46e3f.js","assets/Error-4ed679d7.js","assets/string-9c5e03f7.js","assets/typedArrayUtil-d02f10a8.js","assets/Texture-c2297638.js","assets/mathUtils-daf59e84.js","assets/common-701a4199.js","assets/context-util-abf86a85.js","assets/enums-64ab819c.js","assets/ProgramTemplate-1afb8353.js","assets/programUtils-fb70f3b3.js"]),T(()=>import("./mapViewDeps-87ed0f5b.js"),["assets/mapViewDeps-87ed0f5b.js","assets/Error-4ed679d7.js","assets/string-9c5e03f7.js","assets/typedArrayUtil-d02f10a8.js","assets/promiseUtils-930cba29.js","assets/reactiveUtils-b0e56010.js","assets/cast-6d78d3c7.js","assets/ensureType-d98e08e1.js","assets/nextTick-3ee5a785.js","assets/mat3f32-d3d088e8.js","assets/request-e4299080.js","assets/preload-helper-101896b7.js","assets/_commonjsHelpers-a430e9ea.js","assets/imageutils-418e9de0.js","assets/utils-1bc9587b.js","assets/parser-f68dd732.js","assets/colorUtils-639f4d25.js","assets/screenUtils-7afeb41c.js","assets/mat4-62d5e6a4.js","assets/common-701a4199.js","assets/Evented-b378ccab.js","assets/enums-4ca4641f.js","assets/MaterialKey-cec287ae.js","assets/Utils-b6ef920f.js","assets/mathUtils-daf59e84.js","assets/enums-ef042d89.js","assets/enums-64ab819c.js","assets/Texture-c2297638.js","assets/context-util-abf86a85.js","assets/VertexElementDescriptor-2925c6af.js","assets/heatmapUtils-90a13d85.js","assets/vec4f64-018b3fa6.js","assets/Color-b7b9e6bb.js","assets/BufferPool-b738111d.js","assets/WGLContainer-69c7e591.js","assets/mat3-45e3f2eb.js","assets/vec2f32-461e65a9.js","assets/pixelUtils-a3529416.js","assets/vec2f64-e0301652.js","assets/VertexArrayObject-e1e46e3f.js","assets/ProgramTemplate-1afb8353.js","assets/StyleDefinition-ae208a94.js","assets/config-1337d16e.js","assets/GeometryUtils-c093d234.js","assets/earcut-58237617.js","assets/vec2-f978aef8.js","assets/featureConversionUtils-d9ec654e.js","assets/jsonUtils-5115c7e5.js","assets/Extent-d5fff12d.js","assets/Polyline-42dcc920.js","assets/OptimizedFeature-1bba65b5.js","assets/OptimizedFeatureSet-1d1ac4b9.js","assets/enums-bfc9e4e9.js","assets/programUtils-fb70f3b3.js","assets/RenderingContext-b8526b4a.js","assets/OrderIndependentTransparency-602f26c2.js","assets/floatRGBA-305df8f3.js","assets/ExpandedCIM-91f67fd3.js","assets/arcadeOnDemand-72c57f7a.js","assets/geometry-70b2a4a5.js","assets/typeUtils-b6c52390.js","assets/jsonMap-5afaf2ff.js","assets/BidiEngine-836b7ef6.js","assets/aaBoundingRect-ca34962d.js","assets/mat2d-80bd93af.js","assets/Rect-ea14f53a.js","assets/quantizationUtils-8770173e.js","assets/GeometryUtils-eebff0a0.js","assets/rasterizingUtils-18039619.js","assets/pbf-e4fd0249.js","assets/Matcher-1409f335.js","assets/TileStrategy-40f1ecb0.js","assets/TileStore-a368d16c.js","assets/Queue-8aae62d3.js","assets/TileKey-ed432ae5.js","assets/rbush-8e36784a.js","assets/quickselect-322ec8e1.js","assets/Query-066f2ccf.js","assets/TimeExtent-0fd238ea.js","assets/enumeration-497ef064.js","assets/Field-bb784640.js","assets/fieldType-9bddd3d4.js","assets/Clonable-58355d3c.js","assets/visualVariablesUtils-9310c846.js","assets/visualVariablesUtils-4833b8d3.js","assets/tileUtils-23b52606.js","assets/TileClipper-48ccb501.js","assets/assets-6ba3cd63.js","assets/Geometry-daada628.js","assets/defaultsJSON-b087dd4d.js","assets/LRUCache-4d56ba4d.js","assets/MemCache-1e028041.js","assets/devEnvironmentUtils-5002a058.js","assets/Portal-fbb2b73d.js","assets/Loadable-b0d5bb7e.js","assets/Promise-6bd0b483.js","assets/locale-30120714.js","assets/PortalGroup-813428fa.js","assets/PortalUser-cf18ae9d.js","assets/persistableUrlUtils-d18becd9.js","assets/styleUtils-0c73f570.js","assets/CircularArray-ace048ef.js","assets/imageUtils-c2d0d1ae.js","assets/HandleOwner-6ac6f00a.js","assets/FeatureSetReader-9e0a2b1d.js","assets/centroid-7800ee74.js","assets/lengthUtils-0dde2114.js","assets/unitUtils-b69647a1.js","assets/sizeVariableUtils-d4870b0d.js","assets/BaseGraphicContainer-baad2cd4.js","assets/normalizeUtilsSync-1f26dd3f.js","assets/normalizeUtils-91a64c2b.js","assets/projectionSupport-38cc9dc5.js","assets/projection-6146477c.js","assets/SimpleObservable-e0897cc6.js","assets/zscale-72b4355d.js","assets/json-48e3ea08.js","assets/labelingInfo-681dda19.js","assets/symbols-64db5dd6.js","assets/CIMSymbol-a95ceb49.js","assets/fieldUtils-141b2ff2.js","assets/Symbol-1bb07043.js","assets/opacityUtils-8b7acc4e.js","assets/aaBoundingBox-33fc923c.js","assets/Collection-42fe629f.js","assets/collectionUtils-3d8a9611.js","assets/labelUtils-87bb22ff.js","assets/jsonUtils-b1b224a3.js","assets/FeatureContainer-e4e1ed67.js","assets/TileContainer-efb37002.js","assets/capabilities-5736b16f.js","assets/schemaUtils-36753600.js","assets/LayerFloorInfo-0d02c503.js","assets/diffUtils-713e5c9b.js","assets/createSymbolSchema-976acefa.js","assets/rendererUtils-a093890e.js","assets/FeatureReductionLayer-0deeb262.js","assets/BlendLayer-7a735871.js","assets/PopupTemplate-d6e0b369.js","assets/number-c7f1bfee.js","assets/Identifiable-57df9761.js","assets/UniqueValueRenderer-cd716182.js","assets/LegendOptions-e31ff575.js","assets/colorRamps-c00f504b.js","assets/Graphic-e4fb7090.js","assets/compilerUtils-eefea0ec.js","assets/jsonUtils-c5ba7295.js","assets/DictionaryLoader-29adda53.js","assets/deprecate-46fadabd.js","assets/OperationalLayer-54654858.js","assets/ElevationInfo-28459ff1.js","assets/util-94bdf933.js","assets/ComputedAttributeStorage-efef8862.js","assets/FieldsIndex-c06d221a.js","assets/vec3f32-4322908d.js","assets/GraphicContainer-cd91331c.js","assets/asyncUtils-18831bb1.js","assets/requestImageUtils-2fafd053.js","assets/Basemap-5353f87f.js","assets/loadAll-1ae88564.js","assets/PortalItem-69c4a143.js","assets/messages-634811b5.js","assets/writeUtils-44b0e78b.js","assets/layerUtils-6996b9ea.js","assets/CollectionFlattener-b89887c0.js","assets/TablesMixin-402d03d2.js","assets/Layer-739799ab.js","assets/Cyclical-1a93cb12.js","assets/workers-7aef8bf1.js","assets/Connection-dd24ab83.js","assets/intl-a5c99ea3.js","assets/TileInfo-92f7dc61.js","assets/widget-4becb80f.js","assets/uuid-73213768.js","assets/byteSizeEstimations-90c5a50d.js","assets/executeQueryJSON-bf3dc024.js","assets/query-4348ce6f.js","assets/pbfQueryUtils-91f50fb5.js","assets/queryZScale-1674984c.js","assets/FeatureSet-1cc04f9b.js","assets/RelationshipQuery-b5b427dc.js","assets/utils-46b35833.js","assets/ItemCache-b4db8f82.js","assets/TopFeaturesQuery-7da1d7c1.js","assets/FeatureLayer-1a0dd9ce.js","assets/MultiOriginJSONSupport-1970ed0f.js","assets/FeatureLayerBase-d34c9a8c.js","assets/HeightModelInfo-645087b5.js","assets/arcgisLayerUrl-02fe1a62.js","assets/editsZScale-e318eb4a.js","assets/APIKeyMixin-f90cfebd.js","assets/ArcGISService-f6f32fbc.js","assets/CustomParametersMixin-5e3018da.js","assets/EditBusLayer-1372e92b.js","assets/OrderedLayer-7b3473c8.js","assets/PortalLayer-644d657e.js","assets/RefreshableLayer-84ec1468.js","assets/ScaleRangeLayer-c6a35aba.js","assets/TemporalLayer-d41a81db.js","assets/TimeInfo-a1791ae0.js","assets/FeatureTemplate-773a8865.js","assets/FeatureType-6c50f4e3.js","assets/fieldProperties-c2bdcd57.js","assets/versionUtils-5ccafbea.js","assets/styleUtils-45e2d86c.js","assets/popupUtils-ea7b7951.js","assets/Scheduler-343fdba6.js","assets/GraphicsLayer-caff0dcf.js","assets/ViewingMode-fb6259a5.js","assets/unitBezier-881ac1eb.js","assets/datetime-7cb5ae9e.js"])]);Zc=i,Kc=e,Yc=t,Qc=s,Jc=n,Wc=o}const Wa=160;function t_(i){return i&&i.declaredClass==="esri.Viewpoint"}let F=class extends Ch(Hm(qm(cg))){constructor(i){super(i),this._magnifierView=null,this._stage=null,this._resolveWhenReady=[],this.rootLayerViews=new nn({getCollections:()=>{var e,t;return[(e=this.basemapView)==null?void 0:e.baseLayerViews,this.layerViews,(t=this.basemapView)==null?void 0:t.referenceLayerViews]},getChildrenFunction:()=>null}),this.featuresTilingScheme=null,this.fullOpacity=1,this.graphicsView=null,this.labelManager=null,this.mapViewNavigation=null,this.renderingOptions={samplingMode:"dynamic",edgeLabelsVisible:!0,labelsAnimationTime:125,labelCollisionsEnabled:!0},this.rendering=!1,this.supersampleScreenshotsEnabled=!1,this.supportsGround=!1,this._stationaryTimer=null,this.frameTask=new Lg(this),this._pePromise=null,this.floors=new ee,this.highlightOptions=new Dc,this.inputManager=new wf({view:this}),this.map=null,this.resizeAlign="center",this.spatialReferenceLocked=!1,this.timeline=new Vc,this.type="2d",this.ui=new jc,this._pixelFormat={flipY:!0,premultipliedAlpha:!0},this.constraints=new Fc,this.padding={top:0,right:0,bottom:0,left:0},this.handles.add([I(()=>this.viewpoint,()=>{this._lastStationaryEventTimestamp=performance.now(),this._flipStationary(Wa)},vs),this.on("resize",e=>this._resizeHandler(e)),I(()=>{var e;return(e=this.animationManager)==null?void 0:e.animation},e=>{this.animation=e})]),Bd()}destroy(){this._set("preconditionsReady",!1),this._gotoTask=this.frameTask=null,this.rootLayerViews.destroy(),this.inputManager.destroy(),this._set("inputManager",null)}get graphicsTileStore(){return new Yu(this.featuresTilingScheme)}get initialExtentRequired(){var r;const{scale:i,constraints:e,center:t,viewpoint:s,extent:n}=this;let o=this.zoom;return!(this.map&&"initialViewProperties"in this.map&&((r=this.map.initialViewProperties)!=null&&r.viewpoint))&&!n&&(e!=null&&e.effectiveLODs||(o=-1),(!t||i===0&&o===-1)&&(!s||!E(s.targetGeometry)||s.targetGeometry.type!=="extent"&&!s.scale))}get resourceManager(){return this._stage.resourceManager}get textureManager(){return this._stage.painter.textureManager}get _defaultsFromMapSettings(){return{required:{tileInfo:!0,heightModelInfo:!1,extent:!1},requiresExtentInSpatialReference:this.spatialReferenceLocked}}get _projectionEngineLoaded(){return!!ws()||(this._pePromise||(this._pePromise=wn().finally(()=>{this._pePromise=null})),!1)}get typeSpecificPreconditionsReady(){const i=this._getDefaultViewpoint();if(!i)return!1;const e=this.spatialReference,t=Ve(i.targetGeometry);return!!vn(t.spatialReference,e)||this._projectionEngineLoaded}set animation(i){const e=this._get("animation");if(i===e)return;if(e&&e.stop(),!i||i.isFulfilled())return void this._set("animation",null);this._set("animation",i),this.frameTask.animationInProgress=!0;const t=()=>{var s;i===this._get("animation")&&(this._set("animation",null),(s=this.frameTask)==null||s.requestFrame()),this.frameTask&&(this.frameTask.animationInProgress=!1)};i.when(t,t)}get background(){return s_(this.map)?this.map.initialViewProperties.background:null}set background(i){this._override("background",i)}get center(){if(!this.ready)return this._get("center");const{center:i,spatialReference:e}=this.state.paddedViewState;return new X({x:i[0],y:i[1],spatialReference:e})}set center(i){if(i==null)return;if(!this.ready)return this._set("center",i),void this.notifyChange("initialExtentRequired");let e;try{e=this._project(i,this.spatialReference)}catch(s){return void B.getLogger(this.declaredClass).error(new $("mapview:invalid-center","could not project the value in the view's spatial reference",{input:i,error:s}))}const t=this.viewpoint;So(t,t,e),this.viewpoint=t}set constraints(i){const e=this._get("constraints");e&&(this.handles.remove("map-view-constraints"),e.destroy()),this._set("constraints",i),i&&(i.view=this,this.ready&&(this.state.viewpoint=i.fit(this.state.paddedViewState.viewpoint)),this.handles.add(I(()=>i.version,()=>{this.ready&&this.state&&(this.state.viewpoint=i.fit(this.state.paddedViewState.viewpoint))},vs),"map-view-constraints"))}get extent(){return this.ready?this.state.paddedViewState.extent.clone():this._get("extent")}set extent(i){if(i==null)return;if(!i.width||!i.height)return void B.getLogger(this.declaredClass).error(new $("mapview:invalid-extent","invalid extent size"));if(!this.ready)return this._set("extent",i),this._set("center",null),this._set("viewpoint",null),this._set("scale",0),this._set("zoom",-1),void this.notifyChange("initialExtentRequired");let e;try{e=this._project(i,this.spatialReference)}catch(s){return void B.getLogger(this.declaredClass).error(new $("mapview:invalid-extent","could not project the value in the view's spatial reference",{error:s}))}const t=this.viewpoint;yg(t,t,e,this.size,{constraints:this.constraints}),this.viewpoint=t}get padding(){return this.ready?this.state.padding:this._get("padding")}set padding(i){this.ready?(this.state.padding=i,this._set("padding",this.state.padding)):this._set("padding",i)}get resolution(){return this.state?this.state.resolution:0}get rotation(){return this.ready?this.state.rotation:this._get("rotation")}set rotation(i){if(isNaN(i))return;if(!this.ready)return void this._set("rotation",i);const e=this.viewpoint;Pg(e,e,i),this.viewpoint=e}get scale(){return this.ready?this.state.scale:this._get("scale")}set scale(i){if(!i||isNaN(i))return;if(!this.ready){this._set("scale",i),this._set("zoom",-1);const t=this._get("extent");return t&&(this._set("extent",null),this._set("center",t.center)),void this.notifyChange("initialExtentRequired")}const e=this.viewpoint;La(e,e,i),this.viewpoint=e}get stationary(){return!(this.animation||this.navigating||this.resizing||this._stationaryTimer)}get updating(){var e,t,s;const i=!this.destroyed&&(!this.layerViewManager||!this.labelManager||!this.graphicsView||this.layerViewManager.updating===!0||this.labelManager.updating===!0||this.graphicsView.updating===!0||this.allLayerViews.some(n=>!n.destroyed&&!("layerViews"in n)&&n.updating===!0));if($e("esri-2d-log-updating")){const n=this.allLayerViews.reduce((o,r)=>({...o,[r.layer.id]:!r.destroyed&&!("layerViews"in r)&&r.updating}),{});console.log(`Updating MapView: ${i}
-> Null LayerViewManager: ${!this.layerViewManager}
-> Null LabelManager: ${!this.labelManager}
-> Null GraphicsView: ${!this.graphicsView}
-> layerViewManager.updating: ${(e=this.layerViewManager)==null?void 0:e.updating}
-> labelManager.updating: ${(t=this.labelManager)==null?void 0:t.updating}
-> graphicsView.updating: ${(s=this.graphicsView)==null?void 0:s.updating}
-> allLayerViews: ${JSON.stringify(n)}
`)}return i}get viewpoint(){if(!this.ready)return this._get("viewpoint");const i=this.state.paddedViewState;return i&&i.viewpoint.clone()}set viewpoint(i){if(i==null)return;if(!this.ready)return this._set("viewpoint",i),this._set("extent",null),this._set("center",null),this._set("zoom",-1),this._set("scale",0),void this.notifyChange("initialExtentRequired");let e,t;try{e=this._project(i,this.spatialReference),!i.scale||isNaN(i.scale)?t=new $("mapview:invalid-viewpoint",`invalid scale value of ${i.scale}`):O(i.targetGeometry)&&(t=new $("mapview:invalid-viewpoint","geometry not defined"))}catch(n){t=new $("mapview:invalid-viewpoint","could not project the value in the view's spatial reference",{error:n})}if(t)return void B.getLogger(this.declaredClass).error(t);this._scaleBeforeChangingSpatialReference=null;const s=new Ze({targetGeometry:new X,scale:0,rotation:0});Qe(s,e),this.constraints.constrain(s,this.state.paddedViewState.viewpoint),this.state.viewpoint=s,this.frameTask.requestFrame(),this._set("viewpoint",s)}get zoom(){return this.ready?this.constraints.scaleToZoom(this.scale):this._get("zoom")}set zoom(i){if(i==null)return;if(!this.ready){this._set("zoom",i),this._set("scale",0);const t=this._get("extent");return t&&(this._set("extent",null),this._set("center",t.center)),void this.notifyChange("initialExtentRequired")}if(!this.constraints.effectiveLODs)return void this._set("zoom",-1);const e=this.viewpoint;La(e,e,this.constraints.zoomToScale(i)),this.viewpoint=e,this._set("zoom",this.constraints.scaleToZoom(this.scale))}get navigating(){return!(!this.mapViewNavigation||!this.mapViewNavigation.interacting)}goTo(i,e){if(i)return this.animation&&(this.animation=null),this._createAnimation(),Ho(()=>this.ready,e).then(()=>{const t={animate:!0,...e},s=gg(i,this);return this.animation.update(s),this._gotoTask={},t.animate?this._gotoAnimated(s,t):this._gotoImmediate(s,t)});B.getLogger(this.declaredClass).error("#goTo()","target cannot be null or undefined")}async hitTest(i,e){const t=Aa(i)?ka(this,i):i;if(!this.ready||isNaN(t.x)||isNaN(t.y))return{screenPoint:t,results:[]};let s=new Set,n=!1,o=null,r=null;e!=null&&e.include?Ka(e.include,Za(this,h=>s.add(h),h=>{o||(o=new Set),o.add(h)},h=>s.add(h),()=>n=!0)):(n=!0,s=new Set(this.allLayerViews)),e!=null&&e.exclude&&Ka(e.exclude,Za(this,h=>s.delete(h),h=>{r||(r=new Set),r.add(h)}));const l=this.allLayerViews.filter(h=>!h.suspended&&s.has(h)).reverse(),d=this.toMap(t);let u=[...n?this.graphicsView.hitTest(d).map(h=>({type:"graphic",graphic:h,layer:null,mapPoint:d})):[],...await Promise.all(l.map(h=>h.hitTest(d,t)).toArray())].filter(E).flat().filter(E);return o&&(u=u.filter(h=>!("graphic"in h)||!h.graphic||o.has(zo(h.graphic)))),r&&(u=u.filter(h=>!("graphic"in h)||!h.graphic||r.has(zo(h.graphic)))),{screenPoint:t,results:u}}async takeScreenshot(i){const e=this._createScreenshotPlan(i),t=await this._stage.takeScreenshot(e);return Cf(t,{format:e.format,quality:e.quality,rotation:0,disableDecorations:!1},this._pixelFormat)}async _takeScreenshot(i){const e=this._createScreenshotPlan(i),t=await this._stage.takeScreenshot(e);return Ef(t,this._pixelFormat)}_createScreenshotPlan(i){i=i||{};const e=this.supersampleScreenshotsEnabled?Math.min(4,Af(this.size,Math.min(4096,this._stage.context.parameters.maxTextureSize))):1;let t;i.layers?(t=[],i.layers.forEach(o=>{const r=this.allLayerViews.find(l=>l.layer.id===o.id);r&&"container"in r&&r.container&&t.push(r.container)})):t=this._stage.children;const{format:s,quality:n}=kf(i.format,i.quality);return If(i,e,this.size,this.padding,s,n,t,i.rotation)}get test(){return{takeScreenshot:i=>this._takeScreenshot(i)}}toMap(i){if(!this.ready)return null;const e=Aa(i)?ka(this,i):i,t=[0,0],[s,n]=this.state.toMap(t,[e.x,e.y]),o=this.spatialReference;return new X({x:s,y:n,spatialReference:o})}toScreen(i){if(!this.ready)return null;const e=this._project(i,this.spatialReference),t=[e.x,e.y];return this.state.toScreen(t,t),me(t[0],t[1])}on(i,e,t,s){return this.inputManager&&this.viewEvents.on(i,e,t,s)||super.on(i,e)}hasEventListener(i){return super.hasEventListener(i)||this.viewEvents.hasHandler(i)}whenLayerView(i){return super.whenLayerView(i)}graphicChanged(i){this.graphicsView&&this.graphicsView.graphicUpdateHandler(i)}whenReady(){return new Promise(i=>{this.ready?i(this):this._resolveWhenReady.push(i)})}forceDOMReadyCycle(){this.forceReadyCycle()}getDefaultSpatialReference(){var i,e,t;return this.map&&"initialViewProperties"in this.map&&((e=(i=this.map)==null?void 0:i.initialViewProperties)==null?void 0:e.spatialReference)||((t=this.defaultsFromMap)==null?void 0:t.spatialReference)||null}hasLayerViewModule(i){return Oa.hasLayerViewModule(i)}importLayerView(i){return Oa.importLayerView(i)}pixelSizeAt(){return this.ready?this.state.resolution:(B.getLogger(this.declaredClass).error("#pixelSizeAt()","Map view cannot be used before it is ready"),null)}popupHitTest(i){return this.hitTest(i).then(e=>({...e,mapPoint:this.toMap(i)}))}requestUpdate(){this.ready&&this.frameTask.requestUpdate()}validate(){let i=Of(this.type);return $e("safari")&&$e("safari")<9&&(i=new $("mapview:browser-not-supported","This browser is not supported by MapView (Safari < 9)",{type:"safari",requiredVersion:9,detectedVersion:$e("safari")})),E(i)?(B.getLogger(this.declaredClass).warn("#validate()",i.message),Promise.reject(i)):e_()}_createAnimation(){return this.animation&&!this.animation.done||(this.animation=new $o),this.animation}_cancellableGoTo(i,e,t){const s=()=>i===this._gotoTask,n=t.then(()=>{s()&&(this.animation=null)}).catch(r=>{throw s()&&(this.animation=null,e.done||(e.stop(),this.frameTask.animationInProgress=!1)),r}),o=new Promise(r=>r(n));return e.when().catch(()=>{s()&&o.cancel&&o.cancel()}),o}_gotoImmediate(i,e){const t=this._gotoTask,s=this.animation,n=i.then(o=>{if(Yt(e),t!==this._gotoTask)throw new $("view:goto-interrupted","Goto was interrupted");this.viewpoint=s.target=o,s.finish()});return this._cancellableGoTo(t,s,n)}_flipStationary(i){return this._stationaryTimer!==null||(this._stationaryTimer=setTimeout(()=>{this._stationaryTimer=null;const e=performance.now()-this._lastStationaryEventTimestamp;e<Wa&&(this._stationaryTimer=this._flipStationary(e))},i)),this._stationaryTimer}_getDefaultViewpoint(){var v,w,A,M;const{constraints:i,initialExtent:e,map:t,padding:s,size:n}=this;if(!i)return null;const o=t&&"initialViewProperties"in t&&t.initialViewProperties,r={zoom:this._get("zoom"),scale:this._get("scale"),center:this._get("center"),extent:this._get("extent"),rotation:this._get("rotation"),viewpoint:this._get("viewpoint"),spatialReference:this._userSpatialReference};i.effectiveLODs?r.zoom!==-1&&(r.scale=i.zoomToScale(r.zoom)):r.zoom=-1;let l=null,d=null,u=0;const h=r.viewpoint&&r.viewpoint.rotation,p=r.viewpoint&&r.viewpoint.targetGeometry;E(p)&&(p.type==="extent"?l=p:p.type==="point"&&(d=p,u=r.viewpoint.scale));const g=r.extent||l||((w=Ve((v=o==null?void 0:o.viewpoint)==null?void 0:v.targetGeometry))==null?void 0:w.extent)||e,f=r.center||d||(g==null?void 0:g.center),_=r.scale||u||((A=o==null?void 0:o.viewpoint)==null?void 0:A.scale)||g&&ys(g,[n[0]-s.left-s.right,n[1]-s.top-s.bottom]),y=r.rotation||h||((M=o==null?void 0:o.viewpoint)==null?void 0:M.rotation)||0;return f&&_?new Ze({targetGeometry:f,scale:_,rotation:y}):null}_gotoAnimated(i,e){const t=this._gotoTask,s=this.animation,n=i.then(o=>{if(Yt(e),t!==this._gotoTask)throw new $("view:goto-interrupted","Goto was interrupted");return s.update(o),this.animationManager.animate(s,this.viewpoint,e),s.when().then(()=>{},()=>{})});return this._cancellableGoTo(t,s,n)}_project(i,e){var n;const t=i&&i.targetGeometry||i;if(!e)return i;if(!t)return null;if(e.imageCoordinateSystem||(n=t.spatialReference)!=null&&n.imageCoordinateSystem||yn(e,t.spatialReference))return i;const s=Es(t,e);if(!s)throw new $("mapview:projection-not-possible","projecting input geometry to target spatial reference returned a null value",{geometry:t,spatialReference:e});return t_(i)?(i.targetGeometry=s,i):s}_resizeHandler(i){if(!this.ready)return;const e=this.state;let t=this.state.paddedViewState.viewpoint;const s=this.state.paddedViewState.size.concat();e.size=[i.width,i.height],Ag(t,t,s,this.state.paddedViewState.size,this.resizeAlign),t=this.constraints.constrain(t,null),this.state.viewpoint=t}_startup(){var l,d;this.timeline.begin("MapView Startup");const i=this._getDefaultViewpoint(),e=i.targetGeometry;try{this._project(i,this.spatialReference)}catch(u){B.getLogger(this.declaredClass).warn(new yr("mapview:startup-projection-error","projection of initial viewpoint to the view's spatial reference, defaulting to the initial viewpoint.",{center:e.toJSON(),spatialReference:this.spatialReference,error:u})),i.targetGeometry=((l=this.defaultsFromMap.extent)==null?void 0:l.center)||new X({x:0,y:0,spatialReference:this.spatialReference})}(d=this.constraints)==null||d.fit(i),this._set("state",new zg({padding:this._get("padding"),size:this.size,viewpoint:i})),this.graphics.owner=this;const t=new Wc(this.surface,{canvas:this.renderCanvas,supersampleScreenshots:this.supersampleScreenshotsEnabled,contextOptions:{disabledExtensions:this.deactivatedWebGLExtensions,debugWebGLExtensions:this.debugWebGLExtensions},renderingOptions:this.renderingOptions,timeline:this.timeline});this._stage=t,this._magnifierView=new Jc,this._magnifierView.magnifier=this.magnifier;const s=new Yc({view:this});this._set("labelManager",s);const n=new Rg({view:this});this._set("animationManager",n);const o=new Qc({view:this,animationManager:n});this._set("mapViewNavigation",o),this._setupSpatialReferenceDependentProperties(),this.handles.add([this.rootLayerViews.on("change",()=>this._updateStageChildren()),t.on("post-render",()=>this._set("rendering",t.renderRequested)),t.on("will-render",()=>this._set("rendering",t.renderRequested)),t.on("webgl-error",u=>this.fatalError=u.error),I(()=>this.stationary,u=>t.stationary=u,ai),I(()=>this.background,u=>{t.background=u,this._magnifierView.background=u},ai),I(()=>this.magnifier,u=>this._magnifierView.magnifier=u,ai),I(()=>this.renderingOptions,u=>t.renderingOptions=u,ai),I(()=>this.highlightOptions,u=>t.highlightOptions=u,ai),I(()=>this.state.id,()=>t.state=this.state,ai)],"map-view"),this._updateStageChildren();const r=this._resolveWhenReady;this._resolveWhenReady=[],r.forEach(u=>u(this)),this.timeline.end("MapView Startup"),this.frameTask&&this.frameTask.start(),this._set("ready",!0)}_teardown(){this._destroySpatialReferenceDependentProperties(),this.handles.remove("map-view"),this.mapViewNavigation.destroy(),this._set("mapViewNavigation",null),this.animationManager.destroy(),this._set("animationManager",null),this.layerViewManager.clear(),this.labelManager.destroy(),this._magnifierView.destroy(),this._stage.destroy(),this._stage=null,this._set("graphicsView",null),this._magnifierView=null,this._set("labelManager",null),this._set("mapViewNavigation",null),this.graphics.owner=null,this.frameTask&&this.frameTask.stop(),this._stationaryTimer&&(clearTimeout(this._stationaryTimer),this._stationaryTimer=null),this._set("ready",!1);const{center:[i,e],spatialReference:t,rotation:s,scale:n}=this.state.paddedViewState,o=new X({x:i,y:e,spatialReference:t});this._set("viewpoint",null),this._set("extent",null),this._set("center",o),this._set("zoom",-1),this._set("rotation",s),this._set("scale",n),this._set("spatialReference",t),this._set("state",null),this.animation=null}_updateStageChildren(){this._stage.removeAllChildren(),this.rootLayerViews.forEach(e=>{this._stage.addChild(e.container)});const i=this.graphicsView;this._stage.addChild(i.container),this._stage.addChild(this._magnifierView)}_setupSpatialReferenceDependentProperties(){const i=new Qu(Gd.create({spatialReference:this.spatialReference,size:512,numLODs:36}));this._set("featuresTilingScheme",i);const e=new Zc({view:this,graphics:this.graphics,requestUpdateCallback:()=>this.requestUpdate(),container:new Kc(i)});this.frameTask.graphicsView=e,this._set("graphicsView",e)}_destroySpatialReferenceDependentProperties(){const i=this.graphicsView;this._set("graphicsView",null),this.frameTask.graphicsView=null,i.destroy(),this._set("featuresTilingScheme",null)}_spatialReferenceChanged(i){if(!this.ready)return;this.frameTask.stop();for(const l of this.allLayerViews)l.processDetach();this._destroySpatialReferenceDependentProperties();const e=this.state.paddedViewState.clone();if(O(this._scaleBeforeChangingSpatialReference))this._scaleBeforeChangingSpatialReference=e.scale;else{const l=e.viewpoint.clone();l.scale=this._scaleBeforeChangingSpatialReference,e.viewpoint=l}const t=e.clone(),[s,n]=e.center;let o=null;try{o=this._project(new X({x:s,y:n,spatialReference:e.spatialReference}),i)}catch(l){ws()||B.getLogger(this.declaredClass).warn(new yr("mapview:spatial-reference-change","could not project the view's center to the new spatial reference",{center:o.toJSON(),spatialReference:i,error:l}))}o||(o=new X({x:0,y:0,spatialReference:i}));const r=So(new Ze({targetGeometry:new X,scale:0,rotation:0}),e.viewpoint,o);t.viewpoint=r;try{const d=[e.size[0]/2,e.size[1]/2],u=[d[0]+20,d[1]],h=e.toMap([0,0],u),{x:p,y:g}=this._project(new X({x:h[0],y:h[1],spatialReference:e.spatialReference}),i);h[0]=p,h[1]=g,t.toScreen(h,h);const f=xg(d,h,u),_=Math.hypot(h[0]-d[0],h[1]-d[1])/20;!Number.isFinite(_)||Math.abs(_)>4?(r.rotation=0,r.targetGeometry=new X({x:0,y:0,spatialReference:i})):(r.scale*=_,r.scale>$e("mapview-srswitch-adjust-rotation-scale-threshold")?r.rotation=0:r.rotation+=Number.isFinite(f)?f:0)}catch{}this._get("constraints").constrain(r,null),this._get("state").viewpoint=r,this._stage.state=this.state,this._setupSpatialReferenceDependentProperties();for(const l of this.allLayerViews)l.processAttach();this.frameTask.requestFrame(),this.frameTask.start(),this._updateStageChildren()}};F.type="2d",a([c({readOnly:!0})],F.prototype,"animationManager",void 0),a([c({constructOnly:!0})],F.prototype,"deactivatedWebGLExtensions",void 0),a([c({constructOnly:!0})],F.prototype,"debugWebGLExtensions",void 0),a([c({readOnly:!0})],F.prototype,"featuresTilingScheme",void 0),a([c({readOnly:!0})],F.prototype,"fullOpacity",void 0),a([c({readOnly:!0})],F.prototype,"graphicsTileStore",null),a([c()],F.prototype,"graphicsView",void 0),a([c({readOnly:!0})],F.prototype,"state",void 0),a([c()],F.prototype,"initialExtentRequired",null),a([c()],F.prototype,"labelManager",void 0),a([c({readOnly:!0})],F.prototype,"resourceManager",null),a([c({readOnly:!0})],F.prototype,"textureManager",null),a([c({readOnly:!0})],F.prototype,"mapViewNavigation",void 0),a([c({constructOnly:!0})],F.prototype,"renderCanvas",void 0),a([c()],F.prototype,"renderingOptions",void 0),a([c({readOnly:!0})],F.prototype,"rendering",void 0),a([c({constructOnly:!0})],F.prototype,"supersampleScreenshotsEnabled",void 0),a([c({readOnly:!0})],F.prototype,"supportsGround",void 0),a([c()],F.prototype,"_stationaryTimer",void 0),a([c()],F.prototype,"_defaultsFromMapSettings",null),a([c()],F.prototype,"_pePromise",void 0),a([c({readOnly:!0})],F.prototype,"typeSpecificPreconditionsReady",null),a([c()],F.prototype,"animation",null),a([c({type:Xf})],F.prototype,"background",null),a([c({value:null,type:X,dependsOn:["state.id","ready"]})],F.prototype,"center",null),a([c({type:Fc})],F.prototype,"constraints",null),a([c({value:null,type:ji,dependsOn:["state.id","ready"]})],F.prototype,"extent",null),a([c()],F.prototype,"floors",void 0),a([c({type:Dc})],F.prototype,"highlightOptions",void 0),a([c({readOnly:!0})],F.prototype,"inputManager",void 0),a([c()],F.prototype,"map",void 0),a([c({value:{top:0,right:0,bottom:0,left:0},cast:i=>({top:0,right:0,bottom:0,left:0,...i})})],F.prototype,"padding",null),a([c()],F.prototype,"resizeAlign",void 0),a([c({readOnly:!0,dependsOn:["state.id"]})],F.prototype,"resolution",null),a([c({value:0,type:Number,dependsOn:["state.id","ready"]})],F.prototype,"rotation",null),a([c({value:0,type:Number,dependsOn:["state.id","ready"]})],F.prototype,"scale",null),a([c({constructOnly:!0})],F.prototype,"spatialReferenceLocked",void 0),a([c()],F.prototype,"stationary",null),a([c({type:Vc,readOnly:!0})],F.prototype,"timeline",void 0),a([c({readOnly:!0})],F.prototype,"type",void 0),a([c({readOnly:!0})],F.prototype,"updating",null),a([c({value:null,type:Ze,dependsOn:["state.id","ready"]})],F.prototype,"viewpoint",null),a([c({value:-1,dependsOn:["state.id","ready"]})],F.prototype,"zoom",null),a([c({readOnly:!0})],F.prototype,"navigating",null),a([c({type:jc})],F.prototype,"ui",void 0),F=a([C("esri.views.MapView")],F);const i_=F;function zo(i){var t,s;const e=i.getObjectId();return e?`${((t=i.layer)==null?void 0:t.uid)??((s=i.sourceLayer)==null?void 0:s.uid)??"MapView"}/${e}`:`"MapView/${i.uid}`}function Za(i,e,t,s,n){return o=>{if(o instanceof ct){if(o.layer===i)n==null||n();else{const r=i.allLayerViews.find(l=>l.layer===o.layer);r&&(s==null||s(r))}t(zo(o))}else{const r=i.allLayerViews.find(l=>l.layer===o);r&&e(r)}}}function Ka(i,e){if(i)if(vr(i))for(const t of i)if(vr(t))for(const s of t)e(s);else e(t);else e(i)}function s_(i){return(i==null?void 0:i.declaredClass)==="esri.WebMap"}let It=class extends kn(Wi.EventedAccessor){constructor(e){super(e),this._initialViewpoint=null,this._goingHomeController=null,this.go=this.go.bind(this)}destroy(){this._cancelGo(),this.view=null}get state(){return this.get("view.ready")?this._goingHomeController?"going-home":"ready":"disabled"}set view(e){this._initialViewpoint=null,this._set("view",e),e&&e.when().then(()=>{this.view===e&&(this._initialViewpoint=e.viewpoint.clone(),this.notifyChange("viewpoint"))})}get viewpoint(){return this._get("viewpoint")||this._initialViewpoint}set viewpoint(e){this._set("viewpoint",e)}async go(){if(!this.get("view.ready"))throw new $("home:disabled-state","Cannot go when disabled.");this._cancelGo(),this.emit("go");const e=new AbortController;this._goingHomeController=e;try{await this.view.when(),await this.callGoTo({target:this.viewpoint,options:{signal:e.signal}})}catch{}this._goingHomeController=null}cancelGo(){this._cancelGo()}_cancelGo(){const{_goingHomeController:e}=this;e&&e.abort(),this._goingHomeController=null}};a([c()],It.prototype,"_goingHomeController",void 0),a([c({readOnly:!0})],It.prototype,"state",null),a([c()],It.prototype,"view",null),a([c({type:Ze})],It.prototype,"viewpoint",null),a([c()],It.prototype,"go",null),a([c()],It.prototype,"cancelGo",null),It=a([C("esri.widgets.Home.HomeViewModel")],It);const Xc=It,ki={base:"esri-home esri-widget--button esri-widget",esriIcon:"esri-icon",loadingIcon:"esri-icon-loading-indicator",rotatingIcon:"esri-rotating",widgetIcon:"esri-icon-home",disabled:"esri-disabled"};let De=class extends ue{constructor(e,t){super(e,t),this.iconClass=ki.widgetIcon,this.messages=null,this.messagesCommon=null,this.viewModel=new Xc}get goToOverride(){return this.viewModel.goToOverride}set goToOverride(e){this.viewModel.goToOverride=e}get label(){var e;return((e=this.messages)==null?void 0:e.widgetLabel)??""}set label(e){this._overrideIfSome("label",e)}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}get viewpoint(){return this.viewModel.viewpoint}set viewpoint(e){this.viewModel.viewpoint=e}cancelGo(){this.viewModel.cancelGo()}go(){return this.viewModel.go()}render(){var o;const e=(o=this.viewModel)==null?void 0:o.state,{messagesCommon:t,messages:s}=this,n={[ki.disabled]:e==="disabled"};return m("div",{bind:this,class:this.classes(ki.base,n),role:"button",tabIndex:0,onclick:this._go,onkeydown:this._go,"aria-label":s.widgetLabel,title:e==="going-home"?t.cancel:s.title},this.renderIcon())}renderIcon(){var s;const e=(s=this.viewModel)==null?void 0:s.state,t={[ki.esriIcon]:!0,[this.iconClass]:e!=="going-home",[ki.loadingIcon]:e==="going-home",[ki.rotatingIcon]:e==="going-home"};return m("span",{"aria-hidden":"true",class:this.classes(t)})}_go(){const{viewModel:e}=this;e.state==="going-home"?e.cancelGo():e.go()}};a([c()],De.prototype,"goToOverride",null),a([c()],De.prototype,"iconClass",void 0),a([c()],De.prototype,"label",null),a([c(),re("esri/widgets/Home/t9n/Home")],De.prototype,"messages",void 0),a([c(),re("esri/t9n/common")],De.prototype,"messagesCommon",void 0),a([c()],De.prototype,"uiStrings",void 0),a([c()],De.prototype,"view",null),a([c({type:Xc}),sr("go")],De.prototype,"viewModel",void 0),a([c()],De.prototype,"viewpoint",null),a([Pe()],De.prototype,"_go",null),De=a([C("esri.widgets.Home")],De);const n_=De;function ed(i){if(!i)return null;if(Td(i)&&i.wkid){const e=Ud[i.wkid];if(e)return e}if(i.wkt){const e=o_(i.wkt);if(e)return e}return null}function o_(i){const e=Hd.exec(i);if(!e||e.length!==2)return null;const t=e[1].split(",");if(!t||t.length<3)return null;const s=parseFloat(t[1]),n=parseFloat(t[2]);return isNaN(s)||isNaN(n)?null:{a:s,f:n===0?0:1/n}}function r_(i){const e=ed(i??Cs.WGS84);if(a_(e))return e;const t=e.a*(1-e.f);return Object.assign(e,{b:t,eSq:1-(t/e.a)**2,radius:(2*e.a+t)/3,densificationRatio:1e4/((2*e.a+t)/3)})}function a_(i){return i!=null&&"b"in i&&"eSq"in i&&"radius"in i}function td(i){return ed(i)!==null}function l_(i,e="meters"){if(!i)throw new $("geodesic-lengths:invalid-geometries","the input geometries type is not supported");if(i.some(s=>!td(s.spatialReference)))throw new $("geodesic-lengths:invalid-spatial-reference","the input geometries spatial reference is not supported");const t=[];for(let s=0;s<i.length;s++){const n=i[s],{spatialReference:o}=n,r=n.type==="polyline"?n.paths:n.rings;let l=0;for(let d=0;d<r.length;d++){const u=r[d];let h=0;for(let p=1;p<u.length;p++){const g=u[p-1][0],f=u[p][0],_=u[p-1][1],y=u[p][1];if(_!==y||g!==f){const v=new c_;d_(v,[g,_],[f,y],o),h+=v.distance}}l+=h}l=Qd(l,"meters",e),t.push(l)}return t}class c_{constructor(e=0,t,s){this.distance=e,this.azimuth=t,this.reverseAzimuth=s}}function d_(i,e,t,s){const n=e[0]*ni,o=e[1]*ni,r=t[0]*ni,l=t[1]*ni,{a:d,b:u,f:h,radius:p}=r_(s),g=r-n,f=Math.atan((1-h)*Math.tan(o)),_=Math.atan((1-h)*Math.tan(l)),y=Math.sin(f),v=Math.cos(f),w=Math.sin(_),A=Math.cos(_);let M,P,L,k,Y,ge,ve,Me,ne,ze,Pt=1e3,fe=g;do{if(ve=Math.sin(fe),Me=Math.cos(fe),L=Math.sqrt(A*ve*(A*ve)+(v*w-y*A*Me)*(v*w-y*A*Me)),L===0)return i.distance=0,i.azimuth=void 0,i.reverseAzimuth=void 0,i;Y=y*w+v*A*Me,ge=Math.atan2(L,Y),ne=v*A*ve/L,P=1-ne*ne,k=Y-2*y*w/P,isNaN(k)&&(k=0),ze=h/16*P*(4+h*(4-3*P)),M=fe,fe=g+(1-ze)*h*ne*(ge+ze*L*(k+ze*Y*(2*k*k-1)))}while(Math.abs(fe-M)>1e-12&&--Pt>0);if(Pt===0){const $n=p,Sn=Math.acos(Math.sin(o)*Math.sin(l)+Math.cos(o)*Math.cos(l)*Math.cos(r-n))*$n,fr=r-n,od=Math.sin(fr)*Math.cos(l),rd=Math.cos(o)*Math.sin(l)-Math.sin(o)*Math.cos(l)*Math.cos(fr),ad=Math.atan2(od,rd);return i.azimuth=ad/ni,i.distance=Sn,i.reverseAzimuth=void 0,i}const V=P*(d*d-u*u)/(u*u),Be=V/1024*(256+V*(V*(74-47*V)-128)),Se=u*(1+V/16384*(4096+V*(V*(320-175*V)-768)))*(ge-Be*L*(k+Be/4*(Y*(2*k*k-1)-Be/6*k*(4*L*L-3)*(4*k*k-3)))),Re=Math.atan2(A*Math.sin(fe),v*w-y*A*Math.cos(fe)),dt=Math.atan2(v*Math.sin(fe),v*w*Math.cos(fe)-y*A);return i.azimuth=Re/ni,i.distance=Se,i.reverseAzimuth=dt/ni,i}function u_(i){const{wkid:e}=i;if(zs[e]!=null)return zs.values[zs[e]];const{wkt:t}=i,s=t.lastIndexOf(",")+1,n=t.lastIndexOf("]]");return parseFloat(t.substring(s,n))}function Ya(i,e){return i&&i.includes(e)}function Qa(i,e){const{x:t,y:s}=i==="decimal-degrees"?xd(e,!0):e;return[t,s]}function Ja({state:{paddedViewState:i},spatialReference:e,width:t}){return e.isWrappable&&i.worldScreenWidth<t}let Vi=class extends z{constructor(e){super(e),this.scaleComputedFrom=me(),this.view=null}get state(){return this.get("view.ready")&&this.get("view.type")==="2d"?"ready":"disabled"}getScaleBarProperties(e,t){if(this.state==="disabled"||isNaN(e)||!t)return null;const s=this._getDistanceInKm(this.view,this.scaleComputedFrom);if(O(s))return null;if(t==="metric")return this._getScaleBarProps(e,s,"metric");const n=s/1.609;return this._getScaleBarProps(e,n,"non-metric")}_getLocationUnit(){const e=this.get("view.spatialReference"),{isWebMercator:t,wkid:s,wkt:n}=e;return t||Ya(n,"WGS_1984_Web_Mercator")?"decimal-degrees":zs[s]!=null||Ya(n,"PROJCS")?"linear-unit":"unknown"}_getDistanceInKm(e,t){const{state:s,spatialReference:n}=e,o=this._getLocationUnit();if(o==="linear-unit")return s.extent.width*u_(n)/1e3;const[r,l]=this._getScaleMeasuringPoints(e,t),d=o==="decimal-degrees"||n.isGeographic&&!td(n)?Cs.WGS84:n,u=new Go({paths:[[Qa(o,r),Qa(o,l)]],spatialReference:d}),h=wu(u,10);let p;try{[p]=l_([h],"kilometers")}catch{return null}return p}_getScaleMeasuringPoints(e,t){const{width:s,height:n,position:o,spatialReference:r}=e;if(Ja(e)){const{valid:h}=fl(r);return[new X(h[0],0,r),new X(h[1],0,r)]}let l=t.y-o[1];l>n?l=n:l<0&&(l=0);const d=me(0,l),u=me(s,l);return[e.toMap(d),e.toMap(u)]}_getScaleBarProps(e,t,s){const{view:n}=this;let o=e*t/(Ja(n)?n.state.paddedViewState.worldScreenWidth:n.width),r=s==="metric"?"km":"mi";o<.1&&(r==="mi"?(o*=5280,r="ft"):r==="km"&&(o*=1e3,r="m"));let l=0;for(;o>=1;)o/=10,l++;const d=this._getConstraints(o);if(!d)return null;const{min:u,max:h}=d,p=h/o>=o/u?u:h;return{length:e*(p/o),value:10**l*p,unit:r}}_getConstraints(e){return e>.5?{min:.5,max:1}:e>.3?{min:.3,max:.5}:e>.2?{min:.2,max:.3}:e>.15?{min:.15,max:.2}:e>=.1?{min:.15,max:.1}:void 0}};a([c()],Vi.prototype,"scaleComputedFrom",void 0),a([c({readOnly:!0})],Vi.prototype,"state",null),a([c()],Vi.prototype,"view",void 0),Vi=a([C("esri.widgets.Scalebar.ScaleBarViewModel")],Vi);const h_=Vi,ie={base:"esri-scale-bar esri-widget",labelContainer:"esri-scale-bar__label-container",rulerLabelContainer:"esri-scale-bar__label-container--ruler",lineLabelContainer:"esri-scale-bar__label-container--line",topLabelContainer:"esri-scale-bar__label-container--top",bottomLabelContainer:"esri-scale-bar__label-container--bottom",label:"esri-scale-bar__label",line:"esri-scale-bar__line",topLine:"esri-scale-bar__line--top",bottomLine:"esri-scale-bar__line--bottom",ruler:"esri-scale-bar__ruler",rulerBlock:"esri-scale-bar__ruler-block",barContainer:"esri-scale-bar__bar-container",rulerBarContainer:"esri-scale-bar__bar-container--ruler",lineBarContainer:"esri-scale-bar__bar-container--line",disabled:"esri-disabled"};function Ns(i){return 2*i}let We=class extends ue{constructor(i,e){super(i,e),this.messages=null,this.unit="non-metric",this.viewModel=new h_}initialize(){this.addHandles([I(()=>{const{view:i}=this;return[i==null?void 0:i.stationary,i==null?void 0:i.center,i==null?void 0:i.scale,i==null?void 0:i.zoom]},([i])=>{i&&this.scheduleRender()})])}get label(){var i;return((i=this.messages)==null?void 0:i.widgetLabel)??""}set label(i){this._overrideIfSome("label",i)}set style(i){const e=this.unit==="dual"?"line":i;this._set("style",e)}castStyle(i){return i==="line"?i:"ruler"}castUnit(i){return i==="metric"||i==="dual"?i:"non-metric"}get view(){return this.viewModel.view}set view(i){this.viewModel.view=i}render(){const i=this.get("viewModel.state")==="disabled",e={[ie.disabled]:i};let t,s;if(!i){const{unit:n,style:o}=this,r=n==="metric"||n==="dual",l=50;if(n==="non-metric"||n==="dual"){const d=this.viewModel.getScaleBarProperties(l,"non-metric");d&&(s=o==="ruler"?this._renderRuler(d):this._renderLine(d,"bottom"))}if(r){const d=this.viewModel.getScaleBarProperties(l,"metric");d&&(t=o==="ruler"?this._renderRuler(d):this._renderLine(d,"top"))}}return m("div",{afterCreate:this._handleRootCreateOrUpdate,afterUpdate:this._handleRootCreateOrUpdate,bind:this,class:this.classes(ie.base,e)},t,s)}_renderRuler(i){const e=Ns(Math.round(i.length)),{messages:t}=this,s=t[i.unit]||t.unknownUnit,n=`${Ns(i.value)} ${s}`;return m("div",{class:this.classes(ie.barContainer,ie.rulerBarContainer),key:"esri-scale-bar__ruler"},m("div",{class:ie.ruler,styles:{width:`${e}px`}},m("div",{class:ie.rulerBlock}),m("div",{class:ie.rulerBlock}),m("div",{class:ie.rulerBlock}),m("div",{class:ie.rulerBlock})),m("div",{class:this.classes(ie.labelContainer,ie.rulerLabelContainer)},m("div",{class:ie.label},"0"),m("div",{class:ie.label},n)))}_renderLine(i,e){const{messages:t}=this,s=t[i.unit]||t.unknownUnit,n=`${Ns(i.value)} ${s}`,o={[ie.topLabelContainer]:e==="top",[ie.bottomLabelContainer]:e==="bottom"},r=m("div",{class:this.classes(ie.labelContainer,ie.lineLabelContainer,o),key:"esri-scale-bar__label"},m("div",{class:ie.label},n)),l={[ie.topLine]:e==="top",[ie.bottomLine]:e==="bottom"},d=Ns(Math.round(i.length)),u=m("div",{class:this.classes(ie.line,l),key:"esri-scale-bar__line",styles:{width:`${d}px`}});return m("div",{class:this.classes(ie.barContainer,ie.lineBarContainer),key:"esri-scale-bar__line-container"},[u,r])}_handleRootCreateOrUpdate(i){const e=this.viewModel;if(!e)return;const t=i.getBoundingClientRect(),s=t.left+window.pageXOffset,n=t.top+window.pageYOffset,o=me(s,n);(o.x!==e.scaleComputedFrom.x||o.y!==e.scaleComputedFrom.y)&&(e.scaleComputedFrom=o)}};a([c()],We.prototype,"label",null),a([c(),re("esri/widgets/ScaleBar/t9n/ScaleBar")],We.prototype,"messages",void 0),a([c()],We.prototype,"style",null),a([be("style")],We.prototype,"castStyle",null),a([c()],We.prototype,"unit",void 0),a([be("unit")],We.prototype,"castUnit",null),a([c()],We.prototype,"view",null),a([c()],We.prototype,"viewModel",void 0),We=a([C("esri.widgets.ScaleBar")],We);const p_=We;new Mi({MGRS:"mgrs",USNG:"usng",UTM:"utm",GeoRef:"geo-ref",GARS:"gars",DMS:"dms",DDM:"ddm",DD:"dd"});new Mi({109006:"centimeters",9102:"decimal-degrees",109005:"decimeters",9002:"feet",109009:"inches",9036:"kilometers",9001:"meters",9035:"miles",109007:"millimeters",109012:"nautical-miles",9096:"yards"});let oi=class extends Ye{constructor(e){super(e),this.deviationUnit=null,this.geometries=null,this.maxDeviation=null}};a([c({type:String,json:{write:!0}})],oi.prototype,"deviationUnit",void 0),a([c({json:{read:{reader:i=>i?i.map(e=>kt(e)).filter(E):null},write:{writer:(i,e)=>{e.geometries=(i==null?void 0:i.map(t=>t.toJSON()))??null}}}})],oi.prototype,"geometries",void 0),a([c({type:Number,json:{write:!0}})],oi.prototype,"maxDeviation",void 0),oi=a([C("esri.rest.support.GeneralizeParameters")],oi),oi.from=si(oi);new Mi({preserveShape:"preserve-shape"});let Ft=class extends Ye{constructor(e){super(e),this.calculationType=null,this.geodesic=null,this.lengthUnit=null,this.polylines=null}};a([c({type:String,json:{write:!0}})],Ft.prototype,"calculationType",void 0),a([c({type:Boolean,json:{write:!0}})],Ft.prototype,"geodesic",void 0),a([c({json:{write:!0}})],Ft.prototype,"lengthUnit",void 0),a([c({type:[Go],json:{read:{reader:i=>i?i.map(e=>kt(e)):null},write:{writer:(i,e)=>{e.polylines=i.map(t=>t.toJSON())}}}})],Ft.prototype,"polylines",void 0),Ft=a([C("esri.rest.support.LengthsParameters")],Ft),Ft.from=si(Ft);new Mi({esriGeometryOffsetBevelled:"bevelled",esriGeometryOffsetMitered:"mitered",esriGeometryOffsetRounded:"rounded"});new Mi({9001:"meters",9002:"feet",9036:"kilometers",9093:"miles",109012:"nautical-miles",109001:"yards"});let gt=class extends Ye{constructor(e){super(e),this.bevelRatio=null,this.geometries=null,this.offsetDistance=null,this.offsetHow=null,this.offsetUnit=null}};a([c({type:Number,json:{write:!0}})],gt.prototype,"bevelRatio",void 0),a([c({json:{read:{reader:i=>i?i.map(e=>kt(e)).filter(E):null},write:{writer:(i,e)=>{e.geometries=(i==null?void 0:i.map(t=>t.toJSON()))??null}}}})],gt.prototype,"geometries",void 0),a([c({type:Number,json:{write:!0}})],gt.prototype,"offsetDistance",void 0),a([c({type:String,json:{write:!0}})],gt.prototype,"offsetHow",void 0),a([c({type:String,json:{write:!0}})],gt.prototype,"offsetUnit",void 0),gt=a([C("esri.rest.support.OffsetParameters")],gt),gt.from=si(gt);let mi=class extends Ye{constructor(e){super(e),this.geometries=null,this.outSpatialReference=null,this.transformation=null,this.transformForward=null}toJSON(){const e=this.geometries.map(n=>n.toJSON()),t=this.geometries[0],s={};return s.outSR=this.outSpatialReference.wkid||JSON.stringify(this.outSpatialReference.toJSON()),s.inSR=t.spatialReference.wkid||JSON.stringify(t.spatialReference.toJSON()),s.geometries=JSON.stringify({geometryType:wl(t),geometries:e}),this.transformation&&(s.transformation=this.transformation.wkid||JSON.stringify(this.transformation)),this.transformForward!=null&&(s.transformForward=this.transformForward),s}};a([c()],mi.prototype,"geometries",void 0),a([c({json:{read:{source:"outSR"}}})],mi.prototype,"outSpatialReference",void 0),a([c()],mi.prototype,"transformation",void 0),a([c()],mi.prototype,"transformForward",void 0),mi=a([C("esri.rest.support.ProjectParameters")],mi);const id=mi,m_=si(id);async function g_(i,e,t){e=m_(e);const s=bu(i),n={...s.query,f:"json",...e.toJSON()},o=e.outSpatialReference,r=wl(e.geometries[0]),l=Mu(n,t);return yl(s.path+"/project",l).then(({data:{geometries:d}})=>Iu(d,r,o))}new Mi({esriGeometryRelationCross:"cross",esriGeometryRelationDisjoint:"disjoint",esriGeometryRelationIn:"in",esriGeometryRelationInteriorIntersection:"interior-intersection",esriGeometryRelationIntersection:"intersection",esriGeometryRelationLineCoincidence:"line-coincidence",esriGeometryRelationLineTouch:"line-touch",esriGeometryRelationOverlap:"overlap",esriGeometryRelationPointTouch:"point-touch",esriGeometryRelationTouch:"touch",esriGeometryRelationWithin:"within",esriGeometryRelationRelation:"relation"});let Ot=class extends Ye{constructor(e){super(e),this.geometries1=null,this.geometries2=null,this.relation=null,this.relationParameter=null}};a([c({json:{read:{reader:i=>i?i.map(e=>kt(e)).filter(E):null},write:{writer:(i,e)=>{e.geometries1=(i==null?void 0:i.map(t=>t.toJSON()))??null}}}})],Ot.prototype,"geometries1",void 0),a([c({json:{read:{reader:i=>i?i.map(e=>kt(e)).filter(E):null},write:{writer:(i,e)=>{e.geometries2=(i==null?void 0:i.map(t=>t.toJSON()))??null}}}})],Ot.prototype,"geometries2",void 0),a([c({type:String,json:{write:!0}})],Ot.prototype,"relation",void 0),a([c({type:String,json:{write:!0}})],Ot.prototype,"relationParameter",void 0),Ot=a([C("esri.rest.support.RelationParameters")],Ot),Ot.from=si(Ot);new Mi({0:"default-curve-extension",1:"relocate-ends",2:"keep-end-attributes",4:"no-end-attributes",8:"no-extend-at-from",16:"no-extend-at-to"});let ri=class extends Ye{constructor(i){super(i),this.extendHow="default-curve-extension",this.polylines=null,this.trimExtendTo=null}};a([c({type:String,json:{write:!0}})],ri.prototype,"extendHow",void 0),a([c({type:[Go],json:{read:{reader:i=>i?i.map(e=>kt(e)):null},write:{writer:(i,e)=>{e.polylines=i.map(t=>t.toJSON())}}}})],ri.prototype,"polylines",void 0),a([c({json:{read:{reader:i=>i?kt(i):null},write:{writer:(i,e)=>{e.trimExtendTo=i.toJSON()}}}})],ri.prototype,"trimExtendTo",void 0),ri=a([C("esri.rest.support.TrimExtendParameters")],ri),ri.from=si(ri);const sd=B.getLogger("esri.widgets.support.geolocationUtils"),f_={maximumAge:0,timeout:15e3,enableHighAccuracy:!0};function __(){const i=$e("esri-geolocation");return i||sd.warn("geolocation-unsupported","Geolocation unsupported."),i}function y_(){const i=window.isSecureContext;return i||sd.warn("insecure-context","Geolocation requires a secure origin."),i}function v_(){return __()&&y_()}function w_(i){return i||(i=f_),new Promise((t,s)=>{setTimeout(()=>s(new $("geolocation:timeout","getting the current geolocation position timed out")),15e3),navigator.geolocation.getCurrentPosition(t,s,i)})}function b_(i,e){const{position:t,view:s}=i;return C_(I_(M_(t)),s,e)}function M_(i){const e=i&&i.coords||{},t={accuracy:e.accuracy,altitude:e.altitude,altitudeAccuracy:e.altitudeAccuracy,heading:e.heading,latitude:e.latitude,longitude:e.longitude,speed:e.speed};return i&&{coords:t,timestamp:i.timestamp}}function I_(i){const e=i&&i.coords;return e?new X({longitude:e.longitude,latitude:e.latitude,z:e.altitude||null,spatialReference:{wkid:4326}}):null}function C_(i,e,t){if(!e)return Promise.resolve(i);const s=e.spatialReference;return s.isWGS84?Promise.resolve(i):s.isWebMercator?Promise.resolve(Uo(i)):E_(t).then(n=>{if(!n)throw new $("geometry-service:missing-url","Geometry service URL is missing");const o=new id({geometries:[i],outSpatialReference:s});return g_(n,o,t).then(r=>r[0])})}function E_(i){if(sn.geometryServiceUrl)return Promise.resolve(sn.geometryServiceUrl);const e=eh.getDefault();return e.load(i).catch(()=>{}).then(()=>e.get("helperServices.geometry.url"))}const T_=2500;let ot=class extends kn(Wi.EventedMixin(z)){constructor(){super(...arguments),this._geolocationUsable=!0,this._iconPath=$l("esri/images/support/sdk_gps_location.png"),this.geolocationOptions=null,this.goToLocationEnabled=!0,this.graphic=new ct({symbol:new mu({url:this._iconPath,width:21,height:21})}),this.scale=null,this.useHeadingEnabled=!0,this.view=null}initialize(){v_()||(this._geolocationUsable=!1)}destroy(){this._clear(),this.view=null}_clear(){this.view&&this.view.graphics.remove(this.graphic)}_getScaleWithinConstraints(i,e){if(!e)return i;if(e.type==="2d"){const{effectiveMaxScale:t,effectiveMinScale:s}=e.constraints;return Math.min(s,Math.max(t,i))}return i}_getScale(i){const{scale:e}=this,t=typeof e=="number"?e:T_;return this._getScaleWithinConstraints(t,i)}_getHeading(i,e){const t=e&&e.spatialReference,s=t&&(t.isWebMercator||t.isGeographic),n=i.coords&&i.coords.heading;if(!(!s||typeof n!="number"||isNaN(n)||n<0||n>360))return n}_addHeading(i){const{heading:e,target:t,view:s}=i;s&&typeof e=="number"&&!isNaN(e)&&(s.type!=="3d"?s.type==="2d"&&(t.rotation=360-e):t.heading=e)}_animatePoint(i,e,t,s){const{view:n}=this;if(!this.goToLocationEnabled||!n)return Promise.resolve(e);const o=this.useHeadingEnabled?this._getHeading(e,n):void 0,r={target:i,scale:t};return this._addHeading({heading:o,target:r,view:n}),this.callGoTo({target:r,options:s}).then(()=>e)}async _setPosition(i,e){try{const t=await b_({position:i,view:this.view},e),{graphic:s}=this,{timestamp:n}=i,{coords:o}=i,{accuracy:r,altitude:l,altitudeAccuracy:d,heading:u,latitude:h,longitude:p,speed:g}=o,f={timestamp:n,accuracy:r,altitude:l,altitudeAccuracy:d,heading:u,latitude:h,longitude:p,speed:g};s&&(s.geometry=t,s.attributes=f);const _=this._getScale(this.view);return this._animatePoint(t,i,_,e)}catch(t){throw new $("positioning:invalid-point","Cannot position invalid point",{error:t})}}};a([c()],ot.prototype,"_geolocationUsable",void 0),a([c()],ot.prototype,"geolocationOptions",void 0),a([c()],ot.prototype,"goToLocationEnabled",void 0),a([c({type:ct,nonNullable:!0})],ot.prototype,"graphic",void 0),a([c()],ot.prototype,"scale",void 0),a([c()],ot.prototype,"useHeadingEnabled",void 0),a([c()],ot.prototype,"view",void 0),ot=a([C("esri.widgets.support.GeolocationPositioning")],ot);const x_=ot;async function k_(){const i=await th("esri/widgets/Locate/t9n/Locate");return new Al({title:i.currentLocation,fieldInfos:[{fieldName:"timestamp",label:i.timestamp,format:{dateFormat:"short-date-short-time"}},{fieldName:"latitude",label:i.latitude,format:{places:4,digitSeparator:!0}},{fieldName:"longitude",label:i.longitude,format:{places:4,digitSeparator:!0}},{fieldName:"accuracy",label:i.accuracy,format:{places:0,digitSeparator:!0}},{fieldName:"altitude",label:i.altitude,format:{places:0,digitSeparator:!0}},{fieldName:"altitudeAccuracy",label:i.altitudeAccuracy,format:{places:0,digitSeparator:!0}},{fieldName:"heading",label:i.heading,format:{places:0,digitSeparator:!0}},{fieldName:"speed",label:i.speed,format:{places:0,digitSeparator:!0}}],actions:[ko.clone()],content:[{type:"fields"}]})}let Wt=class extends x_{constructor(i){super(i),this._locateController=null,this._handles=new lt,this.popupEnabled=!0,this.locate=this.locate.bind(this)}initialize(){this._handles.add([Eu(()=>{var s;const{graphic:i,view:e}=this;((s=e==null?void 0:e.graphics)==null?void 0:s.includes(i))&&this._updatePopupTemplate(i)})])}destroy(){this.cancelLocate(),this._handles.destroy(),this._handles=null}get state(){return this._geolocationUsable?this.get("view.ready")?this._locateController?"locating":"ready":"disabled":"feature-unsupported"}async locate(){if(this.cancelLocate(),this.state==="disabled")throw new $("locate:disabled-state","Cannot locate when disabled.");if(this.state==="feature-unsupported")throw new $("locate:feature-unsupported-state","Cannot locate in unsecure domain.");const i=new AbortController;this._locateController=i;try{let e=await w_(this.geolocationOptions);return e=await this._setPosition(e,{signal:i.signal}),this._locateController!==i?null:(this.graphic&&(this.graphic=this.graphic.clone(),await this._updatePopupTemplate(this.graphic),this.view.graphics.push(this.graphic)),this.emit("locate",{position:e}),this._locateController=null,e)}catch(e){throw this._locateController=null,this.emit("locate-error",{error:e}),e}}cancelLocate(){this._clear(),this._locateController&&this._locateController.abort(),this._locateController=null}async _updatePopupTemplate(i){if(!this.popupEnabled)return;const e=await k_(),t=i!==this.graphic;this.destroyed||t||(i.popupTemplate=e)}};a([c()],Wt.prototype,"_locateController",void 0),a([c()],Wt.prototype,"popupEnabled",void 0),a([c({readOnly:!0})],Wt.prototype,"state",null),a([c()],Wt.prototype,"locate",null),a([c()],Wt.prototype,"cancelLocate",null),Wt=a([C("esri.widgets.Locate.LocateViewModel")],Wt);const nd=Wt,ft={base:"esri-locate esri-widget--button esri-widget",text:"esri-icon-font-fallback-text",icon:"esri-icon",locate:"esri-icon-locate",loading:"esri-icon-loading-indicator",rotating:"esri-rotating",widgetIcon:"esri-icon-north-navigation",disabled:"esri-disabled",hidden:"esri-hidden"};let _e=class extends ue{constructor(i,e){super(i,e),this.iconClass=ft.widgetIcon,this.messages=null,this.messagesCommon=null,this.viewModel=new nd}get geolocationOptions(){return this.viewModel.geolocationOptions}set geolocationOptions(i){this.viewModel.geolocationOptions=i}get goToLocationEnabled(){return this.viewModel.goToLocationEnabled}set goToLocationEnabled(i){this.viewModel.goToLocationEnabled=i}get goToOverride(){return this.viewModel.goToOverride}set goToOverride(i){this.viewModel.goToOverride=i}get graphic(){return this.viewModel.graphic}set graphic(i){this.viewModel.graphic=i}get label(){var i;return((i=this.messages)==null?void 0:i.widgetLabel)??""}set label(i){this._overrideIfSome("label",i)}get popupEnabled(){return this.viewModel.popupEnabled}set popupEnabled(i){this.viewModel.popupEnabled=i}get scale(){return this.viewModel.scale}set scale(i){this.viewModel.scale=i}get useHeadingEnabled(){return this.viewModel.useHeadingEnabled}set useHeadingEnabled(i){this.viewModel.useHeadingEnabled=i}get view(){return this.viewModel.view}set view(i){this.viewModel.view=i}cancelLocate(){this.viewModel.cancelLocate()}locate(){return this.viewModel.locate()}render(){const i=this.get("viewModel.state"),e=i==="locating",t={[ft.disabled]:i==="disabled",[ft.hidden]:i==="feature-unsupported"},s={[ft.loading]:e,[ft.rotating]:e,[ft.locate]:!e},n=i==="locating"?this.messagesCommon.cancel:this.messages.title;return m("div",{bind:this,class:this.classes(ft.base,t),hidden:i==="feature-unsupported",onclick:this._locate,onkeydown:this._locate,role:"button",tabIndex:0,"aria-label":n,title:n},m("span",{"aria-hidden":"true",class:this.classes(ft.icon,s)}),m("span",{class:ft.text},this.messages.title))}_locate(){const{viewModel:i}=this;i.state==="locating"?i.cancelLocate():i.locate()}};a([c()],_e.prototype,"geolocationOptions",null),a([c()],_e.prototype,"goToLocationEnabled",null),a([c()],_e.prototype,"goToOverride",null),a([c()],_e.prototype,"graphic",null),a([c()],_e.prototype,"iconClass",void 0),a([c()],_e.prototype,"label",null),a([c(),re("esri/widgets/Locate/t9n/Locate")],_e.prototype,"messages",void 0),a([c(),re("esri/t9n/common")],_e.prototype,"messagesCommon",void 0),a([c()],_e.prototype,"popupEnabled",null),a([c()],_e.prototype,"scale",null),a([c()],_e.prototype,"useHeadingEnabled",null),a([c()],_e.prototype,"view",null),a([c({type:nd}),sr(["locate","locate-error"])],_e.prototype,"viewModel",void 0),a([Pe()],_e.prototype,"_locate",null),_e=a([C("esri.widgets.Locate")],_e);const A_=_e;function Xa(i){let e;return{c(){e=U("div"),q(e,"class","centerText")},m(t,s){W(t,e,s),e.innerHTML=i[0]},p(t,s){s&1&&(e.innerHTML=t[0])},d(t){t&&G(e)}}}function P_(i){let e,t,s,n,o,r,l,d,u,h,p,g,f,_,y,v,w,A,M=i[0]&&Xa(i);return{c(){e=U("div"),t=U("div"),t.innerHTML=`<h1>PARK-Or</h1> 
        <p class="discover svelte-ls7ze9"><span class="desktop-hidden svelte-ls7ze9">Play &amp; Discover<hr/></span>Every Park&#39;s a Winner</p>`,s=se(),n=U("div"),o=se(),r=U("div"),l=U("div"),d=U("button"),u=U("img"),p=se(),g=U("div"),f=U("div"),_=se(),M&&M.c(),y=se(),v=U("p"),v.textContent="",q(n,"id","filterOptions"),q(n,"class","svelte-ls7ze9"),sh(u.src,h=mh)||q(u,"src",h),q(u,"alt","play icon"),q(d,"id","playButton"),q(d,"type","button"),d.disabled=!0,q(r,"class","button-container svelte-ls7ze9"),q(e,"class","app-header svelte-ls7ze9"),q(f,"class","map-view svelte-ls7ze9"),q(g,"class","container"),q(v,"id","arrow"),q(v,"class","animate svelte-ls7ze9")},m(P,L){W(P,e,L),D(e,t),D(e,s),D(e,n),D(e,o),D(e,r),D(r,l),D(l,d),D(d,u),W(P,p,L),W(P,g,L),D(g,f),W(P,_,L),M&&M.m(P,L),W(P,y,L),W(P,v,L),w||(A=rh(i[1].call(null,f)),w=!0)},p(P,[L]){P[0]?M?M.p(P,L):(M=Xa(P),M.c(),M.m(y.parentNode,y)):M&&(M.d(1),M=null)},i:de,o:de,d(P){P&&G(e),P&&G(p),P&&G(g),P&&G(_),M&&M.d(P),P&&G(y),P&&G(v),w=!1,A()}}}function $_(i,e,t){let s,n;Dr(i,vo,_=>t(3,s=_)),Dr(i,yo,_=>t(4,n=_));let{centerText:o=""}=e,{parkFields:r=[]}=e;const l=_=>{let y=[];for(const[P,L]of Object.entries(_.graphic.attributes))L==="YES"&&y.push(P);let v=_.graphic.attributes.ADDRESS,w=y.sort().join(", "),A=_.graphic.attributes.URL,M="";return A!=null?M=`
                <div style="text-align:left;">
                    <h6 class="font-weight: bolder;">${v}</h6>
                    <div>${w}</div>
                    <h6><a href="${A}" target="_blank" rel="noreferrer" style="font-style: italic;">More Info</a></h6>
                </div>
            `:M=`
                <div style="text-align:left;">
                    <h6>${v}</h6>
                    <div>${w}</div>
                </div>
            `,M},d=new Al({outFields:["*"],title:"{name}",fieldInfos:[{fieldName:"ADDRESS",label:"Address",visible:!0}],content:l}),u=new Sl({url:"https://services2.arcgis.com/tQaXW7Zb1Vphzvgd/arcgis/rest/services/Parks/FeatureServer/0",outFields:r,definitionExpression:"STATUS = 'ACTIVE'",popupTemplate:d,renderer:{type:"simple",symbol:{type:"simple-fill",color:"rgba(30, 125, 40, 0.15)",outline:{color:"rgba(30, 125, 20, 1)",width:1}}},title:"Parks",id:"parksLayer",visible:!0,opacity:.8,listMode:"hide",popupEnabled:!0}),h=new Du({id:"parkGraphicsLayer",title:"Park Graphics",listMode:"hide",visible:!0,opacity:.8}),p=async(_,y)=>{const v=u.createQuery();v.where="STATUS = 'ACTIVE'",v.outFields=r;const A=await(await u.queryFeatures(v)).features.map(k=>({OBJECTID:k.attributes.OBJECTID,NAME:k.attributes.NAME,REGION:k.attributes.REGION,RESTROOM:k.attributes.RESTROOM,BASEBALL:k.attributes.BASEBALL,BASKETBALL:k.attributes.BASKETBALL,BOATING:k.attributes.BOATING,FISHING:k.attributes.FISHING,SOCCER:k.attributes.SOCCER,TENNIS:k.attributes.TENNIS,ULTIMATEGOLF:k.attributes.ULTIMATEGOLF,CYCLING:k.attributes.CYCLING,DOGPARK:k.attributes.DOGPARK,PICNICAREA:k.attributes.PICNICAREA,PLAYGROUND:k.attributes.PLAYGROUND,MULTIPURPOSEFIELD:k.attributes.MULTIPURPOSEFIELD,SKATE:k.attributes.SKATE,AREA:k.attributes.Shape__Area}));Vr(yo,n=A,n),t(0,o=`<strong>${A.length}</strong> Total <strong>Parks</strong>`);const M=u.createQuery();M.where="STATUS = 'ACTIVE'",M.returnGeometry=!1,M.outStatistics=[{onStatisticField:"OBJECTID",outStatisticFieldName:"count",statisticType:"count"}],M.groupByFieldsForStatistics=["REGION"];const L=await(await u.queryFeatures(M)).features.map(k=>({region:k.attributes.REGION,count:k.attributes.count})).sort((k,Y)=>Y.count-k.count);Vr(vo,s=L,s)},g=(_,y)=>{const v=document.getElementById("playButton");v.setAttribute("disabled","disabled"),y.queryFeatures().then(w=>{let A=w.features.length;if(A>0){let M=A>30?Math.floor(w.features.length/3):A,P=setInterval(()=>{M--;const ve=w.features.length,Me=Math.floor(Math.random()*(ve-1)),ne=w.features[Me],ze=ne.attributes,Pt=ne.geometry,fe=Pt.centroid,V=new X({x:fe.x,y:fe.y,spatialReference:_.spatialReference}),Be=new gu({color:[201,85,28,.75],outline:null}),Se=new ct({geometry:V,symbol:Be,attributes:ze});if(h.removeAll(),h.add(Se),Y(),M<=0&&(clearInterval(P),v.removeAttribute("disabled"),ge(),M===0&&_.goTo(Pt),M<0))throw new Error("Time to run is less than 0. Something went wrong. :( Please refresh the browser & Park-or again!")},1e3);const L="width: 8vw; padding:4px 2px;",k=document.createElement("div");k.id="timerDiv",k.classList.add("esri-widget"),k.innerHTML=`<div id="timerDiv" class="esri-widget" style="${L}"><span>: ${M}</span></div>`,_.ui.add(k,"bottom-right");const Y=()=>{k.innerHTML=`<div id="timerDiv" class="esri-widget" style="${L}"><span>: ${M}</span></div>`},ge=()=>{_.ui.remove(k)}}else throw new Error("No parks found. Please refresh the mapview & find a new amenity, to Park-or!")})},f=(_,y)=>{const v=new Gl({basemap:"gray-vector",layers:[u,h]}),w=new i_({container:_,map:v,zoom:10,center:[-79.95,32.8],constraints:{minZoom:10,maxZoom:15,rotationEnabled:!1},popup:{dockEnabled:!0,dockOptions:{buttonEnabled:!1,breakpoint:!1,position:"top-right"},collapseEnabled:!1}});w.when(async()=>{const L=await w.whenLayerView(u);L.when(()=>{const k=async()=>{const V=await L.queryFeatureCount();V>0?t(0,o=`<strong>${V} Parks</strong>`):t(0,o=`<strong>${V} Parks Found. Recommend Reseting Filters.</strong>`)},Y=document.getElementById("filterOptions");let ge="<fieldset><legend>Filter by Amenities</legend>";const ve="display:inline-flex;align-items:center;",Me=r.sort().map(V=>{if(V!=="OBJECTID"&&V!=="Shape__Area"&&V!=="FACILITYSITEID"&&V!=="NAME"&&V!=="ADDRESS"&&V!=="REGION"&&V!=="URL")return`<div style="${ve}" class="filterOption">
                                <input type="checkbox" id="${V}" name="interest" value="${V}" />
                                <label for="${V}">${V}</label>
                            </div>`});ge+=Me.join(""),ge+='</legend></fieldset><small><a href="#" id="resetFilterButton">Reset Filters</a></small>',Y.innerHTML=ge;const ne=(V,Be)=>()=>{const Se=Array.from(Be).filter(Re=>Re.checked);if(Se.length>0){const $n=`${Se.map(Sn=>Sn.value).join(" = 'YES' OR ")} = 'YES'`;V.filter={where:$n},k()}else V.filter=null,k()},ze=document.querySelectorAll("input[name='interest']");for(const V of ze)V.addEventListener("click",ne(L,ze));document.getElementById("resetFilterButton").addEventListener("click",()=>{const V=document.querySelectorAll("input[name='interest']");for(const Be of V)Be.checked=!1;ne(L,V)()});const fe=document.getElementById("playButton");fe.removeAttribute("disabled"),fe.addEventListener("click",()=>{g(w,L)}),p()})});const A=new n_({view:w}),M=new p_({view:w}),P=new A_({view:w,goToOverride:(L,k)=>(k.target.scale=1500,L.goTo(k.target))});return w.ui.add(A,"top-left"),w.ui.add(P,"top-left"),w.ui.add(M,"bottom-left"),setTimeout(()=>{document.getElementById("arrow").remove()},7500),{view:w,update(){},destroy(){w.container=null}}};return i.$$set=_=>{"centerText"in _&&t(0,o=_.centerText),"parkFields"in _&&t(2,r=_.parkFields)},[o,f,r]}class S_ extends ks{constructor(e){super(),xs(this,e,$_,P_,Zi,{centerText:0,parkFields:2})}}function el(i,e,t){const s=i.slice();return s[7]=e[t],s}function tl(i,e,t){const s=i.slice();return s[7]=e[t],s}function il(i,e,t){const s=i.slice();return s[12]=e[t][0],s[13]=e[t][1],s}function R_(i){let e,t,s=i[0]&&sl(i),n=i[1].smallest&&i[1].largest&&ol(i);return{c(){s&&s.c(),e=se(),n&&n.c(),t=Yo()},m(o,r){s&&s.m(o,r),W(o,e,r),n&&n.m(o,r),W(o,t,r)},p(o,r){o[0]?s?s.p(o,r):(s=sl(o),s.c(),s.m(e.parentNode,e)):s&&(s.d(1),s=null),o[1].smallest&&o[1].largest?n?n.p(o,r):(n=ol(o),n.c(),n.m(t.parentNode,t)):n&&(n.d(1),n=null)},d(o){s&&s.d(o),o&&G(e),n&&n.d(o),o&&G(t)}}}function L_(i){let e;return{c(){e=U("h4"),e.textContent="Loading..."},m(t,s){W(t,e,s)},p:de,d(t){t&&G(e)}}}function sl(i){let e,t,s,n,o=Object.entries(i[0]),r=[];for(let l=0;l<o.length;l+=1)r[l]=nl(il(i,o,l));return{c(){e=U("div"),t=U("h3"),t.textContent="Park Amenities",s=se(),n=U("div");for(let l=0;l<r.length;l+=1)r[l].c();q(n,"class","chart svelte-ck74rt"),q(e,"class","chart-section mobile-hidden svelte-ck74rt")},m(l,d){W(l,e,d),D(e,t),D(e,s),D(e,n);for(let u=0;u<r.length;u+=1)r[u].m(n,null)},p(l,d){if(d&1){o=Object.entries(l[0]);let u;for(u=0;u<o.length;u+=1){const h=il(l,o,u);r[u]?r[u].p(h,d):(r[u]=nl(h),r[u].c(),r[u].m(n,null))}for(;u<r.length;u+=1)r[u].d(1);r.length=o.length}},d(l){l&&G(e),cn(r,l)}}}function nl(i){let e,t=i[12]+"",s,n,o,r=i[13]+"",l,d;return{c(){e=U("div"),s=Ne(t),n=se(),o=U("p"),l=Ne(r),d=se(),xt(o,"height",i[13]/2+"vh"),q(o,"class","svelte-ck74rt")},m(u,h){W(u,e,h),D(e,s),D(e,n),D(e,o),D(o,l),D(e,d)},p(u,h){h&1&&t!==(t=u[12]+"")&&ii(s,t),h&1&&r!==(r=u[13]+"")&&ii(l,r),h&1&&xt(o,"height",u[13]/2+"vh")},d(u){u&&G(e)}}}function ol(i){let e,t,s,n,o,r,l,d,u,h,p,g,f=i[1].largest,_=[];for(let w=0;w<f.length;w+=1)_[w]=rl(tl(i,f,w));let y=i[1].smallest,v=[];for(let w=0;w<y.length;w+=1)v[w]=al(el(i,y,w));return{c(){e=U("div"),t=se(),s=U("div"),n=U("div"),o=U("h3"),o.textContent="5 Largest Parks (acres)",r=se(),l=U("div");for(let w=0;w<_.length;w+=1)_[w].c();d=se(),u=U("div"),h=U("h3"),h.textContent="5 Smallest Parks (acres)",p=se(),g=U("div");for(let w=0;w<v.length;w+=1)v[w].c();q(e,"id","parkSummary"),q(l,"class","chart-row svelte-ck74rt"),q(n,"class","chart-column svelte-ck74rt"),q(g,"class","chart-row svelte-ck74rt"),q(u,"class","chart-column svelte-ck74rt"),q(s,"class","section svelte-ck74rt")},m(w,A){W(w,e,A),W(w,t,A),W(w,s,A),D(s,n),D(n,o),D(n,r),D(n,l);for(let M=0;M<_.length;M+=1)_[M].m(l,null);D(s,d),D(s,u),D(u,h),D(u,p),D(u,g);for(let M=0;M<v.length;M+=1)v[M].m(g,null)},p(w,A){if(A&6){f=w[1].largest;let M;for(M=0;M<f.length;M+=1){const P=tl(w,f,M);_[M]?_[M].p(P,A):(_[M]=rl(P),_[M].c(),_[M].m(l,null))}for(;M<_.length;M+=1)_[M].d(1);_.length=f.length}if(A&6){y=w[1].smallest;let M;for(M=0;M<y.length;M+=1){const P=el(w,y,M);v[M]?v[M].p(P,A):(v[M]=al(P),v[M].c(),v[M].m(g,null))}for(;M<v.length;M+=1)v[M].d(1);v.length=y.length}},d(w){w&&G(e),w&&G(t),w&&G(s),cn(_,w),cn(v,w)}}}function rl(i){let e,t=i[7].NAME+"",s,n,o,r=i[2](i[7].AREA)+"",l,d;return{c(){e=U("div"),s=Ne(t),n=se(),o=U("p"),l=Ne(r),d=se(),xt(o,"width",i[7].AREA/5e4+"vw"),q(o,"class","svelte-ck74rt")},m(u,h){W(u,e,h),D(e,s),D(e,n),D(e,o),D(o,l),D(e,d)},p(u,h){h&2&&t!==(t=u[7].NAME+"")&&ii(s,t),h&2&&r!==(r=u[2](u[7].AREA)+"")&&ii(l,r),h&2&&xt(o,"width",u[7].AREA/5e4+"vw")},d(u){u&&G(e)}}}function al(i){let e=i[7].NAME+"",t,s,n,o=i[2](i[7].AREA)+"",r;return{c(){t=Ne(e),s=se(),n=U("p"),r=Ne(o),xt(n,"width",i[7].AREA/100+"vw"),q(n,"class","svelte-ck74rt")},m(l,d){W(l,t,d),W(l,s,d),W(l,n,d),D(n,r)},p(l,d){d&2&&e!==(e=l[7].NAME+"")&&ii(t,e),d&2&&o!==(o=l[2](l[7].AREA)+"")&&ii(r,o),d&2&&xt(n,"width",l[7].AREA/100+"vw")},d(l){l&&G(t),l&&G(s),l&&G(n)}}}function F_(i){let e,t;function s(r,l){return l&3&&(e=null),e==null&&(e=Object.keys(r[0]).length===0&&Object.keys(r[1]).length===0),e?L_:R_}let n=s(i,-1),o=n(i);return{c(){o.c(),t=Yo()},m(r,l){o.m(r,l),W(r,t,l)},p(r,[l]){n===(n=s(r,l))&&o?o.p(r,l):(o.d(1),o=n(r),o&&(o.c(),o.m(t.parentNode,t)))},i:de,o:de,d(r){o.d(r),r&&G(t)}}}function O_(i,e,t){let{parkFields:s=[]}=e,n=[],o={},r={};const l=h=>(h/4046.86).toFixed(2),d=h=>{s.filter(y=>y!=="OBJECTID"&&y!=="Shape__Area"&&y!=="FACILITYSITEID"&&y!=="ADDRESS"&&y!=="NAME"&&y!=="REGION"&&y!=="URL").forEach(y=>{t(0,o[y]=0,o),h.forEach(v=>{v[y]==="YES"&&t(0,o[y]+=1,o)})});let g=h.filter(y=>y.AREA!=null&&y.NAME!=null).map(y=>({NAME:y.NAME,AREA:y.AREA})),f=g.sort((y,v)=>y.AREA-v.AREA).slice(0,5),_=g.sort((y,v)=>v.AREA-y.AREA).slice(0,5);t(1,r.smallest=f,r),t(1,r.largest=_,r)},u=yo.subscribe(h=>{n=h,n.length>0&&d(n)});return Ul(()=>{u()}),i.$$set=h=>{"parkFields"in h&&t(3,s=h.parkFields)},[o,r,l,s]}class D_ extends ks{constructor(e){super(),xs(this,e,O_,F_,Zi,{parkFields:3})}}function ll(i,e,t){const s=i.slice();return s[2]=e[t],s}function cl(i){let e,t,s,n,o=i[0],r=[];for(let l=0;l<o.length;l+=1)r[l]=dl(ll(i,o,l));return{c(){e=U("div"),t=U("h3"),t.textContent="# Parks per Region",s=se(),n=U("div");for(let l=0;l<r.length;l+=1)r[l].c();q(n,"class","chart svelte-5jg2f2"),q(e,"class","chart-section svelte-5jg2f2")},m(l,d){W(l,e,d),D(e,t),D(e,s),D(e,n);for(let u=0;u<r.length;u+=1)r[u].m(n,null)},p(l,d){if(d&1){o=l[0];let u;for(u=0;u<o.length;u+=1){const h=ll(l,o,u);r[u]?r[u].p(h,d):(r[u]=dl(h),r[u].c(),r[u].m(n,null))}for(;u<r.length;u+=1)r[u].d(1);r.length=o.length}},d(l){l&&G(e),cn(r,l)}}}function dl(i){let e,t=i[2].region.replace("Island","Is.")+"",s,n,o,r=i[2].count+"",l,d;return{c(){e=U("div"),s=Ne(t),n=se(),o=U("p"),l=Ne(r),d=se(),xt(o,"width",i[2].count+"vw"),xt(o,"height","20px"),q(o,"class","svelte-5jg2f2")},m(u,h){W(u,e,h),D(e,s),D(e,n),D(e,o),D(o,l),D(e,d)},p(u,h){h&1&&t!==(t=u[2].region.replace("Island","Is.")+"")&&ii(s,t),h&1&&r!==(r=u[2].count+"")&&ii(l,r),h&1&&xt(o,"width",u[2].count+"vw")},d(u){u&&G(e)}}}function V_(i){let e,t=i[0].length>0&&cl(i);return{c(){t&&t.c(),e=Yo()},m(s,n){t&&t.m(s,n),W(s,e,n)},p(s,[n]){s[0].length>0?t?t.p(s,n):(t=cl(s),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},i:de,o:de,d(s){t&&t.d(s),s&&G(e)}}}function N_(i,e,t){let s=[];const n=vo.subscribe(o=>{t(0,s=o)});return Ul(()=>{n()}),[s]}class z_ extends ks{constructor(e){super(),xs(this,e,N_,V_,Zi,{})}}function B_(i){let e,t,s,n,o,r,l=i[0].year+"",d;return{c(){e=U("p"),e.innerHTML='Michael Scott&#39;s <em>other</em> kind of <em><a href="https://youtu.be/0Kvw2BPKjz0" target="_blank" rel="noreferrer">Parkour</a></em>...',t=se(),s=U("small"),n=Ne(`Developed by 
  `),o=U("a"),o.textContent="MapMazeLu",r=Ne(`
    `),d=Ne(l),q(o,"href","https://emmapaz.com"),q(o,"target","_blank"),q(o,"rel","noreferrer"),q(s,"class","svelte-1x9fbco")},m(u,h){W(u,e,h),W(u,t,h),W(u,s,h),D(s,n),D(s,o),D(s,r),D(s,d)},p:de,i:de,o:de,d(u){u&&G(e),u&&G(t),u&&G(s)}}}function U_(i){return[ih.now()]}class H_ extends ks{constructor(e){super(),xs(this,e,U_,B_,Zi,{})}}function q_(i){let e,t,s,n,o,r,l,d;return e=new S_({props:{parkFields:i[0]}}),s=new D_({props:{parkFields:i[0]}}),o=new z_({}),l=new H_({}),{c(){Rs(e.$$.fragment),t=se(),Rs(s.$$.fragment),n=se(),Rs(o.$$.fragment),r=se(),Rs(l.$$.fragment)},m(u,h){as(e,u,h),W(u,t,h),as(s,u,h),W(u,n,h),as(o,u,h),W(u,r,h),as(l,u,h),d=!0},p:de,i(u){d||(rs(e.$$.fragment,u),rs(s.$$.fragment,u),rs(o.$$.fragment,u),rs(l.$$.fragment,u),d=!0)},o(u){Ss(e.$$.fragment,u),Ss(s.$$.fragment,u),Ss(o.$$.fragment,u),Ss(l.$$.fragment,u),d=!1},d(u){ls(e,u),u&&G(t),ls(s,u),u&&G(n),ls(o,u),u&&G(r),ls(l,u)}}}function G_(i){return[["OBJECTID","FACILITYSITEID","NAME","ADDRESS","REGION","RESTROOM","BASEBALL","BASKETBALL","DOGPARK","PICNICAREA","PLAYGROUND","SOCCER","MULTIPURPOSEFIELD","BOATING","FISHING","SKATE","TENNIS","ULTIMATEGOLF","CYCLING","URL","Shape__Area"]]}class j_ extends ks{constructor(e){super(),xs(this,e,G_,q_,Zi,{})}}new j_({target:document.getElementById("app")});export{fg as $,Pc as G,Qt as P,Vb as R,An as S,Ui as a,Db as b,Eg as c,id as d,Vc as e,g_ as f,u0 as m,Ac as n,xg as p,Ze as u};
